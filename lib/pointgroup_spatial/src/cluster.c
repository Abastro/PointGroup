// Generated by Futhark 0.20.0
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>
#include <cuda.h>
#include <cuda_runtime.h>
#include <nvrtc.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config ;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_add_nvrtc_option(struct futhark_context_config *cfg,
                                             const char *opt);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s);
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path);
void
futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                         const char *path);
void futhark_context_config_dump_ptx_to(struct futhark_context_config *cfg,
                                        const char *path);
void futhark_context_config_load_ptx_from(struct futhark_context_config *cfg,
                                          const char *path);
void
futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                              int size);
void
futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                              int num);
void
futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                             int num);
void
futhark_context_config_set_default_reg_tile_size(struct futhark_context_config *cfg,
                                                 int num);
void
futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                             int num);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
struct futhark_context ;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d ;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
CUdeviceptr futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                      struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);
struct futhark_i32_1d ;
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx, const
                                          int32_t *data, int64_t dim0);
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int offset,
                                              int64_t dim0);
int futhark_free_i32_1d(struct futhark_context *ctx,
                        struct futhark_i32_1d *arr);
int futhark_values_i32_1d(struct futhark_context *ctx,
                          struct futhark_i32_1d *arr, int32_t *data);
CUdeviceptr futhark_values_raw_i32_1d(struct futhark_context *ctx,
                                      struct futhark_i32_1d *arr);
const int64_t *futhark_shape_i32_1d(struct futhark_context *ctx,
                                    struct futhark_i32_1d *arr);
struct futhark_i32_2d ;
struct futhark_i32_2d *futhark_new_i32_2d(struct futhark_context *ctx, const
                                          int32_t *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_i32_2d *futhark_new_raw_i32_2d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_i32_2d(struct futhark_context *ctx,
                        struct futhark_i32_2d *arr);
int futhark_values_i32_2d(struct futhark_context *ctx,
                          struct futhark_i32_2d *arr, int32_t *data);
CUdeviceptr futhark_values_raw_i32_2d(struct futhark_context *ctx,
                                      struct futhark_i32_2d *arr);
const int64_t *futhark_shape_i32_2d(struct futhark_context *ctx,
                                    struct futhark_i32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_clusterPoints(struct futhark_context *ctx,
                                struct futhark_i32_2d **out0,
                                struct futhark_i32_1d **out1, const int32_t in0,
                                const float in1, const int32_t in2, const
                                struct futhark_i32_1d *in3, const
                                struct futhark_f32_2d *in4, const
                                struct futhark_i32_1d *in5);

// Miscellaneous

int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_cuda
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>
#include <cuda.h>
#include <cuda_runtime.h>
#include <nvrtc.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline double fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
static int32_t clusterPointsziid_counter_mem_realtype_36980[1];
static int32_t clusterPointsziid_counter_mem_realtype_37031[1];
static int32_t clusterPointsziid_counter_mem_realtype_37046[1];
static int32_t clusterPointsziid_counter_mem_realtype_37066[1];
static int32_t clusterPointsziid_counter_mem_realtype_37107[1];
static int32_t clusterPointszicounter_mem_realtype_37121[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointszicounter_mem_realtype_37153[10240];
static int32_t clusterPointsziid_counter_mem_realtype_37165[1];
static int32_t clusterPointsziid_counter_mem_realtype_37186[1];
static int32_t clusterPointsziid_counter_mem_realtype_37214[1];
static int32_t clusterPointszicounter_mem_realtype_37251[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointsziid_counter_mem_realtype_37279[1];
static int32_t clusterPointsziid_counter_mem_realtype_37294[1];
static int32_t clusterPointsziid_counter_mem_realtype_37314[1];
static int32_t clusterPointszicounter_mem_realtype_37340[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointszicounter_mem_realtype_37354[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointszicounter_mem_realtype_37367[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointsziid_counter_mem_realtype_37380[1];
static int32_t clusterPointszicounter_mem_realtype_37397[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointszicounter_mem_realtype_37429[10240];
static int32_t clusterPointsziid_counter_mem_realtype_37441[1];
static int32_t clusterPointsziid_counter_mem_realtype_37456[1];
static int32_t clusterPointsziid_counter_mem_realtype_37482[1];
static int32_t clusterPointsziid_counter_mem_realtype_37534[1];
static int32_t clusterPointsziid_counter_mem_realtype_37549[1];
static int32_t clusterPointsziid_counter_mem_realtype_37569[1];
static int32_t clusterPointsziid_counter_mem_realtype_37602[1];
static int32_t clusterPointsziid_counter_mem_realtype_37617[1];
static int32_t clusterPointsziid_counter_mem_realtype_37637[1];
static int32_t clusterPointszicounter_mem_realtype_37663[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointszicounter_mem_realtype_37677[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointszicounter_mem_realtype_37691[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointszicounter_mem_realtype_37704[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointsziid_counter_mem_realtype_37717[1];
static int32_t clusterPointsziid_counter_mem_realtype_37738[1];
static int32_t clusterPointszicounter_mem_realtype_37752[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointszicounter_mem_realtype_37784[10240];
static int32_t clusterPointsziid_counter_mem_realtype_37796[1];
static int32_t clusterPointsziid_counter_mem_realtype_37817[1];
static int32_t clusterPointsziid_counter_mem_realtype_37835[1];
static int32_t clusterPointsziid_counter_mem_realtype_37859[1];
static int32_t clusterPointszicounter_mem_realtype_37871[10] = {0, 0, 0, 0, 0,
                                                                0, 0, 0, 0, 0};
static int32_t clusterPointszicounter_mem_realtype_37903[10240];
static int32_t clusterPointsziid_counter_mem_realtype_37915[1];
struct memblock_device {
    int *references;
    CUdeviceptr mem;
    int64_t size;
    const char *desc;
} ;
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
} ;
#include <cuda.h>
#include <nvrtc.h>
typedef CUdeviceptr fl_mem_t;
// Start of free_list.h.

// An entry in the free list.  May be invalid, to avoid having to
// deallocate entries as soon as they are removed.  There is also a
// tag, to help with memory reuse.
struct free_list_entry {
  size_t size;
  fl_mem_t mem;
  const char *tag;
  unsigned char valid;
};

struct free_list {
  struct free_list_entry *entries;        // Pointer to entries.
  int capacity;                           // Number of entries.
  int used;                               // Number of valid entries.
};

static void free_list_init(struct free_list *l) {
  l->capacity = 30; // Picked arbitrarily.
  l->used = 0;
  l->entries = (struct free_list_entry*) malloc(sizeof(struct free_list_entry) * l->capacity);
  for (int i = 0; i < l->capacity; i++) {
    l->entries[i].valid = 0;
  }
}

// Remove invalid entries from the free list.
static void free_list_pack(struct free_list *l) {
  int p = 0;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[p] = l->entries[i];
      if (i > p) {
        l->entries[i].valid = 0;
      }
      p++;
    }
  }

  // Now p is the number of used elements.  We don't want it to go
  // less than the default capacity (although in practice it's OK as
  // long as it doesn't become 1).
  if (p < 30) {
    p = 30;
  }
  l->entries = realloc(l->entries, p * sizeof(struct free_list_entry));
  l->capacity = p;
}

static void free_list_destroy(struct free_list *l) {
  assert(l->used == 0);
  free(l->entries);
}

static int free_list_find_invalid(struct free_list *l) {
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (!l->entries[i].valid) {
      break;
    }
  }
  return i;
}

static void free_list_insert(struct free_list *l, size_t size, fl_mem_t mem, const char *tag) {
  int i = free_list_find_invalid(l);

  if (i == l->capacity) {
    // List is full; so we have to grow it.
    int new_capacity = l->capacity * 2 * sizeof(struct free_list_entry);
    l->entries = realloc(l->entries, new_capacity);
    for (int j = 0; j < l->capacity; j++) {
      l->entries[j+l->capacity].valid = 0;
    }
    l->capacity *= 2;
  }

  // Now 'i' points to the first invalid entry.
  l->entries[i].valid = 1;
  l->entries[i].size = size;
  l->entries[i].mem = mem;
  l->entries[i].tag = tag;

  l->used++;
}

// Find and remove a memory block of the indicated tag, or if that
// does not exist, another memory block with exactly the desired size.
// Returns 0 on success.
static int free_list_find(struct free_list *l, size_t size,
                          size_t *size_out, fl_mem_t *mem_out) {
  int size_match = -1;
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid &&
        size <= l->entries[i].size &&
        (size_match < 0 || l->entries[i].size < l->entries[size_match].size)) {
      // If this entry is valid, has sufficient size, and is smaller than the
      // best entry found so far, use this entry.
      size_match = i;
    }
  }

  if (size_match >= 0) {
    l->entries[size_match].valid = 0;
    *size_out = l->entries[size_match].size;
    *mem_out = l->entries[size_match].mem;
    l->used--;
    return 0;
  } else {
    return 1;
  }
}

// Remove the first block in the free list.  Returns 0 if a block was
// removed, and nonzero if the free list was already empty.
static int free_list_first(struct free_list *l, fl_mem_t *mem_out) {
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[i].valid = 0;
      *mem_out = l->entries[i].mem;
      l->used--;
      return 0;
    }
  }

  return 1;
}

// End of free_list.h.

// Start of cuda.h.

#define CUDA_SUCCEED_FATAL(x) cuda_api_succeed_fatal((CUresult)x, #x, __FILE__, __LINE__)
#define CUDA_SUCCEED_NONFATAL(x) cuda_api_succeed_nonfatal(x, #x, __FILE__, __LINE__)
#define NVRTC_SUCCEED(x) nvrtc_api_succeed(x, #x, __FILE__, __LINE__)

#define CUDA_SUCCEED_OR_RETURN(e) {             \
    char *serror = CUDA_SUCCEED_NONFATAL(e);    \
    if (serror) {                                 \
      if (!ctx->error) {                          \
        ctx->error = serror;                      \
        return bad;                               \
      } else {                                    \
        free(serror);                             \
      }                                           \
    }                                             \
  }

// CUDA_SUCCEED_OR_RETURN returns the value of the variable 'bad' in
// scope.  By default, it will be this one.  Create a local variable
// of some other type if needed.  This is a bit of a hack, but it
// saves effort in the code generator.
static const int bad = 1;

static inline void cuda_api_succeed_fatal(CUresult res, const char *call,
    const char *file, int line) {
  if (res != CUDA_SUCCESS) {
    const char *err_str;
    cuGetErrorString(res, &err_str);
    if (err_str == NULL) { err_str = "Unknown"; }
    futhark_panic(-1, "%s:%d: CUDA call\n  %s\nfailed with error code %d (%s)\n",
        file, line, call, res, err_str);
  }
}

static char* cuda_api_succeed_nonfatal(CUresult res, const char *call,
    const char *file, int line) {
  if (res != CUDA_SUCCESS) {
    const char *err_str;
    cuGetErrorString(res, &err_str);
    if (err_str == NULL) { err_str = "Unknown"; }
    return msgprintf("%s:%d: CUDA call\n  %s\nfailed with error code %d (%s)\n",
        file, line, call, res, err_str);
  } else {
    return NULL;
  }
}

static inline void nvrtc_api_succeed(nvrtcResult res, const char *call,
                                     const char *file, int line) {
  if (res != NVRTC_SUCCESS) {
    const char *err_str = nvrtcGetErrorString(res);
    futhark_panic(-1, "%s:%d: NVRTC call\n  %s\nfailed with error code %d (%s)\n",
        file, line, call, res, err_str);
  }
}

struct cuda_config {
  int debugging;
  int logging;
  const char *preferred_device;
  int preferred_device_num;

  const char *dump_program_to;
  const char *load_program_from;

  const char *dump_ptx_to;
  const char *load_ptx_from;

  size_t default_block_size;
  size_t default_grid_size;
  size_t default_tile_size;
  size_t default_reg_tile_size;
  size_t default_threshold;

  int default_block_size_changed;
  int default_grid_size_changed;
  int default_tile_size_changed;

  int num_sizes;
  const char **size_names;
  const char **size_vars;
  int64_t *size_values;
  const char **size_classes;
};

static void cuda_config_init(struct cuda_config *cfg,
                             int num_sizes,
                             const char *size_names[],
                             const char *size_vars[],
                             int64_t *size_values,
                             const char *size_classes[]) {
  cfg->debugging = 0;
  cfg->logging = 0;
  cfg->preferred_device_num = 0;
  cfg->preferred_device = "";
  cfg->dump_program_to = NULL;
  cfg->load_program_from = NULL;

  cfg->dump_ptx_to = NULL;
  cfg->load_ptx_from = NULL;

  cfg->default_block_size = 256;
  cfg->default_grid_size = 0; // Set properly later.
  cfg->default_tile_size = 32;
  cfg->default_reg_tile_size = 2;
  cfg->default_threshold = 32*1024;

  cfg->default_block_size_changed = 0;
  cfg->default_grid_size_changed = 0;
  cfg->default_tile_size_changed = 0;

  cfg->num_sizes = num_sizes;
  cfg->size_names = size_names;
  cfg->size_vars = size_vars;
  cfg->size_values = size_values;
  cfg->size_classes = size_classes;
}

// A record of something that happened.
struct profiling_record {
  cudaEvent_t *events; // Points to two events.
  int *runs;
  int64_t *runtime;
};

struct cuda_context {
  CUdevice dev;
  CUcontext cu_ctx;
  CUmodule module;

  struct cuda_config cfg;

  struct free_list free_list;

  size_t max_block_size;
  size_t max_grid_size;
  size_t max_tile_size;
  size_t max_threshold;
  size_t max_shared_memory;
  size_t max_bespoke;

  size_t lockstep_width;

  struct profiling_record *profiling_records;
  int profiling_records_capacity;
  int profiling_records_used;
};

#define CU_DEV_ATTR(x) (CU_DEVICE_ATTRIBUTE_##x)
#define device_query(dev,attrib) _device_query(dev, CU_DEV_ATTR(attrib))
static int _device_query(CUdevice dev, CUdevice_attribute attrib) {
  int val;
  CUDA_SUCCEED_FATAL(cuDeviceGetAttribute(&val, attrib, dev));
  return val;
}

#define CU_FUN_ATTR(x) (CU_FUNC_ATTRIBUTE_##x)
#define function_query(fn,attrib) _function_query(dev, CU_FUN_ATTR(attrib))
static int _function_query(CUfunction dev, CUfunction_attribute attrib) {
  int val;
  CUDA_SUCCEED_FATAL(cuFuncGetAttribute(&val, attrib, dev));
  return val;
}

static void set_preferred_device(struct cuda_config *cfg, const char *s) {
  int x = 0;
  if (*s == '#') {
    s++;
    while (isdigit(*s)) {
      x = x * 10 + (*s++)-'0';
    }
    // Skip trailing spaces.
    while (isspace(*s)) {
      s++;
    }
  }
  cfg->preferred_device = s;
  cfg->preferred_device_num = x;
}

static int cuda_device_setup(struct cuda_context *ctx) {
  char name[256];
  int count, chosen = -1, best_cc = -1;
  int cc_major_best, cc_minor_best;
  int cc_major, cc_minor;
  CUdevice dev;

  CUDA_SUCCEED_FATAL(cuDeviceGetCount(&count));
  if (count == 0) { return 1; }

  int num_device_matches = 0;

  // XXX: Current device selection policy is to choose the device with the
  // highest compute capability (if no preferred device is set).
  // This should maybe be changed, since greater compute capability is not
  // necessarily an indicator of better performance.
  for (int i = 0; i < count; i++) {
    CUDA_SUCCEED_FATAL(cuDeviceGet(&dev, i));

    cc_major = device_query(dev, COMPUTE_CAPABILITY_MAJOR);
    cc_minor = device_query(dev, COMPUTE_CAPABILITY_MINOR);

    CUDA_SUCCEED_FATAL(cuDeviceGetName(name, sizeof(name) - 1, dev));
    name[sizeof(name) - 1] = 0;

    if (ctx->cfg.debugging) {
      fprintf(stderr, "Device #%d: name=\"%s\", compute capability=%d.%d\n",
          i, name, cc_major, cc_minor);
    }

    if (device_query(dev, COMPUTE_MODE) == CU_COMPUTEMODE_PROHIBITED) {
      if (ctx->cfg.debugging) {
        fprintf(stderr, "Device #%d is compute-prohibited, ignoring\n", i);
      }
      continue;
    }

    if (best_cc == -1 || cc_major > cc_major_best ||
        (cc_major == cc_major_best && cc_minor > cc_minor_best)) {
      best_cc = i;
      cc_major_best = cc_major;
      cc_minor_best = cc_minor;
    }

    if (strstr(name, ctx->cfg.preferred_device) != NULL &&
        num_device_matches++ == ctx->cfg.preferred_device_num) {
      chosen = i;
      break;
    }
  }

  if (chosen == -1) { chosen = best_cc; }
  if (chosen == -1) { return 1; }

  if (ctx->cfg.debugging) {
    fprintf(stderr, "Using device #%d\n", chosen);
  }

  CUDA_SUCCEED_FATAL(cuDeviceGet(&ctx->dev, chosen));
  return 0;
}

static char *concat_fragments(const char *src_fragments[]) {
  size_t src_len = 0;
  const char **p;

  for (p = src_fragments; *p; p++) {
    src_len += strlen(*p);
  }

  char *src = (char*) malloc(src_len + 1);
  size_t n = 0;
  for (p = src_fragments; *p; p++) {
    strcpy(src + n, *p);
    n += strlen(*p);
  }

  return src;
}

static const char *cuda_nvrtc_get_arch(CUdevice dev) {
  struct {
    int major;
    int minor;
    const char *arch_str;
  } static const x[] = {
    { 3, 0, "compute_30" },
    { 3, 2, "compute_32" },
    { 3, 5, "compute_35" },
    { 3, 7, "compute_37" },
    { 5, 0, "compute_50" },
    { 5, 2, "compute_52" },
    { 5, 3, "compute_53" },
    { 6, 0, "compute_60" },
    { 6, 1, "compute_61" },
    { 6, 2, "compute_62" },
    { 7, 0, "compute_70" },
    { 7, 2, "compute_72" },
    { 7, 5, "compute_75" },
    { 8, 0, "compute_80" }
  };

  int major = device_query(dev, COMPUTE_CAPABILITY_MAJOR);
  int minor = device_query(dev, COMPUTE_CAPABILITY_MINOR);

  int chosen = -1;
  for (int i = 0; i < sizeof(x)/sizeof(x[0]); i++) {
    if (x[i].major < major || (x[i].major == major && x[i].minor <= minor)) {
      chosen = i;
    } else {
      break;
    }
  }

  if (chosen == -1) {
    futhark_panic(-1, "Unsupported compute capability %d.%d\n", major, minor);
  }

  if (x[chosen].major != major || x[chosen].minor != minor) {
    fprintf(stderr,
            "Warning: device compute capability is %d.%d, but newest supported by Futhark is %d.%d.\n",
            major, minor, x[chosen].major, x[chosen].minor);
  }

  return x[chosen].arch_str;
}

static char *cuda_nvrtc_build(struct cuda_context *ctx, const char *src,
                              const char *extra_opts[]) {
  nvrtcProgram prog;
  NVRTC_SUCCEED(nvrtcCreateProgram(&prog, src, "futhark-cuda", 0, NULL, NULL));
  int arch_set = 0, num_extra_opts;

  // nvrtc cannot handle multiple -arch options.  Hence, if one of the
  // extra_opts is -arch, we have to be careful not to do our usual
  // automatic generation.
  for (num_extra_opts = 0; extra_opts[num_extra_opts] != NULL; num_extra_opts++) {
    if (strstr(extra_opts[num_extra_opts], "-arch")
        == extra_opts[num_extra_opts] ||
        strstr(extra_opts[num_extra_opts], "--gpu-architecture")
        == extra_opts[num_extra_opts]) {
      arch_set = 1;
    }
  }

  size_t n_opts, i = 0, i_dyn, n_opts_alloc = 20 + num_extra_opts + ctx->cfg.num_sizes;
  const char **opts = (const char**) malloc(n_opts_alloc * sizeof(const char *));
  if (!arch_set) {
    opts[i++] = "-arch";
    opts[i++] = cuda_nvrtc_get_arch(ctx->dev);
  }
  opts[i++] = "-default-device";
  if (ctx->cfg.debugging) {
    opts[i++] = "-G";
    opts[i++] = "-lineinfo";
  } else {
    opts[i++] = "--disable-warnings";
  }
  i_dyn = i;
  for (size_t j = 0; j < ctx->cfg.num_sizes; j++) {
    opts[i++] = msgprintf("-D%s=%zu", ctx->cfg.size_vars[j],
        ctx->cfg.size_values[j]);
  }
  opts[i++] = msgprintf("-DLOCKSTEP_WIDTH=%zu", ctx->lockstep_width);
  opts[i++] = msgprintf("-DMAX_THREADS_PER_BLOCK=%zu", ctx->max_block_size);

  // It is crucial that the extra_opts are last, so that the free()
  // logic below does not cause problems.
  for (int j = 0; extra_opts[j] != NULL; j++) {
    opts[i++] = extra_opts[j];
  }

  n_opts = i;

  if (ctx->cfg.debugging) {
    fprintf(stderr, "NVRTC compile options:\n");
    for (size_t j = 0; j < n_opts; j++) {
      fprintf(stderr, "\t%s\n", opts[j]);
    }
    fprintf(stderr, "\n");
  }

  nvrtcResult res = nvrtcCompileProgram(prog, n_opts, opts);
  if (res != NVRTC_SUCCESS) {
    size_t log_size;
    if (nvrtcGetProgramLogSize(prog, &log_size) == NVRTC_SUCCESS) {
      char *log = (char*) malloc(log_size);
      if (nvrtcGetProgramLog(prog, log) == NVRTC_SUCCESS) {
        fprintf(stderr,"Compilation log:\n%s\n", log);
      }
      free(log);
    }
    NVRTC_SUCCEED(res);
  }

  for (i = i_dyn; i < n_opts-num_extra_opts; i++) { free((char *)opts[i]); }
  free(opts);

  char *ptx;
  size_t ptx_size;
  NVRTC_SUCCEED(nvrtcGetPTXSize(prog, &ptx_size));
  ptx = (char*) malloc(ptx_size);
  NVRTC_SUCCEED(nvrtcGetPTX(prog, ptx));

  NVRTC_SUCCEED(nvrtcDestroyProgram(&prog));

  return ptx;
}

static void cuda_size_setup(struct cuda_context *ctx)
{
  if (ctx->cfg.default_block_size > ctx->max_block_size) {
    if (ctx->cfg.default_block_size_changed) {
      fprintf(stderr,
          "Note: Device limits default block size to %zu (down from %zu).\n",
          ctx->max_block_size, ctx->cfg.default_block_size);
    }
    ctx->cfg.default_block_size = ctx->max_block_size;
  }
  if (ctx->cfg.default_grid_size > ctx->max_grid_size) {
    if (ctx->cfg.default_grid_size_changed) {
      fprintf(stderr,
          "Note: Device limits default grid size to %zu (down from %zu).\n",
          ctx->max_grid_size, ctx->cfg.default_grid_size);
    }
    ctx->cfg.default_grid_size = ctx->max_grid_size;
  }
  if (ctx->cfg.default_tile_size > ctx->max_tile_size) {
    if (ctx->cfg.default_tile_size_changed) {
      fprintf(stderr,
          "Note: Device limits default tile size to %zu (down from %zu).\n",
          ctx->max_tile_size, ctx->cfg.default_tile_size);
    }
    ctx->cfg.default_tile_size = ctx->max_tile_size;
  }

  if (!ctx->cfg.default_grid_size_changed) {
    ctx->cfg.default_grid_size =
      (device_query(ctx->dev, MULTIPROCESSOR_COUNT) *
       device_query(ctx->dev, MAX_THREADS_PER_MULTIPROCESSOR))
      / ctx->cfg.default_block_size;
  }

  for (int i = 0; i < ctx->cfg.num_sizes; i++) {
    const char *size_class = ctx->cfg.size_classes[i];
    int64_t *size_value = &ctx->cfg.size_values[i];
    const char* size_name = ctx->cfg.size_names[i];
    int64_t max_value = 0, default_value = 0;

    if (strstr(size_class, "group_size") == size_class) {
      max_value = ctx->max_block_size;
      default_value = ctx->cfg.default_block_size;
    } else if (strstr(size_class, "num_groups") == size_class) {
      max_value = ctx->max_grid_size;
      default_value = ctx->cfg.default_grid_size;
      // XXX: as a quick and dirty hack, use twice as many threads for
      // histograms by default.  We really should just be smarter
      // about sizes somehow.
      if (strstr(size_name, ".seghist_") != NULL) {
        default_value *= 2;
      }
    } else if (strstr(size_class, "tile_size") == size_class) {
      max_value = ctx->max_tile_size;
      default_value = ctx->cfg.default_tile_size;
    } else if (strstr(size_class, "reg_tile_size") == size_class) {
      max_value = 0; // No limit.
      default_value = ctx->cfg.default_reg_tile_size;
    } else if (strstr(size_class, "threshold") == size_class) {
      // Threshold can be as large as it takes.
      default_value = ctx->cfg.default_threshold;
    } else {
      // Bespoke sizes have no limit or default.
    }

    if (*size_value == 0) {
      *size_value = default_value;
    } else if (max_value > 0 && *size_value > max_value) {
      fprintf(stderr, "Note: Device limits %s to %zu (down from %zu)\n",
              size_name, max_value, *size_value);
      *size_value = max_value;
    }
  }
}

static void cuda_module_setup(struct cuda_context *ctx,
                              const char *src_fragments[],
                              const char *extra_opts[]) {
  char *ptx = NULL, *src = NULL;

  if (ctx->cfg.load_program_from == NULL) {
    src = concat_fragments(src_fragments);
  } else {
    src = slurp_file(ctx->cfg.load_program_from, NULL);
  }

  if (ctx->cfg.load_ptx_from) {
    if (ctx->cfg.load_program_from != NULL) {
      fprintf(stderr,
              "WARNING: Using PTX from %s instead of C code from %s\n",
              ctx->cfg.load_ptx_from, ctx->cfg.load_program_from);
    }
    ptx = slurp_file(ctx->cfg.load_ptx_from, NULL);
  }

  if (ctx->cfg.dump_program_to != NULL) {
    dump_file(ctx->cfg.dump_program_to, src, strlen(src));
  }

  if (ptx == NULL) {
    ptx = cuda_nvrtc_build(ctx, src, extra_opts);
  }

  if (ctx->cfg.dump_ptx_to != NULL) {
    dump_file(ctx->cfg.dump_ptx_to, ptx, strlen(ptx));
  }

  CUDA_SUCCEED_FATAL(cuModuleLoadData(&ctx->module, ptx));

  free(ptx);
  if (src != NULL) {
    free(src);
  }
}

static void cuda_setup(struct cuda_context *ctx, const char *src_fragments[], const char *extra_opts[]) {
  CUDA_SUCCEED_FATAL(cuInit(0));

  if (cuda_device_setup(ctx) != 0) {
    futhark_panic(-1, "No suitable CUDA device found.\n");
  }
  CUDA_SUCCEED_FATAL(cuCtxCreate(&ctx->cu_ctx, 0, ctx->dev));

  free_list_init(&ctx->free_list);

  ctx->max_shared_memory = device_query(ctx->dev, MAX_SHARED_MEMORY_PER_BLOCK);
  ctx->max_block_size = device_query(ctx->dev, MAX_THREADS_PER_BLOCK);
  ctx->max_grid_size = device_query(ctx->dev, MAX_GRID_DIM_X);
  ctx->max_tile_size = sqrt(ctx->max_block_size);
  ctx->max_threshold = 0;
  ctx->max_bespoke = 0;
  ctx->lockstep_width = device_query(ctx->dev, WARP_SIZE);

  cuda_size_setup(ctx);
  cuda_module_setup(ctx, src_fragments, extra_opts);
}

// Count up the runtime all the profiling_records that occured during execution.
// Also clears the buffer of profiling_records.
static cudaError_t cuda_tally_profiling_records(struct cuda_context *ctx) {
  cudaError_t err;
  for (int i = 0; i < ctx->profiling_records_used; i++) {
    struct profiling_record record = ctx->profiling_records[i];

    float ms;
    if ((err = cudaEventElapsedTime(&ms, record.events[0], record.events[1])) != cudaSuccess) {
      return err;
    }

    // CUDA provides milisecond resolution, but we want microseconds.
    *record.runs += 1;
    *record.runtime += ms*1000;

    if ((err = cudaEventDestroy(record.events[0])) != cudaSuccess) {
      return err;
    }
    if ((err = cudaEventDestroy(record.events[1])) != cudaSuccess) {
      return err;
    }

    free(record.events);
  }

  ctx->profiling_records_used = 0;

  return cudaSuccess;
}

// Returns pointer to two events.
static cudaEvent_t* cuda_get_events(struct cuda_context *ctx, int *runs, int64_t *runtime) {
    if (ctx->profiling_records_used == ctx->profiling_records_capacity) {
      ctx->profiling_records_capacity *= 2;
      ctx->profiling_records =
        realloc(ctx->profiling_records,
                ctx->profiling_records_capacity *
                sizeof(struct profiling_record));
    }
    cudaEvent_t *events = calloc(2, sizeof(cudaEvent_t));
    cudaEventCreate(&events[0]);
    cudaEventCreate(&events[1]);
    ctx->profiling_records[ctx->profiling_records_used].events = events;
    ctx->profiling_records[ctx->profiling_records_used].runs = runs;
    ctx->profiling_records[ctx->profiling_records_used].runtime = runtime;
    ctx->profiling_records_used++;
    return events;
}

static CUresult cuda_free_all(struct cuda_context *ctx);

static void cuda_cleanup(struct cuda_context *ctx) {
  CUDA_SUCCEED_FATAL(cuda_free_all(ctx));
  (void)cuda_tally_profiling_records(ctx);
  free(ctx->profiling_records);
  CUDA_SUCCEED_FATAL(cuModuleUnload(ctx->module));
  CUDA_SUCCEED_FATAL(cuCtxDestroy(ctx->cu_ctx));
}

static CUresult cuda_alloc(struct cuda_context *ctx, size_t min_size,
                           const char *tag, CUdeviceptr *mem_out) {
  if (min_size < sizeof(int)) {
    min_size = sizeof(int);
  }

  size_t size;
  if (free_list_find(&ctx->free_list, min_size, &size, mem_out) == 0) {
    if (size >= min_size) {
      return CUDA_SUCCESS;
    } else {
      CUresult res = cuMemFree(*mem_out);
      if (res != CUDA_SUCCESS) {
        return res;
      }
    }
  }

  CUresult res = cuMemAlloc(mem_out, min_size);
  while (res == CUDA_ERROR_OUT_OF_MEMORY) {
    CUdeviceptr mem;
    if (free_list_first(&ctx->free_list, &mem) == 0) {
      res = cuMemFree(mem);
      if (res != CUDA_SUCCESS) {
        return res;
      }
    } else {
      break;
    }
    res = cuMemAlloc(mem_out, min_size);
  }

  return res;
}

static CUresult cuda_free(struct cuda_context *ctx, CUdeviceptr mem,
                          const char *tag) {
  size_t size;
  CUdeviceptr existing_mem;

  // If there is already a block with this tag, then remove it.
  if (free_list_find(&ctx->free_list, -1, &size, &existing_mem) == 0) {
    CUresult res = cuMemFree(existing_mem);
    if (res != CUDA_SUCCESS) {
      return res;
    }
  }

  CUresult res = cuMemGetAddressRange(NULL, &size, mem);
  if (res == CUDA_SUCCESS) {
    free_list_insert(&ctx->free_list, size, mem, tag);
  }

  return res;
}

static CUresult cuda_free_all(struct cuda_context *ctx) {
  CUdeviceptr mem;
  free_list_pack(&ctx->free_list);
  while (free_list_first(&ctx->free_list, &mem) == 0) {
    CUresult res = cuMemFree(mem);
    if (res != CUDA_SUCCESS) {
      return res;
    }
  }

  return CUDA_SUCCESS;
}

// End of cuda.h.

const char *cuda_program[] =
           {"#define FUTHARK_CUDA\n#define FUTHARK_F64_ENABLED\ntypedef char int8_t;\ntypedef short int16_t;\ntypedef int int32_t;\ntypedef long long int64_t;\ntypedef unsigned char uint8_t;\ntypedef unsigned short uint16_t;\ntypedef unsigned int uint32_t;\ntypedef unsigned long long uint64_t;\ntypedef uint8_t uchar;\ntypedef uint16_t ushort;\ntypedef uint32_t uint;\ntypedef uint64_t ulong;\n#define __kernel extern \"C\" __global__ __launch_bounds__(MAX_THREADS_PER_BLOCK)\n#define __global\n#define __local\n#define __private\n#define __constant\n#define __write_only\n#define __read_only\nstatic inline int get_group_id_fn(int block_dim0, int block_dim1,\n                                  int block_dim2, int d)\n{\n    switch (d) {\n        \n      case 0:\n        d = block_dim0;\n        break;\n        \n      case 1:\n        d = block_dim1;\n        break;\n        \n      case 2:\n        d = block_dim2;\n        break;\n    }\n    switch (d) {\n        \n      case 0:\n        return blockIdx.x;\n        \n      case 1:\n        return blockIdx.y;\n        \n      case 2:\n        return blockIdx.z;\n        \n      default:\n        return 0;\n    }\n}\n#define get_group_id(d) get_group_id_fn(block_dim0, block_dim1, block_dim2, d)\nstatic inline int get_num_groups_fn(int block_dim0, int block_dim1,\n                                    int block_dim2, int d)\n{\n    switch (d) {\n        \n      case 0:\n        d = block_dim0;\n        break;\n        \n      case 1:\n        d = block_dim1;\n        break;\n        \n      case 2:\n        d = block_dim2;\n        break;\n    }\n    switch (d) {\n        \n      case 0:\n        return gridDim.x;\n        \n      case 1:\n        return gridDim.y;\n        \n      case 2:\n        return gridDim.z;\n        \n      default:\n        return 0;\n    }\n}\n#define get_num_groups(d) get_num_groups_fn(block_dim0, block_dim1, block_dim2, d)\nstatic inline int get_local_id(int d)\n{\n    switch (d) {\n        \n      case 0:\n        return threadIdx.x;\n        \n      case 1:\n        return threadIdx.y;\n        \n      ca",
            "se 2:\n        return threadIdx.z;\n        \n      default:\n        return 0;\n    }\n}\nstatic inline int get_local_size(int d)\n{\n    switch (d) {\n        \n      case 0:\n        return blockDim.x;\n        \n      case 1:\n        return blockDim.y;\n        \n      case 2:\n        return blockDim.z;\n        \n      default:\n        return 0;\n    }\n}\nstatic inline int get_global_id_fn(int block_dim0, int block_dim1,\n                                   int block_dim2, int d)\n{\n    return get_group_id(d) * get_local_size(d) + get_local_id(d);\n}\n#define get_global_id(d) get_global_id_fn(block_dim0, block_dim1, block_dim2, d)\nstatic inline int get_global_size(int block_dim0, int block_dim1,\n                                  int block_dim2, int d)\n{\n    return get_num_groups(d) * get_local_size(d);\n}\n#define CLK_LOCAL_MEM_FENCE 1\n#define CLK_GLOBAL_MEM_FENCE 2\nstatic inline void barrier(int x)\n{\n    __syncthreads();\n}\nstatic inline void mem_fence_local()\n{\n    __threadfence_block();\n}\nstatic inline void mem_fence_global()\n{\n    __threadfence();\n}\n#define NAN (0.0/0.0)\n#define INFINITY (1.0/0.0)\nextern volatile __shared__ char shared_mem[];\nstatic inline uint8_t add8(uint8_t x, uint8_t y)\n{\n    return x + y;\n}\nstatic inline uint16_t add16(uint16_t x, uint16_t y)\n{\n    return x + y;\n}\nstatic inline uint32_t add32(uint32_t x, uint32_t y)\n{\n    return x + y;\n}\nstatic inline uint64_t add64(uint64_t x, uint64_t y)\n{\n    return x + y;\n}\nstatic inline uint8_t sub8(uint8_t x, uint8_t y)\n{\n    return x - y;\n}\nstatic inline uint16_t sub16(uint16_t x, uint16_t y)\n{\n    return x - y;\n}\nstatic inline uint32_t sub32(uint32_t x, uint32_t y)\n{\n    return x - y;\n}\nstatic inline uint64_t sub64(uint64_t x, uint64_t y)\n{\n    return x - y;\n}\nstatic inline uint8_t mul8(uint8_t x, uint8_t y)\n{\n    return x * y;\n}\nstatic inline uint16_t mul16(uint16_t x, uint16_t y)\n{\n    return x * y;\n}\nstatic inline uint32_t mul32(uint32_t x, uint32_t y)\n{\n    return x * y;\n}\nstatic inline uint64_t mul64(uint64_t x, uint",
            "64_t y)\n{\n    return x * y;\n}\nstatic inline uint8_t udiv8(uint8_t x, uint8_t y)\n{\n    return x / y;\n}\nstatic inline uint16_t udiv16(uint16_t x, uint16_t y)\n{\n    return x / y;\n}\nstatic inline uint32_t udiv32(uint32_t x, uint32_t y)\n{\n    return x / y;\n}\nstatic inline uint64_t udiv64(uint64_t x, uint64_t y)\n{\n    return x / y;\n}\nstatic inline uint8_t udiv_up8(uint8_t x, uint8_t y)\n{\n    return (x + y - 1) / y;\n}\nstatic inline uint16_t udiv_up16(uint16_t x, uint16_t y)\n{\n    return (x + y - 1) / y;\n}\nstatic inline uint32_t udiv_up32(uint32_t x, uint32_t y)\n{\n    return (x + y - 1) / y;\n}\nstatic inline uint64_t udiv_up64(uint64_t x, uint64_t y)\n{\n    return (x + y - 1) / y;\n}\nstatic inline uint8_t umod8(uint8_t x, uint8_t y)\n{\n    return x % y;\n}\nstatic inline uint16_t umod16(uint16_t x, uint16_t y)\n{\n    return x % y;\n}\nstatic inline uint32_t umod32(uint32_t x, uint32_t y)\n{\n    return x % y;\n}\nstatic inline uint64_t umod64(uint64_t x, uint64_t y)\n{\n    return x % y;\n}\nstatic inline uint8_t udiv_safe8(uint8_t x, uint8_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline uint16_t udiv_safe16(uint16_t x, uint16_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline uint32_t udiv_safe32(uint32_t x, uint32_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline uint64_t udiv_safe64(uint64_t x, uint64_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)\n{\n    return y == 0 ? 0 : (x + y - 1) / y;\n}\nstatic inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)\n{\n    return y == 0 ? 0 : (x + y - 1) / y;\n}\nstatic inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)\n{\n    return y == 0 ? 0 : (x + y - 1) / y;\n}\nstatic inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)\n{\n    return y == 0 ? 0 : (x + y - 1) / y;\n}\nstatic inline uint8_t umod_safe8(uint8_t x, uint8_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline uint16_t umod_safe16(uint16_t x, uint16_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline uint32_t umod_safe32(uin",
            "t32_t x, uint32_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline uint64_t umod_safe64(uint64_t x, uint64_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int8_t sdiv8(int8_t x, int8_t y)\n{\n    int8_t q = x / y;\n    int8_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int16_t sdiv16(int16_t x, int16_t y)\n{\n    int16_t q = x / y;\n    int16_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int32_t sdiv32(int32_t x, int32_t y)\n{\n    int32_t q = x / y;\n    int32_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int64_t sdiv64(int64_t x, int64_t y)\n{\n    int64_t q = x / y;\n    int64_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int8_t sdiv_up8(int8_t x, int8_t y)\n{\n    return sdiv8(x + y - 1, y);\n}\nstatic inline int16_t sdiv_up16(int16_t x, int16_t y)\n{\n    return sdiv16(x + y - 1, y);\n}\nstatic inline int32_t sdiv_up32(int32_t x, int32_t y)\n{\n    return sdiv32(x + y - 1, y);\n}\nstatic inline int64_t sdiv_up64(int64_t x, int64_t y)\n{\n    return sdiv64(x + y - 1, y);\n}\nstatic inline int8_t smod8(int8_t x, int8_t y)\n{\n    int8_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int16_t smod16(int16_t x, int16_t y)\n{\n    int16_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int32_t smod32(int32_t x, int32_t y)\n{\n    int32_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int64_t smod64(int64_t x, int64_t y)\n{\n    int64_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int8_t sdiv_safe8(int8_t x, int8_t y)\n{\n    return y == 0 ? 0 : sdiv8(x, y);\n}\nstatic inline int16_t sdiv_safe16(int16_t x, int16_t y)\n{\n    return y == 0 ? 0 : sdiv16(x, y);\n}\nstatic inline int32_t sdiv_safe32(int32_t x, int32_",
            "t y)\n{\n    return y == 0 ? 0 : sdiv32(x, y);\n}\nstatic inline int64_t sdiv_safe64(int64_t x, int64_t y)\n{\n    return y == 0 ? 0 : sdiv64(x, y);\n}\nstatic inline int8_t sdiv_up_safe8(int8_t x, int8_t y)\n{\n    return sdiv_safe8(x + y - 1, y);\n}\nstatic inline int16_t sdiv_up_safe16(int16_t x, int16_t y)\n{\n    return sdiv_safe16(x + y - 1, y);\n}\nstatic inline int32_t sdiv_up_safe32(int32_t x, int32_t y)\n{\n    return sdiv_safe32(x + y - 1, y);\n}\nstatic inline int64_t sdiv_up_safe64(int64_t x, int64_t y)\n{\n    return sdiv_safe64(x + y - 1, y);\n}\nstatic inline int8_t smod_safe8(int8_t x, int8_t y)\n{\n    return y == 0 ? 0 : smod8(x, y);\n}\nstatic inline int16_t smod_safe16(int16_t x, int16_t y)\n{\n    return y == 0 ? 0 : smod16(x, y);\n}\nstatic inline int32_t smod_safe32(int32_t x, int32_t y)\n{\n    return y == 0 ? 0 : smod32(x, y);\n}\nstatic inline int64_t smod_safe64(int64_t x, int64_t y)\n{\n    return y == 0 ? 0 : smod64(x, y);\n}\nstatic inline int8_t squot8(int8_t x, int8_t y)\n{\n    return x / y;\n}\nstatic inline int16_t squot16(int16_t x, int16_t y)\n{\n    return x / y;\n}\nstatic inline int32_t squot32(int32_t x, int32_t y)\n{\n    return x / y;\n}\nstatic inline int64_t squot64(int64_t x, int64_t y)\n{\n    return x / y;\n}\nstatic inline int8_t srem8(int8_t x, int8_t y)\n{\n    return x % y;\n}\nstatic inline int16_t srem16(int16_t x, int16_t y)\n{\n    return x % y;\n}\nstatic inline int32_t srem32(int32_t x, int32_t y)\n{\n    return x % y;\n}\nstatic inline int64_t srem64(int64_t x, int64_t y)\n{\n    return x % y;\n}\nstatic inline int8_t squot_safe8(int8_t x, int8_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline int16_t squot_safe16(int16_t x, int16_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline int32_t squot_safe32(int32_t x, int32_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline int64_t squot_safe64(int64_t x, int64_t y)\n{\n    return y == 0 ? 0 : x / y;\n}\nstatic inline int8_t srem_safe8(int8_t x, int8_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int16_t srem_safe16(int1",
            "6_t x, int16_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int32_t srem_safe32(int32_t x, int32_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int64_t srem_safe64(int64_t x, int64_t y)\n{\n    return y == 0 ? 0 : x % y;\n}\nstatic inline int8_t smin8(int8_t x, int8_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int16_t smin16(int16_t x, int16_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int32_t smin32(int32_t x, int32_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int64_t smin64(int64_t x, int64_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint8_t umin8(uint8_t x, uint8_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint16_t umin16(uint16_t x, uint16_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint32_t umin32(uint32_t x, uint32_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint64_t umin64(uint64_t x, uint64_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int8_t smax8(int8_t x, int8_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline int16_t smax16(int16_t x, int16_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline int32_t smax32(int32_t x, int32_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline int64_t smax64(int64_t x, int64_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint8_t umax8(uint8_t x, uint8_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint16_t umax16(uint16_t x, uint16_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint32_t umax32(uint32_t x, uint32_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint64_t umax64(uint64_t x, uint64_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint8_t shl8(uint8_t x, uint8_t y)\n{\n    return x << y;\n}\nstatic inline uint16_t shl16(uint16_t x, uint16_t y)\n{\n    return x << y;\n}\nstatic inline uint32_t shl32(uint32_t x, uint32_t y)\n{\n    return x << y;\n}\nstatic inline uint64_t shl64(uint64_t x, uint64_t y)\n{\n    return x << y;\n}\nstatic inline uint8_t lshr8(uint8_t x, uint8_t y)\n{\n    return x >> y;\n}\nstatic inline uint16_t lshr16(uint16_t x, uint16_t y)\n{\n    return x >> y;\n}\nstatic inli",
            "ne uint32_t lshr32(uint32_t x, uint32_t y)\n{\n    return x >> y;\n}\nstatic inline uint64_t lshr64(uint64_t x, uint64_t y)\n{\n    return x >> y;\n}\nstatic inline int8_t ashr8(int8_t x, int8_t y)\n{\n    return x >> y;\n}\nstatic inline int16_t ashr16(int16_t x, int16_t y)\n{\n    return x >> y;\n}\nstatic inline int32_t ashr32(int32_t x, int32_t y)\n{\n    return x >> y;\n}\nstatic inline int64_t ashr64(int64_t x, int64_t y)\n{\n    return x >> y;\n}\nstatic inline uint8_t and8(uint8_t x, uint8_t y)\n{\n    return x & y;\n}\nstatic inline uint16_t and16(uint16_t x, uint16_t y)\n{\n    return x & y;\n}\nstatic inline uint32_t and32(uint32_t x, uint32_t y)\n{\n    return x & y;\n}\nstatic inline uint64_t and64(uint64_t x, uint64_t y)\n{\n    return x & y;\n}\nstatic inline uint8_t or8(uint8_t x, uint8_t y)\n{\n    return x | y;\n}\nstatic inline uint16_t or16(uint16_t x, uint16_t y)\n{\n    return x | y;\n}\nstatic inline uint32_t or32(uint32_t x, uint32_t y)\n{\n    return x | y;\n}\nstatic inline uint64_t or64(uint64_t x, uint64_t y)\n{\n    return x | y;\n}\nstatic inline uint8_t xor8(uint8_t x, uint8_t y)\n{\n    return x ^ y;\n}\nstatic inline uint16_t xor16(uint16_t x, uint16_t y)\n{\n    return x ^ y;\n}\nstatic inline uint32_t xor32(uint32_t x, uint32_t y)\n{\n    return x ^ y;\n}\nstatic inline uint64_t xor64(uint64_t x, uint64_t y)\n{\n    return x ^ y;\n}\nstatic inline bool ult8(uint8_t x, uint8_t y)\n{\n    return x < y;\n}\nstatic inline bool ult16(uint16_t x, uint16_t y)\n{\n    return x < y;\n}\nstatic inline bool ult32(uint32_t x, uint32_t y)\n{\n    return x < y;\n}\nstatic inline bool ult64(uint64_t x, uint64_t y)\n{\n    return x < y;\n}\nstatic inline bool ule8(uint8_t x, uint8_t y)\n{\n    return x <= y;\n}\nstatic inline bool ule16(uint16_t x, uint16_t y)\n{\n    return x <= y;\n}\nstatic inline bool ule32(uint32_t x, uint32_t y)\n{\n    return x <= y;\n}\nstatic inline bool ule64(uint64_t x, uint64_t y)\n{\n    return x <= y;\n}\nstatic inline bool slt8(int8_t x, int8_t y)\n{\n    return x < y;\n}\nstatic inline bool slt16(int16_t x, int16_t y)\n{\n",
            "    return x < y;\n}\nstatic inline bool slt32(int32_t x, int32_t y)\n{\n    return x < y;\n}\nstatic inline bool slt64(int64_t x, int64_t y)\n{\n    return x < y;\n}\nstatic inline bool sle8(int8_t x, int8_t y)\n{\n    return x <= y;\n}\nstatic inline bool sle16(int16_t x, int16_t y)\n{\n    return x <= y;\n}\nstatic inline bool sle32(int32_t x, int32_t y)\n{\n    return x <= y;\n}\nstatic inline bool sle64(int64_t x, int64_t y)\n{\n    return x <= y;\n}\nstatic inline int8_t pow8(int8_t x, int8_t y)\n{\n    int8_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline int16_t pow16(int16_t x, int16_t y)\n{\n    int16_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline int32_t pow32(int32_t x, int32_t y)\n{\n    int32_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline int64_t pow64(int64_t x, int64_t y)\n{\n    int64_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline bool itob_i8_bool(int8_t x)\n{\n    return x;\n}\nstatic inline bool itob_i16_bool(int16_t x)\n{\n    return x;\n}\nstatic inline bool itob_i32_bool(int32_t x)\n{\n    return x;\n}\nstatic inline bool itob_i64_bool(int64_t x)\n{\n    return x;\n}\nstatic inline int8_t btoi_bool_i8(bool x)\n{\n    return x;\n}\nstatic inline int16_t btoi_bool_i16(bool x)\n{\n    return x;\n}\nstatic inline int32_t btoi_bool_i32(bool x)\n{\n    return x;\n}\nstatic inline int64_t btoi_bool_i64(bool x)\n{\n    return x;\n}\n#define sext_i8_i8(x) ((int8_t) (int8_t) x)\n#define sext_i8_i16(x) ((int16_t) (int8_t) x)\n#define sext_i8_i32(x) ((int32_t) (int8_t) x)\n#define sext_i8_i64(x) ((int64_t) (int8_t) x)\n#define sext_i16_i8(x) ((int8_t) (int16_t) x)\n#d",
            "efine sext_i16_i16(x) ((int16_t) (int16_t) x)\n#define sext_i16_i32(x) ((int32_t) (int16_t) x)\n#define sext_i16_i64(x) ((int64_t) (int16_t) x)\n#define sext_i32_i8(x) ((int8_t) (int32_t) x)\n#define sext_i32_i16(x) ((int16_t) (int32_t) x)\n#define sext_i32_i32(x) ((int32_t) (int32_t) x)\n#define sext_i32_i64(x) ((int64_t) (int32_t) x)\n#define sext_i64_i8(x) ((int8_t) (int64_t) x)\n#define sext_i64_i16(x) ((int16_t) (int64_t) x)\n#define sext_i64_i32(x) ((int32_t) (int64_t) x)\n#define sext_i64_i64(x) ((int64_t) (int64_t) x)\n#define zext_i8_i8(x) ((int8_t) (uint8_t) x)\n#define zext_i8_i16(x) ((int16_t) (uint8_t) x)\n#define zext_i8_i32(x) ((int32_t) (uint8_t) x)\n#define zext_i8_i64(x) ((int64_t) (uint8_t) x)\n#define zext_i16_i8(x) ((int8_t) (uint16_t) x)\n#define zext_i16_i16(x) ((int16_t) (uint16_t) x)\n#define zext_i16_i32(x) ((int32_t) (uint16_t) x)\n#define zext_i16_i64(x) ((int64_t) (uint16_t) x)\n#define zext_i32_i8(x) ((int8_t) (uint32_t) x)\n#define zext_i32_i16(x) ((int16_t) (uint32_t) x)\n#define zext_i32_i32(x) ((int32_t) (uint32_t) x)\n#define zext_i32_i64(x) ((int64_t) (uint32_t) x)\n#define zext_i64_i8(x) ((int8_t) (uint64_t) x)\n#define zext_i64_i16(x) ((int16_t) (uint64_t) x)\n#define zext_i64_i32(x) ((int32_t) (uint64_t) x)\n#define zext_i64_i64(x) ((int64_t) (uint64_t) x)\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_popc8(int8_t x)\n{\n    return popcount(x);\n}\nstatic int32_t futrts_popc16(int16_t x)\n{\n    return popcount(x);\n}\nstatic int32_t futrts_popc32(int32_t x)\n{\n    return popcount(x);\n}\nstatic int32_t futrts_popc64(int64_t x)\n{\n    return popcount(x);\n}\n#elif defined(__CUDA_ARCH__)\nstatic int32_t futrts_popc8(int8_t x)\n{\n    return __popc(zext_i8_i32(x));\n}\nstatic int32_t futrts_popc16(int16_t x)\n{\n    return __popc(zext_i16_i32(x));\n}\nstatic int32_t futrts_popc32(int32_t x)\n{\n    return __popc(x);\n}\nstatic int32_t futrts_popc64(int64_t x)\n{\n    return __popcll(x);\n}\n#else\nstatic int32_t futrts_popc8(int8_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n   ",
            "     x &= x - 1;\n    return c;\n}\nstatic int32_t futrts_popc16(int16_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\nstatic int32_t futrts_popc32(int32_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\nstatic int32_t futrts_popc64(int64_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\n#endif\n#if defined(__OPENCL_VERSION__)\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)\n{\n    return mul_hi(a, b);\n}\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)\n{\n    return mul_hi(a, b);\n}\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)\n{\n    return mul_hi(a, b);\n}\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)\n{\n    return mul_hi(a, b);\n}\n#elif defined(__CUDA_ARCH__)\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)\n{\n    uint16_t aa = a;\n    uint16_t bb = b;\n    \n    return aa * bb >> 8;\n}\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)\n{\n    uint32_t aa = a;\n    uint32_t bb = b;\n    \n    return aa * bb >> 16;\n}\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)\n{\n    return mulhi(a, b);\n}\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)\n{\n    return mul64hi(a, b);\n}\n#else\nstatic uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)\n{\n    uint16_t aa = a;\n    uint16_t bb = b;\n    \n    return aa * bb >> 8;\n}\nstatic uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)\n{\n    uint32_t aa = a;\n    uint32_t bb = b;\n    \n    return aa * bb >> 16;\n}\nstatic uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)\n{\n    uint64_t aa = a;\n    uint64_t bb = b;\n    \n    return aa * bb >> 32;\n}\nstatic uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)\n{\n    __uint128_t aa = a;\n    __uint128_t bb = b;\n    \n    return aa * bb >> 64;\n}\n#endif\n#if defined(__OPENCL_VERSION__)\nstatic uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)\n{\n    return mad_hi(a, b, c);\n}\nstatic uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)\n{\n    return mad_hi(a, b, c);\n}\nstatic u",
            "int32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)\n{\n    return mad_hi(a, b, c);\n}\nstatic uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)\n{\n    return mad_hi(a, b, c);\n}\n#else\nstatic uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)\n{\n    return futrts_mul_hi8(a, b) + c;\n}\nstatic uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)\n{\n    return futrts_mul_hi16(a, b) + c;\n}\nstatic uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)\n{\n    return futrts_mul_hi32(a, b) + c;\n}\nstatic uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)\n{\n    return futrts_mul_hi64(a, b) + c;\n}\n#endif\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_clzz8(int8_t x)\n{\n    return clz(x);\n}\nstatic int32_t futrts_clzz16(int16_t x)\n{\n    return clz(x);\n}\nstatic int32_t futrts_clzz32(int32_t x)\n{\n    return clz(x);\n}\nstatic int32_t futrts_clzz64(int64_t x)\n{\n    return clz(x);\n}\n#elif defined(__CUDA_ARCH__)\nstatic int32_t futrts_clzz8(int8_t x)\n{\n    return __clz(zext_i8_i32(x)) - 24;\n}\nstatic int32_t futrts_clzz16(int16_t x)\n{\n    return __clz(zext_i16_i32(x)) - 16;\n}\nstatic int32_t futrts_clzz32(int32_t x)\n{\n    return __clz(x);\n}\nstatic int32_t futrts_clzz64(int64_t x)\n{\n    return __clzll(x);\n}\n#else\nstatic int32_t futrts_clzz8(int8_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\nstatic int32_t futrts_clzz16(int16_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\nstatic int32_t futrts_clzz32(int32_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\nstatic int32_t futrts_clzz64(int64_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n",
            "    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\n#endif\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_ctzz8(int8_t x)\n{\n    int i = 0;\n    \n    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)\n        ;\n    return i;\n}\nstatic int32_t futrts_ctzz16(int16_t x)\n{\n    int i = 0;\n    \n    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)\n        ;\n    return i;\n}\nstatic int32_t futrts_ctzz32(int32_t x)\n{\n    int i = 0;\n    \n    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)\n        ;\n    return i;\n}\nstatic int32_t futrts_ctzz64(int64_t x)\n{\n    int i = 0;\n    \n    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)\n        ;\n    return i;\n}\n#elif defined(__CUDA_ARCH__)\nstatic int32_t futrts_ctzz8(int8_t x)\n{\n    int y = __ffs(x);\n    \n    return y == 0 ? 8 : y - 1;\n}\nstatic int32_t futrts_ctzz16(int16_t x)\n{\n    int y = __ffs(x);\n    \n    return y == 0 ? 16 : y - 1;\n}\nstatic int32_t futrts_ctzz32(int32_t x)\n{\n    int y = __ffs(x);\n    \n    return y == 0 ? 32 : y - 1;\n}\nstatic int32_t futrts_ctzz64(int64_t x)\n{\n    int y = __ffsll(x);\n    \n    return y == 0 ? 64 : y - 1;\n}\n#else\nstatic int32_t futrts_ctzz8(int8_t x)\n{\n    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);\n}\nstatic int32_t futrts_ctzz16(int16_t x)\n{\n    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);\n}\nstatic int32_t futrts_ctzz32(int32_t x)\n{\n    return x == 0 ? 32 : __builtin_ctz(x);\n}\nstatic int32_t futrts_ctzz64(int64_t x)\n{\n    return x == 0 ? 64 : __builtin_ctzll(x);\n}\n#endif\nstatic inline float fdiv32(float x, float y)\n{\n    return x / y;\n}\nstatic inline float fadd32(float x, float y)\n{\n    return x + y;\n}\nstatic inline float fsub32(float x, float y)\n{\n    return x - y;\n}\nstatic inline float fmul32(float x, float y)\n{\n    return x * y;\n}\nstatic inline float fmin32(float x, float y)\n{\n    return fmin(x, y);\n}\nstatic inline float fmax32(float x, float y)\n{\n    return fmax(x, y);\n}\nstatic inline float fpow32(float x, float y)\n{\n    retu",
            "rn pow(x, y);\n}\nstatic inline bool cmplt32(float x, float y)\n{\n    return x < y;\n}\nstatic inline bool cmple32(float x, float y)\n{\n    return x <= y;\n}\nstatic inline float sitofp_i8_f32(int8_t x)\n{\n    return (float) x;\n}\nstatic inline float sitofp_i16_f32(int16_t x)\n{\n    return (float) x;\n}\nstatic inline float sitofp_i32_f32(int32_t x)\n{\n    return (float) x;\n}\nstatic inline float sitofp_i64_f32(int64_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i8_f32(uint8_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i16_f32(uint16_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i32_f32(uint32_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i64_f32(uint64_t x)\n{\n    return (float) x;\n}\nstatic inline int8_t fptosi_f32_i8(float x)\n{\n    return (int8_t) x;\n}\nstatic inline int16_t fptosi_f32_i16(float x)\n{\n    return (int16_t) x;\n}\nstatic inline int32_t fptosi_f32_i32(float x)\n{\n    return (int32_t) x;\n}\nstatic inline int64_t fptosi_f32_i64(float x)\n{\n    return (int64_t) x;\n}\nstatic inline uint8_t fptoui_f32_i8(float x)\n{\n    return (uint8_t) x;\n}\nstatic inline uint16_t fptoui_f32_i16(float x)\n{\n    return (uint16_t) x;\n}\nstatic inline uint32_t fptoui_f32_i32(float x)\n{\n    return (uint32_t) x;\n}\nstatic inline uint64_t fptoui_f32_i64(float x)\n{\n    return (uint64_t) x;\n}\nstatic inline bool futrts_isnan32(float x)\n{\n    return isnan(x);\n}\nstatic inline bool futrts_isinf32(float x)\n{\n    return isinf(x);\n}\n#ifdef __OPENCL_VERSION__\nstatic inline float futrts_log32(float x)\n{\n    return log(x);\n}\nstatic inline float futrts_log2_32(float x)\n{\n    return log2(x);\n}\nstatic inline float futrts_log10_32(float x)\n{\n    return log10(x);\n}\nstatic inline float futrts_sqrt32(float x)\n{\n    return sqrt(x);\n}\nstatic inline float futrts_exp32(float x)\n{\n    return exp(x);\n}\nstatic inline float futrts_cos32(float x)\n{\n    return cos(x);\n}\nstatic inline float futrts_sin32(float x)\n{\n    return sin(x);\n}\nstatic inline float futrts_tan32(float x)\n{\n    retu",
            "rn tan(x);\n}\nstatic inline float futrts_acos32(float x)\n{\n    return acos(x);\n}\nstatic inline float futrts_asin32(float x)\n{\n    return asin(x);\n}\nstatic inline float futrts_atan32(float x)\n{\n    return atan(x);\n}\nstatic inline float futrts_cosh32(float x)\n{\n    return cosh(x);\n}\nstatic inline float futrts_sinh32(float x)\n{\n    return sinh(x);\n}\nstatic inline float futrts_tanh32(float x)\n{\n    return tanh(x);\n}\nstatic inline float futrts_acosh32(float x)\n{\n    return acosh(x);\n}\nstatic inline float futrts_asinh32(float x)\n{\n    return asinh(x);\n}\nstatic inline float futrts_atanh32(float x)\n{\n    return atanh(x);\n}\nstatic inline float futrts_atan2_32(float x, float y)\n{\n    return atan2(x, y);\n}\nstatic inline float futrts_hypot32(float x, float y)\n{\n    return hypot(x, y);\n}\nstatic inline float futrts_gamma32(float x)\n{\n    return tgamma(x);\n}\nstatic inline float futrts_lgamma32(float x)\n{\n    return lgamma(x);\n}\nstatic inline float fmod32(float x, float y)\n{\n    return fmod(x, y);\n}\nstatic inline float futrts_round32(float x)\n{\n    return rint(x);\n}\nstatic inline float futrts_floor32(float x)\n{\n    return floor(x);\n}\nstatic inline float futrts_ceil32(float x)\n{\n    return ceil(x);\n}\nstatic inline float futrts_lerp32(float v0, float v1, float t)\n{\n    return mix(v0, v1, t);\n}\nstatic inline float futrts_mad32(float a, float b, float c)\n{\n    return mad(a, b, c);\n}\nstatic inline float futrts_fma32(float a, float b, float c)\n{\n    return fma(a, b, c);\n}\n#else\nstatic inline float futrts_log32(float x)\n{\n    return logf(x);\n}\nstatic inline float futrts_log2_32(float x)\n{\n    return log2f(x);\n}\nstatic inline float futrts_log10_32(float x)\n{\n    return log10f(x);\n}\nstatic inline float futrts_sqrt32(float x)\n{\n    return sqrtf(x);\n}\nstatic inline float futrts_exp32(float x)\n{\n    return expf(x);\n}\nstatic inline float futrts_cos32(float x)\n{\n    return cosf(x);\n}\nstatic inline float futrts_sin32(float x)\n{\n    return sinf(x);\n}\nstatic inline float futrts_tan32(float x)\n{\n    ",
            "return tanf(x);\n}\nstatic inline float futrts_acos32(float x)\n{\n    return acosf(x);\n}\nstatic inline float futrts_asin32(float x)\n{\n    return asinf(x);\n}\nstatic inline float futrts_atan32(float x)\n{\n    return atanf(x);\n}\nstatic inline float futrts_cosh32(float x)\n{\n    return coshf(x);\n}\nstatic inline float futrts_sinh32(float x)\n{\n    return sinhf(x);\n}\nstatic inline float futrts_tanh32(float x)\n{\n    return tanhf(x);\n}\nstatic inline float futrts_acosh32(float x)\n{\n    return acoshf(x);\n}\nstatic inline float futrts_asinh32(float x)\n{\n    return asinhf(x);\n}\nstatic inline float futrts_atanh32(float x)\n{\n    return atanhf(x);\n}\nstatic inline float futrts_atan2_32(float x, float y)\n{\n    return atan2f(x, y);\n}\nstatic inline float futrts_hypot32(float x, float y)\n{\n    return hypotf(x, y);\n}\nstatic inline float futrts_gamma32(float x)\n{\n    return tgammaf(x);\n}\nstatic inline float futrts_lgamma32(float x)\n{\n    return lgammaf(x);\n}\nstatic inline float fmod32(float x, float y)\n{\n    return fmodf(x, y);\n}\nstatic inline float futrts_round32(float x)\n{\n    return rintf(x);\n}\nstatic inline float futrts_floor32(float x)\n{\n    return floorf(x);\n}\nstatic inline float futrts_ceil32(float x)\n{\n    return ceilf(x);\n}\nstatic inline float futrts_lerp32(float v0, float v1, float t)\n{\n    return v0 + (v1 - v0) * t;\n}\nstatic inline float futrts_mad32(float a, float b, float c)\n{\n    return a * b + c;\n}\nstatic inline float futrts_fma32(float a, float b, float c)\n{\n    return fmaf(a, b, c);\n}\n#endif\nstatic inline int32_t futrts_to_bits32(float x)\n{\n    union {\n        float f;\n        int32_t t;\n    } p;\n    \n    p.f = x;\n    return p.t;\n}\nstatic inline float futrts_from_bits32(int32_t x)\n{\n    union {\n        int32_t f;\n        float t;\n    } p;\n    \n    p.f = x;\n    return p.t;\n}\nstatic inline float fsignum32(float x)\n{\n    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);\n}\nstatic inline double fdiv64(double x, double y)\n{\n    return x / y;\n}\nstatic inline double fadd64(double x, do",
            "uble y)\n{\n    return x + y;\n}\nstatic inline double fsub64(double x, double y)\n{\n    return x - y;\n}\nstatic inline double fmul64(double x, double y)\n{\n    return x * y;\n}\nstatic inline double fmin64(double x, double y)\n{\n    return fmin(x, y);\n}\nstatic inline double fmax64(double x, double y)\n{\n    return fmax(x, y);\n}\nstatic inline double fpow64(double x, double y)\n{\n    return pow(x, y);\n}\nstatic inline bool cmplt64(double x, double y)\n{\n    return x < y;\n}\nstatic inline bool cmple64(double x, double y)\n{\n    return x <= y;\n}\nstatic inline double sitofp_i8_f64(int8_t x)\n{\n    return (double) x;\n}\nstatic inline double sitofp_i16_f64(int16_t x)\n{\n    return (double) x;\n}\nstatic inline double sitofp_i32_f64(int32_t x)\n{\n    return (double) x;\n}\nstatic inline double sitofp_i64_f64(int64_t x)\n{\n    return (double) x;\n}\nstatic inline double uitofp_i8_f64(uint8_t x)\n{\n    return (double) x;\n}\nstatic inline double uitofp_i16_f64(uint16_t x)\n{\n    return (double) x;\n}\nstatic inline double uitofp_i32_f64(uint32_t x)\n{\n    return (double) x;\n}\nstatic inline double uitofp_i64_f64(uint64_t x)\n{\n    return (double) x;\n}\nstatic inline int8_t fptosi_f64_i8(double x)\n{\n    return (int8_t) x;\n}\nstatic inline int16_t fptosi_f64_i16(double x)\n{\n    return (int16_t) x;\n}\nstatic inline int32_t fptosi_f64_i32(double x)\n{\n    return (int32_t) x;\n}\nstatic inline int64_t fptosi_f64_i64(double x)\n{\n    return (int64_t) x;\n}\nstatic inline uint8_t fptoui_f64_i8(double x)\n{\n    return (uint8_t) x;\n}\nstatic inline uint16_t fptoui_f64_i16(double x)\n{\n    return (uint16_t) x;\n}\nstatic inline uint32_t fptoui_f64_i32(double x)\n{\n    return (uint32_t) x;\n}\nstatic inline uint64_t fptoui_f64_i64(double x)\n{\n    return (uint64_t) x;\n}\nstatic inline double futrts_log64(double x)\n{\n    return log(x);\n}\nstatic inline double futrts_log2_64(double x)\n{\n    return log2(x);\n}\nstatic inline double futrts_log10_64(double x)\n{\n    return log10(x);\n}\nstatic inline double futrts_sqrt64(double x)\n{\n    return sqrt(x",
            ");\n}\nstatic inline double futrts_exp64(double x)\n{\n    return exp(x);\n}\nstatic inline double futrts_cos64(double x)\n{\n    return cos(x);\n}\nstatic inline double futrts_sin64(double x)\n{\n    return sin(x);\n}\nstatic inline double futrts_tan64(double x)\n{\n    return tan(x);\n}\nstatic inline double futrts_acos64(double x)\n{\n    return acos(x);\n}\nstatic inline double futrts_asin64(double x)\n{\n    return asin(x);\n}\nstatic inline double futrts_atan64(double x)\n{\n    return atan(x);\n}\nstatic inline double futrts_cosh64(double x)\n{\n    return cosh(x);\n}\nstatic inline double futrts_sinh64(double x)\n{\n    return sinh(x);\n}\nstatic inline double futrts_tanh64(double x)\n{\n    return tanh(x);\n}\nstatic inline double futrts_acosh64(double x)\n{\n    return acosh(x);\n}\nstatic inline double futrts_asinh64(double x)\n{\n    return asinh(x);\n}\nstatic inline double futrts_atanh64(double x)\n{\n    return atanh(x);\n}\nstatic inline double futrts_atan2_64(double x, double y)\n{\n    return atan2(x, y);\n}\nstatic inline double futrts_hypot64(double x, double y)\n{\n    return hypot(x, y);\n}\nstatic inline double futrts_gamma64(double x)\n{\n    return tgamma(x);\n}\nstatic inline double futrts_lgamma64(double x)\n{\n    return lgamma(x);\n}\nstatic inline double futrts_fma64(double a, double b, double c)\n{\n    return fma(a, b, c);\n}\nstatic inline double futrts_round64(double x)\n{\n    return rint(x);\n}\nstatic inline double futrts_ceil64(double x)\n{\n    return ceil(x);\n}\nstatic inline double futrts_floor64(double x)\n{\n    return floor(x);\n}\nstatic inline bool futrts_isnan64(double x)\n{\n    return isnan(x);\n}\nstatic inline bool futrts_isinf64(double x)\n{\n    return isinf(x);\n}\nstatic inline int64_t futrts_to_bits64(double x)\n{\n    union {\n        double f;\n        int64_t t;\n    } p;\n    \n    p.f = x;\n    return p.t;\n}\nstatic inline double futrts_from_bits64(int64_t x)\n{\n    union {\n        int64_t f;\n        double t;\n    } p;\n    \n    p.f = x;\n    return p.t;\n}\nstatic inline double fmod64(double x, double y)\n{\n   ",
            " return fmod(x, y);\n}\nstatic inline double fsignum64(double x)\n{\n    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);\n}\n#ifdef __OPENCL_VERSION__\nstatic inline double futrts_lerp64(double v0, double v1, double t)\n{\n    return mix(v0, v1, t);\n}\nstatic inline double futrts_mad64(double a, double b, double c)\n{\n    return mad(a, b, c);\n}\n#else\nstatic inline double futrts_lerp64(double v0, double v1, double t)\n{\n    return v0 + (v1 - v0) * t;\n}\nstatic inline double futrts_mad64(double a, double b, double c)\n{\n    return a * b + c;\n}\n#endif\nstatic inline float fpconv_f32_f32(float x)\n{\n    return (float) x;\n}\nstatic inline double fpconv_f32_f64(float x)\n{\n    return (double) x;\n}\nstatic inline float fpconv_f64_f32(double x)\n{\n    return (float) x;\n}\nstatic inline double fpconv_f64_f64(double x)\n{\n    return (double) x;\n}\n// Start of atomics.h\n\ninline int32_t atomic_xchg_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_xchg_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_cmpxchg_i32_global(volatile __global int32_t *p,\n                                         int32_t cmp, int32_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((int32_t*)p, cmp, val);\n#else\n  return atomic_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int32_t atomic_cmpxchg_i32_local(volatile __local int32_t *p,\n                                        int32_t cmp, int32_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((int32_t*)p, cmp, val);\n#else\n  return atomic_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int32_t atomic_add_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((int32_t*)p, x);\n#else\n  return atomic_add(p, x);\n#endif\n}\n\ninline int32_t atomic_add_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n",
            "  return atomicAdd((int32_t*)p, x);\n#else\n  return atomic_add(p, x);\n#endif\n}\n\ninline float atomic_fadd_f32_global(volatile __global float *p, float x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((float*)p, x);\n#else\n  union { int32_t i; float f; } old;\n  union { int32_t i; float f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i32_global((volatile __global int32_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline float atomic_fadd_f32_local(volatile __local float *p, float x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((float*)p, x);\n#else\n  union { int32_t i; float f; } old;\n  union { int32_t i; float f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i32_local((volatile __local int32_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline int32_t atomic_smax_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline int32_t atomic_smax_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline int32_t atomic_smin_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline int32_t atomic_smin_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline uint32_t atomic_umax_i32_global(volatile __global uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#endif\n}\n\ninline uint32_t atomic_umax_i32_local(volatile __local uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint32_t*)p, x);\n#else\n  return atomic_max(p, x);\n#",
            "endif\n}\n\ninline uint32_t atomic_umin_i32_global(volatile __global uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline uint32_t atomic_umin_i32_local(volatile __local uint32_t *p, uint32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint32_t*)p, x);\n#else\n  return atomic_min(p, x);\n#endif\n}\n\ninline int32_t atomic_and_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int32_t*)p, x);\n#else\n  return atomic_and(p, x);\n#endif\n}\n\ninline int32_t atomic_and_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int32_t*)p, x);\n#else\n  return atomic_and(p, x);\n#endif\n}\n\ninline int32_t atomic_or_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int32_t*)p, x);\n#else\n  return atomic_or(p, x);\n#endif\n}\n\ninline int32_t atomic_or_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int32_t*)p, x);\n#else\n  return atomic_or(p, x);\n#endif\n}\n\ninline int32_t atomic_xor_i32_global(volatile __global int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\ninline int32_t atomic_xor_i32_local(volatile __local int32_t *p, int32_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int32_t*)p, x);\n#else\n  return atomic_xor(p, x);\n#endif\n}\n\n// Start of 64 bit atomics\n\ninline int64_t atomic_xchg_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((uint64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\ninline int64_t atomic_xchg_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicExch((uint64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\ninline int64_t atomic_cmpxchg_i64_global(volatile __global int64_t *p,\n                                         int64_t cmp, int64_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCA",
            "S((uint64_t*)p, cmp, val);\n#else\n  return atom_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int64_t atomic_cmpxchg_i64_local(volatile __local int64_t *p,\n                                        int64_t cmp, int64_t val) {\n#ifdef FUTHARK_CUDA\n  return atomicCAS((uint64_t*)p, cmp, val);\n#else\n  return atom_cmpxchg(p, cmp, val);\n#endif\n}\n\ninline int64_t atomic_add_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((uint64_t*)p, x);\n#else\n  return atom_add(p, x);\n#endif\n}\n\ninline int64_t atomic_add_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAdd((uint64_t*)p, x);\n#else\n  return atom_add(p, x);\n#endif\n}\n\n#ifdef FUTHARK_F64_ENABLED\n\ninline double atomic_fadd_f64_global(volatile __global double *p, double x) {\n#if defined(FUTHARK_CUDA) && __CUDA_ARCH__ >= 600\n  return atomicAdd((double*)p, x);\n#else\n  union { int64_t i; double f; } old;\n  union { int64_t i; double f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i64_global((volatile __global int64_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\ninline double atomic_fadd_f64_local(volatile __local double *p, double x) {\n#if defined(FUTHARK_CUDA) && __CUDA_ARCH__ >= 600\n  return atomicAdd((double*)p, x);\n#else\n  union { int64_t i; double f; } old;\n  union { int64_t i; double f; } assumed;\n  old.f = *p;\n  do {\n    assumed.f = old.f;\n    old.f = old.f + x;\n    old.i = atomic_cmpxchg_i64_local((volatile __local int64_t*)p, assumed.i, old.i);\n  } while (assumed.i != old.i);\n  return old.f;\n#endif\n}\n\n#endif\n\ninline int64_t atomic_smax_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline int64_t atomic_smax_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((int64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninli",
            "ne int64_t atomic_smin_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline int64_t atomic_smin_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((int64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline uint64_t atomic_umax_i64_global(volatile __global uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline uint64_t atomic_umax_i64_local(volatile __local uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMax((uint64_t*)p, x);\n#else\n  return atom_max(p, x);\n#endif\n}\n\ninline uint64_t atomic_umin_i64_global(volatile __global uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline uint64_t atomic_umin_i64_local(volatile __local uint64_t *p, uint64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicMin((uint64_t*)p, x);\n#else\n  return atom_min(p, x);\n#endif\n}\n\ninline int64_t atomic_and_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int64_t*)p, x);\n#else\n  return atom_and(p, x);\n#endif\n}\n\ninline int64_t atomic_and_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicAnd((int64_t*)p, x);\n#else\n  return atom_and(p, x);\n#endif\n}\n\ninline int64_t atomic_or_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int64_t*)p, x);\n#else\n  return atom_or(p, x);\n#endif\n}\n\ninline int64_t atomic_or_i64_local(volatile __local int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicOr((int64_t*)p, x);\n#else\n  return atom_or(p, x);\n#endif\n}\n\ninline int64_t atomic_xor_i64_global(volatile __global int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\ninline int64_t atomic_xor_i64_local(volatile __loca",
            "l int64_t *p, int64_t x) {\n#ifdef FUTHARK_CUDA\n  return atomicXor((int64_t*)p, x);\n#else\n  return atom_xor(p, x);\n#endif\n}\n\n// End of atomics.h\n\n\n\n\n__kernel void builtinzhiota_i64ziiota_i64_32477(int32_t n_32473,\n                                                int64_t x_32474,\n                                                int64_t s_32475, __global\n                                                unsigned char *mem_32472)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t iota_gtid_32477;\n    int32_t iota_ltid_32478;\n    int32_t iota_gid_32479;\n    \n    iota_gtid_32477 = get_global_id(0);\n    iota_ltid_32478 = get_local_id(0);\n    iota_gid_32479 = get_group_id(0);\n    if (slt64(iota_gtid_32477, n_32473)) {\n        ((__global int64_t *) mem_32472)[sext_i32_i64(iota_gtid_32477)] =\n            add64(mul64(sext_i32_i64(iota_gtid_32477), s_32475), x_32474);\n    }\n    \n  error_0:\n    return;\n}\n__kernel void builtinzhreplicate_i32zireplicate_34186(int32_t num_elems_34183,\n                                                      int32_t val_34184,\n                                                      __global\n                                                      unsigned char *mem_34182)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_34186;\n    int32_t replicate_ltid_34187;\n    int32_t replicate_gid_34188;\n    \n    replicate_gtid_34186 = get_global_id(0);\n    replicate_ltid_34187 = get_local_id(0);\n    replicate_gid_34188 = get_group_id(0);\n    if (slt64(replicate_gtid_34186, num_elems_34183)) {\n        ((__global int32_t *) mem_34182)[sext_i32_i64(replicate_gtid_34186)] =\n            val_34184;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void builtinzhreplicate_i64zireplicate_32958(int32_t num_elems_32955,\n                                                      int64_t val_32956,\n                                                      __global\n            ",
            "                                          unsigned char *mem_32954)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_32958;\n    int32_t replicate_ltid_32959;\n    int32_t replicate_gid_32960;\n    \n    replicate_gtid_32958 = get_global_id(0);\n    replicate_ltid_32959 = get_local_id(0);\n    replicate_gid_32960 = get_group_id(0);\n    if (slt64(replicate_gtid_32958, num_elems_32955)) {\n        ((__global int64_t *) mem_32954)[sext_i32_i64(replicate_gtid_32958)] =\n            val_32956;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void builtinzhreplicate_i8zireplicate_32528(int32_t num_elems_32525,\n                                                     int8_t val_32526, __global\n                                                     unsigned char *mem_32524)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_32528;\n    int32_t replicate_ltid_32529;\n    int32_t replicate_gid_32530;\n    \n    replicate_gtid_32528 = get_global_id(0);\n    replicate_ltid_32529 = get_local_id(0);\n    replicate_gid_32530 = get_group_id(0);\n    if (slt64(replicate_gtid_32528, num_elems_32525)) {\n        ((__global int8_t *) mem_32524)[sext_i32_i64(replicate_gtid_32528)] =\n            val_32526;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void clusterPointszicopy_33050(int64_t num_segments_29020, __global\n                                        unsigned char *mem_31908, __global\n                                        unsigned char *mem_31910)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t copy_gtid_33050;\n    int32_t copy_ltid_33051;\n    int32_t copy_gid_33052;\n    \n    copy_gtid_33050 = get_global_id(0);\n    copy_ltid_33051 = get_local_id(0);\n    copy_gid_33052 = get_group_id(0);\n    if (slt64(sext_i32_i64(copy_gtid_33050), num_segments_29020)) {\n        ((__global int64_t *) mem_31910)[sext_i32_i64(copy_gti",
            "d_33050)] =\n            ((__global\n              int64_t *) mem_31908)[smod64(sext_i32_i64(copy_gtid_33050) +\n                                           (int64_t) -1, num_segments_29020)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void clusterPointszicopy_34172(int64_t num_segments_29516, __global\n                                        unsigned char *mem_32032, __global\n                                        unsigned char *mem_32034)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t copy_gtid_34172;\n    int32_t copy_ltid_34173;\n    int32_t copy_gid_34174;\n    \n    copy_gtid_34172 = get_global_id(0);\n    copy_ltid_34173 = get_local_id(0);\n    copy_gid_34174 = get_group_id(0);\n    if (slt64(sext_i32_i64(copy_gtid_34172), num_segments_29516)) {\n        ((__global int64_t *) mem_32034)[sext_i32_i64(copy_gtid_34172)] =\n            ((__global\n              int64_t *) mem_32032)[smod64(sext_i32_i64(copy_gtid_34172) +\n                                           (int64_t) -1, num_segments_29516)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void clusterPointszicopy_35365(int64_t num_segments_29900, __global\n                                        unsigned char *mem_32200, __global\n                                        unsigned char *mem_32202)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t copy_gtid_35365;\n    int32_t copy_ltid_35366;\n    int32_t copy_gid_35367;\n    \n    copy_gtid_35365 = get_global_id(0);\n    copy_ltid_35366 = get_local_id(0);\n    copy_gid_35367 = get_group_id(0);\n    if (slt64(sext_i32_i64(copy_gtid_35365), num_segments_29900)) {\n        ((__global int64_t *) mem_32202)[sext_i32_i64(copy_gtid_35365)] =\n            ((__global\n              int64_t *) mem_32200)[smod64(sext_i32_i64(copy_gtid_35365) +\n                                           (int64_t) -1, num_segments_29900)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void clusterPointszi",
            "copy_35682(int64_t num_segments_29961, __global\n                                        unsigned char *mem_32226, __global\n                                        unsigned char *mem_32228)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t copy_gtid_35682;\n    int32_t copy_ltid_35683;\n    int32_t copy_gid_35684;\n    \n    copy_gtid_35682 = get_global_id(0);\n    copy_ltid_35683 = get_local_id(0);\n    copy_gid_35684 = get_group_id(0);\n    if (slt64(sext_i32_i64(copy_gtid_35682), num_segments_29961)) {\n        ((__global int64_t *) mem_32228)[sext_i32_i64(copy_gtid_35682)] =\n            ((__global\n              int64_t *) mem_32226)[smod64(sext_i32_i64(copy_gtid_35682) +\n                                           (int64_t) -1, num_segments_29961)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void clusterPointszicopy_36376(int64_t partition_sizze_30057, __global\n                                        unsigned char *mem_32319, __global\n                                        unsigned char *mem_32321)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t copy_gtid_36376;\n    int32_t copy_ltid_36377;\n    int32_t copy_gid_36378;\n    \n    copy_gtid_36376 = get_global_id(0);\n    copy_ltid_36377 = get_local_id(0);\n    copy_gid_36378 = get_group_id(0);\n    if (slt64(sext_i32_i64(copy_gtid_36376), partition_sizze_30057)) {\n        ((__global int64_t *) mem_32321)[sext_i32_i64(copy_gtid_36376)] =\n            ((__global\n              int64_t *) mem_32319)[smod64(sext_i32_i64(copy_gtid_36376) +\n                                           (int64_t) -1,\n                                           partition_sizze_30057)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void clusterPointsziseghist_global_30743(__global int *global_failure,\n                                                  int64_t defunc_2_reduce_res_29111,\n                                                  int64_t num_grou",
            "ps_30740,\n                                                  int64_t bytes_31829,\n                                                  int32_t num_subhistos_33189,\n                                                  int32_t chk_i_33256,\n                                                  int64_t hist_H_chk_33257,\n                                                  __global\n                                                  unsigned char *mem_31931,\n                                                  __global\n                                                  unsigned char *defunc_1_map_res_subhistos_mem_33190)\n{\n    #define seghist_group_sizze_30738 (clusterPointsziseghist_group_sizze_30737)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33258;\n    int32_t local_tid_33259;\n    int64_t group_sizze_33262;\n    int32_t wave_sizze_33261;\n    int32_t group_tid_33260;\n    \n    global_tid_33258 = get_global_id(0);\n    local_tid_33259 = get_local_id(0);\n    group_sizze_33262 = get_local_size(0);\n    wave_sizze_33261 = LOCKSTEP_WIDTH;\n    group_tid_33260 = get_group_id(0);\n    \n    int32_t phys_tid_30743;\n    \n    phys_tid_30743 = global_tid_33258;\n    \n    int32_t subhisto_ind_33263;\n    \n    subhisto_ind_33263 = squot32(global_tid_33258,\n                                 sdiv_up32(sext_i64_i32(seghist_group_sizze_30738 *\n                                           num_groups_30740),\n                                           num_subhistos_33189));\n    for (int64_t i_33264 = 0; i_33264 < sdiv_up64(bytes_31829 -\n                                                  sext_i32_i64(global_tid_33258),\n                                                  sext_i32_i64(sext_i64_i32(seghist_group_sizze_30738 *\n                                                  num_groups_30740)));\n         i_33264++) {\n        int32_t gtid_30742 = sext_i64_i32(i_33264 *\n                sext_i32_i64(s",
            "ext_i64_i32(seghist_group_sizze_30738 *\n                num_groups_30740)) + sext_i32_i64(global_tid_33258));\n        \n        if (slt64(i_33264 *\n                  sext_i32_i64(sext_i64_i32(seghist_group_sizze_30738 *\n                  num_groups_30740)) + sext_i32_i64(global_tid_33258),\n                  bytes_31829)) {\n            int64_t i_p_o_31682 = add64((int64_t) -1, gtid_30742);\n            int64_t rot_i_31683 = smod64(i_p_o_31682, bytes_31829);\n            bool cond_30749 = gtid_30742 == (int64_t) 0;\n            int64_t defunc_1_f_res_30750;\n            \n            if (cond_30749) {\n                defunc_1_f_res_30750 = (int64_t) 0;\n            } else {\n                int64_t x_30748 = ((__global int64_t *) mem_31931)[rot_i_31683];\n                \n                defunc_1_f_res_30750 = x_30748;\n            }\n            // save map-out results\n            { }\n            // perform atomic updates\n            {\n                if (sle64(sext_i32_i64(chk_i_33256) * hist_H_chk_33257,\n                          defunc_1_f_res_30750) && (slt64(defunc_1_f_res_30750,\n                                                          sext_i32_i64(chk_i_33256) *\n                                                          hist_H_chk_33257 +\n                                                          hist_H_chk_33257) &&\n                                                    slt64(defunc_1_f_res_30750,\n                                                          defunc_2_reduce_res_29111))) {\n                    int64_t x_30744;\n                    int64_t x_30745;\n                    \n                    x_30745 = gtid_30742;\n                    \n                    int64_t old_33265;\n                    \n                    old_33265 = atomic_smax_i64_global(&((volatile __global\n                                                          int64_t *) defunc_1_map_res_subhistos_mem_33190)[sext_i32_i64(subhisto_ind_33263) *\n                                                               ",
            "                                            defunc_2_reduce_res_29111 +\n                                                                                                           defunc_1_f_res_30750],\n                                                       (int64_t) x_30745);\n                }\n            }\n        }\n    }\n    \n  error_0:\n    return;\n    #undef seghist_group_sizze_30738\n}\n__kernel void clusterPointsziseghist_global_31087(__global int *global_failure,\n                                                  int64_t n_28846,\n                                                  int64_t defunc_2_reduce_res_29639,\n                                                  int64_t num_groups_31084,\n                                                  int32_t num_subhistos_34419,\n                                                  int32_t chk_i_34486,\n                                                  int64_t hist_H_chk_34487,\n                                                  __global\n                                                  unsigned char *mem_32103,\n                                                  __global\n                                                  unsigned char *defunc_1_map_res_subhistos_mem_34420)\n{\n    #define seghist_group_sizze_31082 (clusterPointsziseghist_group_sizze_31081)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34488;\n    int32_t local_tid_34489;\n    int64_t group_sizze_34492;\n    int32_t wave_sizze_34491;\n    int32_t group_tid_34490;\n    \n    global_tid_34488 = get_global_id(0);\n    local_tid_34489 = get_local_id(0);\n    group_sizze_34492 = get_local_size(0);\n    wave_sizze_34491 = LOCKSTEP_WIDTH;\n    group_tid_34490 = get_group_id(0);\n    \n    int32_t phys_tid_31087;\n    \n    phys_tid_31087 = global_tid_34488;\n    \n    int32_t subhisto_ind_34493;\n    \n    subhisto_ind_34493 = squot32(global_tid_34488,\n                  ",
            "               sdiv_up32(sext_i64_i32(seghist_group_sizze_31082 *\n                                           num_groups_31084),\n                                           num_subhistos_34419));\n    for (int64_t i_34494 = 0; i_34494 < sdiv_up64(n_28846 -\n                                                  sext_i32_i64(global_tid_34488),\n                                                  sext_i32_i64(sext_i64_i32(seghist_group_sizze_31082 *\n                                                  num_groups_31084)));\n         i_34494++) {\n        int32_t gtid_31086 = sext_i64_i32(i_34494 *\n                sext_i32_i64(sext_i64_i32(seghist_group_sizze_31082 *\n                num_groups_31084)) + sext_i32_i64(global_tid_34488));\n        \n        if (slt64(i_34494 *\n                  sext_i32_i64(sext_i64_i32(seghist_group_sizze_31082 *\n                  num_groups_31084)) + sext_i32_i64(global_tid_34488),\n                  n_28846)) {\n            int64_t i_p_o_31706 = add64((int64_t) -1, gtid_31086);\n            int64_t rot_i_31707 = smod64(i_p_o_31706, n_28846);\n            bool cond_31093 = gtid_31086 == (int64_t) 0;\n            int64_t defunc_1_f_res_31094;\n            \n            if (cond_31093) {\n                defunc_1_f_res_31094 = (int64_t) 0;\n            } else {\n                int64_t x_31092 = ((__global int64_t *) mem_32103)[rot_i_31707];\n                \n                defunc_1_f_res_31094 = x_31092;\n            }\n            // save map-out results\n            { }\n            // perform atomic updates\n            {\n                if (sle64(sext_i32_i64(chk_i_34486) * hist_H_chk_34487,\n                          defunc_1_f_res_31094) && (slt64(defunc_1_f_res_31094,\n                                                          sext_i32_i64(chk_i_34486) *\n                                                          hist_H_chk_34487 +\n                                                          hist_H_chk_34487) &&\n                                                    slt64(def",
            "unc_1_f_res_31094,\n                                                          defunc_2_reduce_res_29639))) {\n                    int64_t x_31088;\n                    int64_t x_31089;\n                    \n                    x_31089 = gtid_31086;\n                    \n                    int64_t old_34495;\n                    \n                    old_34495 = atomic_smax_i64_global(&((volatile __global\n                                                          int64_t *) defunc_1_map_res_subhistos_mem_34420)[sext_i32_i64(subhisto_ind_34493) *\n                                                                                                           defunc_2_reduce_res_29639 +\n                                                                                                           defunc_1_f_res_31094],\n                                                       (int64_t) x_31089);\n                }\n            }\n        }\n    }\n    \n  error_0:\n    return;\n    #undef seghist_group_sizze_31082\n}\n__kernel void clusterPointsziseghist_global_31478(__global int *global_failure,\n                                                  int64_t partition_sizze_30057,\n                                                  int64_t defunc_2_reduce_res_30100,\n                                                  int64_t num_groups_31475,\n                                                  int32_t num_subhistos_36016,\n                                                  int32_t chk_i_36083,\n                                                  int64_t hist_H_chk_36084,\n                                                  __global\n                                                  unsigned char *mem_32300,\n                                                  __global\n                                                  unsigned char *defunc_1_map_res_subhistos_mem_36017)\n{\n    #define seghist_group_sizze_31473 (clusterPointsziseghist_group_sizze_31472)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    cons",
            "t int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36085;\n    int32_t local_tid_36086;\n    int64_t group_sizze_36089;\n    int32_t wave_sizze_36088;\n    int32_t group_tid_36087;\n    \n    global_tid_36085 = get_global_id(0);\n    local_tid_36086 = get_local_id(0);\n    group_sizze_36089 = get_local_size(0);\n    wave_sizze_36088 = LOCKSTEP_WIDTH;\n    group_tid_36087 = get_group_id(0);\n    \n    int32_t phys_tid_31478;\n    \n    phys_tid_31478 = global_tid_36085;\n    \n    int32_t subhisto_ind_36090;\n    \n    subhisto_ind_36090 = squot32(global_tid_36085,\n                                 sdiv_up32(sext_i64_i32(seghist_group_sizze_31473 *\n                                           num_groups_31475),\n                                           num_subhistos_36016));\n    for (int64_t i_36091 = 0; i_36091 < sdiv_up64(partition_sizze_30057 -\n                                                  sext_i32_i64(global_tid_36085),\n                                                  sext_i32_i64(sext_i64_i32(seghist_group_sizze_31473 *\n                                                  num_groups_31475)));\n         i_36091++) {\n        int32_t gtid_31477 = sext_i64_i32(i_36091 *\n                sext_i32_i64(sext_i64_i32(seghist_group_sizze_31473 *\n                num_groups_31475)) + sext_i32_i64(global_tid_36085));\n        \n        if (slt64(i_36091 *\n                  sext_i32_i64(sext_i64_i32(seghist_group_sizze_31473 *\n                  num_groups_31475)) + sext_i32_i64(global_tid_36085),\n                  partition_sizze_30057)) {\n            int64_t i_p_o_31731 = add64((int64_t) -1, gtid_31477);\n            int64_t rot_i_31732 = smod64(i_p_o_31731, partition_sizze_30057);\n            bool cond_31484 = gtid_31477 == (int64_t) 0;\n            int64_t defunc_1_f_res_31485;\n            \n            if (cond_31484) {\n                defunc_1_f_res_31485 = (int64_t) 0;\n            } else {\n                int64_t x_31483 = ((__global int64_t *) ",
            "mem_32300)[rot_i_31732];\n                \n                defunc_1_f_res_31485 = x_31483;\n            }\n            // save map-out results\n            { }\n            // perform atomic updates\n            {\n                if (sle64(sext_i32_i64(chk_i_36083) * hist_H_chk_36084,\n                          defunc_1_f_res_31485) && (slt64(defunc_1_f_res_31485,\n                                                          sext_i32_i64(chk_i_36083) *\n                                                          hist_H_chk_36084 +\n                                                          hist_H_chk_36084) &&\n                                                    slt64(defunc_1_f_res_31485,\n                                                          defunc_2_reduce_res_30100))) {\n                    int64_t x_31479;\n                    int64_t x_31480;\n                    \n                    x_31480 = gtid_31477;\n                    \n                    int64_t old_36092;\n                    \n                    old_36092 = atomic_smax_i64_global(&((volatile __global\n                                                          int64_t *) defunc_1_map_res_subhistos_mem_36017)[sext_i32_i64(subhisto_ind_36090) *\n                                                                                                           defunc_2_reduce_res_30100 +\n                                                                                                           defunc_1_f_res_31485],\n                                                       (int64_t) x_31480);\n                }\n            }\n        }\n    }\n    \n  error_0:\n    return;\n    #undef seghist_group_sizze_31473\n}\n__kernel void clusterPointsziseghist_global_31609(__global int *global_failure,\n                                                  int64_t sizze_30080,\n                                                  int64_t defunc_2_reduce_res_30210,\n                                                  int64_t num_groups_31606,\n                          ",
            "                        int32_t num_subhistos_36633,\n                                                  int32_t chk_i_36700,\n                                                  int64_t hist_H_chk_36701,\n                                                  __global\n                                                  unsigned char *mem_32338,\n                                                  __global\n                                                  unsigned char *defunc_1_map_res_subhistos_mem_36634)\n{\n    #define seghist_group_sizze_31604 (clusterPointsziseghist_group_sizze_31603)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36702;\n    int32_t local_tid_36703;\n    int64_t group_sizze_36706;\n    int32_t wave_sizze_36705;\n    int32_t group_tid_36704;\n    \n    global_tid_36702 = get_global_id(0);\n    local_tid_36703 = get_local_id(0);\n    group_sizze_36706 = get_local_size(0);\n    wave_sizze_36705 = LOCKSTEP_WIDTH;\n    group_tid_36704 = get_group_id(0);\n    \n    int32_t phys_tid_31609;\n    \n    phys_tid_31609 = global_tid_36702;\n    \n    int32_t subhisto_ind_36707;\n    \n    subhisto_ind_36707 = squot32(global_tid_36702,\n                                 sdiv_up32(sext_i64_i32(seghist_group_sizze_31604 *\n                                           num_groups_31606),\n                                           num_subhistos_36633));\n    for (int64_t i_36708 = 0; i_36708 < sdiv_up64(sizze_30080 -\n                                                  sext_i32_i64(global_tid_36702),\n                                                  sext_i32_i64(sext_i64_i32(seghist_group_sizze_31604 *\n                                                  num_groups_31606)));\n         i_36708++) {\n        int32_t gtid_31608 = sext_i64_i32(i_36708 *\n                sext_i32_i64(sext_i64_i32(seghist_group_sizze_31604 *\n                num_groups_31606)) + sext_i32_i64(global_tid_36702)",
            ");\n        \n        if (slt64(i_36708 *\n                  sext_i32_i64(sext_i64_i32(seghist_group_sizze_31604 *\n                  num_groups_31606)) + sext_i32_i64(global_tid_36702),\n                  sizze_30080)) {\n            int64_t i_p_o_31737 = add64((int64_t) -1, gtid_31608);\n            int64_t rot_i_31738 = smod64(i_p_o_31737, sizze_30080);\n            bool cond_31615 = gtid_31608 == (int64_t) 0;\n            int64_t defunc_1_f_res_31616;\n            \n            if (cond_31615) {\n                defunc_1_f_res_31616 = (int64_t) 0;\n            } else {\n                int64_t x_31614 = ((__global int64_t *) mem_32338)[rot_i_31738];\n                \n                defunc_1_f_res_31616 = x_31614;\n            }\n            // save map-out results\n            { }\n            // perform atomic updates\n            {\n                if (sle64(sext_i32_i64(chk_i_36700) * hist_H_chk_36701,\n                          defunc_1_f_res_31616) && (slt64(defunc_1_f_res_31616,\n                                                          sext_i32_i64(chk_i_36700) *\n                                                          hist_H_chk_36701 +\n                                                          hist_H_chk_36701) &&\n                                                    slt64(defunc_1_f_res_31616,\n                                                          defunc_2_reduce_res_30210))) {\n                    int64_t x_31610;\n                    int64_t x_31611;\n                    \n                    x_31611 = gtid_31608;\n                    \n                    int64_t old_36709;\n                    \n                    old_36709 = atomic_smax_i64_global(&((volatile __global\n                                                          int64_t *) defunc_1_map_res_subhistos_mem_36634)[sext_i32_i64(subhisto_ind_36707) *\n                                                                                                           defunc_2_reduce_res_30210 +\n                                   ",
            "                                                                        defunc_1_f_res_31616],\n                                                       (int64_t) x_31611);\n                }\n            }\n        }\n    }\n    \n  error_0:\n    return;\n    #undef seghist_group_sizze_31604\n}\n__kernel void clusterPointsziseghist_local_30743(__global int *global_failure,\n                                                 uint subhistogram_local_mem_33228_backing_offset_0,\n                                                 int64_t defunc_2_reduce_res_29111,\n                                                 int64_t bytes_31829,\n                                                 int32_t max_group_sizze_33199,\n                                                 int64_t num_groups_33200,\n                                                 int32_t hist_M_33206,\n                                                 int32_t chk_i_33211,\n                                                 int64_t num_segments_33212,\n                                                 int64_t hist_H_chk_33213,\n                                                 int64_t histo_sizze_33214,\n                                                 int32_t init_per_thread_33215,\n                                                 __global\n                                                 unsigned char *mem_31931,\n                                                 __global\n                                                 unsigned char *defunc_1_map_res_subhistos_mem_33190)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *subhistogram_local_mem_33228_backing_0 =\n                  &shared_mem[subhistogram_local_mem_33228_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33216;\n    int32_t local_tid_33217;\n    int64_t group_sizze_33220;\n    int32_t wave_sizze_33219;\n    int32_t group_tid_33218;\n    \n    global_tid_33216 = get_global_id(0);\n   ",
            " local_tid_33217 = get_local_id(0);\n    group_sizze_33220 = get_local_size(0);\n    wave_sizze_33219 = LOCKSTEP_WIDTH;\n    group_tid_33218 = get_group_id(0);\n    \n    int32_t phys_tid_30743;\n    \n    phys_tid_30743 = global_tid_33216;\n    \n    int32_t phys_group_id_33221;\n    \n    phys_group_id_33221 = get_group_id(0);\n    for (int32_t i_33222 = 0; i_33222 <\n         sdiv_up32(sext_i64_i32(num_groups_33200 * num_segments_33212) -\n                   phys_group_id_33221, sext_i64_i32(num_groups_33200));\n         i_33222++) {\n        int32_t virt_group_id_33223 = phys_group_id_33221 + i_33222 *\n                sext_i64_i32(num_groups_33200);\n        int32_t flat_segment_id_33224 = squot32(virt_group_id_33223,\n                                                sext_i64_i32(num_groups_33200));\n        int32_t gid_in_segment_33225 = srem32(virt_group_id_33223,\n                                              sext_i64_i32(num_groups_33200));\n        int32_t pgtid_in_segment_33226 = gid_in_segment_33225 *\n                sext_i64_i32(max_group_sizze_33199) + local_tid_33217;\n        int32_t threads_per_segment_33227 = sext_i64_i32(num_groups_33200 *\n                max_group_sizze_33199);\n        __local char *subhistogram_local_mem_33228;\n        \n        subhistogram_local_mem_33228 = (__local\n                                        char *) subhistogram_local_mem_33228_backing_0;\n        \n        int32_t thread_local_subhisto_i_33230;\n        \n        thread_local_subhisto_i_33230 = srem32(local_tid_33217, hist_M_33206);\n        // initialize histograms in local memory\n        {\n            for (int32_t local_i_33231 = 0; local_i_33231 <\n                 init_per_thread_33215; local_i_33231++) {\n                int32_t j_33232 = local_i_33231 *\n                        sext_i64_i32(max_group_sizze_33199) + local_tid_33217;\n                int32_t j_offset_33233 = hist_M_33206 *\n                        sext_i64_i32(histo_sizze_33214) * gid_in_segment_33225 +\n                      ",
            "  j_33232;\n                int32_t local_subhisto_i_33234 = squot32(j_33232,\n                                                         sext_i64_i32(histo_sizze_33214));\n                int32_t global_subhisto_i_33235 = squot32(j_offset_33233,\n                                                          sext_i64_i32(histo_sizze_33214));\n                \n                if (slt32(j_33232, hist_M_33206 *\n                          sext_i64_i32(histo_sizze_33214))) {\n                    // First subhistogram is initialised from global memory; others with neutral element.\n                    {\n                        if (global_subhisto_i_33235 == 0) {\n                            ((__local\n                              int64_t *) subhistogram_local_mem_33228)[sext_i32_i64(local_subhisto_i_33234) *\n                                                                       hist_H_chk_33213 +\n                                                                       sext_i32_i64(srem32(j_33232,\n                                                                                           sext_i64_i32(histo_sizze_33214)))] =\n                                ((__global\n                                  int64_t *) defunc_1_map_res_subhistos_mem_33190)[sext_i32_i64(srem32(j_33232,\n                                                                                                       sext_i64_i32(histo_sizze_33214))) +\n                                                                                   sext_i32_i64(chk_i_33211) *\n                                                                                   hist_H_chk_33213];\n                        } else {\n                            ((__local\n                              int64_t *) subhistogram_local_mem_33228)[sext_i32_i64(local_subhisto_i_33234) *\n                                                                       hist_H_chk_33213 +\n                                                                       sext_i32_i64(srem32(j_33232,\n     ",
            "                                                                                      sext_i64_i32(histo_sizze_33214)))] =\n                                (int64_t) 0;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33236 = 0; i_33236 <\n             sdiv_up32(sext_i64_i32(bytes_31829) - pgtid_in_segment_33226,\n                       threads_per_segment_33227); i_33236++) {\n            int32_t gtid_30742 = i_33236 * threads_per_segment_33227 +\n                    pgtid_in_segment_33226;\n            int64_t i_p_o_31682 = add64((int64_t) -1, gtid_30742);\n            int64_t rot_i_31683 = smod64(i_p_o_31682, bytes_31829);\n            bool cond_30749 = gtid_30742 == (int64_t) 0;\n            int64_t defunc_1_f_res_30750;\n            \n            if (cond_30749) {\n                defunc_1_f_res_30750 = (int64_t) 0;\n            } else {\n                int64_t x_30748 = ((__global int64_t *) mem_31931)[rot_i_31683];\n                \n                defunc_1_f_res_30750 = x_30748;\n            }\n            if (chk_i_33211 == 0) {\n                // save map-out results\n                { }\n            }\n            // perform atomic updates\n            {\n                if (slt64(defunc_1_f_res_30750, defunc_2_reduce_res_29111) &&\n                    (sle64(sext_i32_i64(chk_i_33211) * hist_H_chk_33213,\n                           defunc_1_f_res_30750) && slt64(defunc_1_f_res_30750,\n                                                          sext_i32_i64(chk_i_33211) *\n                                                          hist_H_chk_33213 +\n                                                          hist_H_chk_33213))) {\n                    int64_t x_30744;\n                    int64_t x_30745;\n                    \n                    x_30745 = gtid_30742;\n                    \n                    int64_t old_33237;\n                    \n                    old_33237 = atomic_sma",
            "x_i64_local(&((volatile __local\n                                                         int64_t *) subhistogram_local_mem_33228)[sext_i32_i64(thread_local_subhisto_i_33230) *\n                                                                                                  hist_H_chk_33213 +\n                                                                                                  (defunc_1_f_res_30750 -\n                                                                                                   sext_i32_i64(chk_i_33211) *\n                                                                                                   hist_H_chk_33213)],\n                                                      (int64_t) x_30745);\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // Compact the multiple local memory subhistograms to result in global memory\n        {\n            int64_t trunc_H_33238 = smin64(hist_H_chk_33213,\n                                           defunc_2_reduce_res_29111 -\n                                           sext_i32_i64(chk_i_33211) *\n                                           hist_H_chk_33213);\n            int32_t histo_sizze_33239 = sext_i64_i32(trunc_H_33238);\n            \n            for (int32_t local_i_33240 = 0; local_i_33240 <\n                 init_per_thread_33215; local_i_33240++) {\n                int32_t j_33241 = local_i_33240 *\n                        sext_i64_i32(max_group_sizze_33199) + local_tid_33217;\n                \n                if (slt32(j_33241, histo_sizze_33239)) {\n                    int64_t x_30744;\n                    int64_t x_30745;\n                    \n                    // Read values from subhistogram 0.\n                    {\n                        x_30744 = ((__local\n                                    int64_t *) subhistogram_local_mem_33228)[sext_i32_i64(j_33241)];\n                    }\n                    // Accumulate based on values in other subhistograms.\n      ",
            "              {\n                        for (int32_t subhisto_id_33242 = 0; subhisto_id_33242 <\n                             hist_M_33206 - 1; subhisto_id_33242++) {\n                            x_30745 = ((__local\n                                        int64_t *) subhistogram_local_mem_33228)[(sext_i32_i64(subhisto_id_33242) +\n                                                                                  (int64_t) 1) *\n                                                                                 hist_H_chk_33213 +\n                                                                                 sext_i32_i64(j_33241)];\n                            \n                            int64_t defunc_1_f_res_30746;\n                            \n                            defunc_1_f_res_30746 = smax64(x_30744, x_30745);\n                            x_30744 = defunc_1_f_res_30746;\n                        }\n                    }\n                    // Put final bucket value in global memory.\n                    {\n                        ((__global\n                          int64_t *) defunc_1_map_res_subhistos_mem_33190)[srem64(sext_i32_i64(virt_group_id_33223),\n                                                                                  num_groups_33200) *\n                                                                           defunc_2_reduce_res_29111 +\n                                                                           (sext_i32_i64(j_33241) +\n                                                                            sext_i32_i64(chk_i_33211) *\n                                                                            hist_H_chk_33213)] =\n                            x_30744;\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n}\n__kernel void clusterPointsziseghist_local_31087(__global int *global_failure,\n                                              ",
            "   uint subhistogram_local_mem_34458_backing_offset_0,\n                                                 int64_t n_28846,\n                                                 int64_t defunc_2_reduce_res_29639,\n                                                 int32_t max_group_sizze_34429,\n                                                 int64_t num_groups_34430,\n                                                 int32_t hist_M_34436,\n                                                 int32_t chk_i_34441,\n                                                 int64_t num_segments_34442,\n                                                 int64_t hist_H_chk_34443,\n                                                 int64_t histo_sizze_34444,\n                                                 int32_t init_per_thread_34445,\n                                                 __global\n                                                 unsigned char *mem_32103,\n                                                 __global\n                                                 unsigned char *defunc_1_map_res_subhistos_mem_34420)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *subhistogram_local_mem_34458_backing_0 =\n                  &shared_mem[subhistogram_local_mem_34458_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34446;\n    int32_t local_tid_34447;\n    int64_t group_sizze_34450;\n    int32_t wave_sizze_34449;\n    int32_t group_tid_34448;\n    \n    global_tid_34446 = get_global_id(0);\n    local_tid_34447 = get_local_id(0);\n    group_sizze_34450 = get_local_size(0);\n    wave_sizze_34449 = LOCKSTEP_WIDTH;\n    group_tid_34448 = get_group_id(0);\n    \n    int32_t phys_tid_31087;\n    \n    phys_tid_31087 = global_tid_34446;\n    \n    int32_t phys_group_id_34451;\n    \n    phys_group_id_34451 = get_group_id(0);\n    for (int32_t i_34452 = 0; i_34452 <\n         sdiv_up32(sext_i64_i32(num_groups_34430 * num",
            "_segments_34442) -\n                   phys_group_id_34451, sext_i64_i32(num_groups_34430));\n         i_34452++) {\n        int32_t virt_group_id_34453 = phys_group_id_34451 + i_34452 *\n                sext_i64_i32(num_groups_34430);\n        int32_t flat_segment_id_34454 = squot32(virt_group_id_34453,\n                                                sext_i64_i32(num_groups_34430));\n        int32_t gid_in_segment_34455 = srem32(virt_group_id_34453,\n                                              sext_i64_i32(num_groups_34430));\n        int32_t pgtid_in_segment_34456 = gid_in_segment_34455 *\n                sext_i64_i32(max_group_sizze_34429) + local_tid_34447;\n        int32_t threads_per_segment_34457 = sext_i64_i32(num_groups_34430 *\n                max_group_sizze_34429);\n        __local char *subhistogram_local_mem_34458;\n        \n        subhistogram_local_mem_34458 = (__local\n                                        char *) subhistogram_local_mem_34458_backing_0;\n        \n        int32_t thread_local_subhisto_i_34460;\n        \n        thread_local_subhisto_i_34460 = srem32(local_tid_34447, hist_M_34436);\n        // initialize histograms in local memory\n        {\n            for (int32_t local_i_34461 = 0; local_i_34461 <\n                 init_per_thread_34445; local_i_34461++) {\n                int32_t j_34462 = local_i_34461 *\n                        sext_i64_i32(max_group_sizze_34429) + local_tid_34447;\n                int32_t j_offset_34463 = hist_M_34436 *\n                        sext_i64_i32(histo_sizze_34444) * gid_in_segment_34455 +\n                        j_34462;\n                int32_t local_subhisto_i_34464 = squot32(j_34462,\n                                                         sext_i64_i32(histo_sizze_34444));\n                int32_t global_subhisto_i_34465 = squot32(j_offset_34463,\n                                                          sext_i64_i32(histo_sizze_34444));\n                \n                if (slt32(j_34462, hist_M_34436 *\n             ",
            "             sext_i64_i32(histo_sizze_34444))) {\n                    // First subhistogram is initialised from global memory; others with neutral element.\n                    {\n                        if (global_subhisto_i_34465 == 0) {\n                            ((__local\n                              int64_t *) subhistogram_local_mem_34458)[sext_i32_i64(local_subhisto_i_34464) *\n                                                                       hist_H_chk_34443 +\n                                                                       sext_i32_i64(srem32(j_34462,\n                                                                                           sext_i64_i32(histo_sizze_34444)))] =\n                                ((__global\n                                  int64_t *) defunc_1_map_res_subhistos_mem_34420)[sext_i32_i64(srem32(j_34462,\n                                                                                                       sext_i64_i32(histo_sizze_34444))) +\n                                                                                   sext_i32_i64(chk_i_34441) *\n                                                                                   hist_H_chk_34443];\n                        } else {\n                            ((__local\n                              int64_t *) subhistogram_local_mem_34458)[sext_i32_i64(local_subhisto_i_34464) *\n                                                                       hist_H_chk_34443 +\n                                                                       sext_i32_i64(srem32(j_34462,\n                                                                                           sext_i64_i32(histo_sizze_34444)))] =\n                                (int64_t) 0;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34466 = 0; i_34466 < sdiv_up32(sext_i64_i32(n_28846) -\n                                        ",
            "              pgtid_in_segment_34456,\n                                                      threads_per_segment_34457);\n             i_34466++) {\n            int32_t gtid_31086 = i_34466 * threads_per_segment_34457 +\n                    pgtid_in_segment_34456;\n            int64_t i_p_o_31706 = add64((int64_t) -1, gtid_31086);\n            int64_t rot_i_31707 = smod64(i_p_o_31706, n_28846);\n            bool cond_31093 = gtid_31086 == (int64_t) 0;\n            int64_t defunc_1_f_res_31094;\n            \n            if (cond_31093) {\n                defunc_1_f_res_31094 = (int64_t) 0;\n            } else {\n                int64_t x_31092 = ((__global int64_t *) mem_32103)[rot_i_31707];\n                \n                defunc_1_f_res_31094 = x_31092;\n            }\n            if (chk_i_34441 == 0) {\n                // save map-out results\n                { }\n            }\n            // perform atomic updates\n            {\n                if (slt64(defunc_1_f_res_31094, defunc_2_reduce_res_29639) &&\n                    (sle64(sext_i32_i64(chk_i_34441) * hist_H_chk_34443,\n                           defunc_1_f_res_31094) && slt64(defunc_1_f_res_31094,\n                                                          sext_i32_i64(chk_i_34441) *\n                                                          hist_H_chk_34443 +\n                                                          hist_H_chk_34443))) {\n                    int64_t x_31088;\n                    int64_t x_31089;\n                    \n                    x_31089 = gtid_31086;\n                    \n                    int64_t old_34467;\n                    \n                    old_34467 = atomic_smax_i64_local(&((volatile __local\n                                                         int64_t *) subhistogram_local_mem_34458)[sext_i32_i64(thread_local_subhisto_i_34460) *\n                                                                                                  hist_H_chk_34443 +\n                                            ",
            "                                                      (defunc_1_f_res_31094 -\n                                                                                                   sext_i32_i64(chk_i_34441) *\n                                                                                                   hist_H_chk_34443)],\n                                                      (int64_t) x_31089);\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // Compact the multiple local memory subhistograms to result in global memory\n        {\n            int64_t trunc_H_34468 = smin64(hist_H_chk_34443,\n                                           defunc_2_reduce_res_29639 -\n                                           sext_i32_i64(chk_i_34441) *\n                                           hist_H_chk_34443);\n            int32_t histo_sizze_34469 = sext_i64_i32(trunc_H_34468);\n            \n            for (int32_t local_i_34470 = 0; local_i_34470 <\n                 init_per_thread_34445; local_i_34470++) {\n                int32_t j_34471 = local_i_34470 *\n                        sext_i64_i32(max_group_sizze_34429) + local_tid_34447;\n                \n                if (slt32(j_34471, histo_sizze_34469)) {\n                    int64_t x_31088;\n                    int64_t x_31089;\n                    \n                    // Read values from subhistogram 0.\n                    {\n                        x_31088 = ((__local\n                                    int64_t *) subhistogram_local_mem_34458)[sext_i32_i64(j_34471)];\n                    }\n                    // Accumulate based on values in other subhistograms.\n                    {\n                        for (int32_t subhisto_id_34472 = 0; subhisto_id_34472 <\n                             hist_M_34436 - 1; subhisto_id_34472++) {\n                            x_31089 = ((__local\n                                        int64_t *) subhistogram_local_mem_34458)[(sext_i32_i64(subhisto_id_34472) +\n       ",
            "                                                                           (int64_t) 1) *\n                                                                                 hist_H_chk_34443 +\n                                                                                 sext_i32_i64(j_34471)];\n                            \n                            int64_t defunc_1_f_res_31090;\n                            \n                            defunc_1_f_res_31090 = smax64(x_31088, x_31089);\n                            x_31088 = defunc_1_f_res_31090;\n                        }\n                    }\n                    // Put final bucket value in global memory.\n                    {\n                        ((__global\n                          int64_t *) defunc_1_map_res_subhistos_mem_34420)[srem64(sext_i32_i64(virt_group_id_34453),\n                                                                                  num_groups_34430) *\n                                                                           defunc_2_reduce_res_29639 +\n                                                                           (sext_i32_i64(j_34471) +\n                                                                            sext_i32_i64(chk_i_34441) *\n                                                                            hist_H_chk_34443)] =\n                            x_31088;\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n}\n__kernel void clusterPointsziseghist_local_31478(__global int *global_failure,\n                                                 uint subhistogram_local_mem_36055_backing_offset_0,\n                                                 int64_t partition_sizze_30057,\n                                                 int64_t defunc_2_reduce_res_30100,\n                                                 int32_t max_group_sizze_36026,\n                                      ",
            "           int64_t num_groups_36027,\n                                                 int32_t hist_M_36033,\n                                                 int32_t chk_i_36038,\n                                                 int64_t num_segments_36039,\n                                                 int64_t hist_H_chk_36040,\n                                                 int64_t histo_sizze_36041,\n                                                 int32_t init_per_thread_36042,\n                                                 __global\n                                                 unsigned char *mem_32300,\n                                                 __global\n                                                 unsigned char *defunc_1_map_res_subhistos_mem_36017)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *subhistogram_local_mem_36055_backing_0 =\n                  &shared_mem[subhistogram_local_mem_36055_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36043;\n    int32_t local_tid_36044;\n    int64_t group_sizze_36047;\n    int32_t wave_sizze_36046;\n    int32_t group_tid_36045;\n    \n    global_tid_36043 = get_global_id(0);\n    local_tid_36044 = get_local_id(0);\n    group_sizze_36047 = get_local_size(0);\n    wave_sizze_36046 = LOCKSTEP_WIDTH;\n    group_tid_36045 = get_group_id(0);\n    \n    int32_t phys_tid_31478;\n    \n    phys_tid_31478 = global_tid_36043;\n    \n    int32_t phys_group_id_36048;\n    \n    phys_group_id_36048 = get_group_id(0);\n    for (int32_t i_36049 = 0; i_36049 <\n         sdiv_up32(sext_i64_i32(num_groups_36027 * num_segments_36039) -\n                   phys_group_id_36048, sext_i64_i32(num_groups_36027));\n         i_36049++) {\n        int32_t virt_group_id_36050 = phys_group_id_36048 + i_36049 *\n                sext_i64_i32(num_groups_36027);\n        int32_t flat_segment_id_36051 = squot32(virt_group_id_36050,\n                      ",
            "                          sext_i64_i32(num_groups_36027));\n        int32_t gid_in_segment_36052 = srem32(virt_group_id_36050,\n                                              sext_i64_i32(num_groups_36027));\n        int32_t pgtid_in_segment_36053 = gid_in_segment_36052 *\n                sext_i64_i32(max_group_sizze_36026) + local_tid_36044;\n        int32_t threads_per_segment_36054 = sext_i64_i32(num_groups_36027 *\n                max_group_sizze_36026);\n        __local char *subhistogram_local_mem_36055;\n        \n        subhistogram_local_mem_36055 = (__local\n                                        char *) subhistogram_local_mem_36055_backing_0;\n        \n        int32_t thread_local_subhisto_i_36057;\n        \n        thread_local_subhisto_i_36057 = srem32(local_tid_36044, hist_M_36033);\n        // initialize histograms in local memory\n        {\n            for (int32_t local_i_36058 = 0; local_i_36058 <\n                 init_per_thread_36042; local_i_36058++) {\n                int32_t j_36059 = local_i_36058 *\n                        sext_i64_i32(max_group_sizze_36026) + local_tid_36044;\n                int32_t j_offset_36060 = hist_M_36033 *\n                        sext_i64_i32(histo_sizze_36041) * gid_in_segment_36052 +\n                        j_36059;\n                int32_t local_subhisto_i_36061 = squot32(j_36059,\n                                                         sext_i64_i32(histo_sizze_36041));\n                int32_t global_subhisto_i_36062 = squot32(j_offset_36060,\n                                                          sext_i64_i32(histo_sizze_36041));\n                \n                if (slt32(j_36059, hist_M_36033 *\n                          sext_i64_i32(histo_sizze_36041))) {\n                    // First subhistogram is initialised from global memory; others with neutral element.\n                    {\n                        if (global_subhisto_i_36062 == 0) {\n                            ((__local\n                              int64_t *) subhist",
            "ogram_local_mem_36055)[sext_i32_i64(local_subhisto_i_36061) *\n                                                                       hist_H_chk_36040 +\n                                                                       sext_i32_i64(srem32(j_36059,\n                                                                                           sext_i64_i32(histo_sizze_36041)))] =\n                                ((__global\n                                  int64_t *) defunc_1_map_res_subhistos_mem_36017)[sext_i32_i64(srem32(j_36059,\n                                                                                                       sext_i64_i32(histo_sizze_36041))) +\n                                                                                   sext_i32_i64(chk_i_36038) *\n                                                                                   hist_H_chk_36040];\n                        } else {\n                            ((__local\n                              int64_t *) subhistogram_local_mem_36055)[sext_i32_i64(local_subhisto_i_36061) *\n                                                                       hist_H_chk_36040 +\n                                                                       sext_i32_i64(srem32(j_36059,\n                                                                                           sext_i64_i32(histo_sizze_36041)))] =\n                                (int64_t) 0;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36063 = 0; i_36063 <\n             sdiv_up32(sext_i64_i32(partition_sizze_30057) -\n                       pgtid_in_segment_36053, threads_per_segment_36054);\n             i_36063++) {\n            int32_t gtid_31477 = i_36063 * threads_per_segment_36054 +\n                    pgtid_in_segment_36053;\n            int64_t i_p_o_31731 = add64((int64_t) -1, gtid_31477);\n            int64_t rot_i_31732 = smod64(i_p_o_31731,",
            " partition_sizze_30057);\n            bool cond_31484 = gtid_31477 == (int64_t) 0;\n            int64_t defunc_1_f_res_31485;\n            \n            if (cond_31484) {\n                defunc_1_f_res_31485 = (int64_t) 0;\n            } else {\n                int64_t x_31483 = ((__global int64_t *) mem_32300)[rot_i_31732];\n                \n                defunc_1_f_res_31485 = x_31483;\n            }\n            if (chk_i_36038 == 0) {\n                // save map-out results\n                { }\n            }\n            // perform atomic updates\n            {\n                if (slt64(defunc_1_f_res_31485, defunc_2_reduce_res_30100) &&\n                    (sle64(sext_i32_i64(chk_i_36038) * hist_H_chk_36040,\n                           defunc_1_f_res_31485) && slt64(defunc_1_f_res_31485,\n                                                          sext_i32_i64(chk_i_36038) *\n                                                          hist_H_chk_36040 +\n                                                          hist_H_chk_36040))) {\n                    int64_t x_31479;\n                    int64_t x_31480;\n                    \n                    x_31480 = gtid_31477;\n                    \n                    int64_t old_36064;\n                    \n                    old_36064 = atomic_smax_i64_local(&((volatile __local\n                                                         int64_t *) subhistogram_local_mem_36055)[sext_i32_i64(thread_local_subhisto_i_36057) *\n                                                                                                  hist_H_chk_36040 +\n                                                                                                  (defunc_1_f_res_31485 -\n                                                                                                   sext_i32_i64(chk_i_36038) *\n                                                                                                   hist_H_chk_36040)],\n                                           ",
            "           (int64_t) x_31480);\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // Compact the multiple local memory subhistograms to result in global memory\n        {\n            int64_t trunc_H_36065 = smin64(hist_H_chk_36040,\n                                           defunc_2_reduce_res_30100 -\n                                           sext_i32_i64(chk_i_36038) *\n                                           hist_H_chk_36040);\n            int32_t histo_sizze_36066 = sext_i64_i32(trunc_H_36065);\n            \n            for (int32_t local_i_36067 = 0; local_i_36067 <\n                 init_per_thread_36042; local_i_36067++) {\n                int32_t j_36068 = local_i_36067 *\n                        sext_i64_i32(max_group_sizze_36026) + local_tid_36044;\n                \n                if (slt32(j_36068, histo_sizze_36066)) {\n                    int64_t x_31479;\n                    int64_t x_31480;\n                    \n                    // Read values from subhistogram 0.\n                    {\n                        x_31479 = ((__local\n                                    int64_t *) subhistogram_local_mem_36055)[sext_i32_i64(j_36068)];\n                    }\n                    // Accumulate based on values in other subhistograms.\n                    {\n                        for (int32_t subhisto_id_36069 = 0; subhisto_id_36069 <\n                             hist_M_36033 - 1; subhisto_id_36069++) {\n                            x_31480 = ((__local\n                                        int64_t *) subhistogram_local_mem_36055)[(sext_i32_i64(subhisto_id_36069) +\n                                                                                  (int64_t) 1) *\n                                                                                 hist_H_chk_36040 +\n                                                                                 sext_i32_i64(j_36068)];\n                            \n                            int64_t defunc_",
            "1_f_res_31481;\n                            \n                            defunc_1_f_res_31481 = smax64(x_31479, x_31480);\n                            x_31479 = defunc_1_f_res_31481;\n                        }\n                    }\n                    // Put final bucket value in global memory.\n                    {\n                        ((__global\n                          int64_t *) defunc_1_map_res_subhistos_mem_36017)[srem64(sext_i32_i64(virt_group_id_36050),\n                                                                                  num_groups_36027) *\n                                                                           defunc_2_reduce_res_30100 +\n                                                                           (sext_i32_i64(j_36068) +\n                                                                            sext_i32_i64(chk_i_36038) *\n                                                                            hist_H_chk_36040)] =\n                            x_31479;\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n}\n__kernel void clusterPointsziseghist_local_31609(__global int *global_failure,\n                                                 uint subhistogram_local_mem_36672_backing_offset_0,\n                                                 int64_t sizze_30080,\n                                                 int64_t defunc_2_reduce_res_30210,\n                                                 int32_t max_group_sizze_36643,\n                                                 int64_t num_groups_36644,\n                                                 int32_t hist_M_36650,\n                                                 int32_t chk_i_36655,\n                                                 int64_t num_segments_36656,\n                                                 int64_t hist_H_chk_36657,\n                                               ",
            "  int64_t histo_sizze_36658,\n                                                 int32_t init_per_thread_36659,\n                                                 __global\n                                                 unsigned char *mem_32338,\n                                                 __global\n                                                 unsigned char *defunc_1_map_res_subhistos_mem_36634)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *subhistogram_local_mem_36672_backing_0 =\n                  &shared_mem[subhistogram_local_mem_36672_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36660;\n    int32_t local_tid_36661;\n    int64_t group_sizze_36664;\n    int32_t wave_sizze_36663;\n    int32_t group_tid_36662;\n    \n    global_tid_36660 = get_global_id(0);\n    local_tid_36661 = get_local_id(0);\n    group_sizze_36664 = get_local_size(0);\n    wave_sizze_36663 = LOCKSTEP_WIDTH;\n    group_tid_36662 = get_group_id(0);\n    \n    int32_t phys_tid_31609;\n    \n    phys_tid_31609 = global_tid_36660;\n    \n    int32_t phys_group_id_36665;\n    \n    phys_group_id_36665 = get_group_id(0);\n    for (int32_t i_36666 = 0; i_36666 <\n         sdiv_up32(sext_i64_i32(num_groups_36644 * num_segments_36656) -\n                   phys_group_id_36665, sext_i64_i32(num_groups_36644));\n         i_36666++) {\n        int32_t virt_group_id_36667 = phys_group_id_36665 + i_36666 *\n                sext_i64_i32(num_groups_36644);\n        int32_t flat_segment_id_36668 = squot32(virt_group_id_36667,\n                                                sext_i64_i32(num_groups_36644));\n        int32_t gid_in_segment_36669 = srem32(virt_group_id_36667,\n                                              sext_i64_i32(num_groups_36644));\n        int32_t pgtid_in_segment_36670 = gid_in_segment_36669 *\n                sext_i64_i32(max_group_sizze_36643) + local_tid_36661;\n        int32_t threads_per_segment_3",
            "6671 = sext_i64_i32(num_groups_36644 *\n                max_group_sizze_36643);\n        __local char *subhistogram_local_mem_36672;\n        \n        subhistogram_local_mem_36672 = (__local\n                                        char *) subhistogram_local_mem_36672_backing_0;\n        \n        int32_t thread_local_subhisto_i_36674;\n        \n        thread_local_subhisto_i_36674 = srem32(local_tid_36661, hist_M_36650);\n        // initialize histograms in local memory\n        {\n            for (int32_t local_i_36675 = 0; local_i_36675 <\n                 init_per_thread_36659; local_i_36675++) {\n                int32_t j_36676 = local_i_36675 *\n                        sext_i64_i32(max_group_sizze_36643) + local_tid_36661;\n                int32_t j_offset_36677 = hist_M_36650 *\n                        sext_i64_i32(histo_sizze_36658) * gid_in_segment_36669 +\n                        j_36676;\n                int32_t local_subhisto_i_36678 = squot32(j_36676,\n                                                         sext_i64_i32(histo_sizze_36658));\n                int32_t global_subhisto_i_36679 = squot32(j_offset_36677,\n                                                          sext_i64_i32(histo_sizze_36658));\n                \n                if (slt32(j_36676, hist_M_36650 *\n                          sext_i64_i32(histo_sizze_36658))) {\n                    // First subhistogram is initialised from global memory; others with neutral element.\n                    {\n                        if (global_subhisto_i_36679 == 0) {\n                            ((__local\n                              int64_t *) subhistogram_local_mem_36672)[sext_i32_i64(local_subhisto_i_36678) *\n                                                                       hist_H_chk_36657 +\n                                                                       sext_i32_i64(srem32(j_36676,\n                                                                                           sext_i64_i32(histo_sizze_36658)))]",
            " =\n                                ((__global\n                                  int64_t *) defunc_1_map_res_subhistos_mem_36634)[sext_i32_i64(srem32(j_36676,\n                                                                                                       sext_i64_i32(histo_sizze_36658))) +\n                                                                                   sext_i32_i64(chk_i_36655) *\n                                                                                   hist_H_chk_36657];\n                        } else {\n                            ((__local\n                              int64_t *) subhistogram_local_mem_36672)[sext_i32_i64(local_subhisto_i_36678) *\n                                                                       hist_H_chk_36657 +\n                                                                       sext_i32_i64(srem32(j_36676,\n                                                                                           sext_i64_i32(histo_sizze_36658)))] =\n                                (int64_t) 0;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36680 = 0; i_36680 <\n             sdiv_up32(sext_i64_i32(sizze_30080) - pgtid_in_segment_36670,\n                       threads_per_segment_36671); i_36680++) {\n            int32_t gtid_31608 = i_36680 * threads_per_segment_36671 +\n                    pgtid_in_segment_36670;\n            int64_t i_p_o_31737 = add64((int64_t) -1, gtid_31608);\n            int64_t rot_i_31738 = smod64(i_p_o_31737, sizze_30080);\n            bool cond_31615 = gtid_31608 == (int64_t) 0;\n            int64_t defunc_1_f_res_31616;\n            \n            if (cond_31615) {\n                defunc_1_f_res_31616 = (int64_t) 0;\n            } else {\n                int64_t x_31614 = ((__global int64_t *) mem_32338)[rot_i_31738];\n                \n                defunc_1_f_res_31616 = x_31614;\n            }\n          ",
            "  if (chk_i_36655 == 0) {\n                // save map-out results\n                { }\n            }\n            // perform atomic updates\n            {\n                if (slt64(defunc_1_f_res_31616, defunc_2_reduce_res_30210) &&\n                    (sle64(sext_i32_i64(chk_i_36655) * hist_H_chk_36657,\n                           defunc_1_f_res_31616) && slt64(defunc_1_f_res_31616,\n                                                          sext_i32_i64(chk_i_36655) *\n                                                          hist_H_chk_36657 +\n                                                          hist_H_chk_36657))) {\n                    int64_t x_31610;\n                    int64_t x_31611;\n                    \n                    x_31611 = gtid_31608;\n                    \n                    int64_t old_36681;\n                    \n                    old_36681 = atomic_smax_i64_local(&((volatile __local\n                                                         int64_t *) subhistogram_local_mem_36672)[sext_i32_i64(thread_local_subhisto_i_36674) *\n                                                                                                  hist_H_chk_36657 +\n                                                                                                  (defunc_1_f_res_31616 -\n                                                                                                   sext_i32_i64(chk_i_36655) *\n                                                                                                   hist_H_chk_36657)],\n                                                      (int64_t) x_31611);\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // Compact the multiple local memory subhistograms to result in global memory\n        {\n            int64_t trunc_H_36682 = smin64(hist_H_chk_36657,\n                                           defunc_2_reduce_res_30210 -\n                                           sext_i32_i64(chk_i_36655) *\n",
            "                                           hist_H_chk_36657);\n            int32_t histo_sizze_36683 = sext_i64_i32(trunc_H_36682);\n            \n            for (int32_t local_i_36684 = 0; local_i_36684 <\n                 init_per_thread_36659; local_i_36684++) {\n                int32_t j_36685 = local_i_36684 *\n                        sext_i64_i32(max_group_sizze_36643) + local_tid_36661;\n                \n                if (slt32(j_36685, histo_sizze_36683)) {\n                    int64_t x_31610;\n                    int64_t x_31611;\n                    \n                    // Read values from subhistogram 0.\n                    {\n                        x_31610 = ((__local\n                                    int64_t *) subhistogram_local_mem_36672)[sext_i32_i64(j_36685)];\n                    }\n                    // Accumulate based on values in other subhistograms.\n                    {\n                        for (int32_t subhisto_id_36686 = 0; subhisto_id_36686 <\n                             hist_M_36650 - 1; subhisto_id_36686++) {\n                            x_31611 = ((__local\n                                        int64_t *) subhistogram_local_mem_36672)[(sext_i32_i64(subhisto_id_36686) +\n                                                                                  (int64_t) 1) *\n                                                                                 hist_H_chk_36657 +\n                                                                                 sext_i32_i64(j_36685)];\n                            \n                            int64_t defunc_1_f_res_31612;\n                            \n                            defunc_1_f_res_31612 = smax64(x_31610, x_31611);\n                            x_31610 = defunc_1_f_res_31612;\n                        }\n                    }\n                    // Put final bucket value in global memory.\n                    {\n                        ((__global\n                          int64_t *) defunc_1_map_res_subhis",
            "tos_mem_36634)[srem64(sext_i32_i64(virt_group_id_36667),\n                                                                                  num_groups_36644) *\n                                                                           defunc_2_reduce_res_30210 +\n                                                                           (sext_i32_i64(j_36685) +\n                                                                            sext_i32_i64(chk_i_36655) *\n                                                                            hist_H_chk_36657)] =\n                            x_31610;\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n}\n__kernel void clusterPointszisegmap_30254(__global int *global_failure,\n                                          int64_t n_28846,\n                                          int32_t nHashBit_28847, __global\n                                          unsigned char *mem_31837, __global\n                                          unsigned char *mem_31840)\n{\n    #define segmap_group_sizze_30334 (clusterPointszisegmap_group_sizze_30256)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32492;\n    int32_t local_tid_32493;\n    int64_t group_sizze_32496;\n    int32_t wave_sizze_32495;\n    int32_t group_tid_32494;\n    \n    global_tid_32492 = get_global_id(0);\n    local_tid_32493 = get_local_id(0);\n    group_sizze_32496 = get_local_size(0);\n    wave_sizze_32495 = LOCKSTEP_WIDTH;\n    group_tid_32494 = get_group_id(0);\n    \n    int32_t phys_tid_30254;\n    \n    phys_tid_30254 = global_tid_32492;\n    \n    int64_t gtid_30253;\n    \n    gtid_30253 = sext_i32_i64(group_tid_32494) * segmap_group_sizze_30334 +\n        sext_i32_i64(local_tid_32493);\n    if (slt64(gtid_30253, n_28846)) {\n        int32_t x_30338 = ((__global ",
            "int32_t *) mem_31837)[gtid_30253 *\n                                                           (int64_t) 3 +\n                                                           (int64_t) 2];\n        int32_t x_30339 = x_30338 << nHashBit_28847;\n        int32_t y_30340 = ((__global int32_t *) mem_31837)[gtid_30253 *\n                                                           (int64_t) 3 +\n                                                           (int64_t) 1];\n        int32_t x_30341 = x_30339 | y_30340;\n        int32_t x_30342 = x_30341 << nHashBit_28847;\n        int32_t y_30343 = ((__global int32_t *) mem_31837)[gtid_30253 *\n                                                           (int64_t) 3];\n        int32_t defunc_0_f_res_30344 = x_30342 | y_30343;\n        \n        ((__global int32_t *) mem_31840)[gtid_30253] = defunc_0_f_res_30344;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30334\n}\n__kernel void clusterPointszisegmap_30277(__global int *global_failure,\n                                          int64_t n_28846, float radius_28848,\n                                          int32_t hashMask_28857, __global\n                                          unsigned char *pos_mem_31827, __global\n                                          unsigned char *mem_31837)\n{\n    #define segmap_group_sizze_30324 (clusterPointszisegmap_group_sizze_30280)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32487;\n    int32_t local_tid_32488;\n    int64_t group_sizze_32491;\n    int32_t wave_sizze_32490;\n    int32_t group_tid_32489;\n    \n    global_tid_32487 = get_global_id(0);\n    local_tid_32488 = get_local_id(0);\n    group_sizze_32491 = get_local_size(0);\n    wave_sizze_32490 = LOCKSTEP_WIDTH;\n    group_tid_32489 = get_group_id(0);\n    \n    int32_t phys_tid_30277;\n    \n    phys_tid_30277 = global_tid_32487;\n    \n    int64_t gtid_30275;\n    \n    gtid_30275 =",
            " squot64(sext_i32_i64(group_tid_32489) *\n                         segmap_group_sizze_30324 +\n                         sext_i32_i64(local_tid_32488), (int64_t) 3);\n    \n    int64_t gtid_30276;\n    \n    gtid_30276 = sext_i32_i64(group_tid_32489) * segmap_group_sizze_30324 +\n        sext_i32_i64(local_tid_32488) - squot64(sext_i32_i64(group_tid_32489) *\n                                                segmap_group_sizze_30324 +\n                                                sext_i32_i64(local_tid_32488),\n                                                (int64_t) 3) * (int64_t) 3;\n    if (slt64(gtid_30275, n_28846) && slt64(gtid_30276, (int64_t) 3)) {\n        float x_30327 = ((__global float *) pos_mem_31827)[gtid_30275 *\n                                                           (int64_t) 3 +\n                                                           gtid_30276];\n        float binop_p_30328 = x_30327 / radius_28848;\n        float defunc_0_f_res_30329;\n        \n        defunc_0_f_res_30329 = futrts_floor32(binop_p_30328);\n        \n        int32_t f32_res_30330 = fptosi_f32_i32(defunc_0_f_res_30329);\n        int32_t defunc_0_f_res_30331 = hashMask_28857 & f32_res_30330;\n        \n        ((__global int32_t *) mem_31837)[gtid_30275 * (int64_t) 3 +\n                                         gtid_30276] = defunc_0_f_res_30331;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30324\n}\n__kernel void clusterPointszisegmap_30299(__global int *global_failure,\n                                          int64_t n_28846, __global\n                                          unsigned char *batches_mem_31826,\n                                          __global\n                                          unsigned char *labels_mem_31828,\n                                          __global unsigned char *mem_31833)\n{\n    #define segmap_group_sizze_30310 (clusterPointszisegmap_group_sizze_30301)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 =",
            " 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32482;\n    int32_t local_tid_32483;\n    int64_t group_sizze_32486;\n    int32_t wave_sizze_32485;\n    int32_t group_tid_32484;\n    \n    global_tid_32482 = get_global_id(0);\n    local_tid_32483 = get_local_id(0);\n    group_sizze_32486 = get_local_size(0);\n    wave_sizze_32485 = LOCKSTEP_WIDTH;\n    group_tid_32484 = get_group_id(0);\n    \n    int32_t phys_tid_30299;\n    \n    phys_tid_30299 = global_tid_32482;\n    \n    int64_t gtid_30298;\n    \n    gtid_30298 = sext_i32_i64(group_tid_32484) * segmap_group_sizze_30310 +\n        sext_i32_i64(local_tid_32483);\n    if (slt64(gtid_30298, n_28846)) {\n        int32_t x_30313 = ((__global int32_t *) batches_mem_31826)[gtid_30298];\n        int32_t x_30314 = ((__global int32_t *) labels_mem_31828)[gtid_30298];\n        int32_t x_30315 = x_30313 << 16;\n        int32_t y_30316 = 65535 & x_30314;\n        int32_t defunc_1_f_res_30317 = x_30315 | y_30316;\n        \n        ((__global int32_t *) mem_31833)[gtid_30298] = defunc_1_f_res_30317;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30310\n}\n__kernel void clusterPointszisegmap_30354(__global int *global_failure,\n                                          int64_t n_28846,\n                                          int64_t last_res_28950,\n                                          int64_t last_res_28951,\n                                          int64_t last_res_28952, __global\n                                          unsigned char *mem_param_31845,\n                                          __global\n                                          unsigned char *mem_param_31850,\n                                          __global unsigned char *mem_31857,\n                                          __global unsigned char *mem_31859,\n                                          __global unsigned char *mem_31861,\n                                          __global unsigned char *mem_31863,\n                 ",
            "                         __global unsigned char *mem_31865,\n                                          __global unsigned char *mem_31867,\n                                          __global unsigned char *mem_31869)\n{\n    #define segmap_group_sizze_30357 (clusterPointszisegmap_group_sizze_30356)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32724;\n    int32_t local_tid_32725;\n    int64_t group_sizze_32728;\n    int32_t wave_sizze_32727;\n    int32_t group_tid_32726;\n    \n    global_tid_32724 = get_global_id(0);\n    local_tid_32725 = get_local_id(0);\n    group_sizze_32728 = get_local_size(0);\n    wave_sizze_32727 = LOCKSTEP_WIDTH;\n    group_tid_32726 = get_group_id(0);\n    \n    int32_t phys_tid_30354;\n    \n    phys_tid_30354 = global_tid_32724;\n    \n    int64_t write_i_30353;\n    \n    write_i_30353 = sext_i32_i64(group_tid_32726) * segmap_group_sizze_30357 +\n        sext_i32_i64(local_tid_32725);\n    if (slt64(write_i_30353, n_28846)) {\n        int32_t x_28957 = ((__global int32_t *) mem_31865)[write_i_30353];\n        int32_t write_value_28962 = ((__global\n                                      int32_t *) mem_param_31845)[write_i_30353];\n        int64_t write_value_28963 = ((__global\n                                      int64_t *) mem_param_31850)[write_i_30353];\n        bool match_lit_28964 = 0 == x_28957;\n        int64_t defunc_1_f_res_28965;\n        \n        if (match_lit_28964) {\n            int64_t x_28958 = ((__global int64_t *) mem_31857)[write_i_30353];\n            int64_t case_res_28966 = sub64(x_28958, (int64_t) 1);\n            \n            defunc_1_f_res_28965 = case_res_28966;\n        } else {\n            bool match_lit_28967 = 1 == x_28957;\n            int64_t x_28968;\n            \n            if (match_lit_28967) {\n                int64_t x_28959 = ((__global\n                                    int64_t *) mem_31859)[write_i_30353];",
            "\n                int64_t x_28969 = add64(last_res_28950, x_28959);\n                int64_t case_res_28970 = sub64(x_28969, (int64_t) 1);\n                \n                x_28968 = case_res_28970;\n            } else {\n                bool match_lit_28971 = 2 == x_28957;\n                int64_t x_28972;\n                \n                if (match_lit_28971) {\n                    int64_t x_28960 = ((__global\n                                        int64_t *) mem_31861)[write_i_30353];\n                    int64_t x_28973 = add64(last_res_28950, last_res_28951);\n                    int64_t x_28974 = add64(x_28960, x_28973);\n                    int64_t case_res_28975 = sub64(x_28974, (int64_t) 1);\n                    \n                    x_28972 = case_res_28975;\n                } else {\n                    int64_t x_28961 = ((__global\n                                        int64_t *) mem_31863)[write_i_30353];\n                    int64_t x_28976 = add64(last_res_28950, last_res_28951);\n                    int64_t x_28977 = add64(last_res_28952, x_28976);\n                    int64_t x_28978 = add64(x_28961, x_28977);\n                    int64_t defunc_1_f_res_res_28979 = sub64(x_28978,\n                                                             (int64_t) 1);\n                    \n                    x_28972 = defunc_1_f_res_res_28979;\n                }\n                x_28968 = x_28972;\n            }\n            defunc_1_f_res_28965 = x_28968;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_28965) &&\n            slt64(defunc_1_f_res_28965, n_28846)) {\n            ((__global int32_t *) mem_31867)[defunc_1_f_res_28965] =\n                write_value_28962;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_28965) &&\n            slt64(defunc_1_f_res_28965, n_28846)) {\n            ((__global int64_t *) mem_31869)[defunc_1_f_res_28965] =\n                write_value_28963;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30357\n}\n__kernel voi",
            "d clusterPointszisegmap_30360(__global int *global_failure,\n                                          int failure_is_an_option, __global\n                                          int64_t *global_failure_args,\n                                          int64_t n_28846, __global\n                                          unsigned char *mem_31840, __global\n                                          unsigned char *defunc_0_f_res_mem_31884,\n                                          __global unsigned char *mem_31887,\n                                          __global unsigned char *mem_31889,\n                                          __global unsigned char *mem_31891)\n{\n    #define segmap_group_sizze_30375 (clusterPointszisegmap_group_sizze_30362)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32729;\n    int32_t local_tid_32730;\n    int64_t group_sizze_32733;\n    int32_t wave_sizze_32732;\n    int32_t group_tid_32731;\n    \n    global_tid_32729 = get_global_id(0);\n    local_tid_32730 = get_local_id(0);\n    group_sizze_32733 = get_local_size(0);\n    wave_sizze_32732 = LOCKSTEP_WIDTH;\n    group_tid_32731 = get_group_id(0);\n    \n    int32_t phys_tid_30360;\n    \n    phys_tid_30360 = global_tid_32729;\n    \n    int64_t gtid_30359;\n    \n    gtid_30359 = sext_i32_i64(group_tid_32731) * segmap_group_sizze_30375 +\n        sext_i32_i64(local_tid_32730);\n    if (slt64(gtid_30359, n_28846)) {\n        int64_t x_30380 = ((__global\n                            int64_t *) defunc_0_f_res_mem_31884)[gtid_30359];\n        bool x_30381 = sle64((int64_t) 0, x_30380);\n        bool y_30382 = slt64(x_30380, n_28846);\n        bool bounds_check_30383 = x_30381 && y_30382;\n        bool index_certs_30384;\n        \n        if (!bounds_check_30383) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 0) == -1) {\n                    global_failure_args[0] =",
            " x_30380;\n                    global_failure_args[1] = n_28846;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t defunc_0_f_res_30385 = ((__global\n                                         int32_t *) mem_31840)[x_30380];\n        int32_t index_primexp_30386 = sext_i64_i32(x_30380);\n        int32_t defunc_0_f_res_elem_30387 = index_primexp_30386;\n        int64_t defunc_0_f_res_30388 = sext_i32_i64(defunc_0_f_res_30385);\n        \n        ((__global int64_t *) mem_31887)[gtid_30359] = defunc_0_f_res_30388;\n        ((__global int32_t *) mem_31889)[gtid_30359] = defunc_0_f_res_30385;\n        ((__global int32_t *) mem_31891)[gtid_30359] =\n            defunc_0_f_res_elem_30387;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30375\n}\n__kernel void clusterPointszisegmap_30390(__global int *global_failure,\n                                          int64_t n_28846, __global\n                                          unsigned char *mem_31887, __global\n                                          unsigned char *mem_31894)\n{\n    #define segmap_group_sizze_30400 (clusterPointszisegmap_group_sizze_30392)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32734;\n    int32_t local_tid_32735;\n    int64_t group_sizze_32738;\n    int32_t wave_sizze_32737;\n    int32_t group_tid_32736;\n    \n    global_tid_32734 = get_global_id(0);\n    local_tid_32735 = get_local_id(0);\n    group_sizze_32738 = get_local_size(0);\n    wave_sizze_32737 = LOCKSTEP_WIDTH;\n    group_tid_32736 = get_group_id(0);\n    \n    int32_t phys_tid_30390;\n    \n    phys_tid_30390 = global_tid_32734;\n    \n    int64_t gtid_30389;\n    \n    gtid_30389 = sext_i32_i64(group_tid_32736) * segmap_group_sizze_30400 +\n        sext_i32_i64(local_tid_32735);\n    if (slt64(gtid_30389, n_28846)) {\n        int64_t x_30403 = ((__global int64_t *) me",
            "m_31887)[gtid_30389];\n        int64_t i_p_o_31654 = add64((int64_t) -1, gtid_30389);\n        int64_t rot_i_31655 = smod64(i_p_o_31654, n_28846);\n        int64_t x_30404 = ((__global int64_t *) mem_31887)[rot_i_31655];\n        bool defunc_1_f_res_30405 = x_30403 == x_30404;\n        bool defunc_1_f_res_30406 = !defunc_1_f_res_30405;\n        \n        ((__global bool *) mem_31894)[gtid_30389] = defunc_1_f_res_30406;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30400\n}\n__kernel void clusterPointszisegmap_30424(__global int *global_failure,\n                                          int64_t n_28846,\n                                          int64_t num_segments_29020, __global\n                                          unsigned char *mem_31894, __global\n                                          unsigned char *mem_31899, __global\n                                          unsigned char *mem_31902, __global\n                                          unsigned char *mem_31904)\n{\n    #define segmap_group_sizze_30427 (clusterPointszisegmap_group_sizze_30426)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32963;\n    int32_t local_tid_32964;\n    int64_t group_sizze_32967;\n    int32_t wave_sizze_32966;\n    int32_t group_tid_32965;\n    \n    global_tid_32963 = get_global_id(0);\n    local_tid_32964 = get_local_id(0);\n    group_sizze_32967 = get_local_size(0);\n    wave_sizze_32966 = LOCKSTEP_WIDTH;\n    group_tid_32965 = get_group_id(0);\n    \n    int32_t phys_tid_30424;\n    \n    phys_tid_30424 = global_tid_32963;\n    \n    int64_t write_i_30423;\n    \n    write_i_30423 = sext_i32_i64(group_tid_32965) * segmap_group_sizze_30427 +\n        sext_i32_i64(local_tid_32964);\n    if (slt64(write_i_30423, n_28846)) {\n        int64_t i_p_o_31658 = add64((int64_t) 1, write_i_30423);\n        int64_t rot_i_31659 = smod64(i_p_o_31658, n_28846);\n        bool x_290",
            "29 = ((__global bool *) mem_31894)[rot_i_31659];\n        int64_t write_value_29030 = ((__global\n                                      int64_t *) mem_31899)[write_i_30423];\n        int64_t defunc_1_f_res_29031;\n        \n        if (x_29029) {\n            int64_t x_29028 = ((__global int64_t *) mem_31902)[write_i_30423];\n            int64_t defunc_1_f_res_t_res_29032 = sub64(x_29028, (int64_t) 1);\n            \n            defunc_1_f_res_29031 = defunc_1_f_res_t_res_29032;\n        } else {\n            defunc_1_f_res_29031 = (int64_t) -1;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_29031) &&\n            slt64(defunc_1_f_res_29031, num_segments_29020)) {\n            ((__global int64_t *) mem_31904)[defunc_1_f_res_29031] =\n                write_value_29030;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30427\n}\n__kernel void clusterPointszisegmap_30438(__global int *global_failure,\n                                          int failure_is_an_option, __global\n                                          int64_t *global_failure_args,\n                                          int64_t n_28846,\n                                          int64_t defunc_0_f_res_28855,\n                                          int64_t num_segments_29020, __global\n                                          unsigned char *mem_31889, __global\n                                          unsigned char *mem_31904, __global\n                                          unsigned char *mem_31910, __global\n                                          unsigned char *mem_31912, __global\n                                          unsigned char *mem_31914)\n{\n    #define segmap_group_sizze_30441 (clusterPointszisegmap_group_sizze_30440)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33055;\n    int32_t local_tid_33056;\n    int64_t group_sizze_33059;\n    int32_t wav",
            "e_sizze_33058;\n    int32_t group_tid_33057;\n    \n    global_tid_33055 = get_global_id(0);\n    local_tid_33056 = get_local_id(0);\n    group_sizze_33059 = get_local_size(0);\n    wave_sizze_33058 = LOCKSTEP_WIDTH;\n    group_tid_33057 = get_group_id(0);\n    \n    int32_t phys_tid_30438;\n    \n    phys_tid_30438 = global_tid_33055;\n    \n    int64_t write_i_30437;\n    \n    write_i_30437 = sext_i32_i64(group_tid_33057) * segmap_group_sizze_30441 +\n        sext_i32_i64(local_tid_33056);\n    if (slt64(write_i_30437, num_segments_29020)) {\n        int64_t x_29050 = ((__global int64_t *) mem_31910)[write_i_30437];\n        int64_t write_value_29051 = ((__global\n                                      int64_t *) mem_31904)[write_i_30437];\n        bool x_29052 = sle64((int64_t) 0, x_29050);\n        bool y_29053 = slt64(x_29050, n_28846);\n        bool bounds_check_29054 = x_29052 && y_29053;\n        bool index_certs_29055;\n        \n        if (!bounds_check_29054) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 1) == -1) {\n                    global_failure_args[0] = x_29050;\n                    global_failure_args[1] = n_28846;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t i32_arg_29056 = ((__global int32_t *) mem_31889)[x_29050];\n        int64_t i32_res_29057 = sext_i32_i64(i32_arg_29056);\n        \n        if (sle64((int64_t) 0, i32_res_29057) && slt64(i32_res_29057,\n                                                       defunc_0_f_res_28855)) {\n            ((__global int64_t *) mem_31912)[i32_res_29057] = write_value_29051;\n        }\n        if (sle64((int64_t) 0, i32_res_29057) && slt64(i32_res_29057,\n                                                       defunc_0_f_res_28855)) {\n            ((__global int64_t *) mem_31914)[i32_res_29057] = x_29050;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30441\n}\n__kernel void clusterPointszisegmap_30535(__global i",
            "nt *global_failure,\n                                          int64_t n_28846,\n                                          int32_t nHashBit_28847, __global\n                                          unsigned char *mem_31924, __global\n                                          unsigned char *mem_31928)\n{\n    #define segmap_group_sizze_30694 (clusterPointszisegmap_group_sizze_30538)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33070;\n    int32_t local_tid_33071;\n    int64_t group_sizze_33074;\n    int32_t wave_sizze_33073;\n    int32_t group_tid_33072;\n    \n    global_tid_33070 = get_global_id(0);\n    local_tid_33071 = get_local_id(0);\n    group_sizze_33074 = get_local_size(0);\n    wave_sizze_33073 = LOCKSTEP_WIDTH;\n    group_tid_33072 = get_group_id(0);\n    \n    int32_t phys_tid_30535;\n    \n    phys_tid_30535 = global_tid_33070;\n    \n    int64_t gtid_30533;\n    \n    gtid_30533 = squot64(sext_i32_i64(group_tid_33072) *\n                         segmap_group_sizze_30694 +\n                         sext_i32_i64(local_tid_33071), (int64_t) 8);\n    \n    int64_t gtid_30534;\n    \n    gtid_30534 = sext_i32_i64(group_tid_33072) * segmap_group_sizze_30694 +\n        sext_i32_i64(local_tid_33071) - squot64(sext_i32_i64(group_tid_33072) *\n                                                segmap_group_sizze_30694 +\n                                                sext_i32_i64(local_tid_33071),\n                                                (int64_t) 8) * (int64_t) 8;\n    if (slt64(gtid_30533, n_28846) && slt64(gtid_30534, (int64_t) 8)) {\n        int32_t x_30698 = ((__global int32_t *) mem_31924)[gtid_30533 *\n                                                           (int64_t) 24 +\n                                                           gtid_30534 *\n                                                           (int64_t) 3 +\n                                         ",
            "                  (int64_t) 2];\n        int32_t x_30699 = x_30698 << nHashBit_28847;\n        int32_t y_30700 = ((__global int32_t *) mem_31924)[gtid_30533 *\n                                                           (int64_t) 24 +\n                                                           gtid_30534 *\n                                                           (int64_t) 3 +\n                                                           (int64_t) 1];\n        int32_t x_30701 = x_30699 | y_30700;\n        int32_t x_30702 = x_30701 << nHashBit_28847;\n        int32_t y_30703 = ((__global int32_t *) mem_31924)[gtid_30533 *\n                                                           (int64_t) 24 +\n                                                           gtid_30534 *\n                                                           (int64_t) 3];\n        int32_t defunc_0_f_res_30704 = x_30702 | y_30703;\n        \n        ((__global int32_t *) mem_31928)[gtid_30533 * (int64_t) 8 +\n                                         gtid_30534] = defunc_0_f_res_30704;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30694\n}\n__kernel void clusterPointszisegmap_30562(__global int *global_failure,\n                                          int64_t n_28846,\n                                          int32_t hashMask_28857, __global\n                                          unsigned char *mem_31919, __global\n                                          unsigned char *mem_31924)\n{\n    #define segmap_group_sizze_30684 (clusterPointszisegmap_group_sizze_30566)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33065;\n    int32_t local_tid_33066;\n    int64_t group_sizze_33069;\n    int32_t wave_sizze_33068;\n    int32_t group_tid_33067;\n    \n    global_tid_33065 = get_global_id(0);\n    local_tid_33066 = get_local_id(0);\n    group_sizze_33069 = get_local_size(0);\n    wave_sizze_330",
            "68 = LOCKSTEP_WIDTH;\n    group_tid_33067 = get_group_id(0);\n    \n    int32_t phys_tid_30562;\n    \n    phys_tid_30562 = global_tid_33065;\n    \n    int64_t gtid_30559;\n    \n    gtid_30559 = squot64(sext_i32_i64(group_tid_33067) *\n                         segmap_group_sizze_30684 +\n                         sext_i32_i64(local_tid_33066), (int64_t) 24);\n    \n    int64_t gtid_30560;\n    \n    gtid_30560 = squot64(sext_i32_i64(group_tid_33067) *\n                         segmap_group_sizze_30684 +\n                         sext_i32_i64(local_tid_33066) -\n                         squot64(sext_i32_i64(group_tid_33067) *\n                                 segmap_group_sizze_30684 +\n                                 sext_i32_i64(local_tid_33066), (int64_t) 24) *\n                         (int64_t) 24, (int64_t) 3);\n    \n    int64_t gtid_30561;\n    \n    gtid_30561 = sext_i32_i64(group_tid_33067) * segmap_group_sizze_30684 +\n        sext_i32_i64(local_tid_33066) - squot64(sext_i32_i64(group_tid_33067) *\n                                                segmap_group_sizze_30684 +\n                                                sext_i32_i64(local_tid_33066),\n                                                (int64_t) 24) * (int64_t) 24 -\n        squot64(sext_i32_i64(group_tid_33067) * segmap_group_sizze_30684 +\n                sext_i32_i64(local_tid_33066) -\n                squot64(sext_i32_i64(group_tid_33067) *\n                        segmap_group_sizze_30684 +\n                        sext_i32_i64(local_tid_33066), (int64_t) 24) *\n                (int64_t) 24, (int64_t) 3) * (int64_t) 3;\n    if ((slt64(gtid_30559, n_28846) && slt64(gtid_30560, (int64_t) 8)) &&\n        slt64(gtid_30561, (int64_t) 3)) {\n        int32_t x_30687 = ((__global int32_t *) mem_31919)[gtid_30559 *\n                                                           (int64_t) 3 +\n                                                           gtid_30561];\n        int32_t convop_x_31670 = sext_i64_i32(gtid_30561);\n        int64_t b",
            "inop_y_31671 = sext_i32_i64(convop_x_31670);\n        int64_t binop_y_31672 = ashr64(gtid_30560, binop_y_31671);\n        int64_t convop_x_31673 = (int64_t) 1 & binop_y_31672;\n        int32_t index_primexp_31674 = sext_i64_i32(convop_x_31673);\n        int32_t defunc_1_f_res_30689 = add32(x_30687, index_primexp_31674);\n        int32_t defunc_0_f_res_30690 = hashMask_28857 & defunc_1_f_res_30689;\n        \n        ((__global int32_t *) mem_31924)[gtid_30559 * (int64_t) 24 +\n                                         gtid_30560 * (int64_t) 3 +\n                                         gtid_30561] = defunc_0_f_res_30690;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30684\n}\n__kernel void clusterPointszisegmap_30622(__global int *global_failure,\n                                          int64_t n_28846, float radius_28848,\n                                          __global unsigned char *pos_mem_31827,\n                                          __global unsigned char *mem_31919)\n{\n    #define segmap_group_sizze_30663 (clusterPointszisegmap_group_sizze_30625)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33060;\n    int32_t local_tid_33061;\n    int64_t group_sizze_33064;\n    int32_t wave_sizze_33063;\n    int32_t group_tid_33062;\n    \n    global_tid_33060 = get_global_id(0);\n    local_tid_33061 = get_local_id(0);\n    group_sizze_33064 = get_local_size(0);\n    wave_sizze_33063 = LOCKSTEP_WIDTH;\n    group_tid_33062 = get_group_id(0);\n    \n    int32_t phys_tid_30622;\n    \n    phys_tid_30622 = global_tid_33060;\n    \n    int64_t gtid_30620;\n    \n    gtid_30620 = squot64(sext_i32_i64(group_tid_33062) *\n                         segmap_group_sizze_30663 +\n                         sext_i32_i64(local_tid_33061), (int64_t) 3);\n    \n    int64_t gtid_30621;\n    \n    gtid_30621 = sext_i32_i64(group_tid_33062) * segmap_group_sizze_30663 +\n        sext_",
            "i32_i64(local_tid_33061) - squot64(sext_i32_i64(group_tid_33062) *\n                                                segmap_group_sizze_30663 +\n                                                sext_i32_i64(local_tid_33061),\n                                                (int64_t) 3) * (int64_t) 3;\n    if (slt64(gtid_30620, n_28846) && slt64(gtid_30621, (int64_t) 3)) {\n        float x_30666 = ((__global float *) pos_mem_31827)[gtid_30620 *\n                                                           (int64_t) 3 +\n                                                           gtid_30621];\n        float binop_p_30667 = x_30666 / radius_28848;\n        float defunc_0_f_res_30668 = -0.5F + binop_p_30667;\n        float defunc_0_f_res_30669;\n        \n        defunc_0_f_res_30669 = futrts_floor32(defunc_0_f_res_30668);\n        \n        int32_t f32_res_30670 = fptosi_f32_i32(defunc_0_f_res_30669);\n        \n        ((__global int32_t *) mem_31919)[gtid_30620 * (int64_t) 3 +\n                                         gtid_30621] = f32_res_30670;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30663\n}\n__kernel void clusterPointszisegmap_30760(__global int *global_failure,\n                                          int64_t defunc_2_reduce_res_29111,\n                                          __global unsigned char *mem_31944,\n                                          __global unsigned char *mem_31947)\n{\n    #define segmap_group_sizze_30770 (clusterPointszisegmap_group_sizze_30762)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33462;\n    int32_t local_tid_33463;\n    int64_t group_sizze_33466;\n    int32_t wave_sizze_33465;\n    int32_t group_tid_33464;\n    \n    global_tid_33462 = get_global_id(0);\n    local_tid_33463 = get_local_id(0);\n    group_sizze_33466 = get_local_size(0);\n    wave_sizze_33465 = LOCKSTEP_WIDTH;\n    group_tid_33464 = get_group_id(0)",
            ";\n    \n    int32_t phys_tid_30760;\n    \n    phys_tid_30760 = global_tid_33462;\n    \n    int64_t gtid_30759;\n    \n    gtid_30759 = sext_i32_i64(group_tid_33464) * segmap_group_sizze_30770 +\n        sext_i32_i64(local_tid_33463);\n    if (slt64(gtid_30759, defunc_2_reduce_res_29111)) {\n        int64_t x_30773 = ((__global int64_t *) mem_31944)[gtid_30759];\n        int64_t i_p_o_31686 = add64((int64_t) -1, gtid_30759);\n        int64_t rot_i_31687 = smod64(i_p_o_31686, defunc_2_reduce_res_29111);\n        int64_t x_30774 = ((__global int64_t *) mem_31944)[rot_i_31687];\n        bool defunc_1_f_res_30775 = x_30773 == x_30774;\n        bool defunc_1_f_res_30776 = !defunc_1_f_res_30775;\n        \n        ((__global bool *) mem_31947)[gtid_30759] = defunc_1_f_res_30776;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30770\n}\n__kernel void clusterPointszisegmap_30802(__global int *global_failure,\n                                          int failure_is_an_option, __global\n                                          int64_t *global_failure_args,\n                                          int64_t n_28846, float radius_28848,\n                                          int64_t defunc_0_f_res_28855,\n                                          int64_t defunc_2_reduce_res_29111,\n                                          int64_t bytes_31829, __global\n                                          unsigned char *pos_mem_31827, __global\n                                          unsigned char *mem_31833, __global\n                                          unsigned char *mem_31891, __global\n                                          unsigned char *mem_31914, __global\n                                          unsigned char *mem_31928, __global\n                                          unsigned char *mem_31944, __global\n                                          unsigned char *mem_31952, __global\n                                          unsigned char *mem_31955, __global\n                   ",
            "                       unsigned char *mem_31957, __global\n                                          unsigned char *mem_31959)\n{\n    #define segmap_group_sizze_30870 (clusterPointszisegmap_group_sizze_30804)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33600;\n    int32_t local_tid_33601;\n    int64_t group_sizze_33604;\n    int32_t wave_sizze_33603;\n    int32_t group_tid_33602;\n    \n    global_tid_33600 = get_global_id(0);\n    local_tid_33601 = get_local_id(0);\n    group_sizze_33604 = get_local_size(0);\n    wave_sizze_33603 = LOCKSTEP_WIDTH;\n    group_tid_33602 = get_group_id(0);\n    \n    int32_t phys_tid_30802;\n    \n    phys_tid_30802 = global_tid_33600;\n    \n    int64_t gtid_30801;\n    \n    gtid_30801 = sext_i32_i64(group_tid_33602) * segmap_group_sizze_30870 +\n        sext_i32_i64(local_tid_33601);\n    if (slt64(gtid_30801, defunc_2_reduce_res_29111)) {\n        int64_t x_30876 = ((__global int64_t *) mem_31952)[gtid_30801];\n        int64_t x_30877 = ((__global int64_t *) mem_31944)[gtid_30801];\n        int64_t defunc_0_f_res_30880 = sub64(x_30876, (int64_t) 1);\n        bool x_30881 = sle64((int64_t) 0, x_30877);\n        bool y_30882 = slt64(x_30877, bytes_31829);\n        bool bounds_check_30883 = x_30881 && y_30882;\n        bool index_certs_30884;\n        \n        if (!bounds_check_30883) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 3) == -1) {\n                    global_failure_args[0] = x_30877;\n                    global_failure_args[1] = bytes_31829;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int64_t new_index_30885 = squot64(x_30877, (int64_t) 8);\n        int64_t binop_y_30886 = (int64_t) 8 * new_index_30885;\n        int64_t new_index_30887 = x_30877 - binop_y_30886;\n        int32_t index_primexp_31690 = sext_i64_i32(new_index_30885);\n  ",
            "      int32_t defunc_0_get_arg_30888 = index_primexp_31690;\n        int32_t defunc_0_get_arg_30889 = ((__global\n                                           int32_t *) mem_31928)[new_index_30885 *\n                                                                 (int64_t) 8 +\n                                                                 new_index_30887];\n        int64_t s_30890 = sext_i32_i64(defunc_0_get_arg_30889);\n        bool x_30891 = sle64((int64_t) 0, s_30890);\n        bool y_30892 = slt64(s_30890, defunc_0_f_res_28855);\n        bool bounds_check_30893 = x_30891 && y_30892;\n        bool index_certs_30894;\n        \n        if (!bounds_check_30893) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 4) == -1) {\n                    global_failure_args[0] = s_30890;\n                    global_failure_args[1] = defunc_0_f_res_28855;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int64_t x_30895 = ((__global int64_t *) mem_31914)[s_30890];\n        int64_t i_30896 = add64(defunc_0_f_res_30880, x_30895);\n        bool x_30897 = sle64((int64_t) 0, i_30896);\n        bool y_30898 = slt64(i_30896, n_28846);\n        bool bounds_check_30899 = x_30897 && y_30898;\n        bool index_certs_30900;\n        \n        if (!bounds_check_30899) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 5) == -1) {\n                    global_failure_args[0] = i_30896;\n                    global_failure_args[1] = n_28846;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t getEntry_res_30901 = ((__global int32_t *) mem_31891)[i_30896];\n        bool cond_30902 = getEntry_res_30901 == -1;\n        int32_t lifted_filterFn_res_30903;\n        \n        if (cond_30902) {\n            lifted_filterFn_res_30903 = -1;\n        } else {\n            float lifted_sqr_res_30904 = radius_28848 * radius_28848;\n            int64_t pzq_3",
            "0905 = sext_i32_i64(getEntry_res_30901);\n            bool x_30906 = sle64((int64_t) 0, pzq_30905);\n            bool y_30907 = slt64(pzq_30905, n_28846);\n            bool bounds_check_30908 = x_30906 && y_30907;\n            bool index_certs_30909;\n            \n            if (!bounds_check_30908) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 6) ==\n                        -1) {\n                        global_failure_args[0] = pzq_30905;\n                        global_failure_args[1] = n_28846;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            int64_t p_30911 = sext_i32_i64(index_primexp_31690);\n            bool x_30912 = sle64((int64_t) 0, p_30911);\n            bool y_30913 = slt64(p_30911, n_28846);\n            bool bounds_check_30914 = x_30912 && y_30913;\n            bool index_certs_30915;\n            \n            if (!bounds_check_30914) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 7) ==\n                        -1) {\n                        global_failure_args[0] = p_30911;\n                        global_failure_args[1] = n_28846;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            float defunc_2_reduce_res_30917;\n            float redout_31823 = 0.0F;\n            \n            for (int32_t i_31825 = 0; i_31825 < 3; i_31825++) {\n                int64_t i_31824 = sext_i32_i64(i_31825);\n                float x_30921 = ((__global float *) pos_mem_31827)[p_30911 *\n                                                                   (int64_t) 3 +\n                                                                   i_31824];\n                float x_30922 = ((__global float *) pos_mem_31827)[pzq_30905 *\n                                                                   (int64_t) 3 +\n                                             ",
            "                      i_31824];\n                float defunc_1_f_res_30923 = x_30921 - x_30922;\n                float defunc_0_f_res_30924 = defunc_1_f_res_30923 *\n                      defunc_1_f_res_30923;\n                float defunc_1_op_res_30920 = defunc_0_f_res_30924 +\n                      redout_31823;\n                float redout_tmp_33605 = defunc_1_op_res_30920;\n                \n                redout_31823 = redout_tmp_33605;\n            }\n            defunc_2_reduce_res_30917 = redout_31823;\n            \n            bool cond_30925 = defunc_2_reduce_res_30917 <= lifted_sqr_res_30904;\n            bool lifted_isNeighbor_res_30926;\n            \n            if (cond_30925) {\n                int32_t x_30927 = ((__global int32_t *) mem_31833)[p_30911];\n                int32_t y_30928 = ((__global int32_t *) mem_31833)[pzq_30905];\n                bool lifted_isNeighbor_res_t_res_30929 = x_30927 == y_30928;\n                \n                lifted_isNeighbor_res_30926 = lifted_isNeighbor_res_t_res_30929;\n            } else {\n                lifted_isNeighbor_res_30926 = 0;\n            }\n            \n            int32_t lifted_filterFn_res_f_res_30930;\n            \n            if (lifted_isNeighbor_res_30926) {\n                lifted_filterFn_res_f_res_30930 = getEntry_res_30901;\n            } else {\n                lifted_filterFn_res_f_res_30930 = -1;\n            }\n            lifted_filterFn_res_30903 = lifted_filterFn_res_f_res_30930;\n        }\n        \n        bool cond_30931 = lifted_filterFn_res_30903 == -1;\n        int64_t defunc_0_f_res_30932;\n        \n        if (cond_30931) {\n            defunc_0_f_res_30932 = (int64_t) -1;\n        } else {\n            int64_t unsign_arg_30933 = zext_i32_i64(index_primexp_31690);\n            int64_t x_30934 = unsign_arg_30933 << (int64_t) 32;\n            int64_t unsign_arg_30935 = zext_i32_i64(lifted_filterFn_res_30903);\n            int64_t binop_p_30936 = x_30934 | unsign_arg_30935;\n            \n            defunc_0_",
            "f_res_30932 = binop_p_30936;\n        }\n        ((__global int64_t *) mem_31955)[gtid_30801] = defunc_0_f_res_30932;\n        ((__global int32_t *) mem_31957)[gtid_30801] =\n            lifted_filterFn_res_30903;\n        ((__global int32_t *) mem_31959)[gtid_30801] = defunc_0_get_arg_30888;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30870\n}\n__kernel void clusterPointszisegmap_30946(__global int *global_failure,\n                                          int64_t defunc_2_reduce_res_29111,\n                                          int64_t last_res_29415,\n                                          int64_t last_res_29416,\n                                          int64_t last_res_29417, __global\n                                          unsigned char *mem_param_31966,\n                                          __global\n                                          unsigned char *mem_param_31971,\n                                          __global unsigned char *mem_31978,\n                                          __global unsigned char *mem_31980,\n                                          __global unsigned char *mem_31982,\n                                          __global unsigned char *mem_31984,\n                                          __global unsigned char *mem_31986,\n                                          __global unsigned char *mem_31988,\n                                          __global unsigned char *mem_31990)\n{\n    #define segmap_group_sizze_30949 (clusterPointszisegmap_group_sizze_30948)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33824;\n    int32_t local_tid_33825;\n    int64_t group_sizze_33828;\n    int32_t wave_sizze_33827;\n    int32_t group_tid_33826;\n    \n    global_tid_33824 = get_global_id(0);\n    local_tid_33825 = get_local_id(0);\n    group_sizze_33828 = get_local_size(0);\n    wave_sizze_33827 = LOCKSTEP_WIDT",
            "H;\n    group_tid_33826 = get_group_id(0);\n    \n    int32_t phys_tid_30946;\n    \n    phys_tid_30946 = global_tid_33824;\n    \n    int64_t write_i_30945;\n    \n    write_i_30945 = sext_i32_i64(group_tid_33826) * segmap_group_sizze_30949 +\n        sext_i32_i64(local_tid_33825);\n    if (slt64(write_i_30945, defunc_2_reduce_res_29111)) {\n        int32_t x_29422 = ((__global int32_t *) mem_31986)[write_i_30945];\n        int64_t write_value_29427 = ((__global\n                                      int64_t *) mem_param_31966)[write_i_30945];\n        int64_t write_value_29428 = ((__global\n                                      int64_t *) mem_param_31971)[write_i_30945];\n        bool match_lit_29429 = 0 == x_29422;\n        int64_t defunc_1_f_res_29430;\n        \n        if (match_lit_29429) {\n            int64_t x_29423 = ((__global int64_t *) mem_31978)[write_i_30945];\n            int64_t case_res_29431 = sub64(x_29423, (int64_t) 1);\n            \n            defunc_1_f_res_29430 = case_res_29431;\n        } else {\n            bool match_lit_29432 = 1 == x_29422;\n            int64_t x_29433;\n            \n            if (match_lit_29432) {\n                int64_t x_29424 = ((__global\n                                    int64_t *) mem_31980)[write_i_30945];\n                int64_t x_29434 = add64(last_res_29415, x_29424);\n                int64_t case_res_29435 = sub64(x_29434, (int64_t) 1);\n                \n                x_29433 = case_res_29435;\n            } else {\n                bool match_lit_29436 = 2 == x_29422;\n                int64_t x_29437;\n                \n                if (match_lit_29436) {\n                    int64_t x_29425 = ((__global\n                                        int64_t *) mem_31982)[write_i_30945];\n                    int64_t x_29438 = add64(last_res_29415, last_res_29416);\n                    int64_t x_29439 = add64(x_29425, x_29438);\n                    int64_t case_res_29440 = sub64(x_29439, (int64_t) 1);\n                    \n                    ",
            "x_29437 = case_res_29440;\n                } else {\n                    int64_t x_29426 = ((__global\n                                        int64_t *) mem_31984)[write_i_30945];\n                    int64_t x_29441 = add64(last_res_29415, last_res_29416);\n                    int64_t x_29442 = add64(last_res_29417, x_29441);\n                    int64_t x_29443 = add64(x_29426, x_29442);\n                    int64_t defunc_1_f_res_res_29444 = sub64(x_29443,\n                                                             (int64_t) 1);\n                    \n                    x_29437 = defunc_1_f_res_res_29444;\n                }\n                x_29433 = x_29437;\n            }\n            defunc_1_f_res_29430 = x_29433;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_29430) &&\n            slt64(defunc_1_f_res_29430, defunc_2_reduce_res_29111)) {\n            ((__global int64_t *) mem_31988)[defunc_1_f_res_29430] =\n                write_value_29427;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_29430) &&\n            slt64(defunc_1_f_res_29430, defunc_2_reduce_res_29111)) {\n            ((__global int64_t *) mem_31990)[defunc_1_f_res_29430] =\n                write_value_29428;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30949\n}\n__kernel void clusterPointszisegmap_30964(__global int *global_failure,\n                                          int64_t defunc_0_f_res_29473, __global\n                                          unsigned char *mem_32010, __global\n                                          unsigned char *mem_32015)\n{\n    #define segmap_group_sizze_30972 (clusterPointszisegmap_group_sizze_30966)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33860;\n    int32_t local_tid_33861;\n    int64_t group_sizze_33864;\n    int32_t wave_sizze_33863;\n    int32_t group_tid_33862;\n    \n    global_tid_33860 = get_global",
            "_id(0);\n    local_tid_33861 = get_local_id(0);\n    group_sizze_33864 = get_local_size(0);\n    wave_sizze_33863 = LOCKSTEP_WIDTH;\n    group_tid_33862 = get_group_id(0);\n    \n    int32_t phys_tid_30964;\n    \n    phys_tid_30964 = global_tid_33860;\n    \n    int64_t gtid_30963;\n    \n    gtid_30963 = sext_i32_i64(group_tid_33862) * segmap_group_sizze_30972 +\n        sext_i32_i64(local_tid_33861);\n    if (slt64(gtid_30963, defunc_0_f_res_29473)) {\n        int32_t x_30975 = ((__global int32_t *) mem_32010)[gtid_30963];\n        int64_t defunc_0_f_res_30976 = sext_i32_i64(x_30975);\n        \n        ((__global int64_t *) mem_32015)[gtid_30963] = defunc_0_f_res_30976;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30972\n}\n__kernel void clusterPointszisegmap_30978(__global int *global_failure,\n                                          int64_t defunc_0_f_res_29473, __global\n                                          unsigned char *mem_32015, __global\n                                          unsigned char *mem_32018)\n{\n    #define segmap_group_sizze_30988 (clusterPointszisegmap_group_sizze_30980)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33865;\n    int32_t local_tid_33866;\n    int64_t group_sizze_33869;\n    int32_t wave_sizze_33868;\n    int32_t group_tid_33867;\n    \n    global_tid_33865 = get_global_id(0);\n    local_tid_33866 = get_local_id(0);\n    group_sizze_33869 = get_local_size(0);\n    wave_sizze_33868 = LOCKSTEP_WIDTH;\n    group_tid_33867 = get_group_id(0);\n    \n    int32_t phys_tid_30978;\n    \n    phys_tid_30978 = global_tid_33865;\n    \n    int64_t gtid_30977;\n    \n    gtid_30977 = sext_i32_i64(group_tid_33867) * segmap_group_sizze_30988 +\n        sext_i32_i64(local_tid_33866);\n    if (slt64(gtid_30977, defunc_0_f_res_29473)) {\n        int64_t x_30991 = ((__global int64_t *) mem_32015)[gtid_30977];\n        int64_t i_p_o_31692 =",
            " add64((int64_t) -1, gtid_30977);\n        int64_t rot_i_31693 = smod64(i_p_o_31692, defunc_0_f_res_29473);\n        int64_t x_30992 = ((__global int64_t *) mem_32015)[rot_i_31693];\n        bool defunc_1_f_res_30993 = x_30991 == x_30992;\n        bool defunc_1_f_res_30994 = !defunc_1_f_res_30993;\n        \n        ((__global bool *) mem_32018)[gtid_30977] = defunc_1_f_res_30994;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_30988\n}\n__kernel void clusterPointszisegmap_31012(__global int *global_failure,\n                                          int64_t defunc_0_f_res_29473,\n                                          int64_t num_segments_29516, __global\n                                          unsigned char *mem_32018, __global\n                                          unsigned char *mem_32023, __global\n                                          unsigned char *mem_32026, __global\n                                          unsigned char *mem_32028)\n{\n    #define segmap_group_sizze_31015 (clusterPointszisegmap_group_sizze_31014)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34085;\n    int32_t local_tid_34086;\n    int64_t group_sizze_34089;\n    int32_t wave_sizze_34088;\n    int32_t group_tid_34087;\n    \n    global_tid_34085 = get_global_id(0);\n    local_tid_34086 = get_local_id(0);\n    group_sizze_34089 = get_local_size(0);\n    wave_sizze_34088 = LOCKSTEP_WIDTH;\n    group_tid_34087 = get_group_id(0);\n    \n    int32_t phys_tid_31012;\n    \n    phys_tid_31012 = global_tid_34085;\n    \n    int64_t write_i_31011;\n    \n    write_i_31011 = sext_i32_i64(group_tid_34087) * segmap_group_sizze_31015 +\n        sext_i32_i64(local_tid_34086);\n    if (slt64(write_i_31011, defunc_0_f_res_29473)) {\n        int64_t i_p_o_31696 = add64((int64_t) 1, write_i_31011);\n        int64_t rot_i_31697 = smod64(i_p_o_31696, defunc_0_f_res_29473);\n        bool x_29",
            "527 = ((__global bool *) mem_32018)[rot_i_31697];\n        int64_t write_value_29528 = ((__global\n                                      int64_t *) mem_32023)[write_i_31011];\n        int64_t defunc_1_f_res_29529;\n        \n        if (x_29527) {\n            int64_t x_29526 = ((__global int64_t *) mem_32026)[write_i_31011];\n            int64_t defunc_1_f_res_t_res_29530 = sub64(x_29526, (int64_t) 1);\n            \n            defunc_1_f_res_29529 = defunc_1_f_res_t_res_29530;\n        } else {\n            defunc_1_f_res_29529 = (int64_t) -1;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_29529) &&\n            slt64(defunc_1_f_res_29529, num_segments_29516)) {\n            ((__global int64_t *) mem_32028)[defunc_1_f_res_29529] =\n                write_value_29528;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31015\n}\n__kernel void clusterPointszisegmap_31026(__global int *global_failure,\n                                          int failure_is_an_option, __global\n                                          int64_t *global_failure_args,\n                                          int64_t n_28846,\n                                          int64_t defunc_0_f_res_29473,\n                                          int64_t num_segments_29516, __global\n                                          unsigned char *mem_32010, __global\n                                          unsigned char *mem_32028, __global\n                                          unsigned char *mem_32034, __global\n                                          unsigned char *mem_32036, __global\n                                          unsigned char *mem_32038)\n{\n    #define segmap_group_sizze_31029 (clusterPointszisegmap_group_sizze_31028)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34177;\n    int32_t local_tid_34178;\n    int64_t group_sizze_34181;\n    int32_t wa",
            "ve_sizze_34180;\n    int32_t group_tid_34179;\n    \n    global_tid_34177 = get_global_id(0);\n    local_tid_34178 = get_local_id(0);\n    group_sizze_34181 = get_local_size(0);\n    wave_sizze_34180 = LOCKSTEP_WIDTH;\n    group_tid_34179 = get_group_id(0);\n    \n    int32_t phys_tid_31026;\n    \n    phys_tid_31026 = global_tid_34177;\n    \n    int64_t write_i_31025;\n    \n    write_i_31025 = sext_i32_i64(group_tid_34179) * segmap_group_sizze_31029 +\n        sext_i32_i64(local_tid_34178);\n    if (slt64(write_i_31025, num_segments_29516)) {\n        int64_t x_29545 = ((__global int64_t *) mem_32034)[write_i_31025];\n        int64_t write_value_29546 = ((__global\n                                      int64_t *) mem_32028)[write_i_31025];\n        bool x_29547 = sle64((int64_t) 0, x_29545);\n        bool y_29548 = slt64(x_29545, defunc_0_f_res_29473);\n        bool bounds_check_29549 = x_29547 && y_29548;\n        bool index_certs_29550;\n        \n        if (!bounds_check_29549) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 9) == -1) {\n                    global_failure_args[0] = x_29545;\n                    global_failure_args[1] = defunc_0_f_res_29473;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t i32_arg_29551 = ((__global int32_t *) mem_32010)[x_29545];\n        int64_t i32_res_29552 = sext_i32_i64(i32_arg_29551);\n        \n        if (sle64((int64_t) 0, i32_res_29552) && slt64(i32_res_29552,\n                                                       n_28846)) {\n            ((__global int64_t *) mem_32036)[i32_res_29552] = write_value_29546;\n        }\n        if (sle64((int64_t) 0, i32_res_29552) && slt64(i32_res_29552,\n                                                       n_28846)) {\n            ((__global int64_t *) mem_32038)[i32_res_29552] = x_29545;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31029\n}\n__kernel void clusterPointszisegmap_31112(__global ",
            "int *global_failure,\n                                          int failure_is_an_option, __global\n                                          int64_t *global_failure_args,\n                                          int64_t n_28846,\n                                          int64_t maxSizze_29582,\n                                          int64_t defunc_2_reduce_res_29639,\n                                          __global\n                                          unsigned char *mem_param_32084,\n                                          __global\n                                          unsigned char *mem_param_32089,\n                                          __global unsigned char *mem_32107,\n                                          __global unsigned char *mem_32118,\n                                          __global unsigned char *mem_32123,\n                                          __global unsigned char *mem_32126,\n                                          __global unsigned char *mem_32128,\n                                          __global unsigned char *mem_32130)\n{\n    #define segmap_group_sizze_31167 (clusterPointszisegmap_group_sizze_31114)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34825;\n    int32_t local_tid_34826;\n    int64_t group_sizze_34829;\n    int32_t wave_sizze_34828;\n    int32_t group_tid_34827;\n    \n    global_tid_34825 = get_global_id(0);\n    local_tid_34826 = get_local_id(0);\n    group_sizze_34829 = get_local_size(0);\n    wave_sizze_34828 = LOCKSTEP_WIDTH;\n    group_tid_34827 = get_group_id(0);\n    \n    int32_t phys_tid_31112;\n    \n    phys_tid_31112 = global_tid_34825;\n    \n    int64_t gtid_31111;\n    \n    gtid_31111 = sext_i32_i64(group_tid_34827) * segmap_group_sizze_31167 +\n        sext_i32_i64(local_tid_34826);\n    if (slt64(gtid_31111, defunc_2_reduce_res_29639)) {\n        int64_t x_31173 = ((__global int64_t *)",
            " mem_32123)[gtid_31111];\n        int64_t x_31174 = ((__global int64_t *) mem_32118)[gtid_31111];\n        int64_t defunc_0_f_res_31177 = sub64(x_31173, (int64_t) 1);\n        bool x_31178 = sle64((int64_t) 0, x_31174);\n        bool y_31179 = slt64(x_31174, n_28846);\n        bool bounds_check_31180 = x_31178 && y_31179;\n        bool index_certs_31181;\n        \n        if (!bounds_check_31180) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 12) == -1) {\n                    global_failure_args[0] = x_31174;\n                    global_failure_args[1] = n_28846;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t index_primexp_31182 = sext_i64_i32(x_31174);\n        int64_t x_31183 = (int64_t) 1 & defunc_0_f_res_31177;\n        bool cond_31184 = x_31183 == (int64_t) 0;\n        int32_t defunc_1_get_res_31185;\n        int32_t defunc_1_get_res_31186;\n        \n        if (cond_31184) {\n            int64_t v_31187 = sext_i32_i64(index_primexp_31182);\n            bool x_31188 = sle64((int64_t) 0, v_31187);\n            bool y_31189 = slt64(v_31187, n_28846);\n            bool bounds_check_31190 = x_31188 && y_31189;\n            bool index_certs_31191;\n            \n            if (!bounds_check_31190) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 13) ==\n                        -1) {\n                        global_failure_args[0] = v_31187;\n                        global_failure_args[1] = n_28846;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            int32_t defunc_1_get_res_t_res_31192 = ((__global\n                                                     int32_t *) mem_32107)[v_31187];\n            int64_t getEntry_arg_31193 = ashr64(defunc_0_f_res_31177,\n                                                (int64_t) 1);\n            bool index_certs_31194;\n            \n          ",
            "  if (!bounds_check_31190) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 14) ==\n                        -1) {\n                        global_failure_args[0] = v_31187;\n                        global_failure_args[1] = n_28846;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            int64_t x_31195 = ((__global int64_t *) mem_param_32089)[v_31187];\n            int64_t i_31196 = add64(getEntry_arg_31193, x_31195);\n            bool x_31197 = sle64((int64_t) 0, i_31196);\n            bool y_31198 = slt64(i_31196, maxSizze_29582);\n            bool bounds_check_31199 = x_31197 && y_31198;\n            bool index_certs_31200;\n            \n            if (!bounds_check_31199) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 15) ==\n                        -1) {\n                        global_failure_args[0] = i_31196;\n                        global_failure_args[1] = maxSizze_29582;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            int32_t getEntry_res_31201 = ((__global\n                                           int32_t *) mem_param_32084)[i_31196];\n            \n            defunc_1_get_res_31185 = defunc_1_get_res_t_res_31192;\n            defunc_1_get_res_31186 = getEntry_res_31201;\n        } else {\n            int64_t getEntry_arg_31202 = ashr64(defunc_0_f_res_31177,\n                                                (int64_t) 1);\n            int64_t s_31203 = sext_i32_i64(index_primexp_31182);\n            bool x_31204 = sle64((int64_t) 0, s_31203);\n            bool y_31205 = slt64(s_31203, n_28846);\n            bool bounds_check_31206 = x_31204 && y_31205;\n            bool index_certs_31207;\n            \n            if (!bounds_check_31206) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 16) ==\n ",
            "                       -1) {\n                        global_failure_args[0] = s_31203;\n                        global_failure_args[1] = n_28846;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            int64_t x_31208 = ((__global int64_t *) mem_param_32089)[s_31203];\n            int64_t i_31209 = add64(getEntry_arg_31202, x_31208);\n            bool x_31210 = sle64((int64_t) 0, i_31209);\n            bool y_31211 = slt64(i_31209, maxSizze_29582);\n            bool bounds_check_31212 = x_31210 && y_31211;\n            bool index_certs_31213;\n            \n            if (!bounds_check_31212) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 17) ==\n                        -1) {\n                        global_failure_args[0] = i_31209;\n                        global_failure_args[1] = maxSizze_29582;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            int32_t getEntry_res_31214 = ((__global\n                                           int32_t *) mem_param_32084)[i_31209];\n            bool index_certs_31215;\n            \n            if (!bounds_check_31206) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 18) ==\n                        -1) {\n                        global_failure_args[0] = s_31203;\n                        global_failure_args[1] = n_28846;\n                        ;\n                    }\n                    return;\n                }\n            }\n            \n            int32_t defunc_1_get_res_f_res_31216 = ((__global\n                                                     int32_t *) mem_32107)[s_31203];\n            \n            defunc_1_get_res_31185 = getEntry_res_31214;\n            defunc_1_get_res_31186 = defunc_1_get_res_f_res_31216;\n        }\n        \n        int64_t unsign_arg_31217 = zext_i32_i64(defunc_1_get_res_31185);\n",
            "        int64_t x_31218 = unsign_arg_31217 << (int64_t) 32;\n        int64_t unsign_arg_31219 = zext_i32_i64(defunc_1_get_res_31186);\n        int64_t binop_p_31220 = x_31218 | unsign_arg_31219;\n        \n        ((__global int64_t *) mem_32126)[gtid_31111] = binop_p_31220;\n        ((__global int32_t *) mem_32128)[gtid_31111] = defunc_1_get_res_31185;\n        ((__global int32_t *) mem_32130)[gtid_31111] = defunc_1_get_res_31186;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31167\n}\n__kernel void clusterPointszisegmap_31230(__global int *global_failure,\n                                          int64_t defunc_2_reduce_res_29639,\n                                          int64_t last_res_29829,\n                                          int64_t last_res_29830,\n                                          int64_t last_res_29831, __global\n                                          unsigned char *mem_param_32137,\n                                          __global\n                                          unsigned char *mem_param_32142,\n                                          __global unsigned char *mem_32149,\n                                          __global unsigned char *mem_32151,\n                                          __global unsigned char *mem_32153,\n                                          __global unsigned char *mem_32155,\n                                          __global unsigned char *mem_32157,\n                                          __global unsigned char *mem_32159,\n                                          __global unsigned char *mem_32161)\n{\n    #define segmap_group_sizze_31233 (clusterPointszisegmap_group_sizze_31232)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35048;\n    int32_t local_tid_35049;\n    int64_t group_sizze_35052;\n    int32_t wave_sizze_35051;\n    int32_t group_tid_35050;\n    \n    global_tid_350",
            "48 = get_global_id(0);\n    local_tid_35049 = get_local_id(0);\n    group_sizze_35052 = get_local_size(0);\n    wave_sizze_35051 = LOCKSTEP_WIDTH;\n    group_tid_35050 = get_group_id(0);\n    \n    int32_t phys_tid_31230;\n    \n    phys_tid_31230 = global_tid_35048;\n    \n    int64_t write_i_31229;\n    \n    write_i_31229 = sext_i32_i64(group_tid_35050) * segmap_group_sizze_31233 +\n        sext_i32_i64(local_tid_35049);\n    if (slt64(write_i_31229, defunc_2_reduce_res_29639)) {\n        int32_t x_29836 = ((__global int32_t *) mem_32157)[write_i_31229];\n        int64_t write_value_29841 = ((__global\n                                      int64_t *) mem_param_32137)[write_i_31229];\n        int64_t write_value_29842 = ((__global\n                                      int64_t *) mem_param_32142)[write_i_31229];\n        bool match_lit_29843 = 0 == x_29836;\n        int64_t defunc_1_f_res_29844;\n        \n        if (match_lit_29843) {\n            int64_t x_29837 = ((__global int64_t *) mem_32149)[write_i_31229];\n            int64_t case_res_29845 = sub64(x_29837, (int64_t) 1);\n            \n            defunc_1_f_res_29844 = case_res_29845;\n        } else {\n            bool match_lit_29846 = 1 == x_29836;\n            int64_t x_29847;\n            \n            if (match_lit_29846) {\n                int64_t x_29838 = ((__global\n                                    int64_t *) mem_32151)[write_i_31229];\n                int64_t x_29848 = add64(last_res_29829, x_29838);\n                int64_t case_res_29849 = sub64(x_29848, (int64_t) 1);\n                \n                x_29847 = case_res_29849;\n            } else {\n                bool match_lit_29850 = 2 == x_29836;\n                int64_t x_29851;\n                \n                if (match_lit_29850) {\n                    int64_t x_29839 = ((__global\n                                        int64_t *) mem_32153)[write_i_31229];\n                    int64_t x_29852 = add64(last_res_29829, last_res_29830);\n                    int64_t x_29853 =",
            " add64(x_29839, x_29852);\n                    int64_t case_res_29854 = sub64(x_29853, (int64_t) 1);\n                    \n                    x_29851 = case_res_29854;\n                } else {\n                    int64_t x_29840 = ((__global\n                                        int64_t *) mem_32155)[write_i_31229];\n                    int64_t x_29855 = add64(last_res_29829, last_res_29830);\n                    int64_t x_29856 = add64(last_res_29831, x_29855);\n                    int64_t x_29857 = add64(x_29840, x_29856);\n                    int64_t defunc_1_f_res_res_29858 = sub64(x_29857,\n                                                             (int64_t) 1);\n                    \n                    x_29851 = defunc_1_f_res_res_29858;\n                }\n                x_29847 = x_29851;\n            }\n            defunc_1_f_res_29844 = x_29847;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_29844) &&\n            slt64(defunc_1_f_res_29844, defunc_2_reduce_res_29639)) {\n            ((__global int64_t *) mem_32159)[defunc_1_f_res_29844] =\n                write_value_29841;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_29844) &&\n            slt64(defunc_1_f_res_29844, defunc_2_reduce_res_29639)) {\n            ((__global int64_t *) mem_32161)[defunc_1_f_res_29844] =\n                write_value_29842;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31233\n}\n__kernel void clusterPointszisegmap_31236(__global int *global_failure,\n                                          int failure_is_an_option, __global\n                                          int64_t *global_failure_args,\n                                          int64_t defunc_2_reduce_res_29639,\n                                          __global unsigned char *mem_32128,\n                                          __global unsigned char *mem_32130,\n                                          __global\n                                          unsigned char *defunc_0_f_res_m",
            "em_32176,\n                                          __global unsigned char *mem_32179,\n                                          __global unsigned char *mem_32181,\n                                          __global unsigned char *mem_32183)\n{\n    #define segmap_group_sizze_31253 (clusterPointszisegmap_group_sizze_31238)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35053;\n    int32_t local_tid_35054;\n    int64_t group_sizze_35057;\n    int32_t wave_sizze_35056;\n    int32_t group_tid_35055;\n    \n    global_tid_35053 = get_global_id(0);\n    local_tid_35054 = get_local_id(0);\n    group_sizze_35057 = get_local_size(0);\n    wave_sizze_35056 = LOCKSTEP_WIDTH;\n    group_tid_35055 = get_group_id(0);\n    \n    int32_t phys_tid_31236;\n    \n    phys_tid_31236 = global_tid_35053;\n    \n    int64_t gtid_31235;\n    \n    gtid_31235 = sext_i32_i64(group_tid_35055) * segmap_group_sizze_31253 +\n        sext_i32_i64(local_tid_35054);\n    if (slt64(gtid_31235, defunc_2_reduce_res_29639)) {\n        int64_t x_31258 = ((__global\n                            int64_t *) defunc_0_f_res_mem_32176)[gtid_31235];\n        bool x_31259 = sle64((int64_t) 0, x_31258);\n        bool y_31260 = slt64(x_31258, defunc_2_reduce_res_29639);\n        bool bounds_check_31261 = x_31259 && y_31260;\n        bool index_certs_31262;\n        \n        if (!bounds_check_31261) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 19) == -1) {\n                    global_failure_args[0] = x_31258;\n                    global_failure_args[1] = defunc_2_reduce_res_29639;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t defunc_0_f_res_31263 = ((__global\n                                         int32_t *) mem_32128)[x_31258];\n        int32_t defunc_0_f_res_31264 = ((__global\n                                      ",
            "   int32_t *) mem_32130)[x_31258];\n        int64_t unsign_arg_31265 = zext_i32_i64(defunc_0_f_res_31263);\n        int64_t x_31266 = unsign_arg_31265 << (int64_t) 32;\n        int64_t unsign_arg_31267 = zext_i32_i64(defunc_0_f_res_31264);\n        int64_t binop_p_31268 = x_31266 | unsign_arg_31267;\n        \n        ((__global int64_t *) mem_32179)[gtid_31235] = binop_p_31268;\n        ((__global int32_t *) mem_32181)[gtid_31235] = defunc_0_f_res_31263;\n        ((__global int32_t *) mem_32183)[gtid_31235] = defunc_0_f_res_31264;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31253\n}\n__kernel void clusterPointszisegmap_31270(__global int *global_failure,\n                                          int64_t defunc_2_reduce_res_29639,\n                                          __global unsigned char *mem_32179,\n                                          __global unsigned char *mem_32186)\n{\n    #define segmap_group_sizze_31280 (clusterPointszisegmap_group_sizze_31272)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35058;\n    int32_t local_tid_35059;\n    int64_t group_sizze_35062;\n    int32_t wave_sizze_35061;\n    int32_t group_tid_35060;\n    \n    global_tid_35058 = get_global_id(0);\n    local_tid_35059 = get_local_id(0);\n    group_sizze_35062 = get_local_size(0);\n    wave_sizze_35061 = LOCKSTEP_WIDTH;\n    group_tid_35060 = get_group_id(0);\n    \n    int32_t phys_tid_31270;\n    \n    phys_tid_31270 = global_tid_35058;\n    \n    int64_t gtid_31269;\n    \n    gtid_31269 = sext_i32_i64(group_tid_35060) * segmap_group_sizze_31280 +\n        sext_i32_i64(local_tid_35059);\n    if (slt64(gtid_31269, defunc_2_reduce_res_29639)) {\n        int64_t x_31283 = ((__global int64_t *) mem_32179)[gtid_31269];\n        int64_t i_p_o_31713 = add64((int64_t) -1, gtid_31269);\n        int64_t rot_i_31714 = smod64(i_p_o_31713, defunc_2_reduce_res_29639);\n        int64",
            "_t x_31284 = ((__global int64_t *) mem_32179)[rot_i_31714];\n        bool defunc_1_f_res_31285 = x_31283 == x_31284;\n        bool defunc_1_f_res_31286 = !defunc_1_f_res_31285;\n        \n        ((__global bool *) mem_32186)[gtid_31269] = defunc_1_f_res_31286;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31280\n}\n__kernel void clusterPointszisegmap_31304(__global int *global_failure,\n                                          int64_t defunc_2_reduce_res_29639,\n                                          int64_t num_segments_29900, __global\n                                          unsigned char *mem_32186, __global\n                                          unsigned char *mem_32191, __global\n                                          unsigned char *mem_32194, __global\n                                          unsigned char *mem_32196)\n{\n    #define segmap_group_sizze_31307 (clusterPointszisegmap_group_sizze_31306)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35278;\n    int32_t local_tid_35279;\n    int64_t group_sizze_35282;\n    int32_t wave_sizze_35281;\n    int32_t group_tid_35280;\n    \n    global_tid_35278 = get_global_id(0);\n    local_tid_35279 = get_local_id(0);\n    group_sizze_35282 = get_local_size(0);\n    wave_sizze_35281 = LOCKSTEP_WIDTH;\n    group_tid_35280 = get_group_id(0);\n    \n    int32_t phys_tid_31304;\n    \n    phys_tid_31304 = global_tid_35278;\n    \n    int64_t write_i_31303;\n    \n    write_i_31303 = sext_i32_i64(group_tid_35280) * segmap_group_sizze_31307 +\n        sext_i32_i64(local_tid_35279);\n    if (slt64(write_i_31303, defunc_2_reduce_res_29639)) {\n        int64_t i_p_o_31717 = add64((int64_t) 1, write_i_31303);\n        int64_t rot_i_31718 = smod64(i_p_o_31717, defunc_2_reduce_res_29639);\n        bool x_29909 = ((__global bool *) mem_32186)[rot_i_31718];\n        int64_t write_value_29910 = ((__global\n        ",
            "                              int64_t *) mem_32191)[write_i_31303];\n        int64_t defunc_1_f_res_29911;\n        \n        if (x_29909) {\n            int64_t x_29908 = ((__global int64_t *) mem_32194)[write_i_31303];\n            int64_t defunc_1_f_res_t_res_29912 = sub64(x_29908, (int64_t) 1);\n            \n            defunc_1_f_res_29911 = defunc_1_f_res_t_res_29912;\n        } else {\n            defunc_1_f_res_29911 = (int64_t) -1;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_29911) &&\n            slt64(defunc_1_f_res_29911, num_segments_29900)) {\n            ((__global int64_t *) mem_32196)[defunc_1_f_res_29911] =\n                write_value_29910;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31307\n}\n__kernel void clusterPointszisegmap_31318(__global int *global_failure,\n                                          int failure_is_an_option, __global\n                                          int64_t *global_failure_args,\n                                          int64_t defunc_2_reduce_res_29639,\n                                          int64_t num_segments_29900, __global\n                                          unsigned char *mem_32181, __global\n                                          unsigned char *mem_32183, __global\n                                          unsigned char *mem_32202, __global\n                                          unsigned char *mem_32205, __global\n                                          unsigned char *mem_32207, __global\n                                          unsigned char *mem_32209)\n{\n    #define segmap_group_sizze_31332 (clusterPointszisegmap_group_sizze_31320)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35370;\n    int32_t local_tid_35371;\n    int64_t group_sizze_35374;\n    int32_t wave_sizze_35373;\n    int32_t group_tid_35372;\n    \n    global_tid_35370 = get_globa",
            "l_id(0);\n    local_tid_35371 = get_local_id(0);\n    group_sizze_35374 = get_local_size(0);\n    wave_sizze_35373 = LOCKSTEP_WIDTH;\n    group_tid_35372 = get_group_id(0);\n    \n    int32_t phys_tid_31318;\n    \n    phys_tid_31318 = global_tid_35370;\n    \n    int64_t gtid_31317;\n    \n    gtid_31317 = sext_i32_i64(group_tid_35372) * segmap_group_sizze_31332 +\n        sext_i32_i64(local_tid_35371);\n    if (slt64(gtid_31317, num_segments_29900)) {\n        int64_t x_31337 = ((__global int64_t *) mem_32202)[gtid_31317];\n        bool x_31338 = sle64((int64_t) 0, x_31337);\n        bool y_31339 = slt64(x_31337, defunc_2_reduce_res_29639);\n        bool bounds_check_31340 = x_31338 && y_31339;\n        bool index_certs_31341;\n        \n        if (!bounds_check_31340) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 20) == -1) {\n                    global_failure_args[0] = x_31337;\n                    global_failure_args[1] = defunc_2_reduce_res_29639;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t defunc_0_f_res_31342 = ((__global\n                                         int32_t *) mem_32181)[x_31337];\n        int32_t defunc_0_f_res_31343 = ((__global\n                                         int32_t *) mem_32183)[x_31337];\n        int64_t defunc_0_f_res_31344 = sext_i32_i64(defunc_0_f_res_31342);\n        \n        ((__global int64_t *) mem_32205)[gtid_31317] = defunc_0_f_res_31344;\n        ((__global int32_t *) mem_32207)[gtid_31317] = defunc_0_f_res_31342;\n        ((__global int32_t *) mem_32209)[gtid_31317] = defunc_0_f_res_31343;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31332\n}\n__kernel void clusterPointszisegmap_31346(__global int *global_failure,\n                                          int64_t num_segments_29900, __global\n                                          unsigned char *mem_32205, __global\n                                          unsigned char *me",
            "m_32212)\n{\n    #define segmap_group_sizze_31356 (clusterPointszisegmap_group_sizze_31348)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35375;\n    int32_t local_tid_35376;\n    int64_t group_sizze_35379;\n    int32_t wave_sizze_35378;\n    int32_t group_tid_35377;\n    \n    global_tid_35375 = get_global_id(0);\n    local_tid_35376 = get_local_id(0);\n    group_sizze_35379 = get_local_size(0);\n    wave_sizze_35378 = LOCKSTEP_WIDTH;\n    group_tid_35377 = get_group_id(0);\n    \n    int32_t phys_tid_31346;\n    \n    phys_tid_31346 = global_tid_35375;\n    \n    int64_t gtid_31345;\n    \n    gtid_31345 = sext_i32_i64(group_tid_35377) * segmap_group_sizze_31356 +\n        sext_i32_i64(local_tid_35376);\n    if (slt64(gtid_31345, num_segments_29900)) {\n        int64_t x_31359 = ((__global int64_t *) mem_32205)[gtid_31345];\n        int64_t i_p_o_31719 = add64((int64_t) -1, gtid_31345);\n        int64_t rot_i_31720 = smod64(i_p_o_31719, num_segments_29900);\n        int64_t x_31360 = ((__global int64_t *) mem_32205)[rot_i_31720];\n        bool defunc_1_f_res_31361 = x_31359 == x_31360;\n        bool defunc_1_f_res_31362 = !defunc_1_f_res_31361;\n        \n        ((__global bool *) mem_32212)[gtid_31345] = defunc_1_f_res_31362;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31356\n}\n__kernel void clusterPointszisegmap_31380(__global int *global_failure,\n                                          int64_t num_segments_29900,\n                                          int64_t num_segments_29961, __global\n                                          unsigned char *mem_32212, __global\n                                          unsigned char *mem_32217, __global\n                                          unsigned char *mem_32220, __global\n                                          unsigned char *mem_32222)\n{\n    #define segmap_group_sizze_31383 (clusterPointszisegma",
            "p_group_sizze_31382)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35595;\n    int32_t local_tid_35596;\n    int64_t group_sizze_35599;\n    int32_t wave_sizze_35598;\n    int32_t group_tid_35597;\n    \n    global_tid_35595 = get_global_id(0);\n    local_tid_35596 = get_local_id(0);\n    group_sizze_35599 = get_local_size(0);\n    wave_sizze_35598 = LOCKSTEP_WIDTH;\n    group_tid_35597 = get_group_id(0);\n    \n    int32_t phys_tid_31380;\n    \n    phys_tid_31380 = global_tid_35595;\n    \n    int64_t write_i_31379;\n    \n    write_i_31379 = sext_i32_i64(group_tid_35597) * segmap_group_sizze_31383 +\n        sext_i32_i64(local_tid_35596);\n    if (slt64(write_i_31379, num_segments_29900)) {\n        int64_t i_p_o_31723 = add64((int64_t) 1, write_i_31379);\n        int64_t rot_i_31724 = smod64(i_p_o_31723, num_segments_29900);\n        bool x_29974 = ((__global bool *) mem_32212)[rot_i_31724];\n        int64_t write_value_29975 = ((__global\n                                      int64_t *) mem_32217)[write_i_31379];\n        int64_t defunc_1_f_res_29976;\n        \n        if (x_29974) {\n            int64_t x_29973 = ((__global int64_t *) mem_32220)[write_i_31379];\n            int64_t defunc_1_f_res_t_res_29977 = sub64(x_29973, (int64_t) 1);\n            \n            defunc_1_f_res_29976 = defunc_1_f_res_t_res_29977;\n        } else {\n            defunc_1_f_res_29976 = (int64_t) -1;\n        }\n        if (sle64((int64_t) 0, defunc_1_f_res_29976) &&\n            slt64(defunc_1_f_res_29976, num_segments_29961)) {\n            ((__global int64_t *) mem_32222)[defunc_1_f_res_29976] =\n                write_value_29975;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31383\n}\n__kernel void clusterPointszisegmap_31394(__global int *global_failure,\n                                          int failure_is_an_option, __global\n                              ",
            "            int64_t *global_failure_args,\n                                          int64_t n_28846,\n                                          int64_t num_segments_29900,\n                                          int64_t num_segments_29961, __global\n                                          unsigned char *mem_32207, __global\n                                          unsigned char *mem_32222, __global\n                                          unsigned char *mem_32228, __global\n                                          unsigned char *mem_32230, __global\n                                          unsigned char *mem_32232)\n{\n    #define segmap_group_sizze_31397 (clusterPointszisegmap_group_sizze_31396)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35687;\n    int32_t local_tid_35688;\n    int64_t group_sizze_35691;\n    int32_t wave_sizze_35690;\n    int32_t group_tid_35689;\n    \n    global_tid_35687 = get_global_id(0);\n    local_tid_35688 = get_local_id(0);\n    group_sizze_35691 = get_local_size(0);\n    wave_sizze_35690 = LOCKSTEP_WIDTH;\n    group_tid_35689 = get_group_id(0);\n    \n    int32_t phys_tid_31394;\n    \n    phys_tid_31394 = global_tid_35687;\n    \n    int64_t write_i_31393;\n    \n    write_i_31393 = sext_i32_i64(group_tid_35689) * segmap_group_sizze_31397 +\n        sext_i32_i64(local_tid_35688);\n    if (slt64(write_i_31393, num_segments_29961)) {\n        int64_t x_29992 = ((__global int64_t *) mem_32228)[write_i_31393];\n        int64_t write_value_29993 = ((__global\n                                      int64_t *) mem_32222)[write_i_31393];\n        bool x_29994 = sle64((int64_t) 0, x_29992);\n        bool y_29995 = slt64(x_29992, num_segments_29900);\n        bool bounds_check_29996 = x_29994 && y_29995;\n        bool index_certs_29997;\n        \n        if (!bounds_check_29996) {\n            {\n                if (atomic_cmpxchg_i32_global(glob",
            "al_failure, -1, 21) == -1) {\n                    global_failure_args[0] = x_29992;\n                    global_failure_args[1] = num_segments_29900;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t i32_arg_29998 = ((__global int32_t *) mem_32207)[x_29992];\n        int64_t i32_res_29999 = sext_i32_i64(i32_arg_29998);\n        \n        if (sle64((int64_t) 0, i32_res_29999) && slt64(i32_res_29999,\n                                                       n_28846)) {\n            ((__global int64_t *) mem_32230)[i32_res_29999] = write_value_29993;\n        }\n        if (sle64((int64_t) 0, i32_res_29999) && slt64(i32_res_29999,\n                                                       n_28846)) {\n            ((__global int64_t *) mem_32232)[i32_res_29999] = x_29992;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31397\n}\n__kernel void clusterPointszisegmap_31448(__global int *global_failure,\n                                          int64_t n_28846, __global\n                                          unsigned char *mem_32048, __global\n                                          unsigned char *mem_32288, __global\n                                          unsigned char *mem_32290, __global\n                                          unsigned char *mem_32292)\n{\n    #define segmap_group_sizze_31451 (clusterPointszisegmap_group_sizze_31450)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35897;\n    int32_t local_tid_35898;\n    int64_t group_sizze_35901;\n    int32_t wave_sizze_35900;\n    int32_t group_tid_35899;\n    \n    global_tid_35897 = get_global_id(0);\n    local_tid_35898 = get_local_id(0);\n    group_sizze_35901 = get_local_size(0);\n    wave_sizze_35900 = LOCKSTEP_WIDTH;\n    group_tid_35899 = get_group_id(0);\n    \n    int32_t phys_tid_31448;\n    \n    phys_tid_31448 = global_",
            "tid_35897;\n    \n    int64_t write_i_31447;\n    \n    write_i_31447 = sext_i32_i64(group_tid_35899) * segmap_group_sizze_31451 +\n        sext_i32_i64(local_tid_35898);\n    if (slt64(write_i_31447, n_28846)) {\n        int64_t c_30061 = ((__global int64_t *) mem_32290)[write_i_31447];\n        int64_t offset_30062 = ((__global int64_t *) mem_32288)[write_i_31447];\n        int32_t v_30063 = ((__global int32_t *) mem_32048)[write_i_31447];\n        bool is_this_one_30065 = c_30061 == (int64_t) 0;\n        int64_t this_offset_30066 = (int64_t) -1 + offset_30062;\n        int64_t total_res_30067;\n        \n        if (is_this_one_30065) {\n            total_res_30067 = this_offset_30066;\n        } else {\n            total_res_30067 = (int64_t) -1;\n        }\n        if (sle64((int64_t) 0, total_res_30067) && slt64(total_res_30067,\n                                                         n_28846)) {\n            ((__global int32_t *) mem_32292)[total_res_30067] = v_30063;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31451\n}\n__kernel void clusterPointszisegmap_31495(__global int *global_failure,\n                                          int64_t defunc_2_reduce_res_30100,\n                                          __global unsigned char *mem_32313,\n                                          __global unsigned char *mem_32316)\n{\n    #define segmap_group_sizze_31505 (clusterPointszisegmap_group_sizze_31497)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36289;\n    int32_t local_tid_36290;\n    int64_t group_sizze_36293;\n    int32_t wave_sizze_36292;\n    int32_t group_tid_36291;\n    \n    global_tid_36289 = get_global_id(0);\n    local_tid_36290 = get_local_id(0);\n    group_sizze_36293 = get_local_size(0);\n    wave_sizze_36292 = LOCKSTEP_WIDTH;\n    group_tid_36291 = get_group_id(0);\n    \n    int32_t phys_tid_31495;\n    \n    phys_tid_31495 =",
            " global_tid_36289;\n    \n    int64_t gtid_31494;\n    \n    gtid_31494 = sext_i32_i64(group_tid_36291) * segmap_group_sizze_31505 +\n        sext_i32_i64(local_tid_36290);\n    if (slt64(gtid_31494, defunc_2_reduce_res_30100)) {\n        int64_t x_31508 = ((__global int64_t *) mem_32313)[gtid_31494];\n        int64_t i_p_o_31735 = add64((int64_t) -1, gtid_31494);\n        int64_t rot_i_31736 = smod64(i_p_o_31735, defunc_2_reduce_res_30100);\n        int64_t x_31509 = ((__global int64_t *) mem_32313)[rot_i_31736];\n        bool defunc_1_f_res_31510 = x_31508 == x_31509;\n        bool defunc_1_f_res_31511 = !defunc_1_f_res_31510;\n        \n        ((__global bool *) mem_32316)[gtid_31494] = defunc_1_f_res_31511;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31505\n}\n__kernel void clusterPointszisegmap_31529(__global int *global_failure,\n                                          int failure_is_an_option, __global\n                                          int64_t *global_failure_args,\n                                          int64_t n_28846, int64_t sizze_29574,\n                                          int64_t partition_sizze_30057,\n                                          int64_t defunc_2_reduce_res_30100,\n                                          __global\n                                          unsigned char *clusterWith_res_mem_32275,\n                                          __global\n                                          unsigned char *clusterWith_res_mem_32280,\n                                          __global unsigned char *mem_32292,\n                                          __global unsigned char *mem_32313,\n                                          __global unsigned char *mem_32326,\n                                          __global unsigned char *mem_32329)\n{\n    #define segmap_group_sizze_31558 (clusterPointszisegmap_group_sizze_31531)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*g",
            "lobal_failure >= 0)\n        return;\n    \n    int32_t global_tid_36514;\n    int32_t local_tid_36515;\n    int64_t group_sizze_36518;\n    int32_t wave_sizze_36517;\n    int32_t group_tid_36516;\n    \n    global_tid_36514 = get_global_id(0);\n    local_tid_36515 = get_local_id(0);\n    group_sizze_36518 = get_local_size(0);\n    wave_sizze_36517 = LOCKSTEP_WIDTH;\n    group_tid_36516 = get_group_id(0);\n    \n    int32_t phys_tid_31529;\n    \n    phys_tid_31529 = global_tid_36514;\n    \n    int64_t gtid_31528;\n    \n    gtid_31528 = sext_i32_i64(group_tid_36516) * segmap_group_sizze_31558 +\n        sext_i32_i64(local_tid_36515);\n    if (slt64(gtid_31528, defunc_2_reduce_res_30100)) {\n        int64_t x_31562 = ((__global int64_t *) mem_32326)[gtid_31528];\n        int64_t x_31563 = ((__global int64_t *) mem_32313)[gtid_31528];\n        int64_t defunc_0_f_res_31566 = sub64(x_31562, (int64_t) 1);\n        bool x_31567 = sle64((int64_t) 0, x_31563);\n        bool y_31568 = slt64(x_31563, partition_sizze_30057);\n        bool bounds_check_31569 = x_31567 && y_31568;\n        bool index_certs_31570;\n        \n        if (!bounds_check_31569) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 23) == -1) {\n                    global_failure_args[0] = x_31563;\n                    global_failure_args[1] = partition_sizze_30057;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t defunc_0_get_arg_31571 = ((__global\n                                           int32_t *) mem_32292)[x_31563];\n        int64_t s_31572 = sext_i32_i64(defunc_0_get_arg_31571);\n        bool x_31573 = sle64((int64_t) 0, s_31572);\n        bool y_31574 = slt64(s_31572, n_28846);\n        bool bounds_check_31575 = x_31573 && y_31574;\n        bool index_certs_31576;\n        \n        if (!bounds_check_31575) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 24) == -1) {\n                    global_failure_args[",
            "0] = s_31572;\n                    global_failure_args[1] = n_28846;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int64_t x_31577 = ((__global\n                            int64_t *) clusterWith_res_mem_32280)[s_31572];\n        int64_t i_31578 = add64(defunc_0_f_res_31566, x_31577);\n        bool x_31579 = sle64((int64_t) 0, i_31578);\n        bool y_31580 = slt64(i_31578, sizze_29574);\n        bool bounds_check_31581 = x_31579 && y_31580;\n        bool index_certs_31582;\n        \n        if (!bounds_check_31581) {\n            {\n                if (atomic_cmpxchg_i32_global(global_failure, -1, 25) == -1) {\n                    global_failure_args[0] = i_31578;\n                    global_failure_args[1] = sizze_29574;\n                    ;\n                }\n                return;\n            }\n        }\n        \n        int32_t defunc_1_get_res_31583 = ((__global\n                                           int32_t *) clusterWith_res_mem_32275)[i_31578];\n        \n        ((__global int32_t *) mem_32329)[gtid_31528] = defunc_1_get_res_31583;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31558\n}\n__kernel void clusterPointszisegmap_31626(__global int *global_failure,\n                                          int64_t sizze_30081, __global\n                                          unsigned char *mem_32349, __global\n                                          unsigned char *mem_32352)\n{\n    #define segmap_group_sizze_31634 (clusterPointszisegmap_group_sizze_31628)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36906;\n    int32_t local_tid_36907;\n    int64_t group_sizze_36910;\n    int32_t wave_sizze_36909;\n    int32_t group_tid_36908;\n    \n    global_tid_36906 = get_global_id(0);\n    local_tid_36907 = get_local_id(0);\n    group_sizze_36910 = get_local_size(0);\n    wave_sizze_36909 ",
            "= LOCKSTEP_WIDTH;\n    group_tid_36908 = get_group_id(0);\n    \n    int32_t phys_tid_31626;\n    \n    phys_tid_31626 = global_tid_36906;\n    \n    int64_t gtid_31625;\n    \n    gtid_31625 = sext_i32_i64(group_tid_36908) * segmap_group_sizze_31634 +\n        sext_i32_i64(local_tid_36907);\n    if (slt64(gtid_31625, sizze_30081)) {\n        int64_t x_31637 = ((__global int64_t *) mem_32349)[gtid_31625];\n        int32_t defunc_0_f_res_31638 = sext_i64_i32(x_31637);\n        \n        ((__global int32_t *) mem_32352)[gtid_31625] = defunc_0_f_res_31638;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31634\n}\n__kernel void clusterPointszisegmap_31640(__global int *global_failure,\n                                          int64_t sizze_30080,\n                                          int64_t sizze_30081,\n                                          int64_t conc_tmp_30247, __global\n                                          unsigned char *clusterWith_res_mem_32333,\n                                          __global unsigned char *mem_32358)\n{\n    #define segmap_group_sizze_31648 (clusterPointszisegmap_group_sizze_31642)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36911;\n    int32_t local_tid_36912;\n    int64_t group_sizze_36915;\n    int32_t wave_sizze_36914;\n    int32_t group_tid_36913;\n    \n    global_tid_36911 = get_global_id(0);\n    local_tid_36912 = get_local_id(0);\n    group_sizze_36915 = get_local_size(0);\n    wave_sizze_36914 = LOCKSTEP_WIDTH;\n    group_tid_36913 = get_group_id(0);\n    \n    int32_t phys_tid_31640;\n    \n    phys_tid_31640 = global_tid_36911;\n    \n    int64_t gtid_31639;\n    \n    gtid_31639 = sext_i32_i64(group_tid_36913) * segmap_group_sizze_31648 +\n        sext_i32_i64(local_tid_36912);\n    if (slt64(gtid_31639, conc_tmp_30247)) {\n        bool index_concat_cmp_31742 = sle64(sizze_30080, gtid_31639);\n        int64_t index",
            "_concat_branch_31746;\n        \n        if (index_concat_cmp_31742) {\n            index_concat_branch_31746 = sizze_30081;\n        } else {\n            int64_t index_concat_31745 = ((__global\n                                           int64_t *) clusterWith_res_mem_32333)[gtid_31639];\n            \n            index_concat_branch_31746 = index_concat_31745;\n        }\n        \n        int32_t defunc_0_f_res_31652 = sext_i64_i32(index_concat_branch_31746);\n        \n        ((__global int32_t *) mem_32358)[gtid_31639] = defunc_0_f_res_31652;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_31648\n}\n__kernel void clusterPointszisegred_large_33268(__global int *global_failure,\n                                                uint sync_arr_mem_33306_backing_offset_0,\n                                                uint red_arr_mem_33304_backing_offset_1,\n                                                int64_t defunc_2_reduce_res_29111,\n                                                int64_t num_groups_30740,\n                                                int32_t num_subhistos_33189,\n                                                int64_t groups_per_segment_33290,\n                                                int64_t elements_per_thread_33291,\n                                                int64_t virt_num_groups_33292,\n                                                int64_t threads_per_segment_33294,\n                                                __global\n                                                unsigned char *mem_31938,\n                                                __global\n                                                unsigned char *defunc_1_map_res_subhistos_mem_33190,\n                                                __global\n                                                unsigned char *group_res_arr_mem_33295,\n                                                __global\n                                                unsigned char *clusterPoints",
            "zicounter_mem_33297)\n{\n    #define seghist_group_sizze_30738 (clusterPointsziseghist_group_sizze_30737)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *sync_arr_mem_33306_backing_1 =\n                  &shared_mem[sync_arr_mem_33306_backing_offset_0];\n    volatile char *red_arr_mem_33304_backing_0 =\n                  &shared_mem[red_arr_mem_33304_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33299;\n    int32_t local_tid_33300;\n    int64_t group_sizze_33303;\n    int32_t wave_sizze_33302;\n    int32_t group_tid_33301;\n    \n    global_tid_33299 = get_global_id(0);\n    local_tid_33300 = get_local_id(0);\n    group_sizze_33303 = get_local_size(0);\n    wave_sizze_33302 = LOCKSTEP_WIDTH;\n    group_tid_33301 = get_group_id(0);\n    \n    int32_t flat_gtid_33268;\n    \n    flat_gtid_33268 = global_tid_33299;\n    \n    __local char *red_arr_mem_33304;\n    \n    red_arr_mem_33304 = (__local char *) red_arr_mem_33304_backing_0;\n    \n    __local char *sync_arr_mem_33306;\n    \n    sync_arr_mem_33306 = (__local char *) sync_arr_mem_33306_backing_1;\n    \n    int32_t phys_group_id_33308;\n    \n    phys_group_id_33308 = get_group_id(0);\n    for (int32_t i_33309 = 0; i_33309 <\n         sdiv_up32(sext_i64_i32(virt_num_groups_33292) - phys_group_id_33308,\n                   sext_i64_i32(num_groups_30740)); i_33309++) {\n        int32_t virt_group_id_33310 = phys_group_id_33308 + i_33309 *\n                sext_i64_i32(num_groups_30740);\n        int32_t flat_segment_id_33311 = squot32(virt_group_id_33310,\n                                                sext_i64_i32(groups_per_segment_33290));\n        int64_t global_tid_33312 = srem64(sext_i32_i64(virt_group_id_33310) *\n                                          seghist_group_sizze_30738 +\n                                          sext_i32_i64(local_tid_33300),\n                                          seghist_group_sizze_30738 *\n    ",
            "                                      groups_per_segment_33290);\n        int64_t bucket_id_33266 = sext_i32_i64(flat_segment_id_33311);\n        int64_t subhistogram_id_33267;\n        int64_t x_acc_33313;\n        int64_t chunk_sizze_33314;\n        \n        chunk_sizze_33314 = smin64(elements_per_thread_33291,\n                                   sdiv_up64(num_subhistos_33189 -\n                                             global_tid_33312,\n                                             threads_per_segment_33294));\n        \n        int64_t x_30744;\n        int64_t x_30745;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_33313 = (int64_t) 0;\n        }\n        for (int64_t i_33318 = 0; i_33318 < chunk_sizze_33314; i_33318++) {\n            subhistogram_id_33267 = global_tid_33312 +\n                threads_per_segment_33294 * i_33318;\n            // apply map function\n            {\n                // load accumulator\n                {\n                    x_30744 = x_acc_33313;\n                }\n                // load new values\n                {\n                    x_30745 = ((__global\n                                int64_t *) defunc_1_map_res_subhistos_mem_33190)[subhistogram_id_33267 *\n                                                                                 defunc_2_reduce_res_29111 +\n                                                                                 bucket_id_33266];\n                }\n                // apply reduction operator\n                {\n                    int64_t defunc_1_f_res_30746 = smax64(x_30744, x_30745);\n                    \n                    // store in accumulator\n                    {\n                        x_acc_33313 = defunc_1_f_res_30746;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_30744 = x_acc_33313;\n            ((__local\n              int64_t *) red_arr_mem_33304)[sext_i32_i",
            "64(local_tid_33300)] =\n                x_30744;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_33319;\n        int32_t skip_waves_33320;\n        \n        skip_waves_33320 = 1;\n        \n        int64_t x_33315;\n        int64_t x_33316;\n        \n        offset_33319 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_33300,\n                      sext_i64_i32(seghist_group_sizze_30738))) {\n                x_33315 = ((__local\n                            int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300 +\n                                                          offset_33319)];\n            }\n        }\n        offset_33319 = 1;\n        while (slt32(offset_33319, wave_sizze_33302)) {\n            if (slt32(local_tid_33300 + offset_33319,\n                      sext_i64_i32(seghist_group_sizze_30738)) &&\n                ((local_tid_33300 - squot32(local_tid_33300, wave_sizze_33302) *\n                  wave_sizze_33302) & (2 * offset_33319 - 1)) == 0) {\n                // read array element\n                {\n                    x_33316 = ((volatile __local\n                                int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300 +\n                                                              offset_33319)];\n                }\n                // apply reduction operation\n                {\n                    int64_t defunc_1_f_res_33317 = smax64(x_33315, x_33316);\n                    \n                    x_33315 = defunc_1_f_res_33317;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300)] =\n                        x_33315;\n                }\n            }\n            offset_33319 *= 2;\n        }\n        while (slt32(skip_waves_33320,\n                     squot32(sext_i64_i32(seghist_group_sizze_30738) +\n                     ",
            "        wave_sizze_33302 - 1, wave_sizze_33302))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_33319 = skip_waves_33320 * wave_sizze_33302;\n            if (slt32(local_tid_33300 + offset_33319,\n                      sext_i64_i32(seghist_group_sizze_30738)) &&\n                ((local_tid_33300 - squot32(local_tid_33300, wave_sizze_33302) *\n                  wave_sizze_33302) == 0 && (squot32(local_tid_33300,\n                                                     wave_sizze_33302) & (2 *\n                                                                          skip_waves_33320 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_33316 = ((__local\n                                int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300 +\n                                                              offset_33319)];\n                }\n                // apply reduction operation\n                {\n                    int64_t defunc_1_f_res_33317 = smax64(x_33315, x_33316);\n                    \n                    x_33315 = defunc_1_f_res_33317;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300)] =\n                        x_33315;\n                }\n            }\n            skip_waves_33320 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_33300) == (int64_t) 0) {\n                x_acc_33313 = x_33315;\n            }\n        }\n        if (groups_per_segment_33290 == (int64_t) 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_33300 == 0) {\n                    ((__global int64_t *) mem_31938)[bucket_id_33266] =\n          ",
            "              x_acc_33313;\n                }\n            }\n        } else {\n            int32_t old_counter_33321;\n            \n            // first thread in group saves group result to global memory\n            {\n                if (local_tid_33300 == 0) {\n                    ((__global\n                      int64_t *) group_res_arr_mem_33295)[sext_i32_i64(virt_group_id_33310) *\n                                                          seghist_group_sizze_30738] =\n                        x_acc_33313;\n                    mem_fence_global();\n                    old_counter_33321 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) clusterPointszicounter_mem_33297)[sext_i32_i64(srem32(flat_segment_id_33311,\n                                                                                                              10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_33306)[(int64_t) 0] =\n                        old_counter_33321 == groups_per_segment_33290 -\n                        (int64_t) 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_33322;\n            \n            is_last_group_33322 = ((__local\n                                    bool *) sync_arr_mem_33306)[(int64_t) 0];\n            if (is_last_group_33322) {\n                if (local_tid_33300 == 0) {\n                    old_counter_33321 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) clusterPointszicounter_mem_33297)[sext_i32_i64(srem32(flat_segment_id_33311,\n                                                                                                              10240))],\n                                              (int) ((int64_t) 0 -\n                                                     groups_p",
            "er_segment_33290));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_33323 =\n                            sdiv_up64(groups_per_segment_33290,\n                                      seghist_group_sizze_30738);\n                    \n                    x_30744 = (int64_t) 0;\n                    for (int64_t i_33324 = 0; i_33324 < read_per_thread_33323;\n                         i_33324++) {\n                        int64_t group_res_id_33325 =\n                                sext_i32_i64(local_tid_33300) *\n                                read_per_thread_33323 + i_33324;\n                        int64_t index_of_group_res_33326 =\n                                sext_i32_i64(flat_segment_id_33311) *\n                                groups_per_segment_33290 + group_res_id_33325;\n                        \n                        if (slt64(group_res_id_33325,\n                                  groups_per_segment_33290)) {\n                            x_30745 = ((__global\n                                        int64_t *) group_res_arr_mem_33295)[index_of_group_res_33326 *\n                                                                            seghist_group_sizze_30738];\n                            \n                            int64_t defunc_1_f_res_30746;\n                            \n                            defunc_1_f_res_30746 = smax64(x_30744, x_30745);\n                            x_30744 = defunc_1_f_res_30746;\n                        }\n                    }\n                }\n                ((__local\n                  int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300)] =\n                    x_30744;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_33327;\n                    int32_t skip_waves_33328;\n                    \n                    skip_waves_33328 = 1;\n                    \n     ",
            "               int64_t x_33315;\n                    int64_t x_33316;\n                    \n                    offset_33327 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_33300,\n                                  sext_i64_i32(seghist_group_sizze_30738))) {\n                            x_33315 = ((__local\n                                        int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300 +\n                                                                      offset_33327)];\n                        }\n                    }\n                    offset_33327 = 1;\n                    while (slt32(offset_33327, wave_sizze_33302)) {\n                        if (slt32(local_tid_33300 + offset_33327,\n                                  sext_i64_i32(seghist_group_sizze_30738)) &&\n                            ((local_tid_33300 - squot32(local_tid_33300,\n                                                        wave_sizze_33302) *\n                              wave_sizze_33302) & (2 * offset_33327 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_33316 = ((volatile __local\n                                            int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300 +\n                                                                          offset_33327)];\n                            }\n                            // apply reduction operation\n                            {\n                                int64_t defunc_1_f_res_33317 = smax64(x_33315,\n                                                                      x_33316);\n                                \n                                x_33315 = defunc_1_f_res_33317;\n                            }\n                            // write result of operation\n                            {\n                                (",
            "(volatile __local\n                                  int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300)] =\n                                    x_33315;\n                            }\n                        }\n                        offset_33327 *= 2;\n                    }\n                    while (slt32(skip_waves_33328,\n                                 squot32(sext_i64_i32(seghist_group_sizze_30738) +\n                                         wave_sizze_33302 - 1,\n                                         wave_sizze_33302))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_33327 = skip_waves_33328 * wave_sizze_33302;\n                        if (slt32(local_tid_33300 + offset_33327,\n                                  sext_i64_i32(seghist_group_sizze_30738)) &&\n                            ((local_tid_33300 - squot32(local_tid_33300,\n                                                        wave_sizze_33302) *\n                              wave_sizze_33302) == 0 &&\n                             (squot32(local_tid_33300, wave_sizze_33302) & (2 *\n                                                                            skip_waves_33328 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_33316 = ((__local\n                                            int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300 +\n                                                                          offset_33327)];\n                            }\n                            // apply reduction operation\n                            {\n                                int64_t defunc_1_f_res_33317 = smax64(x_33315,\n                                                                      x_33316);\n                                \n                                x_33315 = defunc_1_",
            "f_res_33317;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  int64_t *) red_arr_mem_33304)[sext_i32_i64(local_tid_33300)] =\n                                    x_33315;\n                            }\n                        }\n                        skip_waves_33328 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_33300 == 0) {\n                            ((__global int64_t *) mem_31938)[bucket_id_33266] =\n                                x_33315;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef seghist_group_sizze_30738\n}\n__kernel void clusterPointszisegred_large_34498(__global int *global_failure,\n                                                uint sync_arr_mem_34536_backing_offset_0,\n                                                uint red_arr_mem_34534_backing_offset_1,\n                                                int64_t defunc_2_reduce_res_29639,\n                                                int64_t num_groups_31084,\n                                                int32_t num_subhistos_34419,\n                                                int64_t groups_per_segment_34520,\n                                                int64_t elements_per_thread_34521,\n                                                int64_t virt_num_groups_34522,\n                                                int64_t threads_per_segment_34524,\n                                                __global\n                                                unsigned char *mem_32112,\n                                                __global\n                                                unsigned char *defunc_1_",
            "map_res_subhistos_mem_34420,\n                                                __global\n                                                unsigned char *group_res_arr_mem_34525,\n                                                __global\n                                                unsigned char *clusterPointszicounter_mem_34527)\n{\n    #define seghist_group_sizze_31082 (clusterPointsziseghist_group_sizze_31081)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *sync_arr_mem_34536_backing_1 =\n                  &shared_mem[sync_arr_mem_34536_backing_offset_0];\n    volatile char *red_arr_mem_34534_backing_0 =\n                  &shared_mem[red_arr_mem_34534_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34529;\n    int32_t local_tid_34530;\n    int64_t group_sizze_34533;\n    int32_t wave_sizze_34532;\n    int32_t group_tid_34531;\n    \n    global_tid_34529 = get_global_id(0);\n    local_tid_34530 = get_local_id(0);\n    group_sizze_34533 = get_local_size(0);\n    wave_sizze_34532 = LOCKSTEP_WIDTH;\n    group_tid_34531 = get_group_id(0);\n    \n    int32_t flat_gtid_34498;\n    \n    flat_gtid_34498 = global_tid_34529;\n    \n    __local char *red_arr_mem_34534;\n    \n    red_arr_mem_34534 = (__local char *) red_arr_mem_34534_backing_0;\n    \n    __local char *sync_arr_mem_34536;\n    \n    sync_arr_mem_34536 = (__local char *) sync_arr_mem_34536_backing_1;\n    \n    int32_t phys_group_id_34538;\n    \n    phys_group_id_34538 = get_group_id(0);\n    for (int32_t i_34539 = 0; i_34539 <\n         sdiv_up32(sext_i64_i32(virt_num_groups_34522) - phys_group_id_34538,\n                   sext_i64_i32(num_groups_31084)); i_34539++) {\n        int32_t virt_group_id_34540 = phys_group_id_34538 + i_34539 *\n                sext_i64_i32(num_groups_31084);\n        int32_t flat_segment_id_34541 = squot32(virt_group_id_34540,\n                                                sext_i64_i32(groups_per_segme",
            "nt_34520));\n        int64_t global_tid_34542 = srem64(sext_i32_i64(virt_group_id_34540) *\n                                          seghist_group_sizze_31082 +\n                                          sext_i32_i64(local_tid_34530),\n                                          seghist_group_sizze_31082 *\n                                          groups_per_segment_34520);\n        int64_t bucket_id_34496 = sext_i32_i64(flat_segment_id_34541);\n        int64_t subhistogram_id_34497;\n        int64_t x_acc_34543;\n        int64_t chunk_sizze_34544;\n        \n        chunk_sizze_34544 = smin64(elements_per_thread_34521,\n                                   sdiv_up64(num_subhistos_34419 -\n                                             global_tid_34542,\n                                             threads_per_segment_34524));\n        \n        int64_t x_31088;\n        int64_t x_31089;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_34543 = (int64_t) 0;\n        }\n        for (int64_t i_34548 = 0; i_34548 < chunk_sizze_34544; i_34548++) {\n            subhistogram_id_34497 = global_tid_34542 +\n                threads_per_segment_34524 * i_34548;\n            // apply map function\n            {\n                // load accumulator\n                {\n                    x_31088 = x_acc_34543;\n                }\n                // load new values\n                {\n                    x_31089 = ((__global\n                                int64_t *) defunc_1_map_res_subhistos_mem_34420)[subhistogram_id_34497 *\n                                                                                 defunc_2_reduce_res_29639 +\n                                                                                 bucket_id_34496];\n                }\n                // apply reduction operator\n                {\n                    int64_t defunc_1_f_res_31090 = smax64(x_31088, x_31089);\n                    \n                    // store in accumulator\n                    {\n       ",
            "                 x_acc_34543 = defunc_1_f_res_31090;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_31088 = x_acc_34543;\n            ((__local\n              int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530)] =\n                x_31088;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_34549;\n        int32_t skip_waves_34550;\n        \n        skip_waves_34550 = 1;\n        \n        int64_t x_34545;\n        int64_t x_34546;\n        \n        offset_34549 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_34530,\n                      sext_i64_i32(seghist_group_sizze_31082))) {\n                x_34545 = ((__local\n                            int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530 +\n                                                          offset_34549)];\n            }\n        }\n        offset_34549 = 1;\n        while (slt32(offset_34549, wave_sizze_34532)) {\n            if (slt32(local_tid_34530 + offset_34549,\n                      sext_i64_i32(seghist_group_sizze_31082)) &&\n                ((local_tid_34530 - squot32(local_tid_34530, wave_sizze_34532) *\n                  wave_sizze_34532) & (2 * offset_34549 - 1)) == 0) {\n                // read array element\n                {\n                    x_34546 = ((volatile __local\n                                int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530 +\n                                                              offset_34549)];\n                }\n                // apply reduction operation\n                {\n                    int64_t defunc_1_f_res_34547 = smax64(x_34545, x_34546);\n                    \n                    x_34545 = defunc_1_f_res_34547;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n               ",
            "       int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530)] =\n                        x_34545;\n                }\n            }\n            offset_34549 *= 2;\n        }\n        while (slt32(skip_waves_34550,\n                     squot32(sext_i64_i32(seghist_group_sizze_31082) +\n                             wave_sizze_34532 - 1, wave_sizze_34532))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_34549 = skip_waves_34550 * wave_sizze_34532;\n            if (slt32(local_tid_34530 + offset_34549,\n                      sext_i64_i32(seghist_group_sizze_31082)) &&\n                ((local_tid_34530 - squot32(local_tid_34530, wave_sizze_34532) *\n                  wave_sizze_34532) == 0 && (squot32(local_tid_34530,\n                                                     wave_sizze_34532) & (2 *\n                                                                          skip_waves_34550 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_34546 = ((__local\n                                int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530 +\n                                                              offset_34549)];\n                }\n                // apply reduction operation\n                {\n                    int64_t defunc_1_f_res_34547 = smax64(x_34545, x_34546);\n                    \n                    x_34545 = defunc_1_f_res_34547;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530)] =\n                        x_34545;\n                }\n            }\n            skip_waves_34550 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_34530) == (int64_t) 0) {\n                x",
            "_acc_34543 = x_34545;\n            }\n        }\n        if (groups_per_segment_34520 == (int64_t) 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_34530 == 0) {\n                    ((__global int64_t *) mem_32112)[bucket_id_34496] =\n                        x_acc_34543;\n                }\n            }\n        } else {\n            int32_t old_counter_34551;\n            \n            // first thread in group saves group result to global memory\n            {\n                if (local_tid_34530 == 0) {\n                    ((__global\n                      int64_t *) group_res_arr_mem_34525)[sext_i32_i64(virt_group_id_34540) *\n                                                          seghist_group_sizze_31082] =\n                        x_acc_34543;\n                    mem_fence_global();\n                    old_counter_34551 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) clusterPointszicounter_mem_34527)[sext_i32_i64(srem32(flat_segment_id_34541,\n                                                                                                              10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_34536)[(int64_t) 0] =\n                        old_counter_34551 == groups_per_segment_34520 -\n                        (int64_t) 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_34552;\n            \n            is_last_group_34552 = ((__local\n                                    bool *) sync_arr_mem_34536)[(int64_t) 0];\n            if (is_last_group_34552) {\n                if (local_tid_34530 == 0) {\n                    old_counter_34551 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) clusterPointszicou",
            "nter_mem_34527)[sext_i32_i64(srem32(flat_segment_id_34541,\n                                                                                                              10240))],\n                                              (int) ((int64_t) 0 -\n                                                     groups_per_segment_34520));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_34553 =\n                            sdiv_up64(groups_per_segment_34520,\n                                      seghist_group_sizze_31082);\n                    \n                    x_31088 = (int64_t) 0;\n                    for (int64_t i_34554 = 0; i_34554 < read_per_thread_34553;\n                         i_34554++) {\n                        int64_t group_res_id_34555 =\n                                sext_i32_i64(local_tid_34530) *\n                                read_per_thread_34553 + i_34554;\n                        int64_t index_of_group_res_34556 =\n                                sext_i32_i64(flat_segment_id_34541) *\n                                groups_per_segment_34520 + group_res_id_34555;\n                        \n                        if (slt64(group_res_id_34555,\n                                  groups_per_segment_34520)) {\n                            x_31089 = ((__global\n                                        int64_t *) group_res_arr_mem_34525)[index_of_group_res_34556 *\n                                                                            seghist_group_sizze_31082];\n                            \n                            int64_t defunc_1_f_res_31090;\n                            \n                            defunc_1_f_res_31090 = smax64(x_31088, x_31089);\n                            x_31088 = defunc_1_f_res_31090;\n                        }\n                    }\n                }\n                ((__local\n                  int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530)] =\n           ",
            "         x_31088;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_34557;\n                    int32_t skip_waves_34558;\n                    \n                    skip_waves_34558 = 1;\n                    \n                    int64_t x_34545;\n                    int64_t x_34546;\n                    \n                    offset_34557 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_34530,\n                                  sext_i64_i32(seghist_group_sizze_31082))) {\n                            x_34545 = ((__local\n                                        int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530 +\n                                                                      offset_34557)];\n                        }\n                    }\n                    offset_34557 = 1;\n                    while (slt32(offset_34557, wave_sizze_34532)) {\n                        if (slt32(local_tid_34530 + offset_34557,\n                                  sext_i64_i32(seghist_group_sizze_31082)) &&\n                            ((local_tid_34530 - squot32(local_tid_34530,\n                                                        wave_sizze_34532) *\n                              wave_sizze_34532) & (2 * offset_34557 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_34546 = ((volatile __local\n                                            int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530 +\n                                                                          offset_34557)];\n                            }\n                            // apply reduction operation\n                            {\n                                int64_t defunc_1_f_res_34547 = smax64(x_34545,\n                    ",
            "                                                  x_34546);\n                                \n                                x_34545 = defunc_1_f_res_34547;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530)] =\n                                    x_34545;\n                            }\n                        }\n                        offset_34557 *= 2;\n                    }\n                    while (slt32(skip_waves_34558,\n                                 squot32(sext_i64_i32(seghist_group_sizze_31082) +\n                                         wave_sizze_34532 - 1,\n                                         wave_sizze_34532))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_34557 = skip_waves_34558 * wave_sizze_34532;\n                        if (slt32(local_tid_34530 + offset_34557,\n                                  sext_i64_i32(seghist_group_sizze_31082)) &&\n                            ((local_tid_34530 - squot32(local_tid_34530,\n                                                        wave_sizze_34532) *\n                              wave_sizze_34532) == 0 &&\n                             (squot32(local_tid_34530, wave_sizze_34532) & (2 *\n                                                                            skip_waves_34558 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_34546 = ((__local\n                                            int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530 +\n                                                                          offset_34557)];\n                            }\n                       ",
            "     // apply reduction operation\n                            {\n                                int64_t defunc_1_f_res_34547 = smax64(x_34545,\n                                                                      x_34546);\n                                \n                                x_34545 = defunc_1_f_res_34547;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  int64_t *) red_arr_mem_34534)[sext_i32_i64(local_tid_34530)] =\n                                    x_34545;\n                            }\n                        }\n                        skip_waves_34558 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_34530 == 0) {\n                            ((__global int64_t *) mem_32112)[bucket_id_34496] =\n                                x_34545;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef seghist_group_sizze_31082\n}\n__kernel void clusterPointszisegred_large_36095(__global int *global_failure,\n                                                uint sync_arr_mem_36133_backing_offset_0,\n                                                uint red_arr_mem_36131_backing_offset_1,\n                                                int64_t defunc_2_reduce_res_30100,\n                                                int64_t num_groups_31475,\n                                                int32_t num_subhistos_36016,\n                                                int64_t groups_per_segment_36117,\n                                                int64_t elements_per_thread_36118,\n                                                int64_t virt_num_groups_36119,\n                                    ",
            "            int64_t threads_per_segment_36121,\n                                                __global\n                                                unsigned char *mem_32307,\n                                                __global\n                                                unsigned char *defunc_1_map_res_subhistos_mem_36017,\n                                                __global\n                                                unsigned char *group_res_arr_mem_36122,\n                                                __global\n                                                unsigned char *clusterPointszicounter_mem_36124)\n{\n    #define seghist_group_sizze_31473 (clusterPointsziseghist_group_sizze_31472)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *sync_arr_mem_36133_backing_1 =\n                  &shared_mem[sync_arr_mem_36133_backing_offset_0];\n    volatile char *red_arr_mem_36131_backing_0 =\n                  &shared_mem[red_arr_mem_36131_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36126;\n    int32_t local_tid_36127;\n    int64_t group_sizze_36130;\n    int32_t wave_sizze_36129;\n    int32_t group_tid_36128;\n    \n    global_tid_36126 = get_global_id(0);\n    local_tid_36127 = get_local_id(0);\n    group_sizze_36130 = get_local_size(0);\n    wave_sizze_36129 = LOCKSTEP_WIDTH;\n    group_tid_36128 = get_group_id(0);\n    \n    int32_t flat_gtid_36095;\n    \n    flat_gtid_36095 = global_tid_36126;\n    \n    __local char *red_arr_mem_36131;\n    \n    red_arr_mem_36131 = (__local char *) red_arr_mem_36131_backing_0;\n    \n    __local char *sync_arr_mem_36133;\n    \n    sync_arr_mem_36133 = (__local char *) sync_arr_mem_36133_backing_1;\n    \n    int32_t phys_group_id_36135;\n    \n    phys_group_id_36135 = get_group_id(0);\n    for (int32_t i_36136 = 0; i_36136 <\n         sdiv_up32(sext_i64_i32(virt_num_groups_36119) - phys_group_id_36135,\n                   sex",
            "t_i64_i32(num_groups_31475)); i_36136++) {\n        int32_t virt_group_id_36137 = phys_group_id_36135 + i_36136 *\n                sext_i64_i32(num_groups_31475);\n        int32_t flat_segment_id_36138 = squot32(virt_group_id_36137,\n                                                sext_i64_i32(groups_per_segment_36117));\n        int64_t global_tid_36139 = srem64(sext_i32_i64(virt_group_id_36137) *\n                                          seghist_group_sizze_31473 +\n                                          sext_i32_i64(local_tid_36127),\n                                          seghist_group_sizze_31473 *\n                                          groups_per_segment_36117);\n        int64_t bucket_id_36093 = sext_i32_i64(flat_segment_id_36138);\n        int64_t subhistogram_id_36094;\n        int64_t x_acc_36140;\n        int64_t chunk_sizze_36141;\n        \n        chunk_sizze_36141 = smin64(elements_per_thread_36118,\n                                   sdiv_up64(num_subhistos_36016 -\n                                             global_tid_36139,\n                                             threads_per_segment_36121));\n        \n        int64_t x_31479;\n        int64_t x_31480;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_36140 = (int64_t) 0;\n        }\n        for (int64_t i_36145 = 0; i_36145 < chunk_sizze_36141; i_36145++) {\n            subhistogram_id_36094 = global_tid_36139 +\n                threads_per_segment_36121 * i_36145;\n            // apply map function\n            {\n                // load accumulator\n                {\n                    x_31479 = x_acc_36140;\n                }\n                // load new values\n                {\n                    x_31480 = ((__global\n                                int64_t *) defunc_1_map_res_subhistos_mem_36017)[subhistogram_id_36094 *\n                                                                                 defunc_2_reduce_res_30100 +\n                                           ",
            "                                      bucket_id_36093];\n                }\n                // apply reduction operator\n                {\n                    int64_t defunc_1_f_res_31481 = smax64(x_31479, x_31480);\n                    \n                    // store in accumulator\n                    {\n                        x_acc_36140 = defunc_1_f_res_31481;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_31479 = x_acc_36140;\n            ((__local\n              int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127)] =\n                x_31479;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_36146;\n        int32_t skip_waves_36147;\n        \n        skip_waves_36147 = 1;\n        \n        int64_t x_36142;\n        int64_t x_36143;\n        \n        offset_36146 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_36127,\n                      sext_i64_i32(seghist_group_sizze_31473))) {\n                x_36142 = ((__local\n                            int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127 +\n                                                          offset_36146)];\n            }\n        }\n        offset_36146 = 1;\n        while (slt32(offset_36146, wave_sizze_36129)) {\n            if (slt32(local_tid_36127 + offset_36146,\n                      sext_i64_i32(seghist_group_sizze_31473)) &&\n                ((local_tid_36127 - squot32(local_tid_36127, wave_sizze_36129) *\n                  wave_sizze_36129) & (2 * offset_36146 - 1)) == 0) {\n                // read array element\n                {\n                    x_36143 = ((volatile __local\n                                int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127 +\n                                                              offset_36146)];\n                }\n                // apply reduction operat",
            "ion\n                {\n                    int64_t defunc_1_f_res_36144 = smax64(x_36142, x_36143);\n                    \n                    x_36142 = defunc_1_f_res_36144;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127)] =\n                        x_36142;\n                }\n            }\n            offset_36146 *= 2;\n        }\n        while (slt32(skip_waves_36147,\n                     squot32(sext_i64_i32(seghist_group_sizze_31473) +\n                             wave_sizze_36129 - 1, wave_sizze_36129))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_36146 = skip_waves_36147 * wave_sizze_36129;\n            if (slt32(local_tid_36127 + offset_36146,\n                      sext_i64_i32(seghist_group_sizze_31473)) &&\n                ((local_tid_36127 - squot32(local_tid_36127, wave_sizze_36129) *\n                  wave_sizze_36129) == 0 && (squot32(local_tid_36127,\n                                                     wave_sizze_36129) & (2 *\n                                                                          skip_waves_36147 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_36143 = ((__local\n                                int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127 +\n                                                              offset_36146)];\n                }\n                // apply reduction operation\n                {\n                    int64_t defunc_1_f_res_36144 = smax64(x_36142, x_36143);\n                    \n                    x_36142 = defunc_1_f_res_36144;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_36131)[sext_i32_i64(local_ti",
            "d_36127)] =\n                        x_36142;\n                }\n            }\n            skip_waves_36147 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_36127) == (int64_t) 0) {\n                x_acc_36140 = x_36142;\n            }\n        }\n        if (groups_per_segment_36117 == (int64_t) 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_36127 == 0) {\n                    ((__global int64_t *) mem_32307)[bucket_id_36093] =\n                        x_acc_36140;\n                }\n            }\n        } else {\n            int32_t old_counter_36148;\n            \n            // first thread in group saves group result to global memory\n            {\n                if (local_tid_36127 == 0) {\n                    ((__global\n                      int64_t *) group_res_arr_mem_36122)[sext_i32_i64(virt_group_id_36137) *\n                                                          seghist_group_sizze_31473] =\n                        x_acc_36140;\n                    mem_fence_global();\n                    old_counter_36148 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) clusterPointszicounter_mem_36124)[sext_i32_i64(srem32(flat_segment_id_36138,\n                                                                                                              10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_36133)[(int64_t) 0] =\n                        old_counter_36148 == groups_per_segment_36117 -\n                        (int64_t) 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_36149;\n            \n            is_last_group_36149 = ((__local\n                                   ",
            " bool *) sync_arr_mem_36133)[(int64_t) 0];\n            if (is_last_group_36149) {\n                if (local_tid_36127 == 0) {\n                    old_counter_36148 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) clusterPointszicounter_mem_36124)[sext_i32_i64(srem32(flat_segment_id_36138,\n                                                                                                              10240))],\n                                              (int) ((int64_t) 0 -\n                                                     groups_per_segment_36117));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_36150 =\n                            sdiv_up64(groups_per_segment_36117,\n                                      seghist_group_sizze_31473);\n                    \n                    x_31479 = (int64_t) 0;\n                    for (int64_t i_36151 = 0; i_36151 < read_per_thread_36150;\n                         i_36151++) {\n                        int64_t group_res_id_36152 =\n                                sext_i32_i64(local_tid_36127) *\n                                read_per_thread_36150 + i_36151;\n                        int64_t index_of_group_res_36153 =\n                                sext_i32_i64(flat_segment_id_36138) *\n                                groups_per_segment_36117 + group_res_id_36152;\n                        \n                        if (slt64(group_res_id_36152,\n                                  groups_per_segment_36117)) {\n                            x_31480 = ((__global\n                                        int64_t *) group_res_arr_mem_36122)[index_of_group_res_36153 *\n                                                                            seghist_group_sizze_31473];\n                            \n                            int64_t defunc_1_f_res_31481;\n                            \n              ",
            "              defunc_1_f_res_31481 = smax64(x_31479, x_31480);\n                            x_31479 = defunc_1_f_res_31481;\n                        }\n                    }\n                }\n                ((__local\n                  int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127)] =\n                    x_31479;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_36154;\n                    int32_t skip_waves_36155;\n                    \n                    skip_waves_36155 = 1;\n                    \n                    int64_t x_36142;\n                    int64_t x_36143;\n                    \n                    offset_36154 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_36127,\n                                  sext_i64_i32(seghist_group_sizze_31473))) {\n                            x_36142 = ((__local\n                                        int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127 +\n                                                                      offset_36154)];\n                        }\n                    }\n                    offset_36154 = 1;\n                    while (slt32(offset_36154, wave_sizze_36129)) {\n                        if (slt32(local_tid_36127 + offset_36154,\n                                  sext_i64_i32(seghist_group_sizze_31473)) &&\n                            ((local_tid_36127 - squot32(local_tid_36127,\n                                                        wave_sizze_36129) *\n                              wave_sizze_36129) & (2 * offset_36154 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_36143 = ((volatile __local\n                                            int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127 +",
            "\n                                                                          offset_36154)];\n                            }\n                            // apply reduction operation\n                            {\n                                int64_t defunc_1_f_res_36144 = smax64(x_36142,\n                                                                      x_36143);\n                                \n                                x_36142 = defunc_1_f_res_36144;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127)] =\n                                    x_36142;\n                            }\n                        }\n                        offset_36154 *= 2;\n                    }\n                    while (slt32(skip_waves_36155,\n                                 squot32(sext_i64_i32(seghist_group_sizze_31473) +\n                                         wave_sizze_36129 - 1,\n                                         wave_sizze_36129))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_36154 = skip_waves_36155 * wave_sizze_36129;\n                        if (slt32(local_tid_36127 + offset_36154,\n                                  sext_i64_i32(seghist_group_sizze_31473)) &&\n                            ((local_tid_36127 - squot32(local_tid_36127,\n                                                        wave_sizze_36129) *\n                              wave_sizze_36129) == 0 &&\n                             (squot32(local_tid_36127, wave_sizze_36129) & (2 *\n                                                                            skip_waves_36155 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                       ",
            "     {\n                                x_36143 = ((__local\n                                            int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127 +\n                                                                          offset_36154)];\n                            }\n                            // apply reduction operation\n                            {\n                                int64_t defunc_1_f_res_36144 = smax64(x_36142,\n                                                                      x_36143);\n                                \n                                x_36142 = defunc_1_f_res_36144;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  int64_t *) red_arr_mem_36131)[sext_i32_i64(local_tid_36127)] =\n                                    x_36142;\n                            }\n                        }\n                        skip_waves_36155 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_36127 == 0) {\n                            ((__global int64_t *) mem_32307)[bucket_id_36093] =\n                                x_36142;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef seghist_group_sizze_31473\n}\n__kernel void clusterPointszisegred_large_36712(__global int *global_failure,\n                                                uint sync_arr_mem_36750_backing_offset_0,\n                                                uint red_arr_mem_36748_backing_offset_1,\n                                                int64_t defunc_2_reduce_res_30210,\n                                                int64_t num_groups_31606,\n                                                in",
            "t32_t num_subhistos_36633,\n                                                int64_t groups_per_segment_36734,\n                                                int64_t elements_per_thread_36735,\n                                                int64_t virt_num_groups_36736,\n                                                int64_t threads_per_segment_36738,\n                                                __global\n                                                unsigned char *mem_32343,\n                                                __global\n                                                unsigned char *defunc_1_map_res_subhistos_mem_36634,\n                                                __global\n                                                unsigned char *group_res_arr_mem_36739,\n                                                __global\n                                                unsigned char *clusterPointszicounter_mem_36741)\n{\n    #define seghist_group_sizze_31604 (clusterPointsziseghist_group_sizze_31603)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *sync_arr_mem_36750_backing_1 =\n                  &shared_mem[sync_arr_mem_36750_backing_offset_0];\n    volatile char *red_arr_mem_36748_backing_0 =\n                  &shared_mem[red_arr_mem_36748_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36743;\n    int32_t local_tid_36744;\n    int64_t group_sizze_36747;\n    int32_t wave_sizze_36746;\n    int32_t group_tid_36745;\n    \n    global_tid_36743 = get_global_id(0);\n    local_tid_36744 = get_local_id(0);\n    group_sizze_36747 = get_local_size(0);\n    wave_sizze_36746 = LOCKSTEP_WIDTH;\n    group_tid_36745 = get_group_id(0);\n    \n    int32_t flat_gtid_36712;\n    \n    flat_gtid_36712 = global_tid_36743;\n    \n    __local char *red_arr_mem_36748;\n    \n    red_arr_mem_36748 = (__local char *) red_arr_mem_36748_backing_0;\n    \n    __local char *sync_arr_mem_367",
            "50;\n    \n    sync_arr_mem_36750 = (__local char *) sync_arr_mem_36750_backing_1;\n    \n    int32_t phys_group_id_36752;\n    \n    phys_group_id_36752 = get_group_id(0);\n    for (int32_t i_36753 = 0; i_36753 <\n         sdiv_up32(sext_i64_i32(virt_num_groups_36736) - phys_group_id_36752,\n                   sext_i64_i32(num_groups_31606)); i_36753++) {\n        int32_t virt_group_id_36754 = phys_group_id_36752 + i_36753 *\n                sext_i64_i32(num_groups_31606);\n        int32_t flat_segment_id_36755 = squot32(virt_group_id_36754,\n                                                sext_i64_i32(groups_per_segment_36734));\n        int64_t global_tid_36756 = srem64(sext_i32_i64(virt_group_id_36754) *\n                                          seghist_group_sizze_31604 +\n                                          sext_i32_i64(local_tid_36744),\n                                          seghist_group_sizze_31604 *\n                                          groups_per_segment_36734);\n        int64_t bucket_id_36710 = sext_i32_i64(flat_segment_id_36755);\n        int64_t subhistogram_id_36711;\n        int64_t x_acc_36757;\n        int64_t chunk_sizze_36758;\n        \n        chunk_sizze_36758 = smin64(elements_per_thread_36735,\n                                   sdiv_up64(num_subhistos_36633 -\n                                             global_tid_36756,\n                                             threads_per_segment_36738));\n        \n        int64_t x_31610;\n        int64_t x_31611;\n        \n        // neutral-initialise the accumulators\n        {\n            x_acc_36757 = (int64_t) 0;\n        }\n        for (int64_t i_36762 = 0; i_36762 < chunk_sizze_36758; i_36762++) {\n            subhistogram_id_36711 = global_tid_36756 +\n                threads_per_segment_36738 * i_36762;\n            // apply map function\n            {\n                // load accumulator\n                {\n                    x_31610 = x_acc_36757;\n                }\n                // load new values\n         ",
            "       {\n                    x_31611 = ((__global\n                                int64_t *) defunc_1_map_res_subhistos_mem_36634)[subhistogram_id_36711 *\n                                                                                 defunc_2_reduce_res_30210 +\n                                                                                 bucket_id_36710];\n                }\n                // apply reduction operator\n                {\n                    int64_t defunc_1_f_res_31612 = smax64(x_31610, x_31611);\n                    \n                    // store in accumulator\n                    {\n                        x_acc_36757 = defunc_1_f_res_31612;\n                    }\n                }\n            }\n        }\n        // to reduce current chunk, first store our result in memory\n        {\n            x_31610 = x_acc_36757;\n            ((__local\n              int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744)] =\n                x_31610;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t offset_36763;\n        int32_t skip_waves_36764;\n        \n        skip_waves_36764 = 1;\n        \n        int64_t x_36759;\n        int64_t x_36760;\n        \n        offset_36763 = 0;\n        // participating threads read initial accumulator\n        {\n            if (slt32(local_tid_36744,\n                      sext_i64_i32(seghist_group_sizze_31604))) {\n                x_36759 = ((__local\n                            int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744 +\n                                                          offset_36763)];\n            }\n        }\n        offset_36763 = 1;\n        while (slt32(offset_36763, wave_sizze_36746)) {\n            if (slt32(local_tid_36744 + offset_36763,\n                      sext_i64_i32(seghist_group_sizze_31604)) &&\n                ((local_tid_36744 - squot32(local_tid_36744, wave_sizze_36746) *\n                  wave_sizze_36746) & (2 * offset_36763 - 1)) == 0) {\n                // read arra",
            "y element\n                {\n                    x_36760 = ((volatile __local\n                                int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744 +\n                                                              offset_36763)];\n                }\n                // apply reduction operation\n                {\n                    int64_t defunc_1_f_res_36761 = smax64(x_36759, x_36760);\n                    \n                    x_36759 = defunc_1_f_res_36761;\n                }\n                // write result of operation\n                {\n                    ((volatile __local\n                      int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744)] =\n                        x_36759;\n                }\n            }\n            offset_36763 *= 2;\n        }\n        while (slt32(skip_waves_36764,\n                     squot32(sext_i64_i32(seghist_group_sizze_31604) +\n                             wave_sizze_36746 - 1, wave_sizze_36746))) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            offset_36763 = skip_waves_36764 * wave_sizze_36746;\n            if (slt32(local_tid_36744 + offset_36763,\n                      sext_i64_i32(seghist_group_sizze_31604)) &&\n                ((local_tid_36744 - squot32(local_tid_36744, wave_sizze_36746) *\n                  wave_sizze_36746) == 0 && (squot32(local_tid_36744,\n                                                     wave_sizze_36746) & (2 *\n                                                                          skip_waves_36764 -\n                                                                          1)) ==\n                 0)) {\n                // read array element\n                {\n                    x_36760 = ((__local\n                                int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744 +\n                                                              offset_36763)];\n                }\n                // apply reduction operation\n                {\n                    int64_t",
            " defunc_1_f_res_36761 = smax64(x_36759, x_36760);\n                    \n                    x_36759 = defunc_1_f_res_36761;\n                }\n                // write result of operation\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744)] =\n                        x_36759;\n                }\n            }\n            skip_waves_36764 *= 2;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread saves the result in accumulator\n        {\n            if (sext_i32_i64(local_tid_36744) == (int64_t) 0) {\n                x_acc_36757 = x_36759;\n            }\n        }\n        if (groups_per_segment_36734 == (int64_t) 1) {\n            // first thread in group saves final result to memory\n            {\n                if (local_tid_36744 == 0) {\n                    ((__global int64_t *) mem_32343)[bucket_id_36710] =\n                        x_acc_36757;\n                }\n            }\n        } else {\n            int32_t old_counter_36765;\n            \n            // first thread in group saves group result to global memory\n            {\n                if (local_tid_36744 == 0) {\n                    ((__global\n                      int64_t *) group_res_arr_mem_36739)[sext_i32_i64(virt_group_id_36754) *\n                                                          seghist_group_sizze_31604] =\n                        x_acc_36757;\n                    mem_fence_global();\n                    old_counter_36765 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) clusterPointszicounter_mem_36741)[sext_i32_i64(srem32(flat_segment_id_36755,\n                                                                                                              10240))],\n                                              (int) 1);\n                    ((__local bool *) sync_arr_mem_36750)[(int64_t) 0] =\n                        old_counter_36765 ",
            "== groups_per_segment_36734 -\n                        (int64_t) 1;\n                }\n            }\n            barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n            \n            bool is_last_group_36766;\n            \n            is_last_group_36766 = ((__local\n                                    bool *) sync_arr_mem_36750)[(int64_t) 0];\n            if (is_last_group_36766) {\n                if (local_tid_36744 == 0) {\n                    old_counter_36765 =\n                        atomic_add_i32_global(&((volatile __global\n                                                 int *) clusterPointszicounter_mem_36741)[sext_i32_i64(srem32(flat_segment_id_36755,\n                                                                                                              10240))],\n                                              (int) ((int64_t) 0 -\n                                                     groups_per_segment_36734));\n                }\n                // read in the per-group-results\n                {\n                    int64_t read_per_thread_36767 =\n                            sdiv_up64(groups_per_segment_36734,\n                                      seghist_group_sizze_31604);\n                    \n                    x_31610 = (int64_t) 0;\n                    for (int64_t i_36768 = 0; i_36768 < read_per_thread_36767;\n                         i_36768++) {\n                        int64_t group_res_id_36769 =\n                                sext_i32_i64(local_tid_36744) *\n                                read_per_thread_36767 + i_36768;\n                        int64_t index_of_group_res_36770 =\n                                sext_i32_i64(flat_segment_id_36755) *\n                                groups_per_segment_36734 + group_res_id_36769;\n                        \n                        if (slt64(group_res_id_36769,\n                                  groups_per_segment_36734)) {\n                            x_31611 = ((__global\n                              ",
            "          int64_t *) group_res_arr_mem_36739)[index_of_group_res_36770 *\n                                                                            seghist_group_sizze_31604];\n                            \n                            int64_t defunc_1_f_res_31612;\n                            \n                            defunc_1_f_res_31612 = smax64(x_31610, x_31611);\n                            x_31610 = defunc_1_f_res_31612;\n                        }\n                    }\n                }\n                ((__local\n                  int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744)] =\n                    x_31610;\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // reduce the per-group results\n                {\n                    int32_t offset_36771;\n                    int32_t skip_waves_36772;\n                    \n                    skip_waves_36772 = 1;\n                    \n                    int64_t x_36759;\n                    int64_t x_36760;\n                    \n                    offset_36771 = 0;\n                    // participating threads read initial accumulator\n                    {\n                        if (slt32(local_tid_36744,\n                                  sext_i64_i32(seghist_group_sizze_31604))) {\n                            x_36759 = ((__local\n                                        int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744 +\n                                                                      offset_36771)];\n                        }\n                    }\n                    offset_36771 = 1;\n                    while (slt32(offset_36771, wave_sizze_36746)) {\n                        if (slt32(local_tid_36744 + offset_36771,\n                                  sext_i64_i32(seghist_group_sizze_31604)) &&\n                            ((local_tid_36744 - squot32(local_tid_36744,\n                                                        wave_sizze_36746) *\n                              wave_sizze_36746) ",
            "& (2 * offset_36771 - 1)) ==\n                            0) {\n                            // read array element\n                            {\n                                x_36760 = ((volatile __local\n                                            int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744 +\n                                                                          offset_36771)];\n                            }\n                            // apply reduction operation\n                            {\n                                int64_t defunc_1_f_res_36761 = smax64(x_36759,\n                                                                      x_36760);\n                                \n                                x_36759 = defunc_1_f_res_36761;\n                            }\n                            // write result of operation\n                            {\n                                ((volatile __local\n                                  int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744)] =\n                                    x_36759;\n                            }\n                        }\n                        offset_36771 *= 2;\n                    }\n                    while (slt32(skip_waves_36772,\n                                 squot32(sext_i64_i32(seghist_group_sizze_31604) +\n                                         wave_sizze_36746 - 1,\n                                         wave_sizze_36746))) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                        offset_36771 = skip_waves_36772 * wave_sizze_36746;\n                        if (slt32(local_tid_36744 + offset_36771,\n                                  sext_i64_i32(seghist_group_sizze_31604)) &&\n                            ((local_tid_36744 - squot32(local_tid_36744,\n                                                        wave_sizze_36746) *\n                              wave_sizze_36746) == 0 &&\n                             (squot32(local_tid_36744, wave",
            "_sizze_36746) & (2 *\n                                                                            skip_waves_36772 -\n                                                                            1)) ==\n                             0)) {\n                            // read array element\n                            {\n                                x_36760 = ((__local\n                                            int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744 +\n                                                                          offset_36771)];\n                            }\n                            // apply reduction operation\n                            {\n                                int64_t defunc_1_f_res_36761 = smax64(x_36759,\n                                                                      x_36760);\n                                \n                                x_36759 = defunc_1_f_res_36761;\n                            }\n                            // write result of operation\n                            {\n                                ((__local\n                                  int64_t *) red_arr_mem_36748)[sext_i32_i64(local_tid_36744)] =\n                                    x_36759;\n                            }\n                        }\n                        skip_waves_36772 *= 2;\n                    }\n                    // and back to memory with the final result\n                    {\n                        if (local_tid_36744 == 0) {\n                            ((__global int64_t *) mem_32343)[bucket_id_36710] =\n                                x_36759;\n                        }\n                    }\n                }\n            }\n        }\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef seghist_group_sizze_31604\n}\n__kernel void clusterPointszisegred_nonseg_30735(__global int *global_failure,\n                                                 uint red_arr_mem_33170_backin",
            "g_offset_0,\n                                                 uint sync_arr_mem_33168_backing_offset_1,\n                                                 int64_t num_groups_30730,\n                                                 int64_t bytes_31829,\n                                                 int64_t num_threads_33162,\n                                                 __global\n                                                 unsigned char *mem_31933,\n                                                 __global\n                                                 unsigned char *mem_31936,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_33158,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_33160)\n{\n    #define segred_group_sizze_30728 (clusterPointszisegred_group_sizze_30727)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_33170_backing_1 =\n                  &shared_mem[red_arr_mem_33170_backing_offset_0];\n    volatile char *sync_arr_mem_33168_backing_0 =\n                  &shared_mem[sync_arr_mem_33168_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33163;\n    int32_t local_tid_33164;\n    int64_t group_sizze_33167;\n    int32_t wave_sizze_33166;\n    int32_t group_tid_33165;\n    \n    global_tid_33163 = get_global_id(0);\n    local_tid_33164 = get_local_id(0);\n    group_sizze_33167 = get_local_size(0);\n    wave_sizze_33166 = LOCKSTEP_WIDTH;\n    group_tid_33165 = get_group_id(0);\n    \n    int32_t phys_tid_30735;\n    \n    phys_tid_30735 = global_tid_33163;\n    \n    __local char *sync_arr_mem_33168;\n    \n    sync_arr_mem_33168 = (__local char *) sync_arr_mem_33168_backing_0;\n    \n    __local char *red_arr_mem_33170;\n    \n    red_arr_mem_33170 = (__local char *) r",
            "ed_arr_mem_33170_backing_1;\n    \n    int64_t dummy_30733;\n    \n    dummy_30733 = (int64_t) 0;\n    \n    int64_t gtid_30734;\n    \n    gtid_30734 = (int64_t) 0;\n    \n    int64_t x_acc_33172;\n    int64_t chunk_sizze_33173;\n    \n    chunk_sizze_33173 = smin64(sdiv_up64(bytes_31829,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_30728 *\n                                         num_groups_30730))),\n                               sdiv_up64(bytes_31829 - phys_tid_30735,\n                                         num_threads_33162));\n    \n    int64_t x_29112;\n    int64_t x_29113;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_33172 = (int64_t) 0;\n    }\n    for (int64_t i_33177 = 0; i_33177 < chunk_sizze_33173; i_33177++) {\n        gtid_30734 = phys_tid_30735 + num_threads_33162 * i_33177;\n        // apply map function\n        {\n            int64_t x_29115 = ((__global int64_t *) mem_31933)[gtid_30734];\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_29112 = x_acc_33172;\n            }\n            // load new values\n            {\n                x_29113 = x_29115;\n            }\n            // apply reduction operator\n            {\n                int64_t defunc_1_op_res_29114 = add64(x_29112, x_29113);\n                \n                // store in accumulator\n                {\n                    x_acc_33172 = defunc_1_op_res_29114;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_29112 = x_acc_33172;\n        ((__local int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164)] =\n            x_29112;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_33178;\n    int32_t skip_waves_33179;\n    \n    skip_waves_33179 = 1;\n    \n    int64_t x_33174;\n    int64_t x_33175;\n    \n    offset_33178 = 0;\n    // participating threads read initial accumulator\n    {\n ",
            "       if (slt32(local_tid_33164, sext_i64_i32(segred_group_sizze_30728))) {\n            x_33174 = ((__local\n                        int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164 +\n                                                      offset_33178)];\n        }\n    }\n    offset_33178 = 1;\n    while (slt32(offset_33178, wave_sizze_33166)) {\n        if (slt32(local_tid_33164 + offset_33178,\n                  sext_i64_i32(segred_group_sizze_30728)) && ((local_tid_33164 -\n                                                               squot32(local_tid_33164,\n                                                                       wave_sizze_33166) *\n                                                               wave_sizze_33166) &\n                                                              (2 *\n                                                               offset_33178 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_33175 = ((volatile __local\n                            int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164 +\n                                                          offset_33178)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_33176 = add64(x_33174, x_33175);\n                \n                x_33174 = defunc_1_op_res_33176;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164)] =\n                    x_33174;\n            }\n        }\n        offset_33178 *= 2;\n    }\n    while (slt32(skip_waves_33179,\n                 squot32(sext_i64_i32(segred_group_sizze_30728) +\n                         wave_sizze_33166 - 1, wave_sizze_33166))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_33178 = skip_waves_33179 * wave_sizze_33166;\n        if (slt32(local_tid_33",
            "164 + offset_33178,\n                  sext_i64_i32(segred_group_sizze_30728)) && ((local_tid_33164 -\n                                                               squot32(local_tid_33164,\n                                                                       wave_sizze_33166) *\n                                                               wave_sizze_33166) ==\n                                                              0 &&\n                                                              (squot32(local_tid_33164,\n                                                                       wave_sizze_33166) &\n                                                               (2 *\n                                                                skip_waves_33179 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_33175 = ((__local\n                            int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164 +\n                                                          offset_33178)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_33176 = add64(x_33174, x_33175);\n                \n                x_33174 = defunc_1_op_res_33176;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164)] =\n                    x_33174;\n            }\n        }\n        skip_waves_33179 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_33164) == (int64_t) 0) {\n            x_acc_33172 = x_33174;\n        }\n    }\n    \n    int32_t old_counter_33180;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_33164 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_33160)[sext_i32_i64(grou",
            "p_tid_33165) *\n                                                  segred_group_sizze_30728] =\n                x_acc_33172;\n            mem_fence_global();\n            old_counter_33180 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_33158)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_33168)[(int64_t) 0] =\n                old_counter_33180 == num_groups_30730 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_33181;\n    \n    is_last_group_33181 = ((__local bool *) sync_arr_mem_33168)[(int64_t) 0];\n    if (is_last_group_33181) {\n        if (local_tid_33164 == 0) {\n            old_counter_33180 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_33158)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_30730));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_33182 = sdiv_up64(num_groups_30730,\n                                                      segred_group_sizze_30728);\n            \n            x_29112 = (int64_t) 0;\n            for (int64_t i_33183 = 0; i_33183 < read_per_thread_33182;\n                 i_33183++) {\n                int64_t group_res_id_33184 = sext_i32_i64(local_tid_33164) *\n                        read_per_thread_33182 + i_33183;\n                int64_t index_of_group_res_33185 = group_res_id_33184;\n                \n                if (slt64(group_res_id_33184, num_groups_30730)) {\n                    x_29113 = ((__global\n                                int64_t *) group_res_arr_mem_33160)[index_of_group_res_33185 *\n                                                                    segr",
            "ed_group_sizze_30728];\n                    \n                    int64_t defunc_1_op_res_29114;\n                    \n                    defunc_1_op_res_29114 = add64(x_29112, x_29113);\n                    x_29112 = defunc_1_op_res_29114;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164)] =\n            x_29112;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_33186;\n            int32_t skip_waves_33187;\n            \n            skip_waves_33187 = 1;\n            \n            int64_t x_33174;\n            int64_t x_33175;\n            \n            offset_33186 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_33164,\n                          sext_i64_i32(segred_group_sizze_30728))) {\n                    x_33174 = ((__local\n                                int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164 +\n                                                              offset_33186)];\n                }\n            }\n            offset_33186 = 1;\n            while (slt32(offset_33186, wave_sizze_33166)) {\n                if (slt32(local_tid_33164 + offset_33186,\n                          sext_i64_i32(segred_group_sizze_30728)) &&\n                    ((local_tid_33164 - squot32(local_tid_33164,\n                                                wave_sizze_33166) *\n                      wave_sizze_33166) & (2 * offset_33186 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_33175 = ((volatile __local\n                                    int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164 +\n                                                                  offset_33186)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_33176",
            " = add64(x_33174, x_33175);\n                        \n                        x_33174 = defunc_1_op_res_33176;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164)] =\n                            x_33174;\n                    }\n                }\n                offset_33186 *= 2;\n            }\n            while (slt32(skip_waves_33187,\n                         squot32(sext_i64_i32(segred_group_sizze_30728) +\n                                 wave_sizze_33166 - 1, wave_sizze_33166))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_33186 = skip_waves_33187 * wave_sizze_33166;\n                if (slt32(local_tid_33164 + offset_33186,\n                          sext_i64_i32(segred_group_sizze_30728)) &&\n                    ((local_tid_33164 - squot32(local_tid_33164,\n                                                wave_sizze_33166) *\n                      wave_sizze_33166) == 0 && (squot32(local_tid_33164,\n                                                         wave_sizze_33166) &\n                                                 (2 * skip_waves_33187 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_33175 = ((__local\n                                    int64_t *) red_arr_mem_33170)[sext_i32_i64(local_tid_33164 +\n                                                                  offset_33186)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_33176 = add64(x_33174, x_33175);\n                        \n                        x_33174 = defunc_1_op_res_33176;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_ar",
            "r_mem_33170)[sext_i32_i64(local_tid_33164)] =\n                            x_33174;\n                    }\n                }\n                skip_waves_33187 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_33164 == 0) {\n                    ((__global int64_t *) mem_31936)[(int64_t) 0] = x_33174;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_30728\n}\n__kernel void clusterPointszisegred_nonseg_30962(__global int *global_failure,\n                                                 int failure_is_an_option,\n                                                 __global\n                                                 int64_t *global_failure_args,\n                                                 uint red_arr_mem_33842_backing_offset_0,\n                                                 uint sync_arr_mem_33840_backing_offset_1,\n                                                 int64_t defunc_2_reduce_res_29111,\n                                                 int64_t num_groups_30955,\n                                                 int64_t num_threads_33834,\n                                                 __global\n                                                 unsigned char *mem_31957,\n                                                 __global\n                                                 unsigned char *mem_31959,\n                                                 __global\n                                                 unsigned char *defunc_0_f_res_mem_32005,\n                                                 __global\n                                                 unsigned char *mem_32008,\n                                                 __global\n                                                 unsigned char *mem_32010,\n                                                 __global\n                                                 unsigned char *mem_32012,",
            "\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_33830,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_33832)\n{\n    #define segred_group_sizze_30953 (clusterPointszisegred_group_sizze_30952)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_33842_backing_1 =\n                  &shared_mem[red_arr_mem_33842_backing_offset_0];\n    volatile char *sync_arr_mem_33840_backing_0 =\n                  &shared_mem[sync_arr_mem_33840_backing_offset_1];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_33835;\n    int32_t local_tid_33836;\n    int64_t group_sizze_33839;\n    int32_t wave_sizze_33838;\n    int32_t group_tid_33837;\n    \n    global_tid_33835 = get_global_id(0);\n    local_tid_33836 = get_local_id(0);\n    group_sizze_33839 = get_local_size(0);\n    wave_sizze_33838 = LOCKSTEP_WIDTH;\n    group_tid_33837 = get_group_id(0);\n    \n    int32_t phys_tid_30962;\n    \n    phys_tid_30962 = global_tid_33835;\n    \n    __local char *sync_arr_mem_33840;\n    \n    sync_arr_mem_33840 = (__local char *) sync_arr_mem_33840_backing_0;\n    \n    __local char *red_arr_mem_33842;\n    \n    red_arr_mem_33842 = (__local char *) red_arr_mem_33842_backing_1;\n    \n    int64_t dummy_30960;\n    \n    dummy_30960 = (int64_t) 0;\n    \n    int64_t gtid_30961;\n    \n    gtid_30961 = (int64_t) 0;\n    \n    int32_t x_acc_33844;\n    int64_t chunk_sizze_33845;\n    \n    chunk_sizze_33845 = smin64(sdiv_up64(defunc_2_reduce_res_29111,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_30953 *\n                 ",
            "                        num_groups_30955))),\n                               sdiv_up64(defunc_2_reduce_res_29111 -\n                                         phys_tid_30962, num_threads_33834));\n    \n    int32_t x_29457;\n    int32_t x_29458;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_33844 = 0;\n    }\n    for (int64_t i_33849 = 0; i_33849 < chunk_sizze_33845; i_33849++) {\n        gtid_30961 = phys_tid_30962 + num_threads_33834 * i_33849;\n        // apply map function\n        {\n            int64_t x_29460 = ((__global\n                                int64_t *) defunc_0_f_res_mem_32005)[gtid_30961];\n            bool x_29461 = sle64((int64_t) 0, x_29460);\n            bool y_29462 = slt64(x_29460, defunc_2_reduce_res_29111);\n            bool bounds_check_29463 = x_29461 && y_29462;\n            bool index_certs_29464;\n            \n            if (!bounds_check_29463) {\n                {\n                    if (atomic_cmpxchg_i32_global(global_failure, -1, 8) ==\n                        -1) {\n                        global_failure_args[0] = x_29460;\n                        global_failure_args[1] = defunc_2_reduce_res_29111;\n                        ;\n                    }\n                    local_failure = true;\n                    goto error_0;\n                }\n            }\n            \n            int32_t defunc_0_f_res_29465 = ((__global\n                                             int32_t *) mem_31959)[x_29460];\n            int32_t defunc_0_f_res_29466 = ((__global\n                                             int32_t *) mem_31957)[x_29460];\n            bool bool_arg_29467 = defunc_0_f_res_29466 == -1;\n            bool bool_arg_29468 = !bool_arg_29467;\n            int32_t bool_res_29469 = btoi_bool_i32(bool_arg_29468);\n            \n            // save map-out results\n            {\n                ((__global int32_t *) mem_32010)[dummy_30960 *\n                                                 defunc_2_reduce_res_29111 +\n                             ",
            "                    gtid_30961] =\n                    defunc_0_f_res_29465;\n                ((__global int32_t *) mem_32012)[dummy_30960 *\n                                                 defunc_2_reduce_res_29111 +\n                                                 gtid_30961] =\n                    defunc_0_f_res_29466;\n            }\n            // load accumulator\n            {\n                x_29457 = x_acc_33844;\n            }\n            // load new values\n            {\n                x_29458 = bool_res_29469;\n            }\n            // apply reduction operator\n            {\n                int32_t defunc_1_op_res_29459 = add32(x_29457, x_29458);\n                \n                // store in accumulator\n                {\n                    x_acc_33844 = defunc_1_op_res_29459;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_29457 = x_acc_33844;\n        ((__local int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836)] =\n            x_29457;\n    }\n    \n  error_0:\n    barrier(CLK_LOCAL_MEM_FENCE);\n    if (local_failure)\n        return;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_33850;\n    int32_t skip_waves_33851;\n    \n    skip_waves_33851 = 1;\n    \n    int32_t x_33846;\n    int32_t x_33847;\n    \n    offset_33850 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_33836, sext_i64_i32(segred_group_sizze_30953))) {\n            x_33846 = ((__local\n                        int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836 +\n                                                      offset_33850)];\n        }\n    }\n    offset_33850 = 1;\n    while (slt32(offset_33850, wave_sizze_33838)) {\n        if (slt32(local_tid_33836 + offset_33850,\n                  sext_i64_i32(segred_group_sizze_30953)) && ((local_tid_33836 -\n                                                               squot32(local_tid_33836,\n                         ",
            "                                              wave_sizze_33838) *\n                                                               wave_sizze_33838) &\n                                                              (2 *\n                                                               offset_33850 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_33847 = ((volatile __local\n                            int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836 +\n                                                          offset_33850)];\n            }\n            // apply reduction operation\n            {\n                int32_t defunc_1_op_res_33848 = add32(x_33846, x_33847);\n                \n                x_33846 = defunc_1_op_res_33848;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836)] =\n                    x_33846;\n            }\n        }\n        offset_33850 *= 2;\n    }\n    while (slt32(skip_waves_33851,\n                 squot32(sext_i64_i32(segred_group_sizze_30953) +\n                         wave_sizze_33838 - 1, wave_sizze_33838))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_33850 = skip_waves_33851 * wave_sizze_33838;\n        if (slt32(local_tid_33836 + offset_33850,\n                  sext_i64_i32(segred_group_sizze_30953)) && ((local_tid_33836 -\n                                                               squot32(local_tid_33836,\n                                                                       wave_sizze_33838) *\n                                                               wave_sizze_33838) ==\n                                                              0 &&\n                                                              (squot32(local_tid_33836,\n                                                                       wave_siz",
            "ze_33838) &\n                                                               (2 *\n                                                                skip_waves_33851 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_33847 = ((__local\n                            int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836 +\n                                                          offset_33850)];\n            }\n            // apply reduction operation\n            {\n                int32_t defunc_1_op_res_33848 = add32(x_33846, x_33847);\n                \n                x_33846 = defunc_1_op_res_33848;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836)] =\n                    x_33846;\n            }\n        }\n        skip_waves_33851 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_33836) == (int64_t) 0) {\n            x_acc_33844 = x_33846;\n        }\n    }\n    \n    int32_t old_counter_33852;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_33836 == 0) {\n            ((__global\n              int32_t *) group_res_arr_mem_33832)[sext_i32_i64(group_tid_33837) *\n                                                  segred_group_sizze_30953] =\n                x_acc_33844;\n            mem_fence_global();\n            old_counter_33852 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_33830)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_33840)[(int64_t) 0] =\n                old_counter_33852 == num_groups_30955 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCA",
            "L_MEM_FENCE);\n    \n    bool is_last_group_33853;\n    \n    is_last_group_33853 = ((__local bool *) sync_arr_mem_33840)[(int64_t) 0];\n    if (is_last_group_33853) {\n        if (local_tid_33836 == 0) {\n            old_counter_33852 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_33830)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_30955));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_33854 = sdiv_up64(num_groups_30955,\n                                                      segred_group_sizze_30953);\n            \n            x_29457 = 0;\n            for (int64_t i_33855 = 0; i_33855 < read_per_thread_33854;\n                 i_33855++) {\n                int64_t group_res_id_33856 = sext_i32_i64(local_tid_33836) *\n                        read_per_thread_33854 + i_33855;\n                int64_t index_of_group_res_33857 = group_res_id_33856;\n                \n                if (slt64(group_res_id_33856, num_groups_30955)) {\n                    x_29458 = ((__global\n                                int32_t *) group_res_arr_mem_33832)[index_of_group_res_33857 *\n                                                                    segred_group_sizze_30953];\n                    \n                    int32_t defunc_1_op_res_29459;\n                    \n                    defunc_1_op_res_29459 = add32(x_29457, x_29458);\n                    x_29457 = defunc_1_op_res_29459;\n                }\n            }\n        }\n        ((__local int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836)] =\n            x_29457;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_33858;\n            int32_t skip_waves_33859;\n            \n            skip_waves_33859 = 1;\n            \n      ",
            "      int32_t x_33846;\n            int32_t x_33847;\n            \n            offset_33858 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_33836,\n                          sext_i64_i32(segred_group_sizze_30953))) {\n                    x_33846 = ((__local\n                                int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836 +\n                                                              offset_33858)];\n                }\n            }\n            offset_33858 = 1;\n            while (slt32(offset_33858, wave_sizze_33838)) {\n                if (slt32(local_tid_33836 + offset_33858,\n                          sext_i64_i32(segred_group_sizze_30953)) &&\n                    ((local_tid_33836 - squot32(local_tid_33836,\n                                                wave_sizze_33838) *\n                      wave_sizze_33838) & (2 * offset_33858 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_33847 = ((volatile __local\n                                    int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836 +\n                                                                  offset_33858)];\n                    }\n                    // apply reduction operation\n                    {\n                        int32_t defunc_1_op_res_33848 = add32(x_33846, x_33847);\n                        \n                        x_33846 = defunc_1_op_res_33848;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836)] =\n                            x_33846;\n                    }\n                }\n                offset_33858 *= 2;\n            }\n            while (slt32(skip_waves_33859,\n                         squot32(sext_i64_i32(segred_group_sizze_30953) +\n                              ",
            "   wave_sizze_33838 - 1, wave_sizze_33838))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_33858 = skip_waves_33859 * wave_sizze_33838;\n                if (slt32(local_tid_33836 + offset_33858,\n                          sext_i64_i32(segred_group_sizze_30953)) &&\n                    ((local_tid_33836 - squot32(local_tid_33836,\n                                                wave_sizze_33838) *\n                      wave_sizze_33838) == 0 && (squot32(local_tid_33836,\n                                                         wave_sizze_33838) &\n                                                 (2 * skip_waves_33859 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_33847 = ((__local\n                                    int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836 +\n                                                                  offset_33858)];\n                    }\n                    // apply reduction operation\n                    {\n                        int32_t defunc_1_op_res_33848 = add32(x_33846, x_33847);\n                        \n                        x_33846 = defunc_1_op_res_33848;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int32_t *) red_arr_mem_33842)[sext_i32_i64(local_tid_33836)] =\n                            x_33846;\n                    }\n                }\n                skip_waves_33859 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_33836 == 0) {\n                    ((__global int32_t *) mem_32008)[(int64_t) 0] = x_33846;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_30953\n}\n__kernel void clusterPointszisegred_nonseg_31041(__global int *global_failure,\n                                                ",
            " uint red_arr_mem_34204_backing_offset_0,\n                                                 uint sync_arr_mem_34202_backing_offset_1,\n                                                 int64_t n_28846,\n                                                 int64_t num_groups_31035,\n                                                 int64_t num_threads_34196,\n                                                 __global\n                                                 unsigned char *mem_32036,\n                                                 __global\n                                                 unsigned char *mem_32046,\n                                                 __global\n                                                 unsigned char *mem_32048,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_34192,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_34194)\n{\n    #define segred_group_sizze_31033 (clusterPointszisegred_group_sizze_31032)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_34204_backing_1 =\n                  &shared_mem[red_arr_mem_34204_backing_offset_0];\n    volatile char *sync_arr_mem_34202_backing_0 =\n                  &shared_mem[sync_arr_mem_34202_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34197;\n    int32_t local_tid_34198;\n    int64_t group_sizze_34201;\n    int32_t wave_sizze_34200;\n    int32_t group_tid_34199;\n    \n    global_tid_34197 = get_global_id(0);\n    local_tid_34198 = get_local_id(0);\n    group_sizze_34201 = get_local_size(0);\n    wave_sizze_34200 = LOCKSTEP_WIDTH;\n    group_tid_34199 = get_group_id(0);\n    \n    int32_t phys_tid_31041;\n    \n    phys_tid_31041 = global_tid_34197;\n    \n    __local char *sync_arr_mem_34202;\n    \n  ",
            "  sync_arr_mem_34202 = (__local char *) sync_arr_mem_34202_backing_0;\n    \n    __local char *red_arr_mem_34204;\n    \n    red_arr_mem_34204 = (__local char *) red_arr_mem_34204_backing_1;\n    \n    int64_t dummy_31039;\n    \n    dummy_31039 = (int64_t) 0;\n    \n    int64_t gtid_31040;\n    \n    gtid_31040 = (int64_t) 0;\n    \n    bool x_acc_34206;\n    int64_t chunk_sizze_34207;\n    \n    chunk_sizze_34207 = smin64(sdiv_up64(n_28846,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_31033 *\n                                         num_groups_31035))),\n                               sdiv_up64(n_28846 - phys_tid_31041,\n                                         num_threads_34196));\n    \n    bool x_29565;\n    bool x_29566;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_34206 = 1;\n    }\n    for (int64_t i_34211 = 0; i_34211 < chunk_sizze_34207; i_34211++) {\n        gtid_31040 = phys_tid_31041 + num_threads_34196 * i_34211;\n        // apply map function\n        {\n            int64_t x_29569 = ((__global int64_t *) mem_32036)[gtid_31040];\n            int32_t defunc_0_f_res_29570 = sext_i64_i32(gtid_31040);\n            bool defunc_1_f_res_29571 = (int64_t) 0 == x_29569;\n            \n            // save map-out results\n            {\n                ((__global int32_t *) mem_32048)[dummy_31039 * n_28846 +\n                                                 gtid_31040] =\n                    defunc_0_f_res_29570;\n            }\n            // load accumulator\n            {\n                x_29565 = x_acc_34206;\n            }\n            // load new values\n            {\n                x_29566 = defunc_1_f_res_29571;\n            }\n            // apply reduction operator\n            {\n                bool x_29567 = x_29565 && x_29566;\n                \n                // store in accumulator\n                {\n                    x_acc_34206 = x_29567;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first s",
            "tore our result in memory\n    {\n        x_29565 = x_acc_34206;\n        ((__local bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198)] =\n            x_29565;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_34212;\n    int32_t skip_waves_34213;\n    \n    skip_waves_34213 = 1;\n    \n    bool x_34208;\n    bool x_34209;\n    \n    offset_34212 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34198, sext_i64_i32(segred_group_sizze_31033))) {\n            x_34208 = ((__local\n                        bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198 +\n                                                   offset_34212)];\n        }\n    }\n    offset_34212 = 1;\n    while (slt32(offset_34212, wave_sizze_34200)) {\n        if (slt32(local_tid_34198 + offset_34212,\n                  sext_i64_i32(segred_group_sizze_31033)) && ((local_tid_34198 -\n                                                               squot32(local_tid_34198,\n                                                                       wave_sizze_34200) *\n                                                               wave_sizze_34200) &\n                                                              (2 *\n                                                               offset_34212 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_34209 = ((volatile __local\n                            bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198 +\n                                                       offset_34212)];\n            }\n            // apply reduction operation\n            {\n                bool x_34210 = x_34208 && x_34209;\n                \n                x_34208 = x_34210;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198)] =\n            ",
            "        x_34208;\n            }\n        }\n        offset_34212 *= 2;\n    }\n    while (slt32(skip_waves_34213,\n                 squot32(sext_i64_i32(segred_group_sizze_31033) +\n                         wave_sizze_34200 - 1, wave_sizze_34200))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34212 = skip_waves_34213 * wave_sizze_34200;\n        if (slt32(local_tid_34198 + offset_34212,\n                  sext_i64_i32(segred_group_sizze_31033)) && ((local_tid_34198 -\n                                                               squot32(local_tid_34198,\n                                                                       wave_sizze_34200) *\n                                                               wave_sizze_34200) ==\n                                                              0 &&\n                                                              (squot32(local_tid_34198,\n                                                                       wave_sizze_34200) &\n                                                               (2 *\n                                                                skip_waves_34213 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_34209 = ((__local\n                            bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198 +\n                                                       offset_34212)];\n            }\n            // apply reduction operation\n            {\n                bool x_34210 = x_34208 && x_34209;\n                \n                x_34208 = x_34210;\n            }\n            // write result of operation\n            {\n                ((__local\n                  bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198)] =\n                    x_34208;\n            }\n        }\n        skip_waves_34213 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i",
            "64(local_tid_34198) == (int64_t) 0) {\n            x_acc_34206 = x_34208;\n        }\n    }\n    \n    int32_t old_counter_34214;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_34198 == 0) {\n            ((__global\n              bool *) group_res_arr_mem_34194)[sext_i32_i64(group_tid_34199) *\n                                               segred_group_sizze_31033] =\n                x_acc_34206;\n            mem_fence_global();\n            old_counter_34214 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_34192)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_34202)[(int64_t) 0] =\n                old_counter_34214 == num_groups_31035 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_34215;\n    \n    is_last_group_34215 = ((__local bool *) sync_arr_mem_34202)[(int64_t) 0];\n    if (is_last_group_34215) {\n        if (local_tid_34198 == 0) {\n            old_counter_34214 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_34192)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31035));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_34216 = sdiv_up64(num_groups_31035,\n                                                      segred_group_sizze_31033);\n            \n            x_29565 = 1;\n            for (int64_t i_34217 = 0; i_34217 < read_per_thread_34216;\n                 i_34217++) {\n                int64_t group_res_id_34218 = sext_i32_i64(local_tid_34198) *\n                        read_per_thread_34216 + i_34217;\n                int64_t index_of_group_res_34219 = g",
            "roup_res_id_34218;\n                \n                if (slt64(group_res_id_34218, num_groups_31035)) {\n                    x_29566 = ((__global\n                                bool *) group_res_arr_mem_34194)[index_of_group_res_34219 *\n                                                                 segred_group_sizze_31033];\n                    \n                    bool x_29567;\n                    \n                    x_29567 = x_29565 && x_29566;\n                    x_29565 = x_29567;\n                }\n            }\n        }\n        ((__local bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198)] =\n            x_29565;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_34220;\n            int32_t skip_waves_34221;\n            \n            skip_waves_34221 = 1;\n            \n            bool x_34208;\n            bool x_34209;\n            \n            offset_34220 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_34198,\n                          sext_i64_i32(segred_group_sizze_31033))) {\n                    x_34208 = ((__local\n                                bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198 +\n                                                           offset_34220)];\n                }\n            }\n            offset_34220 = 1;\n            while (slt32(offset_34220, wave_sizze_34200)) {\n                if (slt32(local_tid_34198 + offset_34220,\n                          sext_i64_i32(segred_group_sizze_31033)) &&\n                    ((local_tid_34198 - squot32(local_tid_34198,\n                                                wave_sizze_34200) *\n                      wave_sizze_34200) & (2 * offset_34220 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_34209 = ((volatile __local\n                                    bool *) red_arr_mem_34204)[sext_i32_i64(local_tid",
            "_34198 +\n                                                               offset_34220)];\n                    }\n                    // apply reduction operation\n                    {\n                        bool x_34210 = x_34208 && x_34209;\n                        \n                        x_34208 = x_34210;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198)] =\n                            x_34208;\n                    }\n                }\n                offset_34220 *= 2;\n            }\n            while (slt32(skip_waves_34221,\n                         squot32(sext_i64_i32(segred_group_sizze_31033) +\n                                 wave_sizze_34200 - 1, wave_sizze_34200))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_34220 = skip_waves_34221 * wave_sizze_34200;\n                if (slt32(local_tid_34198 + offset_34220,\n                          sext_i64_i32(segred_group_sizze_31033)) &&\n                    ((local_tid_34198 - squot32(local_tid_34198,\n                                                wave_sizze_34200) *\n                      wave_sizze_34200) == 0 && (squot32(local_tid_34198,\n                                                         wave_sizze_34200) &\n                                                 (2 * skip_waves_34221 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_34209 = ((__local\n                                    bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198 +\n                                                               offset_34220)];\n                    }\n                    // apply reduction operation\n                    {\n                        bool x_34210 = x_34208 && x_34209;\n                        \n                        x_34208 = x_34210;\n                 ",
            "   }\n                    // write result of operation\n                    {\n                        ((__local\n                          bool *) red_arr_mem_34204)[sext_i32_i64(local_tid_34198)] =\n                            x_34208;\n                    }\n                }\n                skip_waves_34221 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_34198 == 0) {\n                    ((__global bool *) mem_32046)[(int64_t) 0] = x_34208;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31033\n}\n__kernel void clusterPointszisegred_nonseg_31051(__global int *global_failure,\n                                                 uint red_arr_mem_34252_backing_offset_0,\n                                                 uint sync_arr_mem_34250_backing_offset_1,\n                                                 int64_t defunc_0_f_res_29473,\n                                                 int64_t maxSizze_29582,\n                                                 int64_t num_groups_31046,\n                                                 int64_t num_threads_34244,\n                                                 __global\n                                                 unsigned char *mem_32012,\n                                                 __global\n                                                 unsigned char *mem_32076,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_34240,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_34242)\n{\n    #define segred_group_sizze_31044 (clusterPointszisegred_group_sizze_31043)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_34252_backing_1 =\n               ",
            "   &shared_mem[red_arr_mem_34252_backing_offset_0];\n    volatile char *sync_arr_mem_34250_backing_0 =\n                  &shared_mem[sync_arr_mem_34250_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34245;\n    int32_t local_tid_34246;\n    int64_t group_sizze_34249;\n    int32_t wave_sizze_34248;\n    int32_t group_tid_34247;\n    \n    global_tid_34245 = get_global_id(0);\n    local_tid_34246 = get_local_id(0);\n    group_sizze_34249 = get_local_size(0);\n    wave_sizze_34248 = LOCKSTEP_WIDTH;\n    group_tid_34247 = get_group_id(0);\n    \n    int32_t phys_tid_31051;\n    \n    phys_tid_31051 = global_tid_34245;\n    \n    __local char *sync_arr_mem_34250;\n    \n    sync_arr_mem_34250 = (__local char *) sync_arr_mem_34250_backing_0;\n    \n    __local char *red_arr_mem_34252;\n    \n    red_arr_mem_34252 = (__local char *) red_arr_mem_34252_backing_1;\n    \n    int64_t dummy_31049;\n    \n    dummy_31049 = (int64_t) 0;\n    \n    int64_t gtid_31050;\n    \n    gtid_31050 = (int64_t) 0;\n    \n    bool x_acc_34254;\n    int64_t chunk_sizze_34255;\n    \n    chunk_sizze_34255 = smin64(sdiv_up64(maxSizze_29582,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_31044 *\n                                         num_groups_31046))),\n                               sdiv_up64(maxSizze_29582 - phys_tid_31051,\n                                         num_threads_34244));\n    \n    bool x_29597;\n    bool x_29598;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_34254 = 1;\n    }\n    for (int64_t i_34259 = 0; i_34259 < chunk_sizze_34255; i_34259++) {\n        gtid_31050 = phys_tid_31051 + num_threads_34244 * i_34259;\n        // apply map function\n        {\n            bool index_concat_cmp_31701 = sle64(defunc_0_f_res_29473,\n                                                gtid_31050);\n            int32_t index_concat_branch_31705;\n            \n            if (index_concat_cmp_31701) {\n                index_con",
            "cat_branch_31705 = 0;\n            } else {\n                int32_t index_concat_31704 = ((__global\n                                               int32_t *) mem_32012)[gtid_31050];\n                \n                index_concat_branch_31705 = index_concat_31704;\n            }\n            \n            bool defunc_1_f_res_29601 = 0 == index_concat_branch_31705;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_29597 = x_acc_34254;\n            }\n            // load new values\n            {\n                x_29598 = defunc_1_f_res_29601;\n            }\n            // apply reduction operator\n            {\n                bool x_29599 = x_29597 && x_29598;\n                \n                // store in accumulator\n                {\n                    x_acc_34254 = x_29599;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_29597 = x_acc_34254;\n        ((__local bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246)] =\n            x_29597;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_34260;\n    int32_t skip_waves_34261;\n    \n    skip_waves_34261 = 1;\n    \n    bool x_34256;\n    bool x_34257;\n    \n    offset_34260 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34246, sext_i64_i32(segred_group_sizze_31044))) {\n            x_34256 = ((__local\n                        bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246 +\n                                                   offset_34260)];\n        }\n    }\n    offset_34260 = 1;\n    while (slt32(offset_34260, wave_sizze_34248)) {\n        if (slt32(local_tid_34246 + offset_34260,\n                  sext_i64_i32(segred_group_sizze_31044)) && ((local_tid_34246 -\n                                                               squot32(local_tid_34246,\n                                                                    ",
            "   wave_sizze_34248) *\n                                                               wave_sizze_34248) &\n                                                              (2 *\n                                                               offset_34260 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_34257 = ((volatile __local\n                            bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246 +\n                                                       offset_34260)];\n            }\n            // apply reduction operation\n            {\n                bool x_34258 = x_34256 && x_34257;\n                \n                x_34256 = x_34258;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246)] =\n                    x_34256;\n            }\n        }\n        offset_34260 *= 2;\n    }\n    while (slt32(skip_waves_34261,\n                 squot32(sext_i64_i32(segred_group_sizze_31044) +\n                         wave_sizze_34248 - 1, wave_sizze_34248))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34260 = skip_waves_34261 * wave_sizze_34248;\n        if (slt32(local_tid_34246 + offset_34260,\n                  sext_i64_i32(segred_group_sizze_31044)) && ((local_tid_34246 -\n                                                               squot32(local_tid_34246,\n                                                                       wave_sizze_34248) *\n                                                               wave_sizze_34248) ==\n                                                              0 &&\n                                                              (squot32(local_tid_34246,\n                                                                       wave_sizze_34248) &\n                                                               (2 *\n        ",
            "                                                        skip_waves_34261 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_34257 = ((__local\n                            bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246 +\n                                                       offset_34260)];\n            }\n            // apply reduction operation\n            {\n                bool x_34258 = x_34256 && x_34257;\n                \n                x_34256 = x_34258;\n            }\n            // write result of operation\n            {\n                ((__local\n                  bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246)] =\n                    x_34256;\n            }\n        }\n        skip_waves_34261 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_34246) == (int64_t) 0) {\n            x_acc_34254 = x_34256;\n        }\n    }\n    \n    int32_t old_counter_34262;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_34246 == 0) {\n            ((__global\n              bool *) group_res_arr_mem_34242)[sext_i32_i64(group_tid_34247) *\n                                               segred_group_sizze_31044] =\n                x_acc_34254;\n            mem_fence_global();\n            old_counter_34262 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_34240)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_34250)[(int64_t) 0] =\n                old_counter_34262 == num_groups_31046 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_34263;\n    \n    is_last_group_34263 = ((__local bool *) sync_arr_mem_34250)[(int64_t) 0];\n    if ",
            "(is_last_group_34263) {\n        if (local_tid_34246 == 0) {\n            old_counter_34262 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_34240)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31046));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_34264 = sdiv_up64(num_groups_31046,\n                                                      segred_group_sizze_31044);\n            \n            x_29597 = 1;\n            for (int64_t i_34265 = 0; i_34265 < read_per_thread_34264;\n                 i_34265++) {\n                int64_t group_res_id_34266 = sext_i32_i64(local_tid_34246) *\n                        read_per_thread_34264 + i_34265;\n                int64_t index_of_group_res_34267 = group_res_id_34266;\n                \n                if (slt64(group_res_id_34266, num_groups_31046)) {\n                    x_29598 = ((__global\n                                bool *) group_res_arr_mem_34242)[index_of_group_res_34267 *\n                                                                 segred_group_sizze_31044];\n                    \n                    bool x_29599;\n                    \n                    x_29599 = x_29597 && x_29598;\n                    x_29597 = x_29599;\n                }\n            }\n        }\n        ((__local bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246)] =\n            x_29597;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_34268;\n            int32_t skip_waves_34269;\n            \n            skip_waves_34269 = 1;\n            \n            bool x_34256;\n            bool x_34257;\n            \n            offset_34268 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_t",
            "id_34246,\n                          sext_i64_i32(segred_group_sizze_31044))) {\n                    x_34256 = ((__local\n                                bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246 +\n                                                           offset_34268)];\n                }\n            }\n            offset_34268 = 1;\n            while (slt32(offset_34268, wave_sizze_34248)) {\n                if (slt32(local_tid_34246 + offset_34268,\n                          sext_i64_i32(segred_group_sizze_31044)) &&\n                    ((local_tid_34246 - squot32(local_tid_34246,\n                                                wave_sizze_34248) *\n                      wave_sizze_34248) & (2 * offset_34268 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_34257 = ((volatile __local\n                                    bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246 +\n                                                               offset_34268)];\n                    }\n                    // apply reduction operation\n                    {\n                        bool x_34258 = x_34256 && x_34257;\n                        \n                        x_34256 = x_34258;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246)] =\n                            x_34256;\n                    }\n                }\n                offset_34268 *= 2;\n            }\n            while (slt32(skip_waves_34269,\n                         squot32(sext_i64_i32(segred_group_sizze_31044) +\n                                 wave_sizze_34248 - 1, wave_sizze_34248))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_34268 = skip_waves_34269 * wave_sizze_34248;\n                if (slt32(local_tid_34246 + offset_34268,\n                          sext_i64_i",
            "32(segred_group_sizze_31044)) &&\n                    ((local_tid_34246 - squot32(local_tid_34246,\n                                                wave_sizze_34248) *\n                      wave_sizze_34248) == 0 && (squot32(local_tid_34246,\n                                                         wave_sizze_34248) &\n                                                 (2 * skip_waves_34269 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_34257 = ((__local\n                                    bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246 +\n                                                               offset_34268)];\n                    }\n                    // apply reduction operation\n                    {\n                        bool x_34258 = x_34256 && x_34257;\n                        \n                        x_34256 = x_34258;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          bool *) red_arr_mem_34252)[sext_i32_i64(local_tid_34246)] =\n                            x_34256;\n                    }\n                }\n                skip_waves_34269 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_34246 == 0) {\n                    ((__global bool *) mem_32076)[(int64_t) 0] = x_34256;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31044\n}\n__kernel void clusterPointszisegred_nonseg_31061(__global int *global_failure,\n                                                 uint red_arr_mem_34283_backing_offset_0,\n                                                 uint sync_arr_mem_34281_backing_offset_1,\n                                                 int64_t n_28846,\n                                                 int64_t num_groups_31056,\n                             ",
            "                    int64_t num_threads_34275,\n                                                 __global\n                                                 unsigned char *mem_32036,\n                                                 __global\n                                                 unsigned char *mem_32079,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_34271,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_34273)\n{\n    #define segred_group_sizze_31054 (clusterPointszisegred_group_sizze_31053)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_34283_backing_1 =\n                  &shared_mem[red_arr_mem_34283_backing_offset_0];\n    volatile char *sync_arr_mem_34281_backing_0 =\n                  &shared_mem[sync_arr_mem_34281_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34276;\n    int32_t local_tid_34277;\n    int64_t group_sizze_34280;\n    int32_t wave_sizze_34279;\n    int32_t group_tid_34278;\n    \n    global_tid_34276 = get_global_id(0);\n    local_tid_34277 = get_local_id(0);\n    group_sizze_34280 = get_local_size(0);\n    wave_sizze_34279 = LOCKSTEP_WIDTH;\n    group_tid_34278 = get_group_id(0);\n    \n    int32_t phys_tid_31061;\n    \n    phys_tid_31061 = global_tid_34276;\n    \n    __local char *sync_arr_mem_34281;\n    \n    sync_arr_mem_34281 = (__local char *) sync_arr_mem_34281_backing_0;\n    \n    __local char *red_arr_mem_34283;\n    \n    red_arr_mem_34283 = (__local char *) red_arr_mem_34283_backing_1;\n    \n    int64_t dummy_31059;\n    \n    dummy_31059 = (int64_t) 0;\n    \n    int64_t gtid_31060;\n    \n    gtid_31060 = (int64_t) 0;\n    \n    int64_t x_acc_34285;\n    int64_t chunk_sizze_34286;\n    \n    chunk_sizze_34286 = smin64(sdiv_up64(n_28846,\n   ",
            "                                      sext_i32_i64(sext_i64_i32(segred_group_sizze_31054 *\n                                         num_groups_31056))),\n                               sdiv_up64(n_28846 - phys_tid_31061,\n                                         num_threads_34275));\n    \n    int64_t x_29605;\n    int64_t x_29606;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_34285 = (int64_t) 0;\n    }\n    for (int64_t i_34290 = 0; i_34290 < chunk_sizze_34286; i_34290++) {\n        gtid_31060 = phys_tid_31061 + num_threads_34275 * i_34290;\n        // apply map function\n        {\n            int64_t x_29608 = ((__global int64_t *) mem_32036)[gtid_31060];\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_29605 = x_acc_34285;\n            }\n            // load new values\n            {\n                x_29606 = x_29608;\n            }\n            // apply reduction operator\n            {\n                int64_t defunc_1_op_res_29607 = add64(x_29605, x_29606);\n                \n                // store in accumulator\n                {\n                    x_acc_34285 = defunc_1_op_res_29607;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_29605 = x_acc_34285;\n        ((__local int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277)] =\n            x_29605;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_34291;\n    int32_t skip_waves_34292;\n    \n    skip_waves_34292 = 1;\n    \n    int64_t x_34287;\n    int64_t x_34288;\n    \n    offset_34291 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34277, sext_i64_i32(segred_group_sizze_31054))) {\n            x_34287 = ((__local\n                        int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277 +\n                                                      offset_34291)];\n        }\n    }\n    o",
            "ffset_34291 = 1;\n    while (slt32(offset_34291, wave_sizze_34279)) {\n        if (slt32(local_tid_34277 + offset_34291,\n                  sext_i64_i32(segred_group_sizze_31054)) && ((local_tid_34277 -\n                                                               squot32(local_tid_34277,\n                                                                       wave_sizze_34279) *\n                                                               wave_sizze_34279) &\n                                                              (2 *\n                                                               offset_34291 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_34288 = ((volatile __local\n                            int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277 +\n                                                          offset_34291)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_34289 = add64(x_34287, x_34288);\n                \n                x_34287 = defunc_1_op_res_34289;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277)] =\n                    x_34287;\n            }\n        }\n        offset_34291 *= 2;\n    }\n    while (slt32(skip_waves_34292,\n                 squot32(sext_i64_i32(segred_group_sizze_31054) +\n                         wave_sizze_34279 - 1, wave_sizze_34279))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34291 = skip_waves_34292 * wave_sizze_34279;\n        if (slt32(local_tid_34277 + offset_34291,\n                  sext_i64_i32(segred_group_sizze_31054)) && ((local_tid_34277 -\n                                                               squot32(local_tid_34277,\n                                                                       wave_sizze_34279) *\n     ",
            "                                                          wave_sizze_34279) ==\n                                                              0 &&\n                                                              (squot32(local_tid_34277,\n                                                                       wave_sizze_34279) &\n                                                               (2 *\n                                                                skip_waves_34292 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_34288 = ((__local\n                            int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277 +\n                                                          offset_34291)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_34289 = add64(x_34287, x_34288);\n                \n                x_34287 = defunc_1_op_res_34289;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277)] =\n                    x_34287;\n            }\n        }\n        skip_waves_34292 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_34277) == (int64_t) 0) {\n            x_acc_34285 = x_34287;\n        }\n    }\n    \n    int32_t old_counter_34293;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_34277 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_34273)[sext_i32_i64(group_tid_34278) *\n                                                  segred_group_sizze_31054] =\n                x_acc_34285;\n            mem_fence_global();\n            old_counter_34293 = atomic_add_i32_global(&((volatile __global\n                                                        ",
            " int *) clusterPointszicounter_mem_34271)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_34281)[(int64_t) 0] =\n                old_counter_34293 == num_groups_31056 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_34294;\n    \n    is_last_group_34294 = ((__local bool *) sync_arr_mem_34281)[(int64_t) 0];\n    if (is_last_group_34294) {\n        if (local_tid_34277 == 0) {\n            old_counter_34293 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_34271)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31056));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_34295 = sdiv_up64(num_groups_31056,\n                                                      segred_group_sizze_31054);\n            \n            x_29605 = (int64_t) 0;\n            for (int64_t i_34296 = 0; i_34296 < read_per_thread_34295;\n                 i_34296++) {\n                int64_t group_res_id_34297 = sext_i32_i64(local_tid_34277) *\n                        read_per_thread_34295 + i_34296;\n                int64_t index_of_group_res_34298 = group_res_id_34297;\n                \n                if (slt64(group_res_id_34297, num_groups_31056)) {\n                    x_29606 = ((__global\n                                int64_t *) group_res_arr_mem_34273)[index_of_group_res_34298 *\n                                                                    segred_group_sizze_31054];\n                    \n                    int64_t defunc_1_op_res_29607;\n                    \n                    defunc_1_op_res_29607 = add64(x_29605, x_29606);\n                    x_29605 = defunc_1_op_res_29607;\n                }\n            }\n        }\n     ",
            "   ((__local int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277)] =\n            x_29605;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_34299;\n            int32_t skip_waves_34300;\n            \n            skip_waves_34300 = 1;\n            \n            int64_t x_34287;\n            int64_t x_34288;\n            \n            offset_34299 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_34277,\n                          sext_i64_i32(segred_group_sizze_31054))) {\n                    x_34287 = ((__local\n                                int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277 +\n                                                              offset_34299)];\n                }\n            }\n            offset_34299 = 1;\n            while (slt32(offset_34299, wave_sizze_34279)) {\n                if (slt32(local_tid_34277 + offset_34299,\n                          sext_i64_i32(segred_group_sizze_31054)) &&\n                    ((local_tid_34277 - squot32(local_tid_34277,\n                                                wave_sizze_34279) *\n                      wave_sizze_34279) & (2 * offset_34299 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_34288 = ((volatile __local\n                                    int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277 +\n                                                                  offset_34299)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_34289 = add64(x_34287, x_34288);\n                        \n                        x_34287 = defunc_1_op_res_34289;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) re",
            "d_arr_mem_34283)[sext_i32_i64(local_tid_34277)] =\n                            x_34287;\n                    }\n                }\n                offset_34299 *= 2;\n            }\n            while (slt32(skip_waves_34300,\n                         squot32(sext_i64_i32(segred_group_sizze_31054) +\n                                 wave_sizze_34279 - 1, wave_sizze_34279))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_34299 = skip_waves_34300 * wave_sizze_34279;\n                if (slt32(local_tid_34277 + offset_34299,\n                          sext_i64_i32(segred_group_sizze_31054)) &&\n                    ((local_tid_34277 - squot32(local_tid_34277,\n                                                wave_sizze_34279) *\n                      wave_sizze_34279) == 0 && (squot32(local_tid_34277,\n                                                         wave_sizze_34279) &\n                                                 (2 * skip_waves_34300 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_34288 = ((__local\n                                    int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277 +\n                                                                  offset_34299)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_34289 = add64(x_34287, x_34288);\n                        \n                        x_34287 = defunc_1_op_res_34289;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_arr_mem_34283)[sext_i32_i64(local_tid_34277)] =\n                            x_34287;\n                    }\n                }\n                skip_waves_34300 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_34277 == ",
            "0) {\n                    ((__global int64_t *) mem_32079)[(int64_t) 0] = x_34287;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31054\n}\n__kernel void clusterPointszisegred_nonseg_31079(__global int *global_failure,\n                                                 uint red_arr_mem_34401_backing_offset_0,\n                                                 uint sync_arr_mem_34399_backing_offset_1,\n                                                 int64_t n_28846,\n                                                 int64_t num_groups_31074,\n                                                 int64_t num_threads_34393,\n                                                 __global\n                                                 unsigned char *mem_32105,\n                                                 __global\n                                                 unsigned char *mem_32110,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_34389,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_34391)\n{\n    #define segred_group_sizze_31072 (clusterPointszisegred_group_sizze_31071)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_34401_backing_1 =\n                  &shared_mem[red_arr_mem_34401_backing_offset_0];\n    volatile char *sync_arr_mem_34399_backing_0 =\n                  &shared_mem[sync_arr_mem_34399_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34394;\n    int32_t local_tid_34395;\n    int64_t group_sizze_34398;\n    int32_t wave_sizze_34397;\n    int32_t group_tid_34396;\n    \n    global_tid_34394 = get_global_id(0);\n    local_tid_34395 = get_local_id(0);\n    group_sizze_34398 = get_local_size(0);\n    wave_sizze_",
            "34397 = LOCKSTEP_WIDTH;\n    group_tid_34396 = get_group_id(0);\n    \n    int32_t phys_tid_31079;\n    \n    phys_tid_31079 = global_tid_34394;\n    \n    __local char *sync_arr_mem_34399;\n    \n    sync_arr_mem_34399 = (__local char *) sync_arr_mem_34399_backing_0;\n    \n    __local char *red_arr_mem_34401;\n    \n    red_arr_mem_34401 = (__local char *) red_arr_mem_34401_backing_1;\n    \n    int64_t dummy_31077;\n    \n    dummy_31077 = (int64_t) 0;\n    \n    int64_t gtid_31078;\n    \n    gtid_31078 = (int64_t) 0;\n    \n    int64_t x_acc_34403;\n    int64_t chunk_sizze_34404;\n    \n    chunk_sizze_34404 = smin64(sdiv_up64(n_28846,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_31072 *\n                                         num_groups_31074))),\n                               sdiv_up64(n_28846 - phys_tid_31079,\n                                         num_threads_34393));\n    \n    int64_t x_29640;\n    int64_t x_29641;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_34403 = (int64_t) 0;\n    }\n    for (int64_t i_34408 = 0; i_34408 < chunk_sizze_34404; i_34408++) {\n        gtid_31078 = phys_tid_31079 + num_threads_34393 * i_34408;\n        // apply map function\n        {\n            int64_t x_29643 = ((__global int64_t *) mem_32105)[gtid_31078];\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_29640 = x_acc_34403;\n            }\n            // load new values\n            {\n                x_29641 = x_29643;\n            }\n            // apply reduction operator\n            {\n                int64_t defunc_1_op_res_29642 = add64(x_29640, x_29641);\n                \n                // store in accumulator\n                {\n                    x_acc_34403 = defunc_1_op_res_29642;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_29640 = x_acc_34403;\n        ((__local int64_t *)",
            " red_arr_mem_34401)[sext_i32_i64(local_tid_34395)] =\n            x_29640;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_34409;\n    int32_t skip_waves_34410;\n    \n    skip_waves_34410 = 1;\n    \n    int64_t x_34405;\n    int64_t x_34406;\n    \n    offset_34409 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_34395, sext_i64_i32(segred_group_sizze_31072))) {\n            x_34405 = ((__local\n                        int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395 +\n                                                      offset_34409)];\n        }\n    }\n    offset_34409 = 1;\n    while (slt32(offset_34409, wave_sizze_34397)) {\n        if (slt32(local_tid_34395 + offset_34409,\n                  sext_i64_i32(segred_group_sizze_31072)) && ((local_tid_34395 -\n                                                               squot32(local_tid_34395,\n                                                                       wave_sizze_34397) *\n                                                               wave_sizze_34397) &\n                                                              (2 *\n                                                               offset_34409 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_34406 = ((volatile __local\n                            int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395 +\n                                                          offset_34409)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_34407 = add64(x_34405, x_34406);\n                \n                x_34405 = defunc_1_op_res_34407;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395)] =\n                    x_34405;\n            }\n",
            "        }\n        offset_34409 *= 2;\n    }\n    while (slt32(skip_waves_34410,\n                 squot32(sext_i64_i32(segred_group_sizze_31072) +\n                         wave_sizze_34397 - 1, wave_sizze_34397))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_34409 = skip_waves_34410 * wave_sizze_34397;\n        if (slt32(local_tid_34395 + offset_34409,\n                  sext_i64_i32(segred_group_sizze_31072)) && ((local_tid_34395 -\n                                                               squot32(local_tid_34395,\n                                                                       wave_sizze_34397) *\n                                                               wave_sizze_34397) ==\n                                                              0 &&\n                                                              (squot32(local_tid_34395,\n                                                                       wave_sizze_34397) &\n                                                               (2 *\n                                                                skip_waves_34410 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_34406 = ((__local\n                            int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395 +\n                                                          offset_34409)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_34407 = add64(x_34405, x_34406);\n                \n                x_34405 = defunc_1_op_res_34407;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395)] =\n                    x_34405;\n            }\n        }\n        skip_waves_34410 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        ",
            "if (sext_i32_i64(local_tid_34395) == (int64_t) 0) {\n            x_acc_34403 = x_34405;\n        }\n    }\n    \n    int32_t old_counter_34411;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_34395 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_34391)[sext_i32_i64(group_tid_34396) *\n                                                  segred_group_sizze_31072] =\n                x_acc_34403;\n            mem_fence_global();\n            old_counter_34411 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_34389)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_34399)[(int64_t) 0] =\n                old_counter_34411 == num_groups_31074 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_34412;\n    \n    is_last_group_34412 = ((__local bool *) sync_arr_mem_34399)[(int64_t) 0];\n    if (is_last_group_34412) {\n        if (local_tid_34395 == 0) {\n            old_counter_34411 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_34389)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31074));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_34413 = sdiv_up64(num_groups_31074,\n                                                      segred_group_sizze_31072);\n            \n            x_29640 = (int64_t) 0;\n            for (int64_t i_34414 = 0; i_34414 < read_per_thread_34413;\n                 i_34414++) {\n                int64_t group_res_id_34415 = sext_i32_i64(local_tid_34395) *\n                        read_per_thread_34413 + i_34414;\n                int64_",
            "t index_of_group_res_34416 = group_res_id_34415;\n                \n                if (slt64(group_res_id_34415, num_groups_31074)) {\n                    x_29641 = ((__global\n                                int64_t *) group_res_arr_mem_34391)[index_of_group_res_34416 *\n                                                                    segred_group_sizze_31072];\n                    \n                    int64_t defunc_1_op_res_29642;\n                    \n                    defunc_1_op_res_29642 = add64(x_29640, x_29641);\n                    x_29640 = defunc_1_op_res_29642;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395)] =\n            x_29640;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_34417;\n            int32_t skip_waves_34418;\n            \n            skip_waves_34418 = 1;\n            \n            int64_t x_34405;\n            int64_t x_34406;\n            \n            offset_34417 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_34395,\n                          sext_i64_i32(segred_group_sizze_31072))) {\n                    x_34405 = ((__local\n                                int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395 +\n                                                              offset_34417)];\n                }\n            }\n            offset_34417 = 1;\n            while (slt32(offset_34417, wave_sizze_34397)) {\n                if (slt32(local_tid_34395 + offset_34417,\n                          sext_i64_i32(segred_group_sizze_31072)) &&\n                    ((local_tid_34395 - squot32(local_tid_34395,\n                                                wave_sizze_34397) *\n                      wave_sizze_34397) & (2 * offset_34417 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_34406 = ((v",
            "olatile __local\n                                    int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395 +\n                                                                  offset_34417)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_34407 = add64(x_34405, x_34406);\n                        \n                        x_34405 = defunc_1_op_res_34407;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395)] =\n                            x_34405;\n                    }\n                }\n                offset_34417 *= 2;\n            }\n            while (slt32(skip_waves_34418,\n                         squot32(sext_i64_i32(segred_group_sizze_31072) +\n                                 wave_sizze_34397 - 1, wave_sizze_34397))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_34417 = skip_waves_34418 * wave_sizze_34397;\n                if (slt32(local_tid_34395 + offset_34417,\n                          sext_i64_i32(segred_group_sizze_31072)) &&\n                    ((local_tid_34395 - squot32(local_tid_34395,\n                                                wave_sizze_34397) *\n                      wave_sizze_34397) == 0 && (squot32(local_tid_34395,\n                                                         wave_sizze_34397) &\n                                                 (2 * skip_waves_34418 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_34406 = ((__local\n                                    int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395 +\n                                                                  offset_34417)];\n                    }\n                    // apply reduction operation\n              ",
            "      {\n                        int64_t defunc_1_op_res_34407 = add64(x_34405, x_34406);\n                        \n                        x_34405 = defunc_1_op_res_34407;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_arr_mem_34401)[sext_i32_i64(local_tid_34395)] =\n                            x_34405;\n                    }\n                }\n                skip_waves_34418 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_34395 == 0) {\n                    ((__global int64_t *) mem_32110)[(int64_t) 0] = x_34405;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31072\n}\n__kernel void clusterPointszisegred_nonseg_31408(__global int *global_failure,\n                                                 uint red_arr_mem_35705_backing_offset_0,\n                                                 uint sync_arr_mem_35703_backing_offset_1,\n                                                 int64_t n_28846,\n                                                 int64_t num_groups_31403,\n                                                 int64_t num_threads_35697,\n                                                 __global\n                                                 unsigned char *mem_param_32094,\n                                                 __global\n                                                 unsigned char *mem_32230,\n                                                 __global\n                                                 unsigned char *mem_32240,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_35693,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_",
            "35695)\n{\n    #define segred_group_sizze_31401 (clusterPointszisegred_group_sizze_31400)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_35705_backing_1 =\n                  &shared_mem[red_arr_mem_35705_backing_offset_0];\n    volatile char *sync_arr_mem_35703_backing_0 =\n                  &shared_mem[sync_arr_mem_35703_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35698;\n    int32_t local_tid_35699;\n    int64_t group_sizze_35702;\n    int32_t wave_sizze_35701;\n    int32_t group_tid_35700;\n    \n    global_tid_35698 = get_global_id(0);\n    local_tid_35699 = get_local_id(0);\n    group_sizze_35702 = get_local_size(0);\n    wave_sizze_35701 = LOCKSTEP_WIDTH;\n    group_tid_35700 = get_group_id(0);\n    \n    int32_t phys_tid_31408;\n    \n    phys_tid_31408 = global_tid_35698;\n    \n    __local char *sync_arr_mem_35703;\n    \n    sync_arr_mem_35703 = (__local char *) sync_arr_mem_35703_backing_0;\n    \n    __local char *red_arr_mem_35705;\n    \n    red_arr_mem_35705 = (__local char *) red_arr_mem_35705_backing_1;\n    \n    int64_t dummy_31406;\n    \n    dummy_31406 = (int64_t) 0;\n    \n    int64_t gtid_31407;\n    \n    gtid_31407 = (int64_t) 0;\n    \n    bool x_acc_35707;\n    int64_t chunk_sizze_35708;\n    \n    chunk_sizze_35708 = smin64(sdiv_up64(n_28846,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_31401 *\n                                         num_groups_31403))),\n                               sdiv_up64(n_28846 - phys_tid_31408,\n                                         num_threads_35697));\n    \n    bool x_30007;\n    bool x_30008;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_35707 = 1;\n    }\n    for (int64_t i_35712 = 0; i_35712 < chunk_sizze_35708; i_35712++) {\n        gtid_31407 = phys_tid_31408 + num_threads_35697 * i_35712;\n        // apply map function\n        {\n            int64_t x_300",
            "10 = ((__global\n                                int64_t *) mem_param_32094)[gtid_31407];\n            int64_t x_30011 = ((__global int64_t *) mem_32230)[gtid_31407];\n            bool defunc_1_f_res_30012 = x_30010 == x_30011;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_30007 = x_acc_35707;\n            }\n            // load new values\n            {\n                x_30008 = defunc_1_f_res_30012;\n            }\n            // apply reduction operator\n            {\n                bool x_30009 = x_30007 && x_30008;\n                \n                // store in accumulator\n                {\n                    x_acc_35707 = x_30009;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_30007 = x_acc_35707;\n        ((__local bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699)] =\n            x_30007;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_35713;\n    int32_t skip_waves_35714;\n    \n    skip_waves_35714 = 1;\n    \n    bool x_35709;\n    bool x_35710;\n    \n    offset_35713 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_35699, sext_i64_i32(segred_group_sizze_31401))) {\n            x_35709 = ((__local\n                        bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699 +\n                                                   offset_35713)];\n        }\n    }\n    offset_35713 = 1;\n    while (slt32(offset_35713, wave_sizze_35701)) {\n        if (slt32(local_tid_35699 + offset_35713,\n                  sext_i64_i32(segred_group_sizze_31401)) && ((local_tid_35699 -\n                                                               squot32(local_tid_35699,\n                                                                       wave_sizze_35701) *\n                                                               wave_sizze_35701) &\n                              ",
            "                                (2 *\n                                                               offset_35713 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_35710 = ((volatile __local\n                            bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699 +\n                                                       offset_35713)];\n            }\n            // apply reduction operation\n            {\n                bool x_35711 = x_35709 && x_35710;\n                \n                x_35709 = x_35711;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699)] =\n                    x_35709;\n            }\n        }\n        offset_35713 *= 2;\n    }\n    while (slt32(skip_waves_35714,\n                 squot32(sext_i64_i32(segred_group_sizze_31401) +\n                         wave_sizze_35701 - 1, wave_sizze_35701))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_35713 = skip_waves_35714 * wave_sizze_35701;\n        if (slt32(local_tid_35699 + offset_35713,\n                  sext_i64_i32(segred_group_sizze_31401)) && ((local_tid_35699 -\n                                                               squot32(local_tid_35699,\n                                                                       wave_sizze_35701) *\n                                                               wave_sizze_35701) ==\n                                                              0 &&\n                                                              (squot32(local_tid_35699,\n                                                                       wave_sizze_35701) &\n                                                               (2 *\n                                                                skip_waves_35714 -\n                                                             ",
            "   1)) == 0)) {\n            // read array element\n            {\n                x_35710 = ((__local\n                            bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699 +\n                                                       offset_35713)];\n            }\n            // apply reduction operation\n            {\n                bool x_35711 = x_35709 && x_35710;\n                \n                x_35709 = x_35711;\n            }\n            // write result of operation\n            {\n                ((__local\n                  bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699)] =\n                    x_35709;\n            }\n        }\n        skip_waves_35714 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_35699) == (int64_t) 0) {\n            x_acc_35707 = x_35709;\n        }\n    }\n    \n    int32_t old_counter_35715;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_35699 == 0) {\n            ((__global\n              bool *) group_res_arr_mem_35695)[sext_i32_i64(group_tid_35700) *\n                                               segred_group_sizze_31401] =\n                x_acc_35707;\n            mem_fence_global();\n            old_counter_35715 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_35693)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_35703)[(int64_t) 0] =\n                old_counter_35715 == num_groups_31403 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_35716;\n    \n    is_last_group_35716 = ((__local bool *) sync_arr_mem_35703)[(int64_t) 0];\n    if (is_last_group_35716) {\n        if (local_tid_35699 == 0) {\n            old_counter_35715 = atomic_add_i32_global(&((volatile __global\n ",
            "                                                        int *) clusterPointszicounter_mem_35693)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31403));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_35717 = sdiv_up64(num_groups_31403,\n                                                      segred_group_sizze_31401);\n            \n            x_30007 = 1;\n            for (int64_t i_35718 = 0; i_35718 < read_per_thread_35717;\n                 i_35718++) {\n                int64_t group_res_id_35719 = sext_i32_i64(local_tid_35699) *\n                        read_per_thread_35717 + i_35718;\n                int64_t index_of_group_res_35720 = group_res_id_35719;\n                \n                if (slt64(group_res_id_35719, num_groups_31403)) {\n                    x_30008 = ((__global\n                                bool *) group_res_arr_mem_35695)[index_of_group_res_35720 *\n                                                                 segred_group_sizze_31401];\n                    \n                    bool x_30009;\n                    \n                    x_30009 = x_30007 && x_30008;\n                    x_30007 = x_30009;\n                }\n            }\n        }\n        ((__local bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699)] =\n            x_30007;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_35721;\n            int32_t skip_waves_35722;\n            \n            skip_waves_35722 = 1;\n            \n            bool x_35709;\n            bool x_35710;\n            \n            offset_35721 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_35699,\n                          sext_i64_i32(segred_group_sizze_31401))) {\n                    x_35709 = ((__local\n                 ",
            "               bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699 +\n                                                           offset_35721)];\n                }\n            }\n            offset_35721 = 1;\n            while (slt32(offset_35721, wave_sizze_35701)) {\n                if (slt32(local_tid_35699 + offset_35721,\n                          sext_i64_i32(segred_group_sizze_31401)) &&\n                    ((local_tid_35699 - squot32(local_tid_35699,\n                                                wave_sizze_35701) *\n                      wave_sizze_35701) & (2 * offset_35721 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_35710 = ((volatile __local\n                                    bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699 +\n                                                               offset_35721)];\n                    }\n                    // apply reduction operation\n                    {\n                        bool x_35711 = x_35709 && x_35710;\n                        \n                        x_35709 = x_35711;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699)] =\n                            x_35709;\n                    }\n                }\n                offset_35721 *= 2;\n            }\n            while (slt32(skip_waves_35722,\n                         squot32(sext_i64_i32(segred_group_sizze_31401) +\n                                 wave_sizze_35701 - 1, wave_sizze_35701))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_35721 = skip_waves_35722 * wave_sizze_35701;\n                if (slt32(local_tid_35699 + offset_35721,\n                          sext_i64_i32(segred_group_sizze_31401)) &&\n                    ((local_tid_35699 - squot32(local_tid_35699,\n                                      ",
            "          wave_sizze_35701) *\n                      wave_sizze_35701) == 0 && (squot32(local_tid_35699,\n                                                         wave_sizze_35701) &\n                                                 (2 * skip_waves_35722 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_35710 = ((__local\n                                    bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699 +\n                                                               offset_35721)];\n                    }\n                    // apply reduction operation\n                    {\n                        bool x_35711 = x_35709 && x_35710;\n                        \n                        x_35709 = x_35711;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          bool *) red_arr_mem_35705)[sext_i32_i64(local_tid_35699)] =\n                            x_35709;\n                    }\n                }\n                skip_waves_35722 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_35699 == 0) {\n                    ((__global bool *) mem_32240)[(int64_t) 0] = x_35709;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31401\n}\n__kernel void clusterPointszisegred_nonseg_31418(__global int *global_failure,\n                                                 uint red_arr_mem_35736_backing_offset_0,\n                                                 uint sync_arr_mem_35734_backing_offset_1,\n                                                 int64_t maxSizze_29582,\n                                                 int64_t num_segments_29900,\n                                                 int64_t num_groups_31413,\n                                                 int64_t num_threads_35728,\n     ",
            "                                            __global\n                                                 unsigned char *mem_param_32084,\n                                                 __global\n                                                 unsigned char *mem_32209,\n                                                 __global\n                                                 unsigned char *mem_32243,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_35724,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_35726)\n{\n    #define segred_group_sizze_31411 (clusterPointszisegred_group_sizze_31410)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_35736_backing_1 =\n                  &shared_mem[red_arr_mem_35736_backing_offset_0];\n    volatile char *sync_arr_mem_35734_backing_0 =\n                  &shared_mem[sync_arr_mem_35734_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35729;\n    int32_t local_tid_35730;\n    int64_t group_sizze_35733;\n    int32_t wave_sizze_35732;\n    int32_t group_tid_35731;\n    \n    global_tid_35729 = get_global_id(0);\n    local_tid_35730 = get_local_id(0);\n    group_sizze_35733 = get_local_size(0);\n    wave_sizze_35732 = LOCKSTEP_WIDTH;\n    group_tid_35731 = get_group_id(0);\n    \n    int32_t phys_tid_31418;\n    \n    phys_tid_31418 = global_tid_35729;\n    \n    __local char *sync_arr_mem_35734;\n    \n    sync_arr_mem_35734 = (__local char *) sync_arr_mem_35734_backing_0;\n    \n    __local char *red_arr_mem_35736;\n    \n    red_arr_mem_35736 = (__local char *) red_arr_mem_35736_backing_1;\n    \n    int64_t dummy_31416;\n    \n    dummy_31416 = (int64_t) 0;\n    \n    int64_t gtid_31417;\n    \n    gtid_31417 = (int64_t) 0;\n    \n    bool x_acc_35738;\n    i",
            "nt64_t chunk_sizze_35739;\n    \n    chunk_sizze_35739 = smin64(sdiv_up64(maxSizze_29582,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_31411 *\n                                         num_groups_31413))),\n                               sdiv_up64(maxSizze_29582 - phys_tid_31418,\n                                         num_threads_35728));\n    \n    bool x_30015;\n    bool x_30016;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_35738 = 1;\n    }\n    for (int64_t i_35743 = 0; i_35743 < chunk_sizze_35739; i_35743++) {\n        gtid_31417 = phys_tid_31418 + num_threads_35728 * i_35743;\n        // apply map function\n        {\n            int32_t x_30018 = ((__global\n                                int32_t *) mem_param_32084)[gtid_31417];\n            bool index_concat_cmp_31726 = sle64(num_segments_29900, gtid_31417);\n            int32_t index_concat_branch_31730;\n            \n            if (index_concat_cmp_31726) {\n                index_concat_branch_31730 = 0;\n            } else {\n                int32_t index_concat_31729 = ((__global\n                                               int32_t *) mem_32209)[gtid_31417];\n                \n                index_concat_branch_31730 = index_concat_31729;\n            }\n            \n            bool defunc_1_f_res_30020 = x_30018 == index_concat_branch_31730;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_30015 = x_acc_35738;\n            }\n            // load new values\n            {\n                x_30016 = defunc_1_f_res_30020;\n            }\n            // apply reduction operator\n            {\n                bool x_30017 = x_30015 && x_30016;\n                \n                // store in accumulator\n                {\n                    x_acc_35738 = x_30017;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_300",
            "15 = x_acc_35738;\n        ((__local bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730)] =\n            x_30015;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_35744;\n    int32_t skip_waves_35745;\n    \n    skip_waves_35745 = 1;\n    \n    bool x_35740;\n    bool x_35741;\n    \n    offset_35744 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_35730, sext_i64_i32(segred_group_sizze_31411))) {\n            x_35740 = ((__local\n                        bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730 +\n                                                   offset_35744)];\n        }\n    }\n    offset_35744 = 1;\n    while (slt32(offset_35744, wave_sizze_35732)) {\n        if (slt32(local_tid_35730 + offset_35744,\n                  sext_i64_i32(segred_group_sizze_31411)) && ((local_tid_35730 -\n                                                               squot32(local_tid_35730,\n                                                                       wave_sizze_35732) *\n                                                               wave_sizze_35732) &\n                                                              (2 *\n                                                               offset_35744 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_35741 = ((volatile __local\n                            bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730 +\n                                                       offset_35744)];\n            }\n            // apply reduction operation\n            {\n                bool x_35742 = x_35740 && x_35741;\n                \n                x_35740 = x_35742;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730)] =\n                    x_35740;\n            }\n        }\n    ",
            "    offset_35744 *= 2;\n    }\n    while (slt32(skip_waves_35745,\n                 squot32(sext_i64_i32(segred_group_sizze_31411) +\n                         wave_sizze_35732 - 1, wave_sizze_35732))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_35744 = skip_waves_35745 * wave_sizze_35732;\n        if (slt32(local_tid_35730 + offset_35744,\n                  sext_i64_i32(segred_group_sizze_31411)) && ((local_tid_35730 -\n                                                               squot32(local_tid_35730,\n                                                                       wave_sizze_35732) *\n                                                               wave_sizze_35732) ==\n                                                              0 &&\n                                                              (squot32(local_tid_35730,\n                                                                       wave_sizze_35732) &\n                                                               (2 *\n                                                                skip_waves_35745 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_35741 = ((__local\n                            bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730 +\n                                                       offset_35744)];\n            }\n            // apply reduction operation\n            {\n                bool x_35742 = x_35740 && x_35741;\n                \n                x_35740 = x_35742;\n            }\n            // write result of operation\n            {\n                ((__local\n                  bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730)] =\n                    x_35740;\n            }\n        }\n        skip_waves_35745 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_35730) == (int64_t) 0) {\n       ",
            "     x_acc_35738 = x_35740;\n        }\n    }\n    \n    int32_t old_counter_35746;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_35730 == 0) {\n            ((__global\n              bool *) group_res_arr_mem_35726)[sext_i32_i64(group_tid_35731) *\n                                               segred_group_sizze_31411] =\n                x_acc_35738;\n            mem_fence_global();\n            old_counter_35746 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_35724)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_35734)[(int64_t) 0] =\n                old_counter_35746 == num_groups_31413 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_35747;\n    \n    is_last_group_35747 = ((__local bool *) sync_arr_mem_35734)[(int64_t) 0];\n    if (is_last_group_35747) {\n        if (local_tid_35730 == 0) {\n            old_counter_35746 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_35724)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31413));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_35748 = sdiv_up64(num_groups_31413,\n                                                      segred_group_sizze_31411);\n            \n            x_30015 = 1;\n            for (int64_t i_35749 = 0; i_35749 < read_per_thread_35748;\n                 i_35749++) {\n                int64_t group_res_id_35750 = sext_i32_i64(local_tid_35730) *\n                        read_per_thread_35748 + i_35749;\n                int64_t index_of_group_res_35751 = group_res_id_35750;\n                \n         ",
            "       if (slt64(group_res_id_35750, num_groups_31413)) {\n                    x_30016 = ((__global\n                                bool *) group_res_arr_mem_35726)[index_of_group_res_35751 *\n                                                                 segred_group_sizze_31411];\n                    \n                    bool x_30017;\n                    \n                    x_30017 = x_30015 && x_30016;\n                    x_30015 = x_30017;\n                }\n            }\n        }\n        ((__local bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730)] =\n            x_30015;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_35752;\n            int32_t skip_waves_35753;\n            \n            skip_waves_35753 = 1;\n            \n            bool x_35740;\n            bool x_35741;\n            \n            offset_35752 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_35730,\n                          sext_i64_i32(segred_group_sizze_31411))) {\n                    x_35740 = ((__local\n                                bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730 +\n                                                           offset_35752)];\n                }\n            }\n            offset_35752 = 1;\n            while (slt32(offset_35752, wave_sizze_35732)) {\n                if (slt32(local_tid_35730 + offset_35752,\n                          sext_i64_i32(segred_group_sizze_31411)) &&\n                    ((local_tid_35730 - squot32(local_tid_35730,\n                                                wave_sizze_35732) *\n                      wave_sizze_35732) & (2 * offset_35752 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_35741 = ((volatile __local\n                                    bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730 +\n                                    ",
            "                           offset_35752)];\n                    }\n                    // apply reduction operation\n                    {\n                        bool x_35742 = x_35740 && x_35741;\n                        \n                        x_35740 = x_35742;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730)] =\n                            x_35740;\n                    }\n                }\n                offset_35752 *= 2;\n            }\n            while (slt32(skip_waves_35753,\n                         squot32(sext_i64_i32(segred_group_sizze_31411) +\n                                 wave_sizze_35732 - 1, wave_sizze_35732))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_35752 = skip_waves_35753 * wave_sizze_35732;\n                if (slt32(local_tid_35730 + offset_35752,\n                          sext_i64_i32(segred_group_sizze_31411)) &&\n                    ((local_tid_35730 - squot32(local_tid_35730,\n                                                wave_sizze_35732) *\n                      wave_sizze_35732) == 0 && (squot32(local_tid_35730,\n                                                         wave_sizze_35732) &\n                                                 (2 * skip_waves_35753 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_35741 = ((__local\n                                    bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730 +\n                                                               offset_35752)];\n                    }\n                    // apply reduction operation\n                    {\n                        bool x_35742 = x_35740 && x_35741;\n                        \n                        x_35740 = x_35742;\n                    }\n                    // write result of o",
            "peration\n                    {\n                        ((__local\n                          bool *) red_arr_mem_35736)[sext_i32_i64(local_tid_35730)] =\n                            x_35740;\n                    }\n                }\n                skip_waves_35753 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_35730 == 0) {\n                    ((__global bool *) mem_32243)[(int64_t) 0] = x_35740;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31411\n}\n__kernel void clusterPointszisegred_nonseg_31428(__global int *global_failure,\n                                                 uint red_arr_mem_35767_backing_offset_0,\n                                                 uint sync_arr_mem_35765_backing_offset_1,\n                                                 int64_t n_28846,\n                                                 int64_t num_groups_31423,\n                                                 int64_t num_threads_35759,\n                                                 __global\n                                                 unsigned char *mem_32230,\n                                                 __global\n                                                 unsigned char *mem_32246,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_35755,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_35757)\n{\n    #define segred_group_sizze_31421 (clusterPointszisegred_group_sizze_31420)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_35767_backing_1 =\n                  &shared_mem[red_arr_mem_35767_backing_offset_0];\n    volatile char *sync_arr_mem_35765_backing_0 =\n                  &shared_mem",
            "[sync_arr_mem_35765_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35760;\n    int32_t local_tid_35761;\n    int64_t group_sizze_35764;\n    int32_t wave_sizze_35763;\n    int32_t group_tid_35762;\n    \n    global_tid_35760 = get_global_id(0);\n    local_tid_35761 = get_local_id(0);\n    group_sizze_35764 = get_local_size(0);\n    wave_sizze_35763 = LOCKSTEP_WIDTH;\n    group_tid_35762 = get_group_id(0);\n    \n    int32_t phys_tid_31428;\n    \n    phys_tid_31428 = global_tid_35760;\n    \n    __local char *sync_arr_mem_35765;\n    \n    sync_arr_mem_35765 = (__local char *) sync_arr_mem_35765_backing_0;\n    \n    __local char *red_arr_mem_35767;\n    \n    red_arr_mem_35767 = (__local char *) red_arr_mem_35767_backing_1;\n    \n    int64_t dummy_31426;\n    \n    dummy_31426 = (int64_t) 0;\n    \n    int64_t gtid_31427;\n    \n    gtid_31427 = (int64_t) 0;\n    \n    int64_t x_acc_35769;\n    int64_t chunk_sizze_35770;\n    \n    chunk_sizze_35770 = smin64(sdiv_up64(n_28846,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_31421 *\n                                         num_groups_31423))),\n                               sdiv_up64(n_28846 - phys_tid_31428,\n                                         num_threads_35759));\n    \n    int64_t x_30024;\n    int64_t x_30025;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_35769 = (int64_t) 0;\n    }\n    for (int64_t i_35774 = 0; i_35774 < chunk_sizze_35770; i_35774++) {\n        gtid_31427 = phys_tid_31428 + num_threads_35759 * i_35774;\n        // apply map function\n        {\n            int64_t x_30027 = ((__global int64_t *) mem_32230)[gtid_31427];\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_30024 = x_acc_35769;\n            }\n            // load new values\n            {\n                x_30025 = x_30027;\n            }\n            // apply reduction operator\n          ",
            "  {\n                int64_t defunc_1_op_res_30026 = add64(x_30024, x_30025);\n                \n                // store in accumulator\n                {\n                    x_acc_35769 = defunc_1_op_res_30026;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_30024 = x_acc_35769;\n        ((__local int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761)] =\n            x_30024;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_35775;\n    int32_t skip_waves_35776;\n    \n    skip_waves_35776 = 1;\n    \n    int64_t x_35771;\n    int64_t x_35772;\n    \n    offset_35775 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_35761, sext_i64_i32(segred_group_sizze_31421))) {\n            x_35771 = ((__local\n                        int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761 +\n                                                      offset_35775)];\n        }\n    }\n    offset_35775 = 1;\n    while (slt32(offset_35775, wave_sizze_35763)) {\n        if (slt32(local_tid_35761 + offset_35775,\n                  sext_i64_i32(segred_group_sizze_31421)) && ((local_tid_35761 -\n                                                               squot32(local_tid_35761,\n                                                                       wave_sizze_35763) *\n                                                               wave_sizze_35763) &\n                                                              (2 *\n                                                               offset_35775 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_35772 = ((volatile __local\n                            int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761 +\n                                                          offset_35775)];\n            }\n            // apply reduction oper",
            "ation\n            {\n                int64_t defunc_1_op_res_35773 = add64(x_35771, x_35772);\n                \n                x_35771 = defunc_1_op_res_35773;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761)] =\n                    x_35771;\n            }\n        }\n        offset_35775 *= 2;\n    }\n    while (slt32(skip_waves_35776,\n                 squot32(sext_i64_i32(segred_group_sizze_31421) +\n                         wave_sizze_35763 - 1, wave_sizze_35763))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_35775 = skip_waves_35776 * wave_sizze_35763;\n        if (slt32(local_tid_35761 + offset_35775,\n                  sext_i64_i32(segred_group_sizze_31421)) && ((local_tid_35761 -\n                                                               squot32(local_tid_35761,\n                                                                       wave_sizze_35763) *\n                                                               wave_sizze_35763) ==\n                                                              0 &&\n                                                              (squot32(local_tid_35761,\n                                                                       wave_sizze_35763) &\n                                                               (2 *\n                                                                skip_waves_35776 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_35772 = ((__local\n                            int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761 +\n                                                          offset_35775)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_35773 = add64(x_35771, x_35772);\n                \n                x_35771 = de",
            "func_1_op_res_35773;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761)] =\n                    x_35771;\n            }\n        }\n        skip_waves_35776 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_35761) == (int64_t) 0) {\n            x_acc_35769 = x_35771;\n        }\n    }\n    \n    int32_t old_counter_35777;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_35761 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_35757)[sext_i32_i64(group_tid_35762) *\n                                                  segred_group_sizze_31421] =\n                x_acc_35769;\n            mem_fence_global();\n            old_counter_35777 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_35755)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_35765)[(int64_t) 0] =\n                old_counter_35777 == num_groups_31423 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_35778;\n    \n    is_last_group_35778 = ((__local bool *) sync_arr_mem_35765)[(int64_t) 0];\n    if (is_last_group_35778) {\n        if (local_tid_35761 == 0) {\n            old_counter_35777 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_35755)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31423));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_35779 = sdiv_up64(num_groups_31423,",
            "\n                                                      segred_group_sizze_31421);\n            \n            x_30024 = (int64_t) 0;\n            for (int64_t i_35780 = 0; i_35780 < read_per_thread_35779;\n                 i_35780++) {\n                int64_t group_res_id_35781 = sext_i32_i64(local_tid_35761) *\n                        read_per_thread_35779 + i_35780;\n                int64_t index_of_group_res_35782 = group_res_id_35781;\n                \n                if (slt64(group_res_id_35781, num_groups_31423)) {\n                    x_30025 = ((__global\n                                int64_t *) group_res_arr_mem_35757)[index_of_group_res_35782 *\n                                                                    segred_group_sizze_31421];\n                    \n                    int64_t defunc_1_op_res_30026;\n                    \n                    defunc_1_op_res_30026 = add64(x_30024, x_30025);\n                    x_30024 = defunc_1_op_res_30026;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761)] =\n            x_30024;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_35783;\n            int32_t skip_waves_35784;\n            \n            skip_waves_35784 = 1;\n            \n            int64_t x_35771;\n            int64_t x_35772;\n            \n            offset_35783 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_35761,\n                          sext_i64_i32(segred_group_sizze_31421))) {\n                    x_35771 = ((__local\n                                int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761 +\n                                                              offset_35783)];\n                }\n            }\n            offset_35783 = 1;\n            while (slt32(offset_35783, wave_sizze_35763)) {\n                if (slt32(local_tid_35761 + offs",
            "et_35783,\n                          sext_i64_i32(segred_group_sizze_31421)) &&\n                    ((local_tid_35761 - squot32(local_tid_35761,\n                                                wave_sizze_35763) *\n                      wave_sizze_35763) & (2 * offset_35783 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_35772 = ((volatile __local\n                                    int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761 +\n                                                                  offset_35783)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_35773 = add64(x_35771, x_35772);\n                        \n                        x_35771 = defunc_1_op_res_35773;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761)] =\n                            x_35771;\n                    }\n                }\n                offset_35783 *= 2;\n            }\n            while (slt32(skip_waves_35784,\n                         squot32(sext_i64_i32(segred_group_sizze_31421) +\n                                 wave_sizze_35763 - 1, wave_sizze_35763))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_35783 = skip_waves_35784 * wave_sizze_35763;\n                if (slt32(local_tid_35761 + offset_35783,\n                          sext_i64_i32(segred_group_sizze_31421)) &&\n                    ((local_tid_35761 - squot32(local_tid_35761,\n                                                wave_sizze_35763) *\n                      wave_sizze_35763) == 0 && (squot32(local_tid_35761,\n                                                         wave_sizze_35763) &\n                                                 (2 * skip_waves_35784 - 1)) ==\n            ",
            "         0)) {\n                    // read array element\n                    {\n                        x_35772 = ((__local\n                                    int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761 +\n                                                                  offset_35783)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_35773 = add64(x_35771, x_35772);\n                        \n                        x_35771 = defunc_1_op_res_35773;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_arr_mem_35767)[sext_i32_i64(local_tid_35761)] =\n                            x_35771;\n                    }\n                }\n                skip_waves_35784 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_35761 == 0) {\n                    ((__global int64_t *) mem_32246)[(int64_t) 0] = x_35771;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31421\n}\n__kernel void clusterPointszisegred_nonseg_31438(__global int *global_failure,\n                                                 uint red_arr_mem_35797_backing_offset_0,\n                                                 uint sync_arr_mem_35795_backing_offset_1,\n                                                 int64_t n_28846,\n                                                 int64_t num_groups_31433,\n                                                 int64_t num_threads_35789,\n                                                 __global\n                                                 unsigned char *lifted_fromInit_res_mem_32267,\n                                                 __global\n                                                 unsigned char *mem_32270,\n                            ",
            "                     __global\n                                                 unsigned char *clusterPointszicounter_mem_35785,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_35787)\n{\n    #define segred_group_sizze_31431 (clusterPointszisegred_group_sizze_31430)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_35797_backing_1 =\n                  &shared_mem[red_arr_mem_35797_backing_offset_0];\n    volatile char *sync_arr_mem_35795_backing_0 =\n                  &shared_mem[sync_arr_mem_35795_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35790;\n    int32_t local_tid_35791;\n    int64_t group_sizze_35794;\n    int32_t wave_sizze_35793;\n    int32_t group_tid_35792;\n    \n    global_tid_35790 = get_global_id(0);\n    local_tid_35791 = get_local_id(0);\n    group_sizze_35794 = get_local_size(0);\n    wave_sizze_35793 = LOCKSTEP_WIDTH;\n    group_tid_35792 = get_group_id(0);\n    \n    int32_t phys_tid_31438;\n    \n    phys_tid_31438 = global_tid_35790;\n    \n    __local char *sync_arr_mem_35795;\n    \n    sync_arr_mem_35795 = (__local char *) sync_arr_mem_35795_backing_0;\n    \n    __local char *red_arr_mem_35797;\n    \n    red_arr_mem_35797 = (__local char *) red_arr_mem_35797_backing_1;\n    \n    int64_t dummy_31436;\n    \n    dummy_31436 = (int64_t) 0;\n    \n    int64_t gtid_31437;\n    \n    gtid_31437 = (int64_t) 0;\n    \n    int64_t x_acc_35799;\n    int64_t chunk_sizze_35800;\n    \n    chunk_sizze_35800 = smin64(sdiv_up64(n_28846,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_31431 *\n                                         num_groups_31433))),\n                               sdiv_up64(n_28846 - phys_tid_31438,\n                                         num_threads_35789));\n    \n    int64_t x_30034;\n    int64_t x_30035;\n    \n    // ",
            "neutral-initialise the accumulators\n    {\n        x_acc_35799 = (int64_t) 0;\n    }\n    for (int64_t i_35804 = 0; i_35804 < chunk_sizze_35800; i_35804++) {\n        gtid_31437 = phys_tid_31438 + num_threads_35789 * i_35804;\n        // apply map function\n        {\n            int64_t x_30037 = ((__global\n                                int64_t *) lifted_fromInit_res_mem_32267)[gtid_31437];\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_30034 = x_acc_35799;\n            }\n            // load new values\n            {\n                x_30035 = x_30037;\n            }\n            // apply reduction operator\n            {\n                int64_t defunc_1_op_res_30036 = add64(x_30034, x_30035);\n                \n                // store in accumulator\n                {\n                    x_acc_35799 = defunc_1_op_res_30036;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_30034 = x_acc_35799;\n        ((__local int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791)] =\n            x_30034;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_35805;\n    int32_t skip_waves_35806;\n    \n    skip_waves_35806 = 1;\n    \n    int64_t x_35801;\n    int64_t x_35802;\n    \n    offset_35805 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_35791, sext_i64_i32(segred_group_sizze_31431))) {\n            x_35801 = ((__local\n                        int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791 +\n                                                      offset_35805)];\n        }\n    }\n    offset_35805 = 1;\n    while (slt32(offset_35805, wave_sizze_35793)) {\n        if (slt32(local_tid_35791 + offset_35805,\n                  sext_i64_i32(segred_group_sizze_31431)) && ((local_tid_35791 -\n                                                               squot32(local_tid_35791,\n ",
            "                                                                      wave_sizze_35793) *\n                                                               wave_sizze_35793) &\n                                                              (2 *\n                                                               offset_35805 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_35802 = ((volatile __local\n                            int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791 +\n                                                          offset_35805)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_35803 = add64(x_35801, x_35802);\n                \n                x_35801 = defunc_1_op_res_35803;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791)] =\n                    x_35801;\n            }\n        }\n        offset_35805 *= 2;\n    }\n    while (slt32(skip_waves_35806,\n                 squot32(sext_i64_i32(segred_group_sizze_31431) +\n                         wave_sizze_35793 - 1, wave_sizze_35793))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_35805 = skip_waves_35806 * wave_sizze_35793;\n        if (slt32(local_tid_35791 + offset_35805,\n                  sext_i64_i32(segred_group_sizze_31431)) && ((local_tid_35791 -\n                                                               squot32(local_tid_35791,\n                                                                       wave_sizze_35793) *\n                                                               wave_sizze_35793) ==\n                                                              0 &&\n                                                              (squot32(local_tid_35791,\n                                                       ",
            "                wave_sizze_35793) &\n                                                               (2 *\n                                                                skip_waves_35806 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_35802 = ((__local\n                            int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791 +\n                                                          offset_35805)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_35803 = add64(x_35801, x_35802);\n                \n                x_35801 = defunc_1_op_res_35803;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791)] =\n                    x_35801;\n            }\n        }\n        skip_waves_35806 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_35791) == (int64_t) 0) {\n            x_acc_35799 = x_35801;\n        }\n    }\n    \n    int32_t old_counter_35807;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_35791 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_35787)[sext_i32_i64(group_tid_35792) *\n                                                  segred_group_sizze_31431] =\n                x_acc_35799;\n            mem_fence_global();\n            old_counter_35807 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_35785)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_35795)[(int64_t) 0] =\n                old_counter_35807 == num_groups_31433 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLO",
            "BAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_35808;\n    \n    is_last_group_35808 = ((__local bool *) sync_arr_mem_35795)[(int64_t) 0];\n    if (is_last_group_35808) {\n        if (local_tid_35791 == 0) {\n            old_counter_35807 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_35785)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31433));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_35809 = sdiv_up64(num_groups_31433,\n                                                      segred_group_sizze_31431);\n            \n            x_30034 = (int64_t) 0;\n            for (int64_t i_35810 = 0; i_35810 < read_per_thread_35809;\n                 i_35810++) {\n                int64_t group_res_id_35811 = sext_i32_i64(local_tid_35791) *\n                        read_per_thread_35809 + i_35810;\n                int64_t index_of_group_res_35812 = group_res_id_35811;\n                \n                if (slt64(group_res_id_35811, num_groups_31433)) {\n                    x_30035 = ((__global\n                                int64_t *) group_res_arr_mem_35787)[index_of_group_res_35812 *\n                                                                    segred_group_sizze_31431];\n                    \n                    int64_t defunc_1_op_res_30036;\n                    \n                    defunc_1_op_res_30036 = add64(x_30034, x_30035);\n                    x_30034 = defunc_1_op_res_30036;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791)] =\n            x_30034;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_35813;\n            int32_t skip_waves_35814;\n            \n            skip_wa",
            "ves_35814 = 1;\n            \n            int64_t x_35801;\n            int64_t x_35802;\n            \n            offset_35813 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_35791,\n                          sext_i64_i32(segred_group_sizze_31431))) {\n                    x_35801 = ((__local\n                                int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791 +\n                                                              offset_35813)];\n                }\n            }\n            offset_35813 = 1;\n            while (slt32(offset_35813, wave_sizze_35793)) {\n                if (slt32(local_tid_35791 + offset_35813,\n                          sext_i64_i32(segred_group_sizze_31431)) &&\n                    ((local_tid_35791 - squot32(local_tid_35791,\n                                                wave_sizze_35793) *\n                      wave_sizze_35793) & (2 * offset_35813 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_35802 = ((volatile __local\n                                    int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791 +\n                                                                  offset_35813)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_35803 = add64(x_35801, x_35802);\n                        \n                        x_35801 = defunc_1_op_res_35803;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791)] =\n                            x_35801;\n                    }\n                }\n                offset_35813 *= 2;\n            }\n            while (slt32(skip_waves_35814,\n                         squot32(sext_i64_i32(segred_group_sizze_31431",
            ") +\n                                 wave_sizze_35793 - 1, wave_sizze_35793))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_35813 = skip_waves_35814 * wave_sizze_35793;\n                if (slt32(local_tid_35791 + offset_35813,\n                          sext_i64_i32(segred_group_sizze_31431)) &&\n                    ((local_tid_35791 - squot32(local_tid_35791,\n                                                wave_sizze_35793) *\n                      wave_sizze_35793) == 0 && (squot32(local_tid_35791,\n                                                         wave_sizze_35793) &\n                                                 (2 * skip_waves_35814 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_35802 = ((__local\n                                    int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791 +\n                                                                  offset_35813)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_35803 = add64(x_35801, x_35802);\n                        \n                        x_35801 = defunc_1_op_res_35803;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_arr_mem_35797)[sext_i32_i64(local_tid_35791)] =\n                            x_35801;\n                    }\n                }\n                skip_waves_35814 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_35791 == 0) {\n                    ((__global int64_t *) mem_32270)[(int64_t) 0] = x_35801;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31431\n}\n__kernel void clusterPointszisegred_nonseg_31470(__global int *global_failure,\n              ",
            "                                   uint red_arr_mem_35997_backing_offset_0,\n                                                 uint sync_arr_mem_35995_backing_offset_1,\n                                                 int64_t partition_sizze_30057,\n                                                 int64_t num_groups_31465,\n                                                 int64_t num_threads_35989,\n                                                 __global\n                                                 unsigned char *mem_32302,\n                                                 __global\n                                                 unsigned char *mem_32305,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_35985,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_35987)\n{\n    #define segred_group_sizze_31463 (clusterPointszisegred_group_sizze_31462)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_35997_backing_1 =\n                  &shared_mem[red_arr_mem_35997_backing_offset_0];\n    volatile char *sync_arr_mem_35995_backing_0 =\n                  &shared_mem[sync_arr_mem_35995_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35990;\n    int32_t local_tid_35991;\n    int64_t group_sizze_35994;\n    int32_t wave_sizze_35993;\n    int32_t group_tid_35992;\n    \n    global_tid_35990 = get_global_id(0);\n    local_tid_35991 = get_local_id(0);\n    group_sizze_35994 = get_local_size(0);\n    wave_sizze_35993 = LOCKSTEP_WIDTH;\n    group_tid_35992 = get_group_id(0);\n    \n    int32_t phys_tid_31470;\n    \n    phys_tid_31470 = global_tid_35990;\n    \n    __local char *sync_arr_mem_35995;\n    \n    sync_arr_mem_35995 = (__local char *) sync_arr_mem_35995_backing_0;\n    \n    __loca",
            "l char *red_arr_mem_35997;\n    \n    red_arr_mem_35997 = (__local char *) red_arr_mem_35997_backing_1;\n    \n    int64_t dummy_31468;\n    \n    dummy_31468 = (int64_t) 0;\n    \n    int64_t gtid_31469;\n    \n    gtid_31469 = (int64_t) 0;\n    \n    int64_t x_acc_35999;\n    int64_t chunk_sizze_36000;\n    \n    chunk_sizze_36000 = smin64(sdiv_up64(partition_sizze_30057,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_31463 *\n                                         num_groups_31465))),\n                               sdiv_up64(partition_sizze_30057 - phys_tid_31470,\n                                         num_threads_35989));\n    \n    int64_t x_30101;\n    int64_t x_30102;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_35999 = (int64_t) 0;\n    }\n    for (int64_t i_36004 = 0; i_36004 < chunk_sizze_36000; i_36004++) {\n        gtid_31469 = phys_tid_31470 + num_threads_35989 * i_36004;\n        // apply map function\n        {\n            int64_t x_30104 = ((__global int64_t *) mem_32302)[gtid_31469];\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_30101 = x_acc_35999;\n            }\n            // load new values\n            {\n                x_30102 = x_30104;\n            }\n            // apply reduction operator\n            {\n                int64_t defunc_1_op_res_30103 = add64(x_30101, x_30102);\n                \n                // store in accumulator\n                {\n                    x_acc_35999 = defunc_1_op_res_30103;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_30101 = x_acc_35999;\n        ((__local int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991)] =\n            x_30101;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_36005;\n    int32_t skip_waves_36006;\n    \n    skip_waves_36006 = 1;\n    \n    int64_t x_36001;\n    int64_t x_3",
            "6002;\n    \n    offset_36005 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_35991, sext_i64_i32(segred_group_sizze_31463))) {\n            x_36001 = ((__local\n                        int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991 +\n                                                      offset_36005)];\n        }\n    }\n    offset_36005 = 1;\n    while (slt32(offset_36005, wave_sizze_35993)) {\n        if (slt32(local_tid_35991 + offset_36005,\n                  sext_i64_i32(segred_group_sizze_31463)) && ((local_tid_35991 -\n                                                               squot32(local_tid_35991,\n                                                                       wave_sizze_35993) *\n                                                               wave_sizze_35993) &\n                                                              (2 *\n                                                               offset_36005 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_36002 = ((volatile __local\n                            int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991 +\n                                                          offset_36005)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_36003 = add64(x_36001, x_36002);\n                \n                x_36001 = defunc_1_op_res_36003;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991)] =\n                    x_36001;\n            }\n        }\n        offset_36005 *= 2;\n    }\n    while (slt32(skip_waves_36006,\n                 squot32(sext_i64_i32(segred_group_sizze_31463) +\n                         wave_sizze_35993 - 1, wave_sizze_35993))) {\n        barrier(CLK_LOCAL_MEM_FENC",
            "E);\n        offset_36005 = skip_waves_36006 * wave_sizze_35993;\n        if (slt32(local_tid_35991 + offset_36005,\n                  sext_i64_i32(segred_group_sizze_31463)) && ((local_tid_35991 -\n                                                               squot32(local_tid_35991,\n                                                                       wave_sizze_35993) *\n                                                               wave_sizze_35993) ==\n                                                              0 &&\n                                                              (squot32(local_tid_35991,\n                                                                       wave_sizze_35993) &\n                                                               (2 *\n                                                                skip_waves_36006 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_36002 = ((__local\n                            int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991 +\n                                                          offset_36005)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_36003 = add64(x_36001, x_36002);\n                \n                x_36001 = defunc_1_op_res_36003;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991)] =\n                    x_36001;\n            }\n        }\n        skip_waves_36006 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_35991) == (int64_t) 0) {\n            x_acc_35999 = x_36001;\n        }\n    }\n    \n    int32_t old_counter_36007;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_35991 == 0",
            ") {\n            ((__global\n              int64_t *) group_res_arr_mem_35987)[sext_i32_i64(group_tid_35992) *\n                                                  segred_group_sizze_31463] =\n                x_acc_35999;\n            mem_fence_global();\n            old_counter_36007 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_35985)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_35995)[(int64_t) 0] =\n                old_counter_36007 == num_groups_31465 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_36008;\n    \n    is_last_group_36008 = ((__local bool *) sync_arr_mem_35995)[(int64_t) 0];\n    if (is_last_group_36008) {\n        if (local_tid_35991 == 0) {\n            old_counter_36007 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_35985)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31465));\n        }\n        // read in the per-group-results\n        {\n            int64_t read_per_thread_36009 = sdiv_up64(num_groups_31465,\n                                                      segred_group_sizze_31463);\n            \n            x_30101 = (int64_t) 0;\n            for (int64_t i_36010 = 0; i_36010 < read_per_thread_36009;\n                 i_36010++) {\n                int64_t group_res_id_36011 = sext_i32_i64(local_tid_35991) *\n                        read_per_thread_36009 + i_36010;\n                int64_t index_of_group_res_36012 = group_res_id_36011;\n                \n                if (slt64(group_res_id_36011, num_groups_31465)) {\n                    x_30102 = ((__global\n                                int64_t *) group_res_arr_mem_35987)[index",
            "_of_group_res_36012 *\n                                                                    segred_group_sizze_31463];\n                    \n                    int64_t defunc_1_op_res_30103;\n                    \n                    defunc_1_op_res_30103 = add64(x_30101, x_30102);\n                    x_30101 = defunc_1_op_res_30103;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991)] =\n            x_30101;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_36013;\n            int32_t skip_waves_36014;\n            \n            skip_waves_36014 = 1;\n            \n            int64_t x_36001;\n            int64_t x_36002;\n            \n            offset_36013 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_35991,\n                          sext_i64_i32(segred_group_sizze_31463))) {\n                    x_36001 = ((__local\n                                int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991 +\n                                                              offset_36013)];\n                }\n            }\n            offset_36013 = 1;\n            while (slt32(offset_36013, wave_sizze_35993)) {\n                if (slt32(local_tid_35991 + offset_36013,\n                          sext_i64_i32(segred_group_sizze_31463)) &&\n                    ((local_tid_35991 - squot32(local_tid_35991,\n                                                wave_sizze_35993) *\n                      wave_sizze_35993) & (2 * offset_36013 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_36002 = ((volatile __local\n                                    int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991 +\n                                                                  offset_36013)];\n                    }\n                    // apply r",
            "eduction operation\n                    {\n                        int64_t defunc_1_op_res_36003 = add64(x_36001, x_36002);\n                        \n                        x_36001 = defunc_1_op_res_36003;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991)] =\n                            x_36001;\n                    }\n                }\n                offset_36013 *= 2;\n            }\n            while (slt32(skip_waves_36014,\n                         squot32(sext_i64_i32(segred_group_sizze_31463) +\n                                 wave_sizze_35993 - 1, wave_sizze_35993))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_36013 = skip_waves_36014 * wave_sizze_35993;\n                if (slt32(local_tid_35991 + offset_36013,\n                          sext_i64_i32(segred_group_sizze_31463)) &&\n                    ((local_tid_35991 - squot32(local_tid_35991,\n                                                wave_sizze_35993) *\n                      wave_sizze_35993) == 0 && (squot32(local_tid_35991,\n                                                         wave_sizze_35993) &\n                                                 (2 * skip_waves_36014 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_36002 = ((__local\n                                    int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991 +\n                                                                  offset_36013)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_36003 = add64(x_36001, x_36002);\n                        \n                        x_36001 = defunc_1_op_res_36003;\n                    }\n                    // write result of operation\n     ",
            "               {\n                        ((__local\n                          int64_t *) red_arr_mem_35997)[sext_i32_i64(local_tid_35991)] =\n                            x_36001;\n                    }\n                }\n                skip_waves_36014 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_35991 == 0) {\n                    ((__global int64_t *) mem_32305)[(int64_t) 0] = x_36001;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31463\n}\n__kernel void clusterPointszisegred_nonseg_31601(__global int *global_failure,\n                                                 uint red_arr_mem_36614_backing_offset_0,\n                                                 uint sync_arr_mem_36612_backing_offset_1,\n                                                 int64_t sizze_30080,\n                                                 int64_t num_groups_31596,\n                                                 int64_t num_threads_36606,\n                                                 __global\n                                                 unsigned char *clusterWith_res_mem_32335,\n                                                 __global\n                                                 unsigned char *mem_32341,\n                                                 __global\n                                                 unsigned char *clusterPointszicounter_mem_36602,\n                                                 __global\n                                                 unsigned char *group_res_arr_mem_36604)\n{\n    #define segred_group_sizze_31594 (clusterPointszisegred_group_sizze_31593)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_36614_backing_1 =\n                  &shared_mem[red_arr_mem_36614_backing_offset_0];\n    volatile char *sync_arr_mem_36612_backing_0 =\n                 ",
            " &shared_mem[sync_arr_mem_36612_backing_offset_1];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36607;\n    int32_t local_tid_36608;\n    int64_t group_sizze_36611;\n    int32_t wave_sizze_36610;\n    int32_t group_tid_36609;\n    \n    global_tid_36607 = get_global_id(0);\n    local_tid_36608 = get_local_id(0);\n    group_sizze_36611 = get_local_size(0);\n    wave_sizze_36610 = LOCKSTEP_WIDTH;\n    group_tid_36609 = get_group_id(0);\n    \n    int32_t phys_tid_31601;\n    \n    phys_tid_31601 = global_tid_36607;\n    \n    __local char *sync_arr_mem_36612;\n    \n    sync_arr_mem_36612 = (__local char *) sync_arr_mem_36612_backing_0;\n    \n    __local char *red_arr_mem_36614;\n    \n    red_arr_mem_36614 = (__local char *) red_arr_mem_36614_backing_1;\n    \n    int64_t dummy_31599;\n    \n    dummy_31599 = (int64_t) 0;\n    \n    int64_t gtid_31600;\n    \n    gtid_31600 = (int64_t) 0;\n    \n    int64_t x_acc_36616;\n    int64_t chunk_sizze_36617;\n    \n    chunk_sizze_36617 = smin64(sdiv_up64(sizze_30080,\n                                         sext_i32_i64(sext_i64_i32(segred_group_sizze_31594 *\n                                         num_groups_31596))),\n                               sdiv_up64(sizze_30080 - phys_tid_31601,\n                                         num_threads_36606));\n    \n    int64_t x_30211;\n    int64_t x_30212;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_36616 = (int64_t) 0;\n    }\n    for (int64_t i_36621 = 0; i_36621 < chunk_sizze_36617; i_36621++) {\n        gtid_31600 = phys_tid_31601 + num_threads_36606 * i_36621;\n        // apply map function\n        {\n            int64_t x_30214 = ((__global\n                                int64_t *) clusterWith_res_mem_32335)[gtid_31600];\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_30211 = x_acc_36616;\n            }\n            // load new values\n            {\n                x_30212 = x_302",
            "14;\n            }\n            // apply reduction operator\n            {\n                int64_t defunc_1_op_res_30213 = add64(x_30211, x_30212);\n                \n                // store in accumulator\n                {\n                    x_acc_36616 = defunc_1_op_res_30213;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_30211 = x_acc_36616;\n        ((__local int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608)] =\n            x_30211;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_36622;\n    int32_t skip_waves_36623;\n    \n    skip_waves_36623 = 1;\n    \n    int64_t x_36618;\n    int64_t x_36619;\n    \n    offset_36622 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_36608, sext_i64_i32(segred_group_sizze_31594))) {\n            x_36618 = ((__local\n                        int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608 +\n                                                      offset_36622)];\n        }\n    }\n    offset_36622 = 1;\n    while (slt32(offset_36622, wave_sizze_36610)) {\n        if (slt32(local_tid_36608 + offset_36622,\n                  sext_i64_i32(segred_group_sizze_31594)) && ((local_tid_36608 -\n                                                               squot32(local_tid_36608,\n                                                                       wave_sizze_36610) *\n                                                               wave_sizze_36610) &\n                                                              (2 *\n                                                               offset_36622 -\n                                                               1)) == 0) {\n            // read array element\n            {\n                x_36619 = ((volatile __local\n                            int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608 +\n                                                       ",
            "   offset_36622)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_36620 = add64(x_36618, x_36619);\n                \n                x_36618 = defunc_1_op_res_36620;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608)] =\n                    x_36618;\n            }\n        }\n        offset_36622 *= 2;\n    }\n    while (slt32(skip_waves_36623,\n                 squot32(sext_i64_i32(segred_group_sizze_31594) +\n                         wave_sizze_36610 - 1, wave_sizze_36610))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_36622 = skip_waves_36623 * wave_sizze_36610;\n        if (slt32(local_tid_36608 + offset_36622,\n                  sext_i64_i32(segred_group_sizze_31594)) && ((local_tid_36608 -\n                                                               squot32(local_tid_36608,\n                                                                       wave_sizze_36610) *\n                                                               wave_sizze_36610) ==\n                                                              0 &&\n                                                              (squot32(local_tid_36608,\n                                                                       wave_sizze_36610) &\n                                                               (2 *\n                                                                skip_waves_36623 -\n                                                                1)) == 0)) {\n            // read array element\n            {\n                x_36619 = ((__local\n                            int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608 +\n                                                          offset_36622)];\n            }\n            // apply reduction operation\n            {\n                int64_t defunc_1_op_res_36620 = ad",
            "d64(x_36618, x_36619);\n                \n                x_36618 = defunc_1_op_res_36620;\n            }\n            // write result of operation\n            {\n                ((__local\n                  int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608)] =\n                    x_36618;\n            }\n        }\n        skip_waves_36623 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (sext_i32_i64(local_tid_36608) == (int64_t) 0) {\n            x_acc_36616 = x_36618;\n        }\n    }\n    \n    int32_t old_counter_36624;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_36608 == 0) {\n            ((__global\n              int64_t *) group_res_arr_mem_36604)[sext_i32_i64(group_tid_36609) *\n                                                  segred_group_sizze_31594] =\n                x_acc_36616;\n            mem_fence_global();\n            old_counter_36624 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_36602)[(int64_t) 0],\n                                                      (int) 1);\n            ((__local bool *) sync_arr_mem_36612)[(int64_t) 0] =\n                old_counter_36624 == num_groups_31596 - (int64_t) 1;\n        }\n    }\n    barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    \n    bool is_last_group_36625;\n    \n    is_last_group_36625 = ((__local bool *) sync_arr_mem_36612)[(int64_t) 0];\n    if (is_last_group_36625) {\n        if (local_tid_36608 == 0) {\n            old_counter_36624 = atomic_add_i32_global(&((volatile __global\n                                                         int *) clusterPointszicounter_mem_36602)[(int64_t) 0],\n                                                      (int) ((int64_t) 0 -\n                                                             num_groups_31596));\n        }\n        // read in the per-group-results\n        {\n   ",
            "         int64_t read_per_thread_36626 = sdiv_up64(num_groups_31596,\n                                                      segred_group_sizze_31594);\n            \n            x_30211 = (int64_t) 0;\n            for (int64_t i_36627 = 0; i_36627 < read_per_thread_36626;\n                 i_36627++) {\n                int64_t group_res_id_36628 = sext_i32_i64(local_tid_36608) *\n                        read_per_thread_36626 + i_36627;\n                int64_t index_of_group_res_36629 = group_res_id_36628;\n                \n                if (slt64(group_res_id_36628, num_groups_31596)) {\n                    x_30212 = ((__global\n                                int64_t *) group_res_arr_mem_36604)[index_of_group_res_36629 *\n                                                                    segred_group_sizze_31594];\n                    \n                    int64_t defunc_1_op_res_30213;\n                    \n                    defunc_1_op_res_30213 = add64(x_30211, x_30212);\n                    x_30211 = defunc_1_op_res_30213;\n                }\n            }\n        }\n        ((__local int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608)] =\n            x_30211;\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_36630;\n            int32_t skip_waves_36631;\n            \n            skip_waves_36631 = 1;\n            \n            int64_t x_36618;\n            int64_t x_36619;\n            \n            offset_36630 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_36608,\n                          sext_i64_i32(segred_group_sizze_31594))) {\n                    x_36618 = ((__local\n                                int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608 +\n                                                              offset_36630)];\n                }\n            }\n            offset_36630 = 1;\n            while (slt32(offset_36630, w",
            "ave_sizze_36610)) {\n                if (slt32(local_tid_36608 + offset_36630,\n                          sext_i64_i32(segred_group_sizze_31594)) &&\n                    ((local_tid_36608 - squot32(local_tid_36608,\n                                                wave_sizze_36610) *\n                      wave_sizze_36610) & (2 * offset_36630 - 1)) == 0) {\n                    // read array element\n                    {\n                        x_36619 = ((volatile __local\n                                    int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608 +\n                                                                  offset_36630)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_36620 = add64(x_36618, x_36619);\n                        \n                        x_36618 = defunc_1_op_res_36620;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608)] =\n                            x_36618;\n                    }\n                }\n                offset_36630 *= 2;\n            }\n            while (slt32(skip_waves_36631,\n                         squot32(sext_i64_i32(segred_group_sizze_31594) +\n                                 wave_sizze_36610 - 1, wave_sizze_36610))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_36630 = skip_waves_36631 * wave_sizze_36610;\n                if (slt32(local_tid_36608 + offset_36630,\n                          sext_i64_i32(segred_group_sizze_31594)) &&\n                    ((local_tid_36608 - squot32(local_tid_36608,\n                                                wave_sizze_36610) *\n                      wave_sizze_36610) == 0 && (squot32(local_tid_36608,\n                                                         wave_sizze_36610) &\n                        ",
            "                         (2 * skip_waves_36631 - 1)) ==\n                     0)) {\n                    // read array element\n                    {\n                        x_36619 = ((__local\n                                    int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608 +\n                                                                  offset_36630)];\n                    }\n                    // apply reduction operation\n                    {\n                        int64_t defunc_1_op_res_36620 = add64(x_36618, x_36619);\n                        \n                        x_36618 = defunc_1_op_res_36620;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int64_t *) red_arr_mem_36614)[sext_i32_i64(local_tid_36608)] =\n                            x_36618;\n                    }\n                }\n                skip_waves_36631 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_36608 == 0) {\n                    ((__global int64_t *) mem_32341)[(int64_t) 0] = x_36618;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_31594\n}\n__kernel void clusterPointszisegred_small_33268(__global int *global_failure,\n                                                uint red_arr_mem_33276_backing_offset_0,\n                                                int64_t defunc_2_reduce_res_29111,\n                                                int64_t num_groups_30740,\n                                                int32_t num_subhistos_33189,\n                                                int64_t segment_sizze_nonzzero_33269,\n                                                __global\n                                                unsigned char *mem_31938,\n                                                __global\n                                                ",
            "unsigned char *defunc_1_map_res_subhistos_mem_33190)\n{\n    #define seghist_group_sizze_30738 (clusterPointsziseghist_group_sizze_30737)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_33276_backing_0 =\n                  &shared_mem[red_arr_mem_33276_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33271;\n    int32_t local_tid_33272;\n    int64_t group_sizze_33275;\n    int32_t wave_sizze_33274;\n    int32_t group_tid_33273;\n    \n    global_tid_33271 = get_global_id(0);\n    local_tid_33272 = get_local_id(0);\n    group_sizze_33275 = get_local_size(0);\n    wave_sizze_33274 = LOCKSTEP_WIDTH;\n    group_tid_33273 = get_group_id(0);\n    \n    int32_t flat_gtid_33268;\n    \n    flat_gtid_33268 = global_tid_33271;\n    \n    __local char *red_arr_mem_33276;\n    \n    red_arr_mem_33276 = (__local char *) red_arr_mem_33276_backing_0;\n    \n    int32_t phys_group_id_33278;\n    \n    phys_group_id_33278 = get_group_id(0);\n    for (int32_t i_33279 = 0; i_33279 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(defunc_2_reduce_res_29111,\n                                          squot64(seghist_group_sizze_30738,\n                                                  segment_sizze_nonzzero_33269))) -\n                   phys_group_id_33278, sext_i64_i32(num_groups_30740));\n         i_33279++) {\n        int32_t virt_group_id_33280 = phys_group_id_33278 + i_33279 *\n                sext_i64_i32(num_groups_30740);\n        int64_t bucket_id_33266 = squot64(sext_i32_i64(local_tid_33272),\n                                          segment_sizze_nonzzero_33269) +\n                sext_i32_i64(virt_group_id_33280) *\n                squot64(seghist_group_sizze_30738,\n                        segment_sizze_nonzzero_33269);\n        int64_t subhistogram_id_33267 = srem64(sext_i32_i64(local_tid_33272),\n                                               num_subhistos_33189);\n        \n        // apply",
            " map function if in bounds\n        {\n            if (slt64((int64_t) 0, num_subhistos_33189) &&\n                (slt64(bucket_id_33266, defunc_2_reduce_res_29111) &&\n                 slt64(sext_i32_i64(local_tid_33272), num_subhistos_33189 *\n                       squot64(seghist_group_sizze_30738,\n                               segment_sizze_nonzzero_33269)))) {\n                // save results to be reduced\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272)] =\n                        ((__global\n                          int64_t *) defunc_1_map_res_subhistos_mem_33190)[subhistogram_id_33267 *\n                                                                           defunc_2_reduce_res_29111 +\n                                                                           bucket_id_33266];\n                }\n            } else {\n                ((__local\n                  int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272)] =\n                    (int64_t) 0;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64((int64_t) 0, num_subhistos_33189)) {\n            // perform segmented scan to imitate reduction\n            {\n                int64_t x_30744;\n                int64_t x_30745;\n                int64_t x_33281;\n                int64_t x_33282;\n                bool ltid_in_bounds_33284;\n                \n                ltid_in_bounds_33284 = slt64(sext_i32_i64(local_tid_33272),\n                                             num_subhistos_33189 *\n                                             squot64(seghist_group_sizze_30738,\n                                                     segment_sizze_nonzzero_33269));\n                \n                int32_t skip_threads_33285;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_33284) {\n                        x_30745 = ((volatile __local\n           ",
            "                         int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272)];\n                        if ((local_tid_33272 - squot32(local_tid_33272, 32) *\n                             32) == 0) {\n                            x_30744 = x_30745;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_33285 = 1;\n                    while (slt32(skip_threads_33285, 32)) {\n                        if (sle32(skip_threads_33285, local_tid_33272 -\n                                  squot32(local_tid_33272, 32) * 32) &&\n                            ltid_in_bounds_33284) {\n                            // read operands\n                            {\n                                x_30744 = ((volatile __local\n                                            int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272) -\n                                                                          sext_i32_i64(skip_threads_33285)];\n                            }\n                            // perform operation\n                            {\n                                bool inactive_33286 =\n                                     slt64(srem64(sext_i32_i64(local_tid_33272),\n                                                  num_subhistos_33189),\n                                           sext_i32_i64(local_tid_33272) -\n                                           sext_i32_i64(local_tid_33272 -\n                                           skip_threads_33285));\n                                \n                                if (inactive_33286) {\n                                    x_30744 = x_30745;\n                                }\n                                if (!inactive_33286) {\n                                    int64_t defunc_1_f_res_30746 =\n                                            smax64(x_30744, x_30745);\n                                    \n             ",
            "                       x_30744 = defunc_1_f_res_30746;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_33274, skip_threads_33285)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (sle32(skip_threads_33285, local_tid_33272 -\n                                  squot32(local_tid_33272, 32) * 32) &&\n                            ltid_in_bounds_33284) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272)] =\n                                    x_30744;\n                                x_30745 = x_30744;\n                            }\n                        }\n                        if (sle32(wave_sizze_33274, skip_threads_33285)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_33285 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_33272 - squot32(local_tid_33272, 32) * 32) ==\n                        31 && ltid_in_bounds_33284) {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_33276)[sext_i32_i64(squot32(local_tid_33272,\n                                                                             32))] =\n                            x_30744;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_33287;\n                    \n                    // read input for in-block scan\n                    {",
            "\n                        if (squot32(local_tid_33272, 32) == 0 &&\n                            ltid_in_bounds_33284) {\n                            x_33282 = ((volatile __local\n                                        int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272)];\n                            if ((local_tid_33272 - squot32(local_tid_33272,\n                                                           32) * 32) == 0) {\n                                x_33281 = x_33282;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_33287 = 1;\n                        while (slt32(skip_threads_33287, 32)) {\n                            if (sle32(skip_threads_33287, local_tid_33272 -\n                                      squot32(local_tid_33272, 32) * 32) &&\n                                (squot32(local_tid_33272, 32) == 0 &&\n                                 ltid_in_bounds_33284)) {\n                                // read operands\n                                {\n                                    x_33281 = ((volatile __local\n                                                int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272) -\n                                                                              sext_i32_i64(skip_threads_33287)];\n                                }\n                                // perform operation\n                                {\n                                    bool inactive_33288 =\n                                         slt64(srem64(sext_i32_i64(local_tid_33272 *\n                                                      32 + 32 - 1),\n                                                      num_subhistos_33189),\n                                               sext_i32_i64(local_tid_33272 *\n                                               32 + 32 - 1) -\n                                        ",
            "       sext_i32_i64((local_tid_33272 -\n                                                             skip_threads_33287) *\n                                               32 + 32 - 1));\n                                    \n                                    if (inactive_33288) {\n                                        x_33281 = x_33282;\n                                    }\n                                    if (!inactive_33288) {\n                                        int64_t defunc_1_f_res_33283 =\n                                                smax64(x_33281, x_33282);\n                                        \n                                        x_33281 = defunc_1_f_res_33283;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_33274, skip_threads_33287)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (sle32(skip_threads_33287, local_tid_33272 -\n                                      squot32(local_tid_33272, 32) * 32) &&\n                                (squot32(local_tid_33272, 32) == 0 &&\n                                 ltid_in_bounds_33284)) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272)] =\n                                        x_33281;\n                                    x_33282 = x_33281;\n                                }\n                            }\n                            if (sle32(wave_sizze_33274, skip_threads_33287)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_33287 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            ",
            "    // carry-in for every block except the first\n                {\n                    if (!(squot32(local_tid_33272, 32) == 0 ||\n                          !ltid_in_bounds_33284)) {\n                        // read operands\n                        {\n                            x_30745 = x_30744;\n                            x_30744 = ((__local\n                                        int64_t *) red_arr_mem_33276)[sext_i32_i64(squot32(local_tid_33272,\n                                                                                           32)) -\n                                                                      (int64_t) 1];\n                        }\n                        // perform operation\n                        {\n                            bool inactive_33289 =\n                                 slt64(srem64(sext_i32_i64(local_tid_33272),\n                                              num_subhistos_33189),\n                                       sext_i32_i64(local_tid_33272) -\n                                       sext_i32_i64(squot32(local_tid_33272,\n                                                            32) * 32 - 1));\n                            \n                            if (inactive_33289) {\n                                x_30744 = x_30745;\n                            }\n                            if (!inactive_33289) {\n                                int64_t defunc_1_f_res_30746 = smax64(x_30744,\n                                                                      x_30745);\n                                \n                                x_30744 = defunc_1_f_res_30746;\n                            }\n                        }\n                        // write final result\n                        {\n                            ((__local\n                              int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272)] =\n                                x_30744;\n                        }\n                    }\n                }\n                b",
            "arrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n                    if (squot32(local_tid_33272, 32) == 0) {\n                        ((__local\n                          int64_t *) red_arr_mem_33276)[sext_i32_i64(local_tid_33272)] =\n                            x_30745;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_33280) *\n                      squot64(seghist_group_sizze_30738,\n                              segment_sizze_nonzzero_33269) +\n                      sext_i32_i64(local_tid_33272),\n                      defunc_2_reduce_res_29111) &&\n                slt64(sext_i32_i64(local_tid_33272),\n                      squot64(seghist_group_sizze_30738,\n                              segment_sizze_nonzzero_33269))) {\n                ((__global\n                  int64_t *) mem_31938)[sext_i32_i64(virt_group_id_33280) *\n                                        squot64(seghist_group_sizze_30738,\n                                                segment_sizze_nonzzero_33269) +\n                                        sext_i32_i64(local_tid_33272)] =\n                    ((__local\n                      int64_t *) red_arr_mem_33276)[(sext_i32_i64(local_tid_33272) +\n                                                     (int64_t) 1) *\n                                                    segment_sizze_nonzzero_33269 -\n                                                    (int64_t) 1];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef seghist_group_sizze_30738\n}\n__kernel void clusterPointszisegred_small_34498(__global int *global_failure,\n                                                uint red_arr_mem_34506_backing_off",
            "set_0,\n                                                int64_t defunc_2_reduce_res_29639,\n                                                int64_t num_groups_31084,\n                                                int32_t num_subhistos_34419,\n                                                int64_t segment_sizze_nonzzero_34499,\n                                                __global\n                                                unsigned char *mem_32112,\n                                                __global\n                                                unsigned char *defunc_1_map_res_subhistos_mem_34420)\n{\n    #define seghist_group_sizze_31082 (clusterPointsziseghist_group_sizze_31081)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_34506_backing_0 =\n                  &shared_mem[red_arr_mem_34506_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34501;\n    int32_t local_tid_34502;\n    int64_t group_sizze_34505;\n    int32_t wave_sizze_34504;\n    int32_t group_tid_34503;\n    \n    global_tid_34501 = get_global_id(0);\n    local_tid_34502 = get_local_id(0);\n    group_sizze_34505 = get_local_size(0);\n    wave_sizze_34504 = LOCKSTEP_WIDTH;\n    group_tid_34503 = get_group_id(0);\n    \n    int32_t flat_gtid_34498;\n    \n    flat_gtid_34498 = global_tid_34501;\n    \n    __local char *red_arr_mem_34506;\n    \n    red_arr_mem_34506 = (__local char *) red_arr_mem_34506_backing_0;\n    \n    int32_t phys_group_id_34508;\n    \n    phys_group_id_34508 = get_group_id(0);\n    for (int32_t i_34509 = 0; i_34509 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(defunc_2_reduce_res_29639,\n                                          squot64(seghist_group_sizze_31082,\n                                                  segment_sizze_nonzzero_34499))) -\n                   phys_group_id_34508, sext_i64_i32(num_groups_31084));\n         i_34509++) {\n        int32_t virt_group_id_34",
            "510 = phys_group_id_34508 + i_34509 *\n                sext_i64_i32(num_groups_31084);\n        int64_t bucket_id_34496 = squot64(sext_i32_i64(local_tid_34502),\n                                          segment_sizze_nonzzero_34499) +\n                sext_i32_i64(virt_group_id_34510) *\n                squot64(seghist_group_sizze_31082,\n                        segment_sizze_nonzzero_34499);\n        int64_t subhistogram_id_34497 = srem64(sext_i32_i64(local_tid_34502),\n                                               num_subhistos_34419);\n        \n        // apply map function if in bounds\n        {\n            if (slt64((int64_t) 0, num_subhistos_34419) &&\n                (slt64(bucket_id_34496, defunc_2_reduce_res_29639) &&\n                 slt64(sext_i32_i64(local_tid_34502), num_subhistos_34419 *\n                       squot64(seghist_group_sizze_31082,\n                               segment_sizze_nonzzero_34499)))) {\n                // save results to be reduced\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_34506)[sext_i32_i64(local_tid_34502)] =\n                        ((__global\n                          int64_t *) defunc_1_map_res_subhistos_mem_34420)[subhistogram_id_34497 *\n                                                                           defunc_2_reduce_res_29639 +\n                                                                           bucket_id_34496];\n                }\n            } else {\n                ((__local\n                  int64_t *) red_arr_mem_34506)[sext_i32_i64(local_tid_34502)] =\n                    (int64_t) 0;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64((int64_t) 0, num_subhistos_34419)) {\n            // perform segmented scan to imitate reduction\n            {\n                int64_t x_31088;\n                int64_t x_31089;\n                int64_t x_34511;\n                int64_t x_34512;\n                bool ltid_in_bounds_34514;\n                \n ",
            "               ltid_in_bounds_34514 = slt64(sext_i32_i64(local_tid_34502),\n                                             num_subhistos_34419 *\n                                             squot64(seghist_group_sizze_31082,\n                                                     segment_sizze_nonzzero_34499));\n                \n                int32_t skip_threads_34515;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_34514) {\n                        x_31089 = ((volatile __local\n                                    int64_t *) red_arr_mem_34506)[sext_i32_i64(local_tid_34502)];\n                        if ((local_tid_34502 - squot32(local_tid_34502, 32) *\n                             32) == 0) {\n                            x_31088 = x_31089;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_34515 = 1;\n                    while (slt32(skip_threads_34515, 32)) {\n                        if (sle32(skip_threads_34515, local_tid_34502 -\n                                  squot32(local_tid_34502, 32) * 32) &&\n                            ltid_in_bounds_34514) {\n                            // read operands\n                            {\n                                x_31088 = ((volatile __local\n                                            int64_t *) red_arr_mem_34506)[sext_i32_i64(local_tid_34502) -\n                                                                          sext_i32_i64(skip_threads_34515)];\n                            }\n                            // perform operation\n                            {\n                                bool inactive_34516 =\n                                     slt64(srem64(sext_i32_i64(local_tid_34502),\n                                                  num_subhistos_34419),\n                                           sext_i32_i64(local_tid_345",
            "02) -\n                                           sext_i32_i64(local_tid_34502 -\n                                           skip_threads_34515));\n                                \n                                if (inactive_34516) {\n                                    x_31088 = x_31089;\n                                }\n                                if (!inactive_34516) {\n                                    int64_t defunc_1_f_res_31090 =\n                                            smax64(x_31088, x_31089);\n                                    \n                                    x_31088 = defunc_1_f_res_31090;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_34504, skip_threads_34515)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (sle32(skip_threads_34515, local_tid_34502 -\n                                  squot32(local_tid_34502, 32) * 32) &&\n                            ltid_in_bounds_34514) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  int64_t *) red_arr_mem_34506)[sext_i32_i64(local_tid_34502)] =\n                                    x_31088;\n                                x_31089 = x_31088;\n                            }\n                        }\n                        if (sle32(wave_sizze_34504, skip_threads_34515)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_34515 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_34502 - squot32(local_tid_34502, 32) * 32) ==\n                        31 && ltid_in_bounds_34514) {\n                        ((volatile __loc",
            "al\n                          int64_t *) red_arr_mem_34506)[sext_i32_i64(squot32(local_tid_34502,\n                                                                             32))] =\n                            x_31088;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_34517;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_34502, 32) == 0 &&\n                            ltid_in_bounds_34514) {\n                            x_34512 = ((volatile __local\n                                        int64_t *) red_arr_mem_34506)[sext_i32_i64(local_tid_34502)];\n                            if ((local_tid_34502 - squot32(local_tid_34502,\n                                                           32) * 32) == 0) {\n                                x_34511 = x_34512;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_34517 = 1;\n                        while (slt32(skip_threads_34517, 32)) {\n                            if (sle32(skip_threads_34517, local_tid_34502 -\n                                      squot32(local_tid_34502, 32) * 32) &&\n                                (squot32(local_tid_34502, 32) == 0 &&\n                                 ltid_in_bounds_34514)) {\n                                // read operands\n                                {\n                                    x_34511 = ((volatile __local\n                                                int64_t *) red_arr_mem_34506)[sext_i32_i64(local_tid_34502) -\n                                                                              sext_i32_i64(skip_threads_34517)];\n                         ",
            "       }\n                                // perform operation\n                                {\n                                    bool inactive_34518 =\n                                         slt64(srem64(sext_i32_i64(local_tid_34502 *\n                                                      32 + 32 - 1),\n                                                      num_subhistos_34419),\n                                               sext_i32_i64(local_tid_34502 *\n                                               32 + 32 - 1) -\n                                               sext_i32_i64((local_tid_34502 -\n                                                             skip_threads_34517) *\n                                               32 + 32 - 1));\n                                    \n                                    if (inactive_34518) {\n                                        x_34511 = x_34512;\n                                    }\n                                    if (!inactive_34518) {\n                                        int64_t defunc_1_f_res_34513 =\n                                                smax64(x_34511, x_34512);\n                                        \n                                        x_34511 = defunc_1_f_res_34513;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_34504, skip_threads_34517)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (sle32(skip_threads_34517, local_tid_34502 -\n                                      squot32(local_tid_34502, 32) * 32) &&\n                                (squot32(local_tid_34502, 32) == 0 &&\n                                 ltid_in_bounds_34514)) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      int64_t *) red_a",
            "rr_mem_34506)[sext_i32_i64(local_tid_34502)] =\n                                        x_34511;\n                                    x_34512 = x_34511;\n                                }\n                            }\n                            if (sle32(wave_sizze_34504, skip_threads_34517)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_34517 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // carry-in for every block except the first\n                {\n                    if (!(squot32(local_tid_34502, 32) == 0 ||\n                          !ltid_in_bounds_34514)) {\n                        // read operands\n                        {\n                            x_31089 = x_31088;\n                            x_31088 = ((__local\n                                        int64_t *) red_arr_mem_34506)[sext_i32_i64(squot32(local_tid_34502,\n                                                                                           32)) -\n                                                                      (int64_t) 1];\n                        }\n                        // perform operation\n                        {\n                            bool inactive_34519 =\n                                 slt64(srem64(sext_i32_i64(local_tid_34502),\n                                              num_subhistos_34419),\n                                       sext_i32_i64(local_tid_34502) -\n                                       sext_i32_i64(squot32(local_tid_34502,\n                                                            32) * 32 - 1));\n                            \n                            if (inactive_34519) {\n                                x_31088 = x_31089;\n                            }\n                            if (!inactive_34519) {\n                                int64_t defunc_1_f_res_31090 = smax64(x_3108",
            "8,\n                                                                      x_31089);\n                                \n                                x_31088 = defunc_1_f_res_31090;\n                            }\n                        }\n                        // write final result\n                        {\n                            ((__local\n                              int64_t *) red_arr_mem_34506)[sext_i32_i64(local_tid_34502)] =\n                                x_31088;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n                    if (squot32(local_tid_34502, 32) == 0) {\n                        ((__local\n                          int64_t *) red_arr_mem_34506)[sext_i32_i64(local_tid_34502)] =\n                            x_31089;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_34510) *\n                      squot64(seghist_group_sizze_31082,\n                              segment_sizze_nonzzero_34499) +\n                      sext_i32_i64(local_tid_34502),\n                      defunc_2_reduce_res_29639) &&\n                slt64(sext_i32_i64(local_tid_34502),\n                      squot64(seghist_group_sizze_31082,\n                              segment_sizze_nonzzero_34499))) {\n                ((__global\n                  int64_t *) mem_32112)[sext_i32_i64(virt_group_id_34510) *\n                                        squot64(seghist_group_sizze_31082,\n                                                segment_sizze_nonzzero_34499) +\n                                        sext_i32_i64(local_tid_34502)] =\n                    ((__local\n                      int64_t *) red_arr_mem_34506)[(sext_i32_i64(local_tid_34502) +\n          ",
            "                                           (int64_t) 1) *\n                                                    segment_sizze_nonzzero_34499 -\n                                                    (int64_t) 1];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef seghist_group_sizze_31082\n}\n__kernel void clusterPointszisegred_small_36095(__global int *global_failure,\n                                                uint red_arr_mem_36103_backing_offset_0,\n                                                int64_t defunc_2_reduce_res_30100,\n                                                int64_t num_groups_31475,\n                                                int32_t num_subhistos_36016,\n                                                int64_t segment_sizze_nonzzero_36096,\n                                                __global\n                                                unsigned char *mem_32307,\n                                                __global\n                                                unsigned char *defunc_1_map_res_subhistos_mem_36017)\n{\n    #define seghist_group_sizze_31473 (clusterPointsziseghist_group_sizze_31472)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_36103_backing_0 =\n                  &shared_mem[red_arr_mem_36103_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36098;\n    int32_t local_tid_36099;\n    int64_t group_sizze_36102;\n    int32_t wave_sizze_36101;\n    int32_t group_tid_36100;\n    \n    global_tid_36098 = get_global_id(0);\n    local_tid_36099 = get_local_id(0);\n    group_sizze_36102 = get_local_size(0);\n    wave_sizze_36101 = LOCKSTEP_WIDTH;\n    group_tid_36100 = get_group_id(0);\n    \n    int32_t flat_gtid_36095;\n    \n    flat_gtid_36095 = global_tid_36098;\n    \n    __local char *red_arr_mem_36",
            "103;\n    \n    red_arr_mem_36103 = (__local char *) red_arr_mem_36103_backing_0;\n    \n    int32_t phys_group_id_36105;\n    \n    phys_group_id_36105 = get_group_id(0);\n    for (int32_t i_36106 = 0; i_36106 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(defunc_2_reduce_res_30100,\n                                          squot64(seghist_group_sizze_31473,\n                                                  segment_sizze_nonzzero_36096))) -\n                   phys_group_id_36105, sext_i64_i32(num_groups_31475));\n         i_36106++) {\n        int32_t virt_group_id_36107 = phys_group_id_36105 + i_36106 *\n                sext_i64_i32(num_groups_31475);\n        int64_t bucket_id_36093 = squot64(sext_i32_i64(local_tid_36099),\n                                          segment_sizze_nonzzero_36096) +\n                sext_i32_i64(virt_group_id_36107) *\n                squot64(seghist_group_sizze_31473,\n                        segment_sizze_nonzzero_36096);\n        int64_t subhistogram_id_36094 = srem64(sext_i32_i64(local_tid_36099),\n                                               num_subhistos_36016);\n        \n        // apply map function if in bounds\n        {\n            if (slt64((int64_t) 0, num_subhistos_36016) &&\n                (slt64(bucket_id_36093, defunc_2_reduce_res_30100) &&\n                 slt64(sext_i32_i64(local_tid_36099), num_subhistos_36016 *\n                       squot64(seghist_group_sizze_31473,\n                               segment_sizze_nonzzero_36096)))) {\n                // save results to be reduced\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099)] =\n                        ((__global\n                          int64_t *) defunc_1_map_res_subhistos_mem_36017)[subhistogram_id_36094 *\n                                                                           defunc_2_reduce_res_30100 +\n                                                                           bucket_id_36093];",
            "\n                }\n            } else {\n                ((__local\n                  int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099)] =\n                    (int64_t) 0;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64((int64_t) 0, num_subhistos_36016)) {\n            // perform segmented scan to imitate reduction\n            {\n                int64_t x_31479;\n                int64_t x_31480;\n                int64_t x_36108;\n                int64_t x_36109;\n                bool ltid_in_bounds_36111;\n                \n                ltid_in_bounds_36111 = slt64(sext_i32_i64(local_tid_36099),\n                                             num_subhistos_36016 *\n                                             squot64(seghist_group_sizze_31473,\n                                                     segment_sizze_nonzzero_36096));\n                \n                int32_t skip_threads_36112;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_36111) {\n                        x_31480 = ((volatile __local\n                                    int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099)];\n                        if ((local_tid_36099 - squot32(local_tid_36099, 32) *\n                             32) == 0) {\n                            x_31479 = x_31480;\n                        }\n                    }\n                }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_36112 = 1;\n                    while (slt32(skip_threads_36112, 32)) {\n                        if (sle32(skip_threads_36112, local_tid_36099 -\n                                  squot32(local_tid_36099, 32) * 32) &&\n                            ltid_in_bounds_36111) {\n                            // read operands\n                            {\n                                x_31479 = ((volatile __local\n                                     ",
            "       int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099) -\n                                                                          sext_i32_i64(skip_threads_36112)];\n                            }\n                            // perform operation\n                            {\n                                bool inactive_36113 =\n                                     slt64(srem64(sext_i32_i64(local_tid_36099),\n                                                  num_subhistos_36016),\n                                           sext_i32_i64(local_tid_36099) -\n                                           sext_i32_i64(local_tid_36099 -\n                                           skip_threads_36112));\n                                \n                                if (inactive_36113) {\n                                    x_31479 = x_31480;\n                                }\n                                if (!inactive_36113) {\n                                    int64_t defunc_1_f_res_31481 =\n                                            smax64(x_31479, x_31480);\n                                    \n                                    x_31479 = defunc_1_f_res_31481;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_36101, skip_threads_36112)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        if (sle32(skip_threads_36112, local_tid_36099 -\n                                  squot32(local_tid_36099, 32) * 32) &&\n                            ltid_in_bounds_36111) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099)] =\n                                    x_31479;\n                                x_31480 = x_31479;\n                            }\n                        }\n",
            "                        if (sle32(wave_sizze_36101, skip_threads_36112)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_36112 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_36099 - squot32(local_tid_36099, 32) * 32) ==\n                        31 && ltid_in_bounds_36111) {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_36103)[sext_i32_i64(squot32(local_tid_36099,\n                                                                             32))] =\n                            x_31479;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_36114;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_36099, 32) == 0 &&\n                            ltid_in_bounds_36111) {\n                            x_36109 = ((volatile __local\n                                        int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099)];\n                            if ((local_tid_36099 - squot32(local_tid_36099,\n                                                           32) * 32) == 0) {\n                                x_36108 = x_36109;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_36114 = 1;\n                        while (slt32(skip_threads_36114, 32)) {\n                            if (sle32(skip_threads_36114, local_tid_36099 -\n                                     ",
            " squot32(local_tid_36099, 32) * 32) &&\n                                (squot32(local_tid_36099, 32) == 0 &&\n                                 ltid_in_bounds_36111)) {\n                                // read operands\n                                {\n                                    x_36108 = ((volatile __local\n                                                int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099) -\n                                                                              sext_i32_i64(skip_threads_36114)];\n                                }\n                                // perform operation\n                                {\n                                    bool inactive_36115 =\n                                         slt64(srem64(sext_i32_i64(local_tid_36099 *\n                                                      32 + 32 - 1),\n                                                      num_subhistos_36016),\n                                               sext_i32_i64(local_tid_36099 *\n                                               32 + 32 - 1) -\n                                               sext_i32_i64((local_tid_36099 -\n                                                             skip_threads_36114) *\n                                               32 + 32 - 1));\n                                    \n                                    if (inactive_36115) {\n                                        x_36108 = x_36109;\n                                    }\n                                    if (!inactive_36115) {\n                                        int64_t defunc_1_f_res_36110 =\n                                                smax64(x_36108, x_36109);\n                                        \n                                        x_36108 = defunc_1_f_res_36110;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_36101, skip_threads_36114)) {\n",
            "                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (sle32(skip_threads_36114, local_tid_36099 -\n                                      squot32(local_tid_36099, 32) * 32) &&\n                                (squot32(local_tid_36099, 32) == 0 &&\n                                 ltid_in_bounds_36111)) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099)] =\n                                        x_36108;\n                                    x_36109 = x_36108;\n                                }\n                            }\n                            if (sle32(wave_sizze_36101, skip_threads_36114)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_36114 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // carry-in for every block except the first\n                {\n                    if (!(squot32(local_tid_36099, 32) == 0 ||\n                          !ltid_in_bounds_36111)) {\n                        // read operands\n                        {\n                            x_31480 = x_31479;\n                            x_31479 = ((__local\n                                        int64_t *) red_arr_mem_36103)[sext_i32_i64(squot32(local_tid_36099,\n                                                                                           32)) -\n                                                                      (int64_t) 1];\n                        }\n                        // perform operation\n                        {\n                            bool inactive_36116 =\n                                 slt64(srem64(sext_i32_i64(local_tid_36099),\n                ",
            "                              num_subhistos_36016),\n                                       sext_i32_i64(local_tid_36099) -\n                                       sext_i32_i64(squot32(local_tid_36099,\n                                                            32) * 32 - 1));\n                            \n                            if (inactive_36116) {\n                                x_31479 = x_31480;\n                            }\n                            if (!inactive_36116) {\n                                int64_t defunc_1_f_res_31481 = smax64(x_31479,\n                                                                      x_31480);\n                                \n                                x_31479 = defunc_1_f_res_31481;\n                            }\n                        }\n                        // write final result\n                        {\n                            ((__local\n                              int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099)] =\n                                x_31479;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n                    if (squot32(local_tid_36099, 32) == 0) {\n                        ((__local\n                          int64_t *) red_arr_mem_36103)[sext_i32_i64(local_tid_36099)] =\n                            x_31480;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_36107) *\n                      squot64(seghist_group_sizze_31473,\n                              segment_sizze_nonzzero_36096) +\n                      sext_i32_i64(local_tid_36099),\n                      defunc_2_reduce_res_30100) &&\n                slt64(sext_i32_i64(local_tid_36099),\n              ",
            "        squot64(seghist_group_sizze_31473,\n                              segment_sizze_nonzzero_36096))) {\n                ((__global\n                  int64_t *) mem_32307)[sext_i32_i64(virt_group_id_36107) *\n                                        squot64(seghist_group_sizze_31473,\n                                                segment_sizze_nonzzero_36096) +\n                                        sext_i32_i64(local_tid_36099)] =\n                    ((__local\n                      int64_t *) red_arr_mem_36103)[(sext_i32_i64(local_tid_36099) +\n                                                     (int64_t) 1) *\n                                                    segment_sizze_nonzzero_36096 -\n                                                    (int64_t) 1];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef seghist_group_sizze_31473\n}\n__kernel void clusterPointszisegred_small_36712(__global int *global_failure,\n                                                uint red_arr_mem_36720_backing_offset_0,\n                                                int64_t defunc_2_reduce_res_30210,\n                                                int64_t num_groups_31606,\n                                                int32_t num_subhistos_36633,\n                                                int64_t segment_sizze_nonzzero_36713,\n                                                __global\n                                                unsigned char *mem_32343,\n                                                __global\n                                                unsigned char *defunc_1_map_res_subhistos_mem_36634)\n{\n    #define seghist_group_sizze_31604 (clusterPointsziseghist_group_sizze_31603)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *red_arr_mem_36720_backing_0 =\n                  &shared_mem[r",
            "ed_arr_mem_36720_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36715;\n    int32_t local_tid_36716;\n    int64_t group_sizze_36719;\n    int32_t wave_sizze_36718;\n    int32_t group_tid_36717;\n    \n    global_tid_36715 = get_global_id(0);\n    local_tid_36716 = get_local_id(0);\n    group_sizze_36719 = get_local_size(0);\n    wave_sizze_36718 = LOCKSTEP_WIDTH;\n    group_tid_36717 = get_group_id(0);\n    \n    int32_t flat_gtid_36712;\n    \n    flat_gtid_36712 = global_tid_36715;\n    \n    __local char *red_arr_mem_36720;\n    \n    red_arr_mem_36720 = (__local char *) red_arr_mem_36720_backing_0;\n    \n    int32_t phys_group_id_36722;\n    \n    phys_group_id_36722 = get_group_id(0);\n    for (int32_t i_36723 = 0; i_36723 <\n         sdiv_up32(sext_i64_i32(sdiv_up64(defunc_2_reduce_res_30210,\n                                          squot64(seghist_group_sizze_31604,\n                                                  segment_sizze_nonzzero_36713))) -\n                   phys_group_id_36722, sext_i64_i32(num_groups_31606));\n         i_36723++) {\n        int32_t virt_group_id_36724 = phys_group_id_36722 + i_36723 *\n                sext_i64_i32(num_groups_31606);\n        int64_t bucket_id_36710 = squot64(sext_i32_i64(local_tid_36716),\n                                          segment_sizze_nonzzero_36713) +\n                sext_i32_i64(virt_group_id_36724) *\n                squot64(seghist_group_sizze_31604,\n                        segment_sizze_nonzzero_36713);\n        int64_t subhistogram_id_36711 = srem64(sext_i32_i64(local_tid_36716),\n                                               num_subhistos_36633);\n        \n        // apply map function if in bounds\n        {\n            if (slt64((int64_t) 0, num_subhistos_36633) &&\n                (slt64(bucket_id_36710, defunc_2_reduce_res_30210) &&\n                 slt64(sext_i32_i64(local_tid_36716), num_subhistos_36633 *\n                       squot64(seghist_group_sizze_31604,\n           ",
            "                    segment_sizze_nonzzero_36713)))) {\n                // save results to be reduced\n                {\n                    ((__local\n                      int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716)] =\n                        ((__global\n                          int64_t *) defunc_1_map_res_subhistos_mem_36634)[subhistogram_id_36711 *\n                                                                           defunc_2_reduce_res_30210 +\n                                                                           bucket_id_36710];\n                }\n            } else {\n                ((__local\n                  int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716)] =\n                    (int64_t) 0;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (slt64((int64_t) 0, num_subhistos_36633)) {\n            // perform segmented scan to imitate reduction\n            {\n                int64_t x_31610;\n                int64_t x_31611;\n                int64_t x_36725;\n                int64_t x_36726;\n                bool ltid_in_bounds_36728;\n                \n                ltid_in_bounds_36728 = slt64(sext_i32_i64(local_tid_36716),\n                                             num_subhistos_36633 *\n                                             squot64(seghist_group_sizze_31604,\n                                                     segment_sizze_nonzzero_36713));\n                \n                int32_t skip_threads_36729;\n                \n                // read input for in-block scan\n                {\n                    if (ltid_in_bounds_36728) {\n                        x_31611 = ((volatile __local\n                                    int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716)];\n                        if ((local_tid_36716 - squot32(local_tid_36716, 32) *\n                             32) == 0) {\n                            x_31610 = x_31611;\n                        }\n                    }\n          ",
            "      }\n                // in-block scan (hopefully no barriers needed)\n                {\n                    skip_threads_36729 = 1;\n                    while (slt32(skip_threads_36729, 32)) {\n                        if (sle32(skip_threads_36729, local_tid_36716 -\n                                  squot32(local_tid_36716, 32) * 32) &&\n                            ltid_in_bounds_36728) {\n                            // read operands\n                            {\n                                x_31610 = ((volatile __local\n                                            int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716) -\n                                                                          sext_i32_i64(skip_threads_36729)];\n                            }\n                            // perform operation\n                            {\n                                bool inactive_36730 =\n                                     slt64(srem64(sext_i32_i64(local_tid_36716),\n                                                  num_subhistos_36633),\n                                           sext_i32_i64(local_tid_36716) -\n                                           sext_i32_i64(local_tid_36716 -\n                                           skip_threads_36729));\n                                \n                                if (inactive_36730) {\n                                    x_31610 = x_31611;\n                                }\n                                if (!inactive_36730) {\n                                    int64_t defunc_1_f_res_31612 =\n                                            smax64(x_31610, x_31611);\n                                    \n                                    x_31610 = defunc_1_f_res_31612;\n                                }\n                            }\n                        }\n                        if (sle32(wave_sizze_36718, skip_threads_36729)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n       ",
            "                 if (sle32(skip_threads_36729, local_tid_36716 -\n                                  squot32(local_tid_36716, 32) * 32) &&\n                            ltid_in_bounds_36728) {\n                            // write result\n                            {\n                                ((volatile __local\n                                  int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716)] =\n                                    x_31610;\n                                x_31611 = x_31610;\n                            }\n                        }\n                        if (sle32(wave_sizze_36718, skip_threads_36729)) {\n                            barrier(CLK_LOCAL_MEM_FENCE);\n                        }\n                        skip_threads_36729 *= 2;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // last thread of block 'i' writes its result to offset 'i'\n                {\n                    if ((local_tid_36716 - squot32(local_tid_36716, 32) * 32) ==\n                        31 && ltid_in_bounds_36728) {\n                        ((volatile __local\n                          int64_t *) red_arr_mem_36720)[sext_i32_i64(squot32(local_tid_36716,\n                                                                             32))] =\n                            x_31610;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n                {\n                    int32_t skip_threads_36731;\n                    \n                    // read input for in-block scan\n                    {\n                        if (squot32(local_tid_36716, 32) == 0 &&\n                            ltid_in_bounds_36728) {\n                            x_36726 = ((volatile __local\n                                        int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716)];\n                            if ((l",
            "ocal_tid_36716 - squot32(local_tid_36716,\n                                                           32) * 32) == 0) {\n                                x_36725 = x_36726;\n                            }\n                        }\n                    }\n                    // in-block scan (hopefully no barriers needed)\n                    {\n                        skip_threads_36731 = 1;\n                        while (slt32(skip_threads_36731, 32)) {\n                            if (sle32(skip_threads_36731, local_tid_36716 -\n                                      squot32(local_tid_36716, 32) * 32) &&\n                                (squot32(local_tid_36716, 32) == 0 &&\n                                 ltid_in_bounds_36728)) {\n                                // read operands\n                                {\n                                    x_36725 = ((volatile __local\n                                                int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716) -\n                                                                              sext_i32_i64(skip_threads_36731)];\n                                }\n                                // perform operation\n                                {\n                                    bool inactive_36732 =\n                                         slt64(srem64(sext_i32_i64(local_tid_36716 *\n                                                      32 + 32 - 1),\n                                                      num_subhistos_36633),\n                                               sext_i32_i64(local_tid_36716 *\n                                               32 + 32 - 1) -\n                                               sext_i32_i64((local_tid_36716 -\n                                                             skip_threads_36731) *\n                                               32 + 32 - 1));\n                                    \n                                    if (inactive_36732) {\n                                ",
            "        x_36725 = x_36726;\n                                    }\n                                    if (!inactive_36732) {\n                                        int64_t defunc_1_f_res_36727 =\n                                                smax64(x_36725, x_36726);\n                                        \n                                        x_36725 = defunc_1_f_res_36727;\n                                    }\n                                }\n                            }\n                            if (sle32(wave_sizze_36718, skip_threads_36731)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            if (sle32(skip_threads_36731, local_tid_36716 -\n                                      squot32(local_tid_36716, 32) * 32) &&\n                                (squot32(local_tid_36716, 32) == 0 &&\n                                 ltid_in_bounds_36728)) {\n                                // write result\n                                {\n                                    ((volatile __local\n                                      int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716)] =\n                                        x_36725;\n                                    x_36726 = x_36725;\n                                }\n                            }\n                            if (sle32(wave_sizze_36718, skip_threads_36731)) {\n                                barrier(CLK_LOCAL_MEM_FENCE);\n                            }\n                            skip_threads_36731 *= 2;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // carry-in for every block except the first\n                {\n                    if (!(squot32(local_tid_36716, 32) == 0 ||\n                          !ltid_in_bounds_36728)) {\n                        // read operands\n                        {\n                            x_31611 = x_31610;\n               ",
            "             x_31610 = ((__local\n                                        int64_t *) red_arr_mem_36720)[sext_i32_i64(squot32(local_tid_36716,\n                                                                                           32)) -\n                                                                      (int64_t) 1];\n                        }\n                        // perform operation\n                        {\n                            bool inactive_36733 =\n                                 slt64(srem64(sext_i32_i64(local_tid_36716),\n                                              num_subhistos_36633),\n                                       sext_i32_i64(local_tid_36716) -\n                                       sext_i32_i64(squot32(local_tid_36716,\n                                                            32) * 32 - 1));\n                            \n                            if (inactive_36733) {\n                                x_31610 = x_31611;\n                            }\n                            if (!inactive_36733) {\n                                int64_t defunc_1_f_res_31612 = smax64(x_31610,\n                                                                      x_31611);\n                                \n                                x_31610 = defunc_1_f_res_31612;\n                            }\n                        }\n                        // write final result\n                        {\n                            ((__local\n                              int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716)] =\n                                x_31610;\n                        }\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n                // restore correct values for first block\n                {\n                    if (squot32(local_tid_36716, 32) == 0) {\n                        ((__local\n                          int64_t *) red_arr_mem_36720)[sext_i32_i64(local_tid_36716)] =\n                      ",
            "      x_31611;\n                    }\n                }\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // save final values of segments\n        {\n            if (slt64(sext_i32_i64(virt_group_id_36724) *\n                      squot64(seghist_group_sizze_31604,\n                              segment_sizze_nonzzero_36713) +\n                      sext_i32_i64(local_tid_36716),\n                      defunc_2_reduce_res_30210) &&\n                slt64(sext_i32_i64(local_tid_36716),\n                      squot64(seghist_group_sizze_31604,\n                              segment_sizze_nonzzero_36713))) {\n                ((__global\n                  int64_t *) mem_32343)[sext_i32_i64(virt_group_id_36724) *\n                                        squot64(seghist_group_sizze_31604,\n                                                segment_sizze_nonzzero_36713) +\n                                        sext_i32_i64(local_tid_36716)] =\n                    ((__local\n                      int64_t *) red_arr_mem_36720)[(sext_i32_i64(local_tid_36716) +\n                                                     (int64_t) 1) *\n                                                    segment_sizze_nonzzero_36713 -\n                                                    (int64_t) 1];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_GLOBAL_MEM_FENCE | CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef seghist_group_sizze_31604\n}\n__kernel void clusterPointszisegscan_30352(__global int *global_failure,\n                                           uint local_mem_32548_backing_offset_0,\n                                           int64_t n_28846,\n                                           int32_t defunc_2_radix_sort_step_arg_28898,\n                                           int32_t defunc_0_get_bit_arg_28899,\n                                           __global\n                                      ",
            "     unsigned char *mem_param_31845,\n                                           __global unsigned char *mem_31857,\n                                           __global unsigned char *mem_31859,\n                                           __global unsigned char *mem_31861,\n                                           __global unsigned char *mem_31863,\n                                           __global unsigned char *mem_31865,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_32504,\n                                           __global\n                                           unsigned char *status_flags_mem_32506,\n                                           __global\n                                           unsigned char *aggregates_mem_32508,\n                                           __global\n                                           unsigned char *incprefixes_mem_32510,\n                                           __global\n                                           unsigned char *aggregates_mem_32512,\n                                           __global\n                                           unsigned char *incprefixes_mem_32514,\n                                           __global\n                                           unsigned char *aggregates_mem_32516,\n                                           __global\n                                           unsigned char *incprefixes_mem_32518,\n                                           __global\n                                           unsigned char *aggregates_mem_32520,\n                                           __global\n                                           unsigned char *incprefixes_mem_32522)\n{\n    #define segscan_group_sizze_30347 (clusterPointszisegscan_group_sizze_30346)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_32548_backing_0 =\n       ",
            "           &shared_mem[local_mem_32548_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32533;\n    int32_t local_tid_32534;\n    int64_t group_sizze_32537;\n    int32_t wave_sizze_32536;\n    int32_t group_tid_32535;\n    \n    global_tid_32533 = get_global_id(0);\n    local_tid_32534 = get_local_id(0);\n    group_sizze_32537 = get_local_size(0);\n    wave_sizze_32536 = LOCKSTEP_WIDTH;\n    group_tid_32535 = get_group_id(0);\n    \n    int32_t phys_tid_30352;\n    \n    phys_tid_30352 = global_tid_32533;\n    \n    int64_t byte_offsets_32538;\n    \n    byte_offsets_32538 = (int64_t) 0;\n    \n    int64_t byte_offsets_32539;\n    \n    byte_offsets_32539 = segscan_group_sizze_30347 * (int64_t) 8;\n    \n    int64_t byte_offsets_32540;\n    \n    byte_offsets_32540 = sdiv_up64(segscan_group_sizze_30347 * (int64_t) 8,\n                                   (int64_t) 8) * (int64_t) 8 +\n        segscan_group_sizze_30347 * (int64_t) 8;\n    \n    int64_t byte_offsets_32541;\n    \n    byte_offsets_32541 = sdiv_up64(sdiv_up64(segscan_group_sizze_30347 *\n                                             (int64_t) 8, (int64_t) 8) *\n                                   (int64_t) 8 + segscan_group_sizze_30347 *\n                                   (int64_t) 8, (int64_t) 8) * (int64_t) 8 +\n        segscan_group_sizze_30347 * (int64_t) 8;\n    \n    int64_t byte_offsets_32542;\n    \n    byte_offsets_32542 =\n        sdiv_up64(sdiv_up64(sdiv_up64(segscan_group_sizze_30347 * (int64_t) 8,\n                                      (int64_t) 8) * (int64_t) 8 +\n                            segscan_group_sizze_30347 * (int64_t) 8,\n                            (int64_t) 8) * (int64_t) 8 +\n                  segscan_group_sizze_30347 * (int64_t) 8, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_30347 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_32543;\n    \n    warp_byte_offset_32543 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_32544;\n    \n    warp_byte_offset_32544 = (int",
            "64_t) 288;\n    \n    int64_t warp_byte_offset_32545;\n    \n    warp_byte_offset_32545 = (int64_t) 544;\n    \n    int64_t warp_byte_offset_32546;\n    \n    warp_byte_offset_32546 = (int64_t) 800;\n    \n    int64_t warp_byte_offset_32547;\n    \n    warp_byte_offset_32547 = (int64_t) 1056;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_32548;\n    \n    local_mem_32548 = (__local char *) local_mem_32548_backing_0;\n    \n    int64_t trans_arr_len_32549;\n    \n    trans_arr_len_32549 = (int64_t) 9 * segscan_group_sizze_30347;\n    \n    int32_t dynamic_id_32565;\n    \n    if (local_tid_32534 == 0) {\n        dynamic_id_32565 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_32504)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_32548)[(int64_t) 0] = dynamic_id_32565;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_32565 = ((__local int32_t *) local_mem_32548)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_32566;\n    \n    blockOff_32566 = sext_i32_i64(dynamic_id_32565) * (int64_t) 9 *\n        segscan_group_sizze_30347;\n    \n    int64_t private_mem_32567[9];\n    int64_t private_mem_32569[9];\n    int64_t private_mem_32571[9];\n    int64_t private_mem_32573[9];\n    \n    // Load and map\n    {\n        for (int64_t i_32575 = 0; i_32575 < (int64_t) 9; i_32575++) {\n            int64_t gtid_30351 = blockOff_32566 +\n                    sext_i32_i64(local_tid_32534) + i_32575 *\n                    segscan_group_sizze_30347;\n            \n            if (slt64(gtid_30351, n_28846)) {\n                int32_t x_28925 = ((__global\n                                    int32_t *) mem_param_31845)[gtid_30351];\n                int32_t zgzg_res_28926 = ashr32(x_28925,\n                                                defunc_0_get_bit_arg_28899);\n                int32_t za_res_28927 = 1 & zgzg_res_289",
            "26;\n                int32_t x_28928 = mul32(2, za_res_28927);\n                int32_t zgzg_res_28929 = ashr32(x_28925,\n                                                defunc_2_radix_sort_step_arg_28898);\n                int32_t za_res_28930 = 1 & zgzg_res_28929;\n                int32_t defunc_0_f_res_28931 = add32(x_28928, za_res_28930);\n                bool cond_28932 = defunc_0_f_res_28931 == 0;\n                int64_t defunc_0_f_res_28933 = btoi_bool_i64(cond_28932);\n                int64_t defunc_0_f_res_28934;\n                int64_t defunc_0_f_res_28935;\n                int64_t defunc_0_f_res_28936;\n                \n                if (cond_28932) {\n                    defunc_0_f_res_28934 = (int64_t) 0;\n                    defunc_0_f_res_28935 = (int64_t) 0;\n                    defunc_0_f_res_28936 = (int64_t) 0;\n                } else {\n                    bool cond_28937 = defunc_0_f_res_28931 == 1;\n                    int64_t defunc_0_f_res_f_res_28938 =\n                            btoi_bool_i64(cond_28937);\n                    int64_t defunc_0_f_res_f_res_28939;\n                    int64_t defunc_0_f_res_f_res_28940;\n                    \n                    if (cond_28937) {\n                        defunc_0_f_res_f_res_28939 = (int64_t) 0;\n                        defunc_0_f_res_f_res_28940 = (int64_t) 0;\n                    } else {\n                        bool cond_28941 = defunc_0_f_res_28931 == 2;\n                        int64_t defunc_0_f_res_f_res_f_res_28942 =\n                                btoi_bool_i64(cond_28941);\n                        bool cond_neg_28943 = !cond_28941;\n                        int64_t defunc_0_f_res_f_res_f_res_28944 =\n                                btoi_bool_i64(cond_neg_28943);\n                        \n                        defunc_0_f_res_f_res_28939 =\n                            defunc_0_f_res_f_res_f_res_28942;\n                        defunc_0_f_res_f_res_28940 =\n                            defunc_0_f_res_f_res_f_res_28",
            "944;\n                    }\n                    defunc_0_f_res_28934 = defunc_0_f_res_f_res_28938;\n                    defunc_0_f_res_28935 = defunc_0_f_res_f_res_28939;\n                    defunc_0_f_res_28936 = defunc_0_f_res_f_res_28940;\n                }\n                ((__global int32_t *) mem_31865)[gtid_30351] =\n                    defunc_0_f_res_28931;\n                private_mem_32567[i_32575] = defunc_0_f_res_28933;\n                private_mem_32569[i_32575] = defunc_0_f_res_28934;\n                private_mem_32571[i_32575] = defunc_0_f_res_28935;\n                private_mem_32573[i_32575] = defunc_0_f_res_28936;\n            } else {\n                private_mem_32567[i_32575] = (int64_t) 0;\n                private_mem_32569[i_32575] = (int64_t) 0;\n                private_mem_32571[i_32575] = (int64_t) 0;\n                private_mem_32573[i_32575] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32576 = 0; i_32576 < (int64_t) 9; i_32576++) {\n            int64_t sharedIdx_32577 = sext_i32_i64(local_tid_32534) + i_32576 *\n                    segscan_group_sizze_30347;\n            \n            ((__local int64_t *) local_mem_32548)[sharedIdx_32577] =\n                private_mem_32567[i_32576];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_32578 = 0; i_32578 < 9; i_32578++) {\n            int32_t sharedIdx_32579 = local_tid_32534 * 9 + i_32578;\n            \n            private_mem_32567[sext_i32_i64(i_32578)] = ((__local\n                                                         int64_t *) local_mem_32548)[sext_i32_i64(sharedIdx_32579)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32580 = 0; i_32580 < (int64_t) 9; i_32580++) {\n            int64_t sharedIdx_32581 = sext_i32_i64(local_tid_32534) + i_32580 *\n                    segscan_group_sizze_30347;\n            \n            ((__local int64_t *) local_mem_32548)[sharedIdx_",
            "32581] =\n                private_mem_32569[i_32580];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_32582 = 0; i_32582 < 9; i_32582++) {\n            int32_t sharedIdx_32583 = local_tid_32534 * 9 + i_32582;\n            \n            private_mem_32569[sext_i32_i64(i_32582)] = ((__local\n                                                         int64_t *) local_mem_32548)[sext_i32_i64(sharedIdx_32583)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32584 = 0; i_32584 < (int64_t) 9; i_32584++) {\n            int64_t sharedIdx_32585 = sext_i32_i64(local_tid_32534) + i_32584 *\n                    segscan_group_sizze_30347;\n            \n            ((__local int64_t *) local_mem_32548)[sharedIdx_32585] =\n                private_mem_32571[i_32584];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_32586 = 0; i_32586 < 9; i_32586++) {\n            int32_t sharedIdx_32587 = local_tid_32534 * 9 + i_32586;\n            \n            private_mem_32571[sext_i32_i64(i_32586)] = ((__local\n                                                         int64_t *) local_mem_32548)[sext_i32_i64(sharedIdx_32587)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32588 = 0; i_32588 < (int64_t) 9; i_32588++) {\n            int64_t sharedIdx_32589 = sext_i32_i64(local_tid_32534) + i_32588 *\n                    segscan_group_sizze_30347;\n            \n            ((__local int64_t *) local_mem_32548)[sharedIdx_32589] =\n                private_mem_32573[i_32588];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_32590 = 0; i_32590 < 9; i_32590++) {\n            int32_t sharedIdx_32591 = local_tid_32534 * 9 + i_32590;\n            \n            private_mem_32573[sext_i32_i64(i_32590)] = ((__local\n                                                         int64_t *) local_mem_32548)[sext_i32_i64(sharedIdx_32591)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n      ",
            "  for (int64_t i_32592 = 0; i_32592 < (int64_t) 8; i_32592++) {\n            int64_t x_28913;\n            int64_t x_28917;\n            \n            x_28913 = private_mem_32567[i_32592];\n            x_28917 = private_mem_32567[i_32592 + (int64_t) 1];\n            \n            int64_t x_28914;\n            int64_t x_28918;\n            \n            x_28914 = private_mem_32569[i_32592];\n            x_28918 = private_mem_32569[i_32592 + (int64_t) 1];\n            \n            int64_t x_28915;\n            int64_t x_28919;\n            \n            x_28915 = private_mem_32571[i_32592];\n            x_28919 = private_mem_32571[i_32592 + (int64_t) 1];\n            \n            int64_t x_28916;\n            int64_t x_28920;\n            \n            x_28916 = private_mem_32573[i_32592];\n            x_28920 = private_mem_32573[i_32592 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_28921;\n            \n            defunc_1_op_res_28921 = add64(x_28913, x_28917);\n            \n            int64_t defunc_1_op_res_28922 = add64(x_28914, x_28918);\n            int64_t defunc_1_op_res_28923 = add64(x_28915, x_28919);\n            int64_t defunc_1_op_res_28924 = add64(x_28916, x_28920);\n            \n            private_mem_32567[i_32592 + (int64_t) 1] = defunc_1_op_res_28921;\n            private_mem_32569[i_32592 + (int64_t) 1] = defunc_1_op_res_28922;\n            private_mem_32571[i_32592 + (int64_t) 1] = defunc_1_op_res_28923;\n            private_mem_32573[i_32592 + (int64_t) 1] = defunc_1_op_res_28924;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32534)] =\n            private_mem_32567[(int64_t) 8];\n        ((__local int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                      (int64_t) 8) +\n           ",
            "                                   sext_i32_i64(local_tid_32534)] =\n            private_mem_32569[(int64_t) 8];\n        ((__local int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32534)] =\n            private_mem_32571[(int64_t) 8];\n        ((__local int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32534)] =\n            private_mem_32573[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_32605;\n    int64_t acc_32606;\n    int64_t acc_32607;\n    int64_t acc_32608;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_32593;\n        int64_t x_32594;\n        int64_t x_32595;\n        int64_t x_32596;\n        int64_t x_32597;\n        int64_t x_32598;\n        int64_t x_32599;\n        int64_t x_32600;\n        int64_t x_32609;\n        int64_t x_32610;\n        int64_t x_32611;\n        int64_t x_32612;\n        int64_t x_32613;\n        int64_t x_32614;\n        int64_t x_32615;\n        int64_t x_32616;\n        bool ltid_in_bounds_32621;\n        \n        ltid_in_bounds_32621 = slt64(sext_i32_i64(local_tid_32534),\n                                     segscan_group_sizze_30347);\n        \n        int32_t skip_threads_32622;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_32621) {\n                x_32597 = ((volatile __local\n                            int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_32534)];\n                x_32598 = ((volatile __local\n                            int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                     ",
            "                                           (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_32534)];\n                x_32599 = ((volatile __local\n                            int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_32534)];\n                x_32600 = ((volatile __local\n                            int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_32534)];\n                if ((local_tid_32534 - squot32(local_tid_32534, 32) * 32) ==\n                    0) {\n                    x_32593 = x_32597;\n                    x_32594 = x_32598;\n                    x_32595 = x_32599;\n                    x_32596 = x_32600;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_32622 = 1;\n            while (slt32(skip_threads_32622, 32)) {\n                if (sle32(skip_threads_32622, local_tid_32534 -\n                          squot32(local_tid_32534, 32) * 32) &&\n                    ltid_in_bounds_32621) {\n                    // read operands\n                    {\n                        x_32593 = ((volatile __local\n                                    int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_32534) -\n                                                                 sext_i32_i64(skip_threads_32622))];\n                        x_32594 = ((volatile __local\n                                    int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n  ",
            "                                                                      (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_32534) -\n                                                                 sext_i32_i64(skip_threads_32622))];\n                        x_32595 = ((volatile __local\n                                    int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_32534) -\n                                                                 sext_i32_i64(skip_threads_32622))];\n                        x_32596 = ((volatile __local\n                                    int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_32534) -\n                                                                 sext_i32_i64(skip_threads_32622))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_32601 = add64(x_32593, x_32597);\n                        int64_t defunc_1_op_res_32602 = add64(x_32594, x_32598);\n                        int64_t defunc_1_op_res_32603 = add64(x_32595, x_32599);\n                        int64_t defunc_1_op_res_32604 = add64(x_32596, x_32600);\n                        \n                        x_32593 = defunc_1_op_res_32601;\n                        x_32594 = defunc_1_op_res_32602;\n                        x_32595 = defunc_1_op_res_32603;\n                        x_32596 = defunc_1_op_res_32604;\n                    }\n                }\n                if (sle32(wave_sizze_32536, skip_threads_32622)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (",
            "sle32(skip_threads_32622, local_tid_32534 -\n                          squot32(local_tid_32534, 32) * 32) &&\n                    ltid_in_bounds_32621) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_32534)] =\n                            x_32593;\n                        x_32597 = x_32593;\n                        ((volatile __local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_32534)] =\n                            x_32594;\n                        x_32598 = x_32594;\n                        ((volatile __local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_32534)] =\n                            x_32595;\n                        x_32599 = x_32595;\n                        ((volatile __local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_32534)] =\n                            x_32596;\n                        x_32600 = x_32596;\n                    }\n                }\n                if (sle32(wave_sizze_32536, skip_threads_32622)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_32622 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' ",
            "writes its result to offset 'i'\n        {\n            if ((local_tid_32534 - squot32(local_tid_32534, 32) * 32) == 31 &&\n                ltid_in_bounds_32621) {\n                ((volatile __local\n                  int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_32534,\n                                                                   32))] =\n                    x_32593;\n                ((volatile __local\n                  int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_32534,\n                                                                   32))] =\n                    x_32594;\n                ((volatile __local\n                  int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_32534,\n                                                                   32))] =\n                    x_32595;\n                ((volatile __local\n                  int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_32534,\n                                                                   32))] =\n                    x_32596;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_32623;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_32534, 32) == 0 && ltid_in_bounds_32621) {\n                    x",
            "_32613 = ((volatile __local\n                                int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_32534)];\n                    x_32614 = ((volatile __local\n                                int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_32534)];\n                    x_32615 = ((volatile __local\n                                int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_32534)];\n                    x_32616 = ((volatile __local\n                                int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_32534)];\n                    if ((local_tid_32534 - squot32(local_tid_32534, 32) * 32) ==\n                        0) {\n                        x_32609 = x_32613;\n                        x_32610 = x_32614;\n                        x_32611 = x_32615;\n                        x_32612 = x_32616;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_32623 = 1;\n                while (slt32(skip_threads_32623, 32)) {\n                    if (sle32(skip_threads_32623, local_tid_32534 -\n                              squot32(local_tid_32534, 32) * 32) &&\n                        (squot32(local_tid_32534, 32) == 0 &&\n                         ltid_in_bounds_32621)) {\n                   ",
            "     // read operands\n                        {\n                            x_32609 = ((volatile __local\n                                        int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_32534) -\n                                                                     sext_i32_i64(skip_threads_32623))];\n                            x_32610 = ((volatile __local\n                                        int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_32534) -\n                                                                     sext_i32_i64(skip_threads_32623))];\n                            x_32611 = ((volatile __local\n                                        int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_32534) -\n                                                                     sext_i32_i64(skip_threads_32623))];\n                            x_32612 = ((volatile __local\n                                        int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_32534) -\n                                                                     sext_i32_i64(skip_threads_32623))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_326",
            "17 = add64(x_32609,\n                                                                  x_32613);\n                            int64_t defunc_1_op_res_32618 = add64(x_32610,\n                                                                  x_32614);\n                            int64_t defunc_1_op_res_32619 = add64(x_32611,\n                                                                  x_32615);\n                            int64_t defunc_1_op_res_32620 = add64(x_32612,\n                                                                  x_32616);\n                            \n                            x_32609 = defunc_1_op_res_32617;\n                            x_32610 = defunc_1_op_res_32618;\n                            x_32611 = defunc_1_op_res_32619;\n                            x_32612 = defunc_1_op_res_32620;\n                        }\n                    }\n                    if (sle32(wave_sizze_32536, skip_threads_32623)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_32623, local_tid_32534 -\n                              squot32(local_tid_32534, 32) * 32) &&\n                        (squot32(local_tid_32534, 32) == 0 &&\n                         ltid_in_bounds_32621)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_32534)] =\n                                x_32609;\n                            x_32613 = x_32609;\n                            ((volatile __local\n                              int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                                  (int64_t) 8) +\n                                                          sext",
            "_i32_i64(local_tid_32534)] =\n                                x_32610;\n                            x_32614 = x_32610;\n                            ((volatile __local\n                              int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_32534)] =\n                                x_32611;\n                            x_32615 = x_32611;\n                            ((volatile __local\n                              int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_32534)] =\n                                x_32612;\n                            x_32616 = x_32612;\n                        }\n                    }\n                    if (sle32(wave_sizze_32536, skip_threads_32623)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_32623 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_32534, 32) == 0 || !ltid_in_bounds_32621)) {\n                // read operands\n                {\n                    x_32597 = x_32593;\n                    x_32598 = x_32594;\n                    x_32599 = x_32595;\n                    x_32600 = x_32596;\n                    x_32593 = ((__local\n                                int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_32534,\n                                                                                  32)) -\n                           ",
            "                                  (int64_t) 1)];\n                    x_32594 = ((__local\n                                int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_32534,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_32595 = ((__local\n                                int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_32534,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_32596 = ((__local\n                                int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_32534,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_32601 = add64(x_32593, x_32597);\n                    int64_t defunc_1_op_res_32602 = add64(x_32594, x_32598);\n                    int64_t defunc_1_op_res_32603 = add64(x_32595, x_32599);\n                    int64_t defunc_1_op_res_32604 = add64(x_32596, x_32600);\n                    \n                    x_32593 = defunc_1_op_res_32601;\n                    x_32594 = defunc_1_op_res_32602;\n                  ",
            "  x_32595 = defunc_1_op_res_32603;\n                    x_32596 = defunc_1_op_res_32604;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32534)] =\n                        x_32593;\n                    ((__local\n                      int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32534)] =\n                        x_32594;\n                    ((__local\n                      int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32534)] =\n                        x_32595;\n                    ((__local\n                      int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32534)] =\n                        x_32596;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_32534, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32534)] =\n                    x_32597;\n                ((__local\n                  int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                      (int64_t) 8) +\n           ",
            "                                   sext_i32_i64(local_tid_32534)] =\n                    x_32598;\n                ((__local\n                  int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32534)] =\n                    x_32599;\n                ((__local\n                  int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32534)] =\n                    x_32600;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_32534 == 0) {\n            acc_32605 = ((__local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30347 -\n                                                       (int64_t) 1)];\n            acc_32606 = ((__local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30347 -\n                                                       (int64_t) 1)];\n            acc_32607 = ((__local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30347 -\n                                                       (int64_t) 1)];\n            acc_32608 = ((__local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                           ",
            "   (int64_t) 8) +\n                                                      (segscan_group_sizze_30347 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_32605 = ((__local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32538,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_32534) -\n                                                       (int64_t) 1)];\n            acc_32606 = ((__local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32539,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_32534) -\n                                                       (int64_t) 1)];\n            acc_32607 = ((__local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32540,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_32534) -\n                                                       (int64_t) 1)];\n            acc_32608 = ((__local\n                          int64_t *) local_mem_32548)[squot64(byte_offsets_32541,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_32534) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_32624;\n    \n    prefix_32624 = (int64_t) 0;\n    \n    int64_t prefix_32625;\n    \n    prefix_32625 = (int64_t) 0;\n    \n    int64_t prefix_32626;\n    \n    prefix_32626 = (int64_t) 0;\n    \n    int64_t prefix_32627;\n    \n    prefix_32627 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_32565 == (int64_t) 0 && local_tid",
            "_32534 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_32510)[dynamic_id_32565] = acc_32605;\n            ((volatile __global\n              int64_t *) incprefixes_mem_32514)[dynamic_id_32565] = acc_32606;\n            ((volatile __global\n              int64_t *) incprefixes_mem_32518)[dynamic_id_32565] = acc_32607;\n            ((volatile __global\n              int64_t *) incprefixes_mem_32522)[dynamic_id_32565] = acc_32608;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_32506)[dynamic_id_32565] = (int8_t) 2;\n            acc_32605 = (int64_t) 0;\n            acc_32606 = (int64_t) 0;\n            acc_32607 = (int64_t) 0;\n            acc_32608 = (int64_t) 0;\n        }\n        if (!(dynamic_id_32565 == (int64_t) 0) && slt32(local_tid_32534,\n                                                        wave_sizze_32536)) {\n            if (local_tid_32534 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_32508)[dynamic_id_32565] =\n                    acc_32605;\n                ((volatile __global\n                  int64_t *) aggregates_mem_32512)[dynamic_id_32565] =\n                    acc_32606;\n                ((volatile __global\n                  int64_t *) aggregates_mem_32516)[dynamic_id_32565] =\n                    acc_32607;\n                ((volatile __global\n                  int64_t *) aggregates_mem_32520)[dynamic_id_32565] =\n                    acc_32608;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_32506)[dynamic_id_32565] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_32548)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_32506)[dynamic_id_32565 -\n                                                                                                        (int64_t) 1];\n ",
            "           }\n            mem_fence_local();\n            \n            int8_t status_32628;\n            \n            status_32628 = ((__local int8_t *) local_mem_32548)[(int64_t) 0];\n            if (status_32628 == (int8_t) 2) {\n                if (local_tid_32534 == 0) {\n                    prefix_32624 = ((volatile __global\n                                     int64_t *) incprefixes_mem_32510)[dynamic_id_32565 -\n                                                                       (int64_t) 1];\n                    prefix_32625 = ((volatile __global\n                                     int64_t *) incprefixes_mem_32514)[dynamic_id_32565 -\n                                                                       (int64_t) 1];\n                    prefix_32626 = ((volatile __global\n                                     int64_t *) incprefixes_mem_32518)[dynamic_id_32565 -\n                                                                       (int64_t) 1];\n                    prefix_32627 = ((volatile __global\n                                     int64_t *) incprefixes_mem_32522)[dynamic_id_32565 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_32629 = dynamic_id_32565 -\n                        sext_i32_i64(wave_sizze_32536);\n                \n                while (slt32(wave_sizze_32536 * -1, readOffset_32629)) {\n                    int32_t read_i_32630 = readOffset_32629 + local_tid_32534;\n                    int64_t aggr_32631 = (int64_t) 0;\n                    int64_t aggr_32632 = (int64_t) 0;\n                    int64_t aggr_32633 = (int64_t) 0;\n                    int64_t aggr_32634 = (int64_t) 0;\n                    int8_t flag_32635 = (int8_t) 0;\n                    int8_t used_32636 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_32630)) {\n                        flag_32635 = ((volatile __global\n                                   ",
            "    int8_t *) status_flags_mem_32506)[sext_i32_i64(read_i_32630)];\n                        if (flag_32635 == (int8_t) 2) {\n                            aggr_32631 = ((volatile __global\n                                           int64_t *) incprefixes_mem_32510)[sext_i32_i64(read_i_32630)];\n                            aggr_32632 = ((volatile __global\n                                           int64_t *) incprefixes_mem_32514)[sext_i32_i64(read_i_32630)];\n                            aggr_32633 = ((volatile __global\n                                           int64_t *) incprefixes_mem_32518)[sext_i32_i64(read_i_32630)];\n                            aggr_32634 = ((volatile __global\n                                           int64_t *) incprefixes_mem_32522)[sext_i32_i64(read_i_32630)];\n                        } else {\n                            if (flag_32635 == (int8_t) 1) {\n                                aggr_32631 = ((volatile __global\n                                               int64_t *) aggregates_mem_32508)[sext_i32_i64(read_i_32630)];\n                                aggr_32632 = ((volatile __global\n                                               int64_t *) aggregates_mem_32512)[sext_i32_i64(read_i_32630)];\n                                aggr_32633 = ((volatile __global\n                                               int64_t *) aggregates_mem_32516)[sext_i32_i64(read_i_32630)];\n                                aggr_32634 = ((volatile __global\n                                               int64_t *) aggregates_mem_32520)[sext_i32_i64(read_i_32630)];\n                                used_32636 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_32548)[squot64(warp_byte_offset_32543,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32534)] =\n                 ",
            "       aggr_32631;\n                    ((__local\n                      int64_t *) local_mem_32548)[squot64(warp_byte_offset_32544,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32534)] =\n                        aggr_32632;\n                    ((__local\n                      int64_t *) local_mem_32548)[squot64(warp_byte_offset_32545,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32534)] =\n                        aggr_32633;\n                    ((__local\n                      int64_t *) local_mem_32548)[squot64(warp_byte_offset_32546,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32534)] =\n                        aggr_32634;\n                    \n                    int8_t tmp_32637;\n                    \n                    tmp_32637 = flag_32635 | used_32636 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_32548)[sext_i32_i64(local_tid_32534)] =\n                        tmp_32637;\n                    mem_fence_local();\n                    flag_32635 = ((volatile __local\n                                   int8_t *) local_mem_32548)[sext_i32_i64(wave_sizze_32536) -\n                                                              (int64_t) 1];\n                    if (local_tid_32534 == 0) {\n                        if (!(flag_32635 == (int8_t) 2)) {\n                            int64_t x_32638 = (int64_t) 0;\n                            int64_t x_32639 = (int64_t) 0;\n                            int64_t x_32640 = (int64_t) 0;\n                            int64_t x_32641 = (int64_t) 0;\n                            int64_t x_32642;\n                            int64_t x_32643;\n                            int64_t x_32644;\n                            int",
            "64_t x_32645;\n                            int8_t flag1_32650;\n                            \n                            flag1_32650 = (int8_t) 0;\n                            \n                            int8_t flag2_32651;\n                            int8_t used1_32652;\n                            \n                            used1_32652 = (int8_t) 0;\n                            \n                            int8_t used2_32653;\n                            \n                            for (int32_t i_32654 = 0; i_32654 <\n                                 wave_sizze_32536; i_32654++) {\n                                flag2_32651 = ((__local\n                                                int8_t *) local_mem_32548)[sext_i32_i64(i_32654)];\n                                used2_32653 = lshr8(flag2_32651, (int8_t) 2);\n                                flag2_32651 = flag2_32651 & (int8_t) 3;\n                                x_32642 = ((__local\n                                            int64_t *) local_mem_32548)[squot64(warp_byte_offset_32543,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_32654)];\n                                x_32643 = ((__local\n                                            int64_t *) local_mem_32548)[squot64(warp_byte_offset_32544,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_32654)];\n                                x_32644 = ((__local\n                                            int64_t *) local_mem_32548)[squot64(warp_byte_offset_32545,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_32654)];\n                                x_32645 = ((__local\n               ",
            "                             int64_t *) local_mem_32548)[squot64(warp_byte_offset_32546,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_32654)];\n                                if (!(flag2_32651 == (int8_t) 1)) {\n                                    flag1_32650 = flag2_32651;\n                                    used1_32652 = used2_32653;\n                                    x_32638 = x_32642;\n                                    x_32639 = x_32643;\n                                    x_32640 = x_32644;\n                                    x_32641 = x_32645;\n                                } else {\n                                    used1_32652 += used2_32653;\n                                    \n                                    int64_t defunc_1_op_res_32646;\n                                    \n                                    defunc_1_op_res_32646 = add64(x_32638,\n                                                                  x_32642);\n                                    \n                                    int64_t defunc_1_op_res_32647 =\n                                            add64(x_32639, x_32643);\n                                    int64_t defunc_1_op_res_32648 =\n                                            add64(x_32640, x_32644);\n                                    int64_t defunc_1_op_res_32649 =\n                                            add64(x_32641, x_32645);\n                                    \n                                    x_32638 = defunc_1_op_res_32646;\n                                    x_32639 = defunc_1_op_res_32647;\n                                    x_32640 = defunc_1_op_res_32648;\n                                    x_32641 = defunc_1_op_res_32649;\n                                }\n                            }\n                            flag_32635 = flag1_32650;\n                            us",
            "ed_32636 = used1_32652;\n                            aggr_32631 = x_32638;\n                            aggr_32632 = x_32639;\n                            aggr_32633 = x_32640;\n                            aggr_32634 = x_32641;\n                        } else {\n                            aggr_32631 = ((__local\n                                           int64_t *) local_mem_32548)[squot64(warp_byte_offset_32543,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_32536) -\n                                                                        (int64_t) 1)];\n                            aggr_32632 = ((__local\n                                           int64_t *) local_mem_32548)[squot64(warp_byte_offset_32544,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_32536) -\n                                                                        (int64_t) 1)];\n                            aggr_32633 = ((__local\n                                           int64_t *) local_mem_32548)[squot64(warp_byte_offset_32545,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_32536) -\n                                                                        (int64_t) 1)];\n                            aggr_32634 = ((__local\n                                           int64_t *) local_mem_32548)[squot64(warp_byte_offset_32546,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_32536) -\n                                                                      ",
            "  (int64_t) 1)];\n                        }\n                        if (flag_32635 == (int8_t) 2) {\n                            readOffset_32629 = wave_sizze_32536 * -1;\n                        } else {\n                            readOffset_32629 -= zext_i8_i32(used_32636);\n                        }\n                        ((__local int32_t *) local_mem_32548)[(int64_t) 0] =\n                            readOffset_32629;\n                        \n                        int64_t x_32655;\n                        \n                        x_32655 = aggr_32631;\n                        \n                        int64_t x_32656;\n                        \n                        x_32656 = aggr_32632;\n                        \n                        int64_t x_32657;\n                        \n                        x_32657 = aggr_32633;\n                        \n                        int64_t x_32658;\n                        \n                        x_32658 = aggr_32634;\n                        \n                        int64_t x_32659;\n                        \n                        x_32659 = prefix_32624;\n                        \n                        int64_t x_32660;\n                        \n                        x_32660 = prefix_32625;\n                        \n                        int64_t x_32661;\n                        \n                        x_32661 = prefix_32626;\n                        \n                        int64_t x_32662;\n                        \n                        x_32662 = prefix_32627;\n                        \n                        int64_t defunc_1_op_res_32663;\n                        \n                        defunc_1_op_res_32663 = add64(x_32655, x_32659);\n                        \n                        int64_t defunc_1_op_res_32664 = add64(x_32656, x_32660);\n                        int64_t defunc_1_op_res_32665 = add64(x_32657, x_32661);\n                        int64_t defunc_1_op_res_32666 = add64(x_32658, x_32662);\n                        \n ",
            "                       prefix_32624 = defunc_1_op_res_32663;\n                        prefix_32625 = defunc_1_op_res_32664;\n                        prefix_32626 = defunc_1_op_res_32665;\n                        prefix_32627 = defunc_1_op_res_32666;\n                    }\n                    mem_fence_local();\n                    readOffset_32629 = ((__local\n                                         int32_t *) local_mem_32548)[(int64_t) 0];\n                }\n            }\n            if (local_tid_32534 == 0) {\n                int64_t x_32667 = prefix_32624;\n                int64_t x_32668 = prefix_32625;\n                int64_t x_32669 = prefix_32626;\n                int64_t x_32670 = prefix_32627;\n                int64_t x_32671 = acc_32605;\n                int64_t x_32672 = acc_32606;\n                int64_t x_32673 = acc_32607;\n                int64_t x_32674 = acc_32608;\n                int64_t defunc_1_op_res_32675 = add64(x_32667, x_32671);\n                int64_t defunc_1_op_res_32676 = add64(x_32668, x_32672);\n                int64_t defunc_1_op_res_32677 = add64(x_32669, x_32673);\n                int64_t defunc_1_op_res_32678 = add64(x_32670, x_32674);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_32510)[dynamic_id_32565] =\n                    defunc_1_op_res_32675;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_32514)[dynamic_id_32565] =\n                    defunc_1_op_res_32676;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_32518)[dynamic_id_32565] =\n                    defunc_1_op_res_32677;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_32522)[dynamic_id_32565] =\n                    defunc_1_op_res_32678;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_32506)[dynamic_id_32565] =\n                    (int8_t) 2;\n                ((__local\n ",
            "                 int64_t *) local_mem_32548)[squot64(warp_byte_offset_32543,\n                                                      (int64_t) 8)] =\n                    prefix_32624;\n                ((__local\n                  int64_t *) local_mem_32548)[squot64(warp_byte_offset_32544,\n                                                      (int64_t) 8)] =\n                    prefix_32625;\n                ((__local\n                  int64_t *) local_mem_32548)[squot64(warp_byte_offset_32545,\n                                                      (int64_t) 8)] =\n                    prefix_32626;\n                ((__local\n                  int64_t *) local_mem_32548)[squot64(warp_byte_offset_32546,\n                                                      (int64_t) 8)] =\n                    prefix_32627;\n                acc_32605 = (int64_t) 0;\n                acc_32606 = (int64_t) 0;\n                acc_32607 = (int64_t) 0;\n                acc_32608 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_32565 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_32624 = ((__local\n                             int64_t *) local_mem_32548)[squot64(warp_byte_offset_32543,\n                                                                 (int64_t) 8)];\n            prefix_32625 = ((__local\n                             int64_t *) local_mem_32548)[squot64(warp_byte_offset_32544,\n                                                                 (int64_t) 8)];\n            prefix_32626 = ((__local\n                             int64_t *) local_mem_32548)[squot64(warp_byte_offset_32545,\n                                                                 (int64_t) 8)];\n            prefix_32627 = ((__local\n                             int64_t *) local_mem_32548)[squot64(warp_byte_offset_32546,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n ",
            "       int64_t x_32679;\n        int64_t x_32683;\n        int64_t x_32691;\n        \n        x_32691 = prefix_32624;\n        \n        int64_t x_32695;\n        \n        x_32695 = acc_32605;\n        \n        int64_t x_32680;\n        int64_t x_32684;\n        int64_t x_32692;\n        \n        x_32692 = prefix_32625;\n        \n        int64_t x_32696;\n        \n        x_32696 = acc_32606;\n        \n        int64_t x_32681;\n        int64_t x_32685;\n        int64_t x_32693;\n        \n        x_32693 = prefix_32626;\n        \n        int64_t x_32697;\n        \n        x_32697 = acc_32607;\n        \n        int64_t x_32682;\n        int64_t x_32686;\n        int64_t x_32694;\n        \n        x_32694 = prefix_32627;\n        \n        int64_t x_32698;\n        \n        x_32698 = acc_32608;\n        \n        int64_t defunc_1_op_res_32699;\n        \n        defunc_1_op_res_32699 = add64(x_32691, x_32695);\n        \n        int64_t defunc_1_op_res_32700 = add64(x_32692, x_32696);\n        int64_t defunc_1_op_res_32701 = add64(x_32693, x_32697);\n        int64_t defunc_1_op_res_32702 = add64(x_32694, x_32698);\n        \n        x_32679 = defunc_1_op_res_32699;\n        x_32680 = defunc_1_op_res_32700;\n        x_32681 = defunc_1_op_res_32701;\n        x_32682 = defunc_1_op_res_32702;\n        for (int64_t i_32703 = 0; i_32703 < (int64_t) 9; i_32703++) {\n            x_32683 = private_mem_32567[i_32703];\n            x_32684 = private_mem_32569[i_32703];\n            x_32685 = private_mem_32571[i_32703];\n            x_32686 = private_mem_32573[i_32703];\n            \n            int64_t defunc_1_op_res_32687;\n            \n            defunc_1_op_res_32687 = add64(x_32679, x_32683);\n            \n            int64_t defunc_1_op_res_32688 = add64(x_32680, x_32684);\n            int64_t defunc_1_op_res_32689 = add64(x_32681, x_32685);\n            int64_t defunc_1_op_res_32690 = add64(x_32682, x_32686);\n            \n            private_mem_32567[i_32703] = defunc_1_op_res_32687;\n            private_mem_32569[i_32",
            "703] = defunc_1_op_res_32688;\n            private_mem_32571[i_32703] = defunc_1_op_res_32689;\n            private_mem_32573[i_32703] = defunc_1_op_res_32690;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32704 = 0; i_32704 < (int64_t) 9; i_32704++) {\n            int64_t sharedIdx_32705 = sext_i32_i64(local_tid_32534 * 9) +\n                    i_32704;\n            \n            ((__local int64_t *) local_mem_32548)[sharedIdx_32705] =\n                private_mem_32567[i_32704];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32706 = 0; i_32706 < (int64_t) 9; i_32706++) {\n            int32_t sharedIdx_32707 = local_tid_32534 +\n                    sext_i64_i32(segscan_group_sizze_30347 * i_32706);\n            \n            private_mem_32567[i_32706] = ((__local\n                                           int64_t *) local_mem_32548)[sext_i32_i64(sharedIdx_32707)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32708 = 0; i_32708 < (int64_t) 9; i_32708++) {\n            int64_t sharedIdx_32709 = sext_i32_i64(local_tid_32534 * 9) +\n                    i_32708;\n            \n            ((__local int64_t *) local_mem_32548)[sharedIdx_32709] =\n                private_mem_32569[i_32708];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32710 = 0; i_32710 < (int64_t) 9; i_32710++) {\n            int32_t sharedIdx_32711 = local_tid_32534 +\n                    sext_i64_i32(segscan_group_sizze_30347 * i_32710);\n            \n            private_mem_32569[i_32710] = ((__local\n                                           int64_t *) local_mem_32548)[sext_i32_i64(sharedIdx_32711)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32712 = 0; i_32712 < (int64_t) 9; i_32712++) {\n            int64_t sharedIdx_32713 = sext_i32_i64(local_tid_32534 * 9) +\n                    i_32712;\n            \n            ((__local int64_t *) local_mem_32548)",
            "[sharedIdx_32713] =\n                private_mem_32571[i_32712];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32714 = 0; i_32714 < (int64_t) 9; i_32714++) {\n            int32_t sharedIdx_32715 = local_tid_32534 +\n                    sext_i64_i32(segscan_group_sizze_30347 * i_32714);\n            \n            private_mem_32571[i_32714] = ((__local\n                                           int64_t *) local_mem_32548)[sext_i32_i64(sharedIdx_32715)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32716 = 0; i_32716 < (int64_t) 9; i_32716++) {\n            int64_t sharedIdx_32717 = sext_i32_i64(local_tid_32534 * 9) +\n                    i_32716;\n            \n            ((__local int64_t *) local_mem_32548)[sharedIdx_32717] =\n                private_mem_32573[i_32716];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32718 = 0; i_32718 < (int64_t) 9; i_32718++) {\n            int32_t sharedIdx_32719 = local_tid_32534 +\n                    sext_i64_i32(segscan_group_sizze_30347 * i_32718);\n            \n            private_mem_32573[i_32718] = ((__local\n                                           int64_t *) local_mem_32548)[sext_i32_i64(sharedIdx_32719)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_32720 = 0; i_32720 < (int64_t) 9; i_32720++) {\n            int64_t gtid_30351 = blockOff_32566 + segscan_group_sizze_30347 *\n                    i_32720 + sext_i32_i64(local_tid_32534);\n            \n            if (slt64(gtid_30351, n_28846)) {\n                ((__global int64_t *) mem_31857)[gtid_30351] =\n                    private_mem_32567[i_32720];\n            }\n        }\n        for (int64_t i_32721 = 0; i_32721 < (int64_t) 9; i_32721++) {\n            int64_t gtid_30351 = blockOff_32566 + segscan_group_sizze_30347 *\n                    i_32721 + sext_i32_i64(local_tid_32534);\n            \n            if (slt64(gtid_3035",
            "1, n_28846)) {\n                ((__global int64_t *) mem_31859)[gtid_30351] =\n                    private_mem_32569[i_32721];\n            }\n        }\n        for (int64_t i_32722 = 0; i_32722 < (int64_t) 9; i_32722++) {\n            int64_t gtid_30351 = blockOff_32566 + segscan_group_sizze_30347 *\n                    i_32722 + sext_i32_i64(local_tid_32534);\n            \n            if (slt64(gtid_30351, n_28846)) {\n                ((__global int64_t *) mem_31861)[gtid_30351] =\n                    private_mem_32571[i_32722];\n            }\n        }\n        for (int64_t i_32723 = 0; i_32723 < (int64_t) 9; i_32723++) {\n            int64_t gtid_30351 = blockOff_32566 + segscan_group_sizze_30347 *\n                    i_32723 + sext_i32_i64(local_tid_32534);\n            \n            if (slt64(gtid_30351, n_28846)) {\n                ((__global int64_t *) mem_31863)[gtid_30351] =\n                    private_mem_32573[i_32723];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_32565 == sdiv_up64(n_28846, segscan_group_sizze_30347 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_32504)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30347\n}\n__kernel void clusterPointszisegscan_30414(__global int *global_failure,\n                                           uint local_mem_32765_backing_offset_0,\n                                           int64_t n_28846, __global\n                                           unsigned char *mem_31894, __global\n                                           unsigned char *mem_31897, __global\n                                           unsigned char *mem_31899, __global\n                                           unsigned char *clusterPointsziid_counter_mem_32742,\n                                           __global\n                                    ",
            "       unsigned char *status_flags_mem_32744,\n                                           __global\n                                           unsigned char *aggregates_mem_32746,\n                                           __global\n                                           unsigned char *incprefixes_mem_32748,\n                                           __global\n                                           unsigned char *aggregates_mem_32750,\n                                           __global\n                                           unsigned char *incprefixes_mem_32752)\n{\n    #define segscan_group_sizze_30409 (clusterPointszisegscan_group_sizze_30408)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_32765_backing_0 =\n                  &shared_mem[local_mem_32765_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32754;\n    int32_t local_tid_32755;\n    int64_t group_sizze_32758;\n    int32_t wave_sizze_32757;\n    int32_t group_tid_32756;\n    \n    global_tid_32754 = get_global_id(0);\n    local_tid_32755 = get_local_id(0);\n    group_sizze_32758 = get_local_size(0);\n    wave_sizze_32757 = LOCKSTEP_WIDTH;\n    group_tid_32756 = get_group_id(0);\n    \n    int32_t phys_tid_30414;\n    \n    phys_tid_30414 = global_tid_32754;\n    \n    int64_t byte_offsets_32759;\n    \n    byte_offsets_32759 = (int64_t) 0;\n    \n    int64_t byte_offsets_32760;\n    \n    byte_offsets_32760 = segscan_group_sizze_30409;\n    \n    int64_t byte_offsets_32761;\n    \n    byte_offsets_32761 = sdiv_up64(segscan_group_sizze_30409, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_30409 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_32762;\n    \n    warp_byte_offset_32762 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_32763;\n    \n    warp_byte_offset_32763 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_32764;\n    \n    warp_byte_offset_32764 = (int64_t) 320;\n    // Allocate reused",
            " shared memeory\n    { }\n    \n    __local char *local_mem_32765;\n    \n    local_mem_32765 = (__local char *) local_mem_32765_backing_0;\n    \n    int64_t trans_arr_len_32766;\n    \n    trans_arr_len_32766 = (int64_t) 9 * segscan_group_sizze_30409;\n    \n    int32_t dynamic_id_32776;\n    \n    if (local_tid_32755 == 0) {\n        dynamic_id_32776 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_32742)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_32765)[(int64_t) 0] = dynamic_id_32776;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_32776 = ((__local int32_t *) local_mem_32765)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_32777;\n    \n    blockOff_32777 = sext_i32_i64(dynamic_id_32776) * (int64_t) 9 *\n        segscan_group_sizze_30409;\n    \n    bool private_mem_32778[9];\n    int64_t private_mem_32780[9];\n    \n    // Load and map\n    {\n        for (int64_t i_32782 = 0; i_32782 < (int64_t) 9; i_32782++) {\n            int64_t gtid_30413 = blockOff_32777 +\n                    sext_i32_i64(local_tid_32755) + i_32782 *\n                    segscan_group_sizze_30409;\n            \n            if (slt64(gtid_30413, n_28846)) {\n                bool x_29011 = ((__global bool *) mem_31894)[gtid_30413];\n                \n                private_mem_32778[i_32782] = x_29011;\n                private_mem_32780[i_32782] = (int64_t) 1;\n            } else {\n                private_mem_32778[i_32782] = 0;\n                private_mem_32780[i_32782] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32783 = 0; i_32783 < (int64_t) 9; i_32783++) {\n            int64_t sharedIdx_32784 = sext_i32_i64(local_tid_32755) + i_32783 *\n                    segscan_group_sizze_30409;\n            \n            ((__local bool *) local_mem_327",
            "65)[sharedIdx_32784] =\n                private_mem_32778[i_32783];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_32785 = 0; i_32785 < 9; i_32785++) {\n            int32_t sharedIdx_32786 = local_tid_32755 * 9 + i_32785;\n            \n            private_mem_32778[sext_i32_i64(i_32785)] = ((__local\n                                                         bool *) local_mem_32765)[sext_i32_i64(sharedIdx_32786)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32787 = 0; i_32787 < (int64_t) 9; i_32787++) {\n            int64_t sharedIdx_32788 = sext_i32_i64(local_tid_32755) + i_32787 *\n                    segscan_group_sizze_30409;\n            \n            ((__local int64_t *) local_mem_32765)[sharedIdx_32788] =\n                private_mem_32780[i_32787];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_32789 = 0; i_32789 < 9; i_32789++) {\n            int32_t sharedIdx_32790 = local_tid_32755 * 9 + i_32789;\n            \n            private_mem_32780[sext_i32_i64(i_32789)] = ((__local\n                                                         int64_t *) local_mem_32765)[sext_i32_i64(sharedIdx_32790)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_32791 = 0; i_32791 < (int64_t) 8; i_32791++) {\n            bool x_29004;\n            bool x_29006;\n            \n            x_29004 = private_mem_32778[i_32791];\n            x_29006 = private_mem_32778[i_32791 + (int64_t) 1];\n            \n            int64_t x_29005;\n            int64_t x_29007;\n            \n            x_29005 = private_mem_32780[i_32791];\n            x_29007 = private_mem_32780[i_32791 + (int64_t) 1];\n            \n            bool defunc_1_op_res_29008;\n            \n            defunc_1_op_res_29008 = x_29004 || x_29006;\n            \n            int64_t defunc_1_op_res_29009;\n            \n            if (x_29006) {\n                defunc_1_op_res_29009 = x_29007;\n            } else {\n   ",
            "             int64_t defunc_1_op_res_29010 = add64(x_29005, x_29007);\n                \n                defunc_1_op_res_29009 = defunc_1_op_res_29010;\n            }\n            private_mem_32778[i_32791 + (int64_t) 1] = defunc_1_op_res_29008;\n            private_mem_32780[i_32791 + (int64_t) 1] = defunc_1_op_res_29009;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_32765)[byte_offsets_32759 +\n                                           sext_i32_i64(local_tid_32755)] =\n            private_mem_32778[(int64_t) 8];\n        ((__local int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32755)] =\n            private_mem_32780[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_32799;\n    int64_t acc_32800;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_32792;\n        int64_t x_32793;\n        bool x_32794;\n        int64_t x_32795;\n        bool x_32801;\n        int64_t x_32802;\n        bool x_32803;\n        int64_t x_32804;\n        bool ltid_in_bounds_32808;\n        \n        ltid_in_bounds_32808 = slt64(sext_i32_i64(local_tid_32755),\n                                     segscan_group_sizze_30409);\n        \n        int32_t skip_threads_32809;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_32808) {\n                x_32794 = ((volatile __local\n                            bool *) local_mem_32765)[byte_offsets_32759 +\n                                                     sext_i32_i64(local_tid_32755)];\n                x_32795 = ((volatile __local\n                            int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_32755)];\n                if ",
            "((local_tid_32755 - squot32(local_tid_32755, 32) * 32) ==\n                    0) {\n                    x_32792 = x_32794;\n                    x_32793 = x_32795;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_32809 = 1;\n            while (slt32(skip_threads_32809, 32)) {\n                if (sle32(skip_threads_32809, local_tid_32755 -\n                          squot32(local_tid_32755, 32) * 32) &&\n                    ltid_in_bounds_32808) {\n                    // read operands\n                    {\n                        x_32792 = ((volatile __local\n                                    bool *) local_mem_32765)[byte_offsets_32759 +\n                                                             (sext_i32_i64(local_tid_32755) -\n                                                              sext_i32_i64(skip_threads_32809))];\n                        x_32793 = ((volatile __local\n                                    int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_32755) -\n                                                                 sext_i32_i64(skip_threads_32809))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_32796 = x_32792 || x_32794;\n                        int64_t defunc_1_op_res_32797;\n                        \n                        if (x_32794) {\n                            defunc_1_op_res_32797 = x_32795;\n                        } else {\n                            int64_t defunc_1_op_res_32798 = add64(x_32793,\n                                                                  x_32795);\n                            \n                            defunc_1_op_res_32797 = defunc_1_op_res_32798;\n                        }\n   ",
            "                     x_32792 = defunc_1_op_res_32796;\n                        x_32793 = defunc_1_op_res_32797;\n                    }\n                }\n                if (sle32(wave_sizze_32757, skip_threads_32809)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_32809, local_tid_32755 -\n                          squot32(local_tid_32755, 32) * 32) &&\n                    ltid_in_bounds_32808) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_32765)[byte_offsets_32759 +\n                                                   sext_i32_i64(local_tid_32755)] =\n                            x_32792;\n                        x_32794 = x_32792;\n                        ((volatile __local\n                          int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_32755)] =\n                            x_32793;\n                        x_32795 = x_32793;\n                    }\n                }\n                if (sle32(wave_sizze_32757, skip_threads_32809)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_32809 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_32755 - squot32(local_tid_32755, 32) * 32) == 31 &&\n                ltid_in_bounds_32808) {\n                ((volatile __local bool *) local_mem_32765)[byte_offsets_32759 +\n                                                            sext_i32_i64(squot32(local_tid_32755,\n                                                                                 32))] =\n                    x_32792;\n                ((volatile __local\n                  int64_t *) ",
            "local_mem_32765)[squot64(byte_offsets_32760,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_32755,\n                                                                   32))] =\n                    x_32793;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_32810;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_32755, 32) == 0 && ltid_in_bounds_32808) {\n                    x_32803 = ((volatile __local\n                                bool *) local_mem_32765)[byte_offsets_32759 +\n                                                         sext_i32_i64(local_tid_32755)];\n                    x_32804 = ((volatile __local\n                                int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_32755)];\n                    if ((local_tid_32755 - squot32(local_tid_32755, 32) * 32) ==\n                        0) {\n                        x_32801 = x_32803;\n                        x_32802 = x_32804;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_32810 = 1;\n                while (slt32(skip_threads_32810, 32)) {\n                    if (sle32(skip_threads_32810, local_tid_32755 -\n                              squot32(local_tid_32755, 32) * 32) &&\n                        (squot32(local_tid_32755, 32) == 0 &&\n                         ltid_in_bounds_32808)) {\n                        // read operands\n                        {\n                            x_32801 = ((volatile __local\n                        ",
            "                bool *) local_mem_32765)[byte_offsets_32759 +\n                                                                 (sext_i32_i64(local_tid_32755) -\n                                                                  sext_i32_i64(skip_threads_32810))];\n                            x_32802 = ((volatile __local\n                                        int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_32755) -\n                                                                     sext_i32_i64(skip_threads_32810))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_32805 = x_32801 || x_32803;\n                            int64_t defunc_1_op_res_32806;\n                            \n                            if (x_32803) {\n                                defunc_1_op_res_32806 = x_32804;\n                            } else {\n                                int64_t defunc_1_op_res_32807 = add64(x_32802,\n                                                                      x_32804);\n                                \n                                defunc_1_op_res_32806 = defunc_1_op_res_32807;\n                            }\n                            x_32801 = defunc_1_op_res_32805;\n                            x_32802 = defunc_1_op_res_32806;\n                        }\n                    }\n                    if (sle32(wave_sizze_32757, skip_threads_32810)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_32810, local_tid_32755 -\n                              squot32(local_tid_32755, 32) * 32) &&\n                        (squot32(local_tid_32755, 32) == 0 &&\n                         ltid_in_bounds_32808)) {\n               ",
            "         // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_32765)[byte_offsets_32759 +\n                                                       sext_i32_i64(local_tid_32755)] =\n                                x_32801;\n                            x_32803 = x_32801;\n                            ((volatile __local\n                              int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_32755)] =\n                                x_32802;\n                            x_32804 = x_32802;\n                        }\n                    }\n                    if (sle32(wave_sizze_32757, skip_threads_32810)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_32810 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_32755, 32) == 0 || !ltid_in_bounds_32808)) {\n                // read operands\n                {\n                    x_32794 = x_32792;\n                    x_32795 = x_32793;\n                    x_32792 = ((__local\n                                bool *) local_mem_32765)[byte_offsets_32759 +\n                                                         (sext_i32_i64(squot32(local_tid_32755,\n                                                                               32)) -\n                                                          (int64_t) 1)];\n                    x_32793 = ((__local\n                                int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot3",
            "2(local_tid_32755,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_32796 = x_32792 || x_32794;\n                    int64_t defunc_1_op_res_32797;\n                    \n                    if (x_32794) {\n                        defunc_1_op_res_32797 = x_32795;\n                    } else {\n                        int64_t defunc_1_op_res_32798 = add64(x_32793, x_32795);\n                        \n                        defunc_1_op_res_32797 = defunc_1_op_res_32798;\n                    }\n                    x_32792 = defunc_1_op_res_32796;\n                    x_32793 = defunc_1_op_res_32797;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_32765)[byte_offsets_32759 +\n                                                       sext_i32_i64(local_tid_32755)] =\n                        x_32792;\n                    ((__local\n                      int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32755)] =\n                        x_32793;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_32755, 32) == 0) {\n                ((__local bool *) local_mem_32765)[byte_offsets_32759 +\n                                                   sext_i32_i64(local_tid_32755)] =\n                    x_32794;\n                ((__local\n                  int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(lo",
            "cal_tid_32755)] =\n                    x_32795;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_32755 == 0) {\n            acc_32799 = ((__local bool *) local_mem_32765)[byte_offsets_32759 +\n                                                           (segscan_group_sizze_30409 -\n                                                            (int64_t) 1)];\n            acc_32800 = ((__local\n                          int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30409 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_32799 = ((__local bool *) local_mem_32765)[byte_offsets_32759 +\n                                                           (sext_i32_i64(local_tid_32755) -\n                                                            (int64_t) 1)];\n            acc_32800 = ((__local\n                          int64_t *) local_mem_32765)[squot64(byte_offsets_32760,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_32755) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_32811;\n    \n    prefix_32811 = 0;\n    \n    int64_t prefix_32812;\n    \n    prefix_32812 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_32776 == (int64_t) 0 && local_tid_32755 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_32748)[dynamic_id_32776] = acc_32799;\n            ((volatile __global\n              int64_t *) incprefixes_mem_32752)[dynamic_id_32776] = acc_32800;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_32744)[dynam",
            "ic_id_32776] = (int8_t) 2;\n            acc_32799 = 0;\n            acc_32800 = (int64_t) 0;\n        }\n        if (!(dynamic_id_32776 == (int64_t) 0) && slt32(local_tid_32755,\n                                                        wave_sizze_32757)) {\n            if (local_tid_32755 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_32746)[dynamic_id_32776] = acc_32799;\n                ((volatile __global\n                  int64_t *) aggregates_mem_32750)[dynamic_id_32776] =\n                    acc_32800;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_32744)[dynamic_id_32776] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_32765)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_32744)[dynamic_id_32776 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_32813;\n            \n            status_32813 = ((__local int8_t *) local_mem_32765)[(int64_t) 0];\n            if (status_32813 == (int8_t) 2) {\n                if (local_tid_32755 == 0) {\n                    prefix_32811 = ((volatile __global\n                                     bool *) incprefixes_mem_32748)[dynamic_id_32776 -\n                                                                    (int64_t) 1];\n                    prefix_32812 = ((volatile __global\n                                     int64_t *) incprefixes_mem_32752)[dynamic_id_32776 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_32814 = dynamic_id_32776 -\n                        sext_i32_i64(wave_sizze_32757);\n                \n                while (slt32(wave_sizze_32757 * -1, readOffs",
            "et_32814)) {\n                    int32_t read_i_32815 = readOffset_32814 + local_tid_32755;\n                    bool aggr_32816 = 0;\n                    int64_t aggr_32817 = (int64_t) 0;\n                    int8_t flag_32818 = (int8_t) 0;\n                    int8_t used_32819 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_32815)) {\n                        flag_32818 = ((volatile __global\n                                       int8_t *) status_flags_mem_32744)[sext_i32_i64(read_i_32815)];\n                        if (flag_32818 == (int8_t) 2) {\n                            aggr_32816 = ((volatile __global\n                                           bool *) incprefixes_mem_32748)[sext_i32_i64(read_i_32815)];\n                            aggr_32817 = ((volatile __global\n                                           int64_t *) incprefixes_mem_32752)[sext_i32_i64(read_i_32815)];\n                        } else {\n                            if (flag_32818 == (int8_t) 1) {\n                                aggr_32816 = ((volatile __global\n                                               bool *) aggregates_mem_32746)[sext_i32_i64(read_i_32815)];\n                                aggr_32817 = ((volatile __global\n                                               int64_t *) aggregates_mem_32750)[sext_i32_i64(read_i_32815)];\n                                used_32819 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_32765)[warp_byte_offset_32762 +\n                                                       sext_i32_i64(local_tid_32755)] =\n                        aggr_32816;\n                    ((__local\n                      int64_t *) local_mem_32765)[squot64(warp_byte_offset_32763,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32755)] =\n                        aggr_32817;\n           ",
            "         \n                    int8_t tmp_32820;\n                    \n                    tmp_32820 = flag_32818 | used_32819 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_32765)[sext_i32_i64(local_tid_32755)] =\n                        tmp_32820;\n                    mem_fence_local();\n                    flag_32818 = ((volatile __local\n                                   int8_t *) local_mem_32765)[sext_i32_i64(wave_sizze_32757) -\n                                                              (int64_t) 1];\n                    if (local_tid_32755 == 0) {\n                        if (!(flag_32818 == (int8_t) 2)) {\n                            bool x_32821 = 0;\n                            int64_t x_32822 = (int64_t) 0;\n                            bool x_32823;\n                            int64_t x_32824;\n                            int8_t flag1_32828;\n                            \n                            flag1_32828 = (int8_t) 0;\n                            \n                            int8_t flag2_32829;\n                            int8_t used1_32830;\n                            \n                            used1_32830 = (int8_t) 0;\n                            \n                            int8_t used2_32831;\n                            \n                            for (int32_t i_32832 = 0; i_32832 <\n                                 wave_sizze_32757; i_32832++) {\n                                flag2_32829 = ((__local\n                                                int8_t *) local_mem_32765)[sext_i32_i64(i_32832)];\n                                used2_32831 = lshr8(flag2_32829, (int8_t) 2);\n                                flag2_32829 = flag2_32829 & (int8_t) 3;\n                                x_32823 = ((__local\n                                            bool *) local_mem_32765)[warp_byte_offset_32762 +\n                                                                     sext_i32_i64(i_32832)];\n                                x_3",
            "2824 = ((__local\n                                            int64_t *) local_mem_32765)[squot64(warp_byte_offset_32763,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_32832)];\n                                if (!(flag2_32829 == (int8_t) 1)) {\n                                    flag1_32828 = flag2_32829;\n                                    used1_32830 = used2_32831;\n                                    x_32821 = x_32823;\n                                    x_32822 = x_32824;\n                                } else {\n                                    used1_32830 += used2_32831;\n                                    \n                                    bool defunc_1_op_res_32825;\n                                    \n                                    defunc_1_op_res_32825 = x_32821 || x_32823;\n                                    \n                                    int64_t defunc_1_op_res_32826;\n                                    \n                                    if (x_32823) {\n                                        defunc_1_op_res_32826 = x_32824;\n                                    } else {\n                                        int64_t defunc_1_op_res_32827 =\n                                                add64(x_32822, x_32824);\n                                        \n                                        defunc_1_op_res_32826 =\n                                            defunc_1_op_res_32827;\n                                    }\n                                    x_32821 = defunc_1_op_res_32825;\n                                    x_32822 = defunc_1_op_res_32826;\n                                }\n                            }\n                            flag_32818 = flag1_32828;\n                            used_32819 = used1_32830;\n                            aggr_32816 = x_32821;\n                            aggr_328",
            "17 = x_32822;\n                        } else {\n                            aggr_32816 = ((__local\n                                           bool *) local_mem_32765)[warp_byte_offset_32762 +\n                                                                    (sext_i32_i64(wave_sizze_32757) -\n                                                                     (int64_t) 1)];\n                            aggr_32817 = ((__local\n                                           int64_t *) local_mem_32765)[squot64(warp_byte_offset_32763,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_32757) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_32818 == (int8_t) 2) {\n                            readOffset_32814 = wave_sizze_32757 * -1;\n                        } else {\n                            readOffset_32814 -= zext_i8_i32(used_32819);\n                        }\n                        ((__local int32_t *) local_mem_32765)[(int64_t) 0] =\n                            readOffset_32814;\n                        \n                        bool x_32833;\n                        \n                        x_32833 = aggr_32816;\n                        \n                        int64_t x_32834;\n                        \n                        x_32834 = aggr_32817;\n                        \n                        bool x_32835;\n                        \n                        x_32835 = prefix_32811;\n                        \n                        int64_t x_32836;\n                        \n                        x_32836 = prefix_32812;\n                        \n                        bool defunc_1_op_res_32837;\n                        \n                        defunc_1_op_res_32837 = x_32833 || x_32835;\n                        \n                        int64_t def",
            "unc_1_op_res_32838;\n                        \n                        if (x_32835) {\n                            defunc_1_op_res_32838 = x_32836;\n                        } else {\n                            int64_t defunc_1_op_res_32839 = add64(x_32834,\n                                                                  x_32836);\n                            \n                            defunc_1_op_res_32838 = defunc_1_op_res_32839;\n                        }\n                        prefix_32811 = defunc_1_op_res_32837;\n                        prefix_32812 = defunc_1_op_res_32838;\n                    }\n                    mem_fence_local();\n                    readOffset_32814 = ((__local\n                                         int32_t *) local_mem_32765)[(int64_t) 0];\n                }\n            }\n            if (local_tid_32755 == 0) {\n                bool x_32840 = prefix_32811;\n                int64_t x_32841 = prefix_32812;\n                bool x_32842 = acc_32799;\n                int64_t x_32843 = acc_32800;\n                bool defunc_1_op_res_32844 = x_32840 || x_32842;\n                int64_t defunc_1_op_res_32845;\n                \n                if (x_32842) {\n                    defunc_1_op_res_32845 = x_32843;\n                } else {\n                    int64_t defunc_1_op_res_32846 = add64(x_32841, x_32843);\n                    \n                    defunc_1_op_res_32845 = defunc_1_op_res_32846;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_32748)[dynamic_id_32776] =\n                    defunc_1_op_res_32844;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_32752)[dynamic_id_32776] =\n                    defunc_1_op_res_32845;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_32744)[dynamic_id_32776] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_32765)[warp_byte_offset_32762] =",
            "\n                    prefix_32811;\n                ((__local\n                  int64_t *) local_mem_32765)[squot64(warp_byte_offset_32763,\n                                                      (int64_t) 8)] =\n                    prefix_32812;\n                acc_32799 = 0;\n                acc_32800 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_32776 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_32811 = ((__local\n                             bool *) local_mem_32765)[warp_byte_offset_32762];\n            prefix_32812 = ((__local\n                             int64_t *) local_mem_32765)[squot64(warp_byte_offset_32763,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_32847;\n        bool x_32849;\n        bool x_32854;\n        \n        x_32854 = prefix_32811;\n        \n        bool x_32856;\n        \n        x_32856 = acc_32799;\n        \n        int64_t x_32848;\n        int64_t x_32850;\n        int64_t x_32855;\n        \n        x_32855 = prefix_32812;\n        \n        int64_t x_32857;\n        \n        x_32857 = acc_32800;\n        \n        bool defunc_1_op_res_32858;\n        \n        defunc_1_op_res_32858 = x_32854 || x_32856;\n        \n        int64_t defunc_1_op_res_32859;\n        \n        if (x_32856) {\n            defunc_1_op_res_32859 = x_32857;\n        } else {\n            int64_t defunc_1_op_res_32860 = add64(x_32855, x_32857);\n            \n            defunc_1_op_res_32859 = defunc_1_op_res_32860;\n        }\n        x_32847 = defunc_1_op_res_32858;\n        x_32848 = defunc_1_op_res_32859;\n        for (int64_t i_32861 = 0; i_32861 < (int64_t) 9; i_32861++) {\n            x_32849 = private_mem_32778[i_32861];\n            x_32850 = private_mem_32780[i_32861];\n            \n            bool defunc_1_op_res_32851;\n            \n            defunc_1_op_res_32851 = x_32847 || x_32849;\n           ",
            " \n            int64_t defunc_1_op_res_32852;\n            \n            if (x_32849) {\n                defunc_1_op_res_32852 = x_32850;\n            } else {\n                int64_t defunc_1_op_res_32853 = add64(x_32848, x_32850);\n                \n                defunc_1_op_res_32852 = defunc_1_op_res_32853;\n            }\n            private_mem_32778[i_32861] = defunc_1_op_res_32851;\n            private_mem_32780[i_32861] = defunc_1_op_res_32852;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32862 = 0; i_32862 < (int64_t) 9; i_32862++) {\n            int64_t sharedIdx_32863 = sext_i32_i64(local_tid_32755 * 9) +\n                    i_32862;\n            \n            ((__local bool *) local_mem_32765)[sharedIdx_32863] =\n                private_mem_32778[i_32862];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32864 = 0; i_32864 < (int64_t) 9; i_32864++) {\n            int32_t sharedIdx_32865 = local_tid_32755 +\n                    sext_i64_i32(segscan_group_sizze_30409 * i_32864);\n            \n            private_mem_32778[i_32864] = ((__local\n                                           bool *) local_mem_32765)[sext_i32_i64(sharedIdx_32865)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32866 = 0; i_32866 < (int64_t) 9; i_32866++) {\n            int64_t sharedIdx_32867 = sext_i32_i64(local_tid_32755 * 9) +\n                    i_32866;\n            \n            ((__local int64_t *) local_mem_32765)[sharedIdx_32867] =\n                private_mem_32780[i_32866];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32868 = 0; i_32868 < (int64_t) 9; i_32868++) {\n            int32_t sharedIdx_32869 = local_tid_32755 +\n                    sext_i64_i32(segscan_group_sizze_30409 * i_32868);\n            \n            private_mem_32780[i_32868] = ((__local\n                                           int64_t *) local_mem_32765)[sext_i32_i64(sharedIdx_32869)",
            "];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_32870 = 0; i_32870 < (int64_t) 9; i_32870++) {\n            int64_t gtid_30413 = blockOff_32777 + segscan_group_sizze_30409 *\n                    i_32870 + sext_i32_i64(local_tid_32755);\n            \n            if (slt64(gtid_30413, n_28846)) {\n                ((__global bool *) mem_31897)[gtid_30413] =\n                    private_mem_32778[i_32870];\n            }\n        }\n        for (int64_t i_32871 = 0; i_32871 < (int64_t) 9; i_32871++) {\n            int64_t gtid_30413 = blockOff_32777 + segscan_group_sizze_30409 *\n                    i_32871 + sext_i32_i64(local_tid_32755);\n            \n            if (slt64(gtid_30413, n_28846)) {\n                ((__global int64_t *) mem_31899)[gtid_30413] =\n                    private_mem_32780[i_32871];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_32776 == sdiv_up64(n_28846, segscan_group_sizze_30409 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_32742)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30409\n}\n__kernel void clusterPointszisegscan_30422(__global int *global_failure,\n                                           uint local_mem_32892_backing_offset_0,\n                                           int64_t n_28846, __global\n                                           unsigned char *mem_31894, __global\n                                           unsigned char *mem_31902, __global\n                                           unsigned char *clusterPointsziid_counter_mem_32875,\n                                           __global\n                                           unsigned char *status_flags_mem_32877,\n                                           __global\n                     ",
            "                      unsigned char *aggregates_mem_32879,\n                                           __global\n                                           unsigned char *incprefixes_mem_32881)\n{\n    #define segscan_group_sizze_30417 (clusterPointszisegscan_group_sizze_30416)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_32892_backing_0 =\n                  &shared_mem[local_mem_32892_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32883;\n    int32_t local_tid_32884;\n    int64_t group_sizze_32887;\n    int32_t wave_sizze_32886;\n    int32_t group_tid_32885;\n    \n    global_tid_32883 = get_global_id(0);\n    local_tid_32884 = get_local_id(0);\n    group_sizze_32887 = get_local_size(0);\n    wave_sizze_32886 = LOCKSTEP_WIDTH;\n    group_tid_32885 = get_group_id(0);\n    \n    int32_t phys_tid_30422;\n    \n    phys_tid_30422 = global_tid_32883;\n    \n    int64_t byte_offsets_32888;\n    \n    byte_offsets_32888 = (int64_t) 0;\n    \n    int64_t byte_offsets_32889;\n    \n    byte_offsets_32889 = segscan_group_sizze_30417 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_32890;\n    \n    warp_byte_offset_32890 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_32891;\n    \n    warp_byte_offset_32891 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_32892;\n    \n    local_mem_32892 = (__local char *) local_mem_32892_backing_0;\n    \n    int64_t trans_arr_len_32893;\n    \n    trans_arr_len_32893 = (int64_t) 9 * segscan_group_sizze_30417;\n    \n    int32_t dynamic_id_32900;\n    \n    if (local_tid_32884 == 0) {\n        dynamic_id_32900 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_32875)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_32892)[(int64_t) 0] = dynamic_id_32900;\n    }\n",
            "    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_32900 = ((__local int32_t *) local_mem_32892)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_32901;\n    \n    blockOff_32901 = sext_i32_i64(dynamic_id_32900) * (int64_t) 9 *\n        segscan_group_sizze_30417;\n    \n    int64_t private_mem_32902[9];\n    \n    // Load and map\n    {\n        for (int64_t i_32904 = 0; i_32904 < (int64_t) 9; i_32904++) {\n            int64_t gtid_30421 = blockOff_32901 +\n                    sext_i32_i64(local_tid_32884) + i_32904 *\n                    segscan_group_sizze_30417;\n            \n            if (slt64(gtid_30421, n_28846)) {\n                int64_t i_p_o_31656 = add64((int64_t) 1, gtid_30421);\n                int64_t rot_i_31657 = smod64(i_p_o_31656, n_28846);\n                bool x_29018 = ((__global bool *) mem_31894)[rot_i_31657];\n                int64_t defunc_0_f_res_29019 = btoi_bool_i64(x_29018);\n                \n                private_mem_32902[i_32904] = defunc_0_f_res_29019;\n            } else {\n                private_mem_32902[i_32904] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32905 = 0; i_32905 < (int64_t) 9; i_32905++) {\n            int64_t sharedIdx_32906 = sext_i32_i64(local_tid_32884) + i_32905 *\n                    segscan_group_sizze_30417;\n            \n            ((__local int64_t *) local_mem_32892)[sharedIdx_32906] =\n                private_mem_32902[i_32905];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_32907 = 0; i_32907 < 9; i_32907++) {\n            int32_t sharedIdx_32908 = local_tid_32884 * 9 + i_32907;\n            \n            private_mem_32902[sext_i32_i64(i_32907)] = ((__local\n                                                         int64_t *) local_mem_32892)[sext_i32_i64(sharedIdx_32908)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_32909 =",
            " 0; i_32909 < (int64_t) 8; i_32909++) {\n            int64_t x_29015;\n            int64_t x_29016;\n            \n            x_29015 = private_mem_32902[i_32909];\n            x_29016 = private_mem_32902[i_32909 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29017;\n            \n            defunc_1_op_res_29017 = add64(x_29015, x_29016);\n            private_mem_32902[i_32909 + (int64_t) 1] = defunc_1_op_res_29017;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32884)] =\n            private_mem_32902[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_32913;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_32910;\n        int64_t x_32911;\n        int64_t x_32914;\n        int64_t x_32915;\n        bool ltid_in_bounds_32917;\n        \n        ltid_in_bounds_32917 = slt64(sext_i32_i64(local_tid_32884),\n                                     segscan_group_sizze_30417);\n        \n        int32_t skip_threads_32918;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_32917) {\n                x_32911 = ((volatile __local\n                            int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_32884)];\n                if ((local_tid_32884 - squot32(local_tid_32884, 32) * 32) ==\n                    0) {\n                    x_32910 = x_32911;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_32918 = 1;\n            while (slt32(skip_threads_32918, 32)) {\n                if (sle32(skip_threads_32918, local_tid_32884 -\n ",
            "                         squot32(local_tid_32884, 32) * 32) &&\n                    ltid_in_bounds_32917) {\n                    // read operands\n                    {\n                        x_32910 = ((volatile __local\n                                    int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_32884) -\n                                                                 sext_i32_i64(skip_threads_32918))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_32912 = add64(x_32910, x_32911);\n                        \n                        x_32910 = defunc_1_op_res_32912;\n                    }\n                }\n                if (sle32(wave_sizze_32886, skip_threads_32918)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_32918, local_tid_32884 -\n                          squot32(local_tid_32884, 32) * 32) &&\n                    ltid_in_bounds_32917) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_32884)] =\n                            x_32910;\n                        x_32911 = x_32910;\n                    }\n                }\n                if (sle32(wave_sizze_32886, skip_threads_32918)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_32918 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid",
            "_32884 - squot32(local_tid_32884, 32) * 32) == 31 &&\n                ltid_in_bounds_32917) {\n                ((volatile __local\n                  int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_32884,\n                                                                   32))] =\n                    x_32910;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_32919;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_32884, 32) == 0 && ltid_in_bounds_32917) {\n                    x_32915 = ((volatile __local\n                                int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_32884)];\n                    if ((local_tid_32884 - squot32(local_tid_32884, 32) * 32) ==\n                        0) {\n                        x_32914 = x_32915;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_32919 = 1;\n                while (slt32(skip_threads_32919, 32)) {\n                    if (sle32(skip_threads_32919, local_tid_32884 -\n                              squot32(local_tid_32884, 32) * 32) &&\n                        (squot32(local_tid_32884, 32) == 0 &&\n                         ltid_in_bounds_32917)) {\n                        // read operands\n                        {\n                            x_32914 = ((volatile __local\n                                        int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                              ",
            "                                              (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_32884) -\n                                                                     sext_i32_i64(skip_threads_32919))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_32916 = add64(x_32914,\n                                                                  x_32915);\n                            \n                            x_32914 = defunc_1_op_res_32916;\n                        }\n                    }\n                    if (sle32(wave_sizze_32886, skip_threads_32919)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_32919, local_tid_32884 -\n                              squot32(local_tid_32884, 32) * 32) &&\n                        (squot32(local_tid_32884, 32) == 0 &&\n                         ltid_in_bounds_32917)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_32884)] =\n                                x_32914;\n                            x_32915 = x_32914;\n                        }\n                    }\n                    if (sle32(wave_sizze_32886, skip_threads_32919)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_32919 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_32884, 32) == 0 || !ltid_in_bounds_32917)) {\n                // read opera",
            "nds\n                {\n                    x_32911 = x_32910;\n                    x_32910 = ((__local\n                                int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_32884,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_32912 = add64(x_32910, x_32911);\n                    \n                    x_32910 = defunc_1_op_res_32912;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32884)] =\n                        x_32910;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_32884, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32884)] =\n                    x_32911;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_32884 == 0) {\n            acc_32913 = ((__local\n                          int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_s",
            "izze_30417 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_32913 = ((__local\n                          int64_t *) local_mem_32892)[squot64(byte_offsets_32888,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_32884) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_32920;\n    \n    prefix_32920 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_32900 == (int64_t) 0 && local_tid_32884 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_32881)[dynamic_id_32900] = acc_32913;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_32877)[dynamic_id_32900] = (int8_t) 2;\n            acc_32913 = (int64_t) 0;\n        }\n        if (!(dynamic_id_32900 == (int64_t) 0) && slt32(local_tid_32884,\n                                                        wave_sizze_32886)) {\n            if (local_tid_32884 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_32879)[dynamic_id_32900] =\n                    acc_32913;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_32877)[dynamic_id_32900] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_32892)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_32877)[dynamic_id_32900 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_32921;\n            \n            status_32921 = ((__local int8_t *) local_mem_32892)[(int64_t) 0];\n            if (sta",
            "tus_32921 == (int8_t) 2) {\n                if (local_tid_32884 == 0) {\n                    prefix_32920 = ((volatile __global\n                                     int64_t *) incprefixes_mem_32881)[dynamic_id_32900 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_32922 = dynamic_id_32900 -\n                        sext_i32_i64(wave_sizze_32886);\n                \n                while (slt32(wave_sizze_32886 * -1, readOffset_32922)) {\n                    int32_t read_i_32923 = readOffset_32922 + local_tid_32884;\n                    int64_t aggr_32924 = (int64_t) 0;\n                    int8_t flag_32925 = (int8_t) 0;\n                    int8_t used_32926 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_32923)) {\n                        flag_32925 = ((volatile __global\n                                       int8_t *) status_flags_mem_32877)[sext_i32_i64(read_i_32923)];\n                        if (flag_32925 == (int8_t) 2) {\n                            aggr_32924 = ((volatile __global\n                                           int64_t *) incprefixes_mem_32881)[sext_i32_i64(read_i_32923)];\n                        } else {\n                            if (flag_32925 == (int8_t) 1) {\n                                aggr_32924 = ((volatile __global\n                                               int64_t *) aggregates_mem_32879)[sext_i32_i64(read_i_32923)];\n                                used_32926 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_32892)[squot64(warp_byte_offset_32890,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32884)] =\n                        aggr_32924;\n                    \n                    int8_t tmp_3292",
            "7;\n                    \n                    tmp_32927 = flag_32925 | used_32926 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_32892)[sext_i32_i64(local_tid_32884)] =\n                        tmp_32927;\n                    mem_fence_local();\n                    flag_32925 = ((volatile __local\n                                   int8_t *) local_mem_32892)[sext_i32_i64(wave_sizze_32886) -\n                                                              (int64_t) 1];\n                    if (local_tid_32884 == 0) {\n                        if (!(flag_32925 == (int8_t) 2)) {\n                            int64_t x_32928 = (int64_t) 0;\n                            int64_t x_32929;\n                            int8_t flag1_32931;\n                            \n                            flag1_32931 = (int8_t) 0;\n                            \n                            int8_t flag2_32932;\n                            int8_t used1_32933;\n                            \n                            used1_32933 = (int8_t) 0;\n                            \n                            int8_t used2_32934;\n                            \n                            for (int32_t i_32935 = 0; i_32935 <\n                                 wave_sizze_32886; i_32935++) {\n                                flag2_32932 = ((__local\n                                                int8_t *) local_mem_32892)[sext_i32_i64(i_32935)];\n                                used2_32934 = lshr8(flag2_32932, (int8_t) 2);\n                                flag2_32932 = flag2_32932 & (int8_t) 3;\n                                x_32929 = ((__local\n                                            int64_t *) local_mem_32892)[squot64(warp_byte_offset_32890,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_32935)];\n                                if (!(flag2_32932 == (int8_t",
            ") 1)) {\n                                    flag1_32931 = flag2_32932;\n                                    used1_32933 = used2_32934;\n                                    x_32928 = x_32929;\n                                } else {\n                                    used1_32933 += used2_32934;\n                                    \n                                    int64_t defunc_1_op_res_32930;\n                                    \n                                    defunc_1_op_res_32930 = add64(x_32928,\n                                                                  x_32929);\n                                    x_32928 = defunc_1_op_res_32930;\n                                }\n                            }\n                            flag_32925 = flag1_32931;\n                            used_32926 = used1_32933;\n                            aggr_32924 = x_32928;\n                        } else {\n                            aggr_32924 = ((__local\n                                           int64_t *) local_mem_32892)[squot64(warp_byte_offset_32890,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_32886) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_32925 == (int8_t) 2) {\n                            readOffset_32922 = wave_sizze_32886 * -1;\n                        } else {\n                            readOffset_32922 -= zext_i8_i32(used_32926);\n                        }\n                        ((__local int32_t *) local_mem_32892)[(int64_t) 0] =\n                            readOffset_32922;\n                        \n                        int64_t x_32936;\n                        \n                        x_32936 = aggr_32924;\n                        \n                        int64_t x_32937;\n                        \n               ",
            "         x_32937 = prefix_32920;\n                        \n                        int64_t defunc_1_op_res_32938;\n                        \n                        defunc_1_op_res_32938 = add64(x_32936, x_32937);\n                        prefix_32920 = defunc_1_op_res_32938;\n                    }\n                    mem_fence_local();\n                    readOffset_32922 = ((__local\n                                         int32_t *) local_mem_32892)[(int64_t) 0];\n                }\n            }\n            if (local_tid_32884 == 0) {\n                int64_t x_32939 = prefix_32920;\n                int64_t x_32940 = acc_32913;\n                int64_t defunc_1_op_res_32941 = add64(x_32939, x_32940);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_32881)[dynamic_id_32900] =\n                    defunc_1_op_res_32941;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_32877)[dynamic_id_32900] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_32892)[squot64(warp_byte_offset_32890,\n                                                      (int64_t) 8)] =\n                    prefix_32920;\n                acc_32913 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_32900 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_32920 = ((__local\n                             int64_t *) local_mem_32892)[squot64(warp_byte_offset_32890,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_32942;\n        int64_t x_32943;\n        int64_t x_32945;\n        \n        x_32945 = prefix_32920;\n        \n        int64_t x_32946;\n        \n        x_32946 = acc_32913;\n        \n        int64_t defunc_1_op_res_32947;\n        \n        defunc_1_op_res_32947 = add64(x_32945,",
            " x_32946);\n        x_32942 = defunc_1_op_res_32947;\n        for (int64_t i_32948 = 0; i_32948 < (int64_t) 9; i_32948++) {\n            x_32943 = private_mem_32902[i_32948];\n            \n            int64_t defunc_1_op_res_32944;\n            \n            defunc_1_op_res_32944 = add64(x_32942, x_32943);\n            private_mem_32902[i_32948] = defunc_1_op_res_32944;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32949 = 0; i_32949 < (int64_t) 9; i_32949++) {\n            int64_t sharedIdx_32950 = sext_i32_i64(local_tid_32884 * 9) +\n                    i_32949;\n            \n            ((__local int64_t *) local_mem_32892)[sharedIdx_32950] =\n                private_mem_32902[i_32949];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_32951 = 0; i_32951 < (int64_t) 9; i_32951++) {\n            int32_t sharedIdx_32952 = local_tid_32884 +\n                    sext_i64_i32(segscan_group_sizze_30417 * i_32951);\n            \n            private_mem_32902[i_32951] = ((__local\n                                           int64_t *) local_mem_32892)[sext_i32_i64(sharedIdx_32952)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_32953 = 0; i_32953 < (int64_t) 9; i_32953++) {\n            int64_t gtid_30421 = blockOff_32901 + segscan_group_sizze_30417 *\n                    i_32953 + sext_i32_i64(local_tid_32884);\n            \n            if (slt64(gtid_30421, n_28846)) {\n                ((__global int64_t *) mem_31902)[gtid_30421] =\n                    private_mem_32902[i_32953];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_32900 == sdiv_up64(n_28846, segscan_group_sizze_30417 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_32875)[(int64_t) 0] = 0;\n  ",
            "      }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30417\n}\n__kernel void clusterPointszisegscan_30436(__global int *global_failure,\n                                           uint local_mem_32988_backing_offset_0,\n                                           int64_t num_segments_29020, __global\n                                           unsigned char *mem_31904, __global\n                                           unsigned char *mem_31908, __global\n                                           unsigned char *clusterPointsziid_counter_mem_32971,\n                                           __global\n                                           unsigned char *status_flags_mem_32973,\n                                           __global\n                                           unsigned char *aggregates_mem_32975,\n                                           __global\n                                           unsigned char *incprefixes_mem_32977)\n{\n    #define segscan_group_sizze_30431 (clusterPointszisegscan_group_sizze_30430)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_32988_backing_0 =\n                  &shared_mem[local_mem_32988_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_32979;\n    int32_t local_tid_32980;\n    int64_t group_sizze_32983;\n    int32_t wave_sizze_32982;\n    int32_t group_tid_32981;\n    \n    global_tid_32979 = get_global_id(0);\n    local_tid_32980 = get_local_id(0);\n    group_sizze_32983 = get_local_size(0);\n    wave_sizze_32982 = LOCKSTEP_WIDTH;\n    group_tid_32981 = get_group_id(0);\n    \n    int32_t phys_tid_30436;\n    \n    phys_tid_30436 = global_tid_32979;\n    \n    int64_t byte_offsets_32984;\n    \n    byte_offsets_32984 = (int64_t) 0;\n    \n    int64_t byte_offsets_32985;\n    \n    byte_offsets_32985 = segscan_group_sizze_30431 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_32986;\n    \n    warp_byte_offset_3",
            "2986 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_32987;\n    \n    warp_byte_offset_32987 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_32988;\n    \n    local_mem_32988 = (__local char *) local_mem_32988_backing_0;\n    \n    int64_t trans_arr_len_32989;\n    \n    trans_arr_len_32989 = (int64_t) 9 * segscan_group_sizze_30431;\n    \n    int32_t dynamic_id_32996;\n    \n    if (local_tid_32980 == 0) {\n        dynamic_id_32996 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_32971)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_32988)[(int64_t) 0] = dynamic_id_32996;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_32996 = ((__local int32_t *) local_mem_32988)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_32997;\n    \n    blockOff_32997 = sext_i32_i64(dynamic_id_32996) * (int64_t) 9 *\n        segscan_group_sizze_30431;\n    \n    int64_t private_mem_32998[9];\n    \n    // Load and map\n    {\n        for (int64_t i_33000 = 0; i_33000 < (int64_t) 9; i_33000++) {\n            int64_t gtid_30435 = blockOff_32997 +\n                    sext_i32_i64(local_tid_32980) + i_33000 *\n                    segscan_group_sizze_30431;\n            \n            if (slt64(gtid_30435, num_segments_29020)) {\n                int64_t x_29037 = ((__global int64_t *) mem_31904)[gtid_30435];\n                \n                private_mem_32998[i_33000] = x_29037;\n            } else {\n                private_mem_32998[i_33000] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33001 = 0; i_33001 < (int64_t) 9; i_33001++) {\n            int64_t sharedIdx_33002 = sext_i32_i64(local_tid_32980) + i_33001 *\n                    segscan_group_sizze_30431;\n            \n            ((__local int64_t ",
            "*) local_mem_32988)[sharedIdx_33002] =\n                private_mem_32998[i_33001];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33003 = 0; i_33003 < 9; i_33003++) {\n            int32_t sharedIdx_33004 = local_tid_32980 * 9 + i_33003;\n            \n            private_mem_32998[sext_i32_i64(i_33003)] = ((__local\n                                                         int64_t *) local_mem_32988)[sext_i32_i64(sharedIdx_33004)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_33005 = 0; i_33005 < (int64_t) 8; i_33005++) {\n            int64_t x_29034;\n            int64_t x_29035;\n            \n            x_29034 = private_mem_32998[i_33005];\n            x_29035 = private_mem_32998[i_33005 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29036;\n            \n            defunc_1_op_res_29036 = add64(x_29034, x_29035);\n            private_mem_32998[i_33005 + (int64_t) 1] = defunc_1_op_res_29036;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32980)] =\n            private_mem_32998[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_33009;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_33006;\n        int64_t x_33007;\n        int64_t x_33010;\n        int64_t x_33011;\n        bool ltid_in_bounds_33013;\n        \n        ltid_in_bounds_33013 = slt64(sext_i32_i64(local_tid_32980),\n                                     segscan_group_sizze_30431);\n        \n        int32_t skip_threads_33014;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_33013) {\n                x_33007 = ((volatile __local\n                            int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n ",
            "                                                               (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_32980)];\n                if ((local_tid_32980 - squot32(local_tid_32980, 32) * 32) ==\n                    0) {\n                    x_33006 = x_33007;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_33014 = 1;\n            while (slt32(skip_threads_33014, 32)) {\n                if (sle32(skip_threads_33014, local_tid_32980 -\n                          squot32(local_tid_32980, 32) * 32) &&\n                    ltid_in_bounds_33013) {\n                    // read operands\n                    {\n                        x_33006 = ((volatile __local\n                                    int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_32980) -\n                                                                 sext_i32_i64(skip_threads_33014))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_33008 = add64(x_33006, x_33007);\n                        \n                        x_33006 = defunc_1_op_res_33008;\n                    }\n                }\n                if (sle32(wave_sizze_32982, skip_threads_33014)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_33014, local_tid_32980 -\n                          squot32(local_tid_32980, 32) * 32) &&\n                    ltid_in_bounds_33013) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                          ",
            "    (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_32980)] =\n                            x_33006;\n                        x_33007 = x_33006;\n                    }\n                }\n                if (sle32(wave_sizze_32982, skip_threads_33014)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_33014 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_32980 - squot32(local_tid_32980, 32) * 32) == 31 &&\n                ltid_in_bounds_33013) {\n                ((volatile __local\n                  int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_32980,\n                                                                   32))] =\n                    x_33006;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_33015;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_32980, 32) == 0 && ltid_in_bounds_33013) {\n                    x_33011 = ((volatile __local\n                                int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_32980)];\n                    if ((local_tid_32980 - squot32(local_tid_32980, 32) * 32) ==\n                        0) {\n                        x_33010 = x_33011;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threa",
            "ds_33015 = 1;\n                while (slt32(skip_threads_33015, 32)) {\n                    if (sle32(skip_threads_33015, local_tid_32980 -\n                              squot32(local_tid_32980, 32) * 32) &&\n                        (squot32(local_tid_32980, 32) == 0 &&\n                         ltid_in_bounds_33013)) {\n                        // read operands\n                        {\n                            x_33010 = ((volatile __local\n                                        int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_32980) -\n                                                                     sext_i32_i64(skip_threads_33015))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_33012 = add64(x_33010,\n                                                                  x_33011);\n                            \n                            x_33010 = defunc_1_op_res_33012;\n                        }\n                    }\n                    if (sle32(wave_sizze_32982, skip_threads_33015)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_33015, local_tid_32980 -\n                              squot32(local_tid_32980, 32) * 32) &&\n                        (squot32(local_tid_32980, 32) == 0 &&\n                         ltid_in_bounds_33013)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_32980)] =\n             ",
            "                   x_33010;\n                            x_33011 = x_33010;\n                        }\n                    }\n                    if (sle32(wave_sizze_32982, skip_threads_33015)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_33015 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_32980, 32) == 0 || !ltid_in_bounds_33013)) {\n                // read operands\n                {\n                    x_33007 = x_33006;\n                    x_33006 = ((__local\n                                int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_32980,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_33008 = add64(x_33006, x_33007);\n                    \n                    x_33006 = defunc_1_op_res_33008;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32980)] =\n                        x_33006;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_32980, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n        ",
            "                                              (int64_t) 8) +\n                                              sext_i32_i64(local_tid_32980)] =\n                    x_33007;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_32980 == 0) {\n            acc_33009 = ((__local\n                          int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30431 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_33009 = ((__local\n                          int64_t *) local_mem_32988)[squot64(byte_offsets_32984,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_32980) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_33016;\n    \n    prefix_33016 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_32996 == (int64_t) 0 && local_tid_32980 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_32977)[dynamic_id_32996] = acc_33009;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_32973)[dynamic_id_32996] = (int8_t) 2;\n            acc_33009 = (int64_t) 0;\n        }\n        if (!(dynamic_id_32996 == (int64_t) 0) && slt32(local_tid_32980,\n                                                        wave_sizze_32982)) {\n            if (local_tid_32980 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_32975)[dynamic_id_32996] =\n                    acc_33009;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_32973)[dynam",
            "ic_id_32996] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_32988)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_32973)[dynamic_id_32996 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_33017;\n            \n            status_33017 = ((__local int8_t *) local_mem_32988)[(int64_t) 0];\n            if (status_33017 == (int8_t) 2) {\n                if (local_tid_32980 == 0) {\n                    prefix_33016 = ((volatile __global\n                                     int64_t *) incprefixes_mem_32977)[dynamic_id_32996 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_33018 = dynamic_id_32996 -\n                        sext_i32_i64(wave_sizze_32982);\n                \n                while (slt32(wave_sizze_32982 * -1, readOffset_33018)) {\n                    int32_t read_i_33019 = readOffset_33018 + local_tid_32980;\n                    int64_t aggr_33020 = (int64_t) 0;\n                    int8_t flag_33021 = (int8_t) 0;\n                    int8_t used_33022 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_33019)) {\n                        flag_33021 = ((volatile __global\n                                       int8_t *) status_flags_mem_32973)[sext_i32_i64(read_i_33019)];\n                        if (flag_33021 == (int8_t) 2) {\n                            aggr_33020 = ((volatile __global\n                                           int64_t *) incprefixes_mem_32977)[sext_i32_i64(read_i_33019)];\n                        } else {\n                            if (flag_33021 == (int8_t) 1) {\n                                aggr_33020 = ((volatile __global\n                                    ",
            "           int64_t *) aggregates_mem_32975)[sext_i32_i64(read_i_33019)];\n                                used_33022 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_32988)[squot64(warp_byte_offset_32986,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_32980)] =\n                        aggr_33020;\n                    \n                    int8_t tmp_33023;\n                    \n                    tmp_33023 = flag_33021 | used_33022 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_32988)[sext_i32_i64(local_tid_32980)] =\n                        tmp_33023;\n                    mem_fence_local();\n                    flag_33021 = ((volatile __local\n                                   int8_t *) local_mem_32988)[sext_i32_i64(wave_sizze_32982) -\n                                                              (int64_t) 1];\n                    if (local_tid_32980 == 0) {\n                        if (!(flag_33021 == (int8_t) 2)) {\n                            int64_t x_33024 = (int64_t) 0;\n                            int64_t x_33025;\n                            int8_t flag1_33027;\n                            \n                            flag1_33027 = (int8_t) 0;\n                            \n                            int8_t flag2_33028;\n                            int8_t used1_33029;\n                            \n                            used1_33029 = (int8_t) 0;\n                            \n                            int8_t used2_33030;\n                            \n                            for (int32_t i_33031 = 0; i_33031 <\n                                 wave_sizze_32982; i_33031++) {\n                                flag2_33028 = ((__local\n                                                int8_t *) local_mem_32988)[sext_i32_i64(",
            "i_33031)];\n                                used2_33030 = lshr8(flag2_33028, (int8_t) 2);\n                                flag2_33028 = flag2_33028 & (int8_t) 3;\n                                x_33025 = ((__local\n                                            int64_t *) local_mem_32988)[squot64(warp_byte_offset_32986,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_33031)];\n                                if (!(flag2_33028 == (int8_t) 1)) {\n                                    flag1_33027 = flag2_33028;\n                                    used1_33029 = used2_33030;\n                                    x_33024 = x_33025;\n                                } else {\n                                    used1_33029 += used2_33030;\n                                    \n                                    int64_t defunc_1_op_res_33026;\n                                    \n                                    defunc_1_op_res_33026 = add64(x_33024,\n                                                                  x_33025);\n                                    x_33024 = defunc_1_op_res_33026;\n                                }\n                            }\n                            flag_33021 = flag1_33027;\n                            used_33022 = used1_33029;\n                            aggr_33020 = x_33024;\n                        } else {\n                            aggr_33020 = ((__local\n                                           int64_t *) local_mem_32988)[squot64(warp_byte_offset_32986,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_32982) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_33021 == (int8_t) 2) {\n",
            "                            readOffset_33018 = wave_sizze_32982 * -1;\n                        } else {\n                            readOffset_33018 -= zext_i8_i32(used_33022);\n                        }\n                        ((__local int32_t *) local_mem_32988)[(int64_t) 0] =\n                            readOffset_33018;\n                        \n                        int64_t x_33032;\n                        \n                        x_33032 = aggr_33020;\n                        \n                        int64_t x_33033;\n                        \n                        x_33033 = prefix_33016;\n                        \n                        int64_t defunc_1_op_res_33034;\n                        \n                        defunc_1_op_res_33034 = add64(x_33032, x_33033);\n                        prefix_33016 = defunc_1_op_res_33034;\n                    }\n                    mem_fence_local();\n                    readOffset_33018 = ((__local\n                                         int32_t *) local_mem_32988)[(int64_t) 0];\n                }\n            }\n            if (local_tid_32980 == 0) {\n                int64_t x_33035 = prefix_33016;\n                int64_t x_33036 = acc_33009;\n                int64_t defunc_1_op_res_33037 = add64(x_33035, x_33036);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_32977)[dynamic_id_32996] =\n                    defunc_1_op_res_33037;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_32973)[dynamic_id_32996] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_32988)[squot64(warp_byte_offset_32986,\n                                                      (int64_t) 8)] =\n                    prefix_33016;\n                acc_33009 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_32996 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_",
            "33016 = ((__local\n                             int64_t *) local_mem_32988)[squot64(warp_byte_offset_32986,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_33038;\n        int64_t x_33039;\n        int64_t x_33041;\n        \n        x_33041 = prefix_33016;\n        \n        int64_t x_33042;\n        \n        x_33042 = acc_33009;\n        \n        int64_t defunc_1_op_res_33043;\n        \n        defunc_1_op_res_33043 = add64(x_33041, x_33042);\n        x_33038 = defunc_1_op_res_33043;\n        for (int64_t i_33044 = 0; i_33044 < (int64_t) 9; i_33044++) {\n            x_33039 = private_mem_32998[i_33044];\n            \n            int64_t defunc_1_op_res_33040;\n            \n            defunc_1_op_res_33040 = add64(x_33038, x_33039);\n            private_mem_32998[i_33044] = defunc_1_op_res_33040;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33045 = 0; i_33045 < (int64_t) 9; i_33045++) {\n            int64_t sharedIdx_33046 = sext_i32_i64(local_tid_32980 * 9) +\n                    i_33045;\n            \n            ((__local int64_t *) local_mem_32988)[sharedIdx_33046] =\n                private_mem_32998[i_33045];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33047 = 0; i_33047 < (int64_t) 9; i_33047++) {\n            int32_t sharedIdx_33048 = local_tid_32980 +\n                    sext_i64_i32(segscan_group_sizze_30431 * i_33047);\n            \n            private_mem_32998[i_33047] = ((__local\n                                           int64_t *) local_mem_32988)[sext_i32_i64(sharedIdx_33048)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_33049 = 0; i_33049 < (int64_t) 9; i_33049++) {\n            int64_t gtid_30435 = blockOff_32997 + segscan_group_sizze_30431 *\n         ",
            "           i_33049 + sext_i32_i64(local_tid_32980);\n            \n            if (slt64(gtid_30435, num_segments_29020)) {\n                ((__global int64_t *) mem_31908)[gtid_30435] =\n                    private_mem_32998[i_33049];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_32996 == sdiv_up64(num_segments_29020,\n                                          segscan_group_sizze_30431 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_32971)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30431\n}\n__kernel void clusterPointszisegscan_30725(__global int *global_failure,\n                                           int failure_is_an_option, __global\n                                           int64_t *global_failure_args,\n                                           uint local_mem_33095_backing_offset_0,\n                                           int64_t defunc_0_f_res_28855,\n                                           int64_t bytes_31829, __global\n                                           unsigned char *mem_31912, __global\n                                           unsigned char *mem_31928, __global\n                                           unsigned char *mem_31931, __global\n                                           unsigned char *mem_31933, __global\n                                           unsigned char *clusterPointsziid_counter_mem_33078,\n                                           __global\n                                           unsigned char *status_flags_mem_33080,\n                                           __global\n                                           unsigned char *aggregates_mem_33082,\n                                           __global\n                                           unsigned char *incprefixes_mem_33084)\n{\n    #define segscan_group_s",
            "izze_30720 (clusterPointszisegscan_group_sizze_30719)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_33095_backing_0 =\n                  &shared_mem[local_mem_33095_backing_offset_0];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_33086;\n    int32_t local_tid_33087;\n    int64_t group_sizze_33090;\n    int32_t wave_sizze_33089;\n    int32_t group_tid_33088;\n    \n    global_tid_33086 = get_global_id(0);\n    local_tid_33087 = get_local_id(0);\n    group_sizze_33090 = get_local_size(0);\n    wave_sizze_33089 = LOCKSTEP_WIDTH;\n    group_tid_33088 = get_group_id(0);\n    \n    int32_t phys_tid_30725;\n    \n    phys_tid_30725 = global_tid_33086;\n    \n    int64_t byte_offsets_33091;\n    \n    byte_offsets_33091 = (int64_t) 0;\n    \n    int64_t byte_offsets_33092;\n    \n    byte_offsets_33092 = segscan_group_sizze_30720 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_33093;\n    \n    warp_byte_offset_33093 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_33094;\n    \n    warp_byte_offset_33094 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_33095;\n    \n    local_mem_33095 = (__local char *) local_mem_33095_backing_0;\n    \n    int64_t trans_arr_len_33096;\n    \n    trans_arr_len_33096 = (int64_t) 9 * segscan_group_sizze_30720;\n    \n    int32_t dynamic_id_33103;\n    \n    if (local_tid_33087 == 0) {\n        dynamic_id_33103 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_33078)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_33095)[(int64_t) 0] = dynamic_id_33103;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n ",
            "   dynamic_id_33103 = ((__local int32_t *) local_mem_33095)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_33104;\n    \n    blockOff_33104 = sext_i32_i64(dynamic_id_33103) * (int64_t) 9 *\n        segscan_group_sizze_30720;\n    \n    int64_t private_mem_33105[9];\n    \n    // Load and map\n    {\n        for (int64_t i_33107 = 0; i_33107 < (int64_t) 9; i_33107++) {\n            int64_t gtid_30724 = blockOff_33104 +\n                    sext_i32_i64(local_tid_33087) + i_33107 *\n                    segscan_group_sizze_30720;\n            \n            if (slt64(gtid_30724, bytes_31829)) {\n                int64_t new_index_31678 = squot64(gtid_30724, (int64_t) 8);\n                int64_t binop_y_31680 = (int64_t) 8 * new_index_31678;\n                int64_t new_index_31681 = gtid_30724 - binop_y_31680;\n                int32_t x_29102 = ((__global\n                                    int32_t *) mem_31928)[new_index_31678 *\n                                                          (int64_t) 8 +\n                                                          new_index_31681];\n                int64_t s_29103 = sext_i32_i64(x_29102);\n                bool x_29104 = sle64((int64_t) 0, s_29103);\n                bool y_29105 = slt64(s_29103, defunc_0_f_res_28855);\n                bool bounds_check_29106 = x_29104 && y_29105;\n                bool index_certs_29107;\n                \n                if (!bounds_check_29106) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 2) ==\n                            -1) {\n                            global_failure_args[0] = s_29103;\n                            global_failure_args[1] = defunc_0_f_res_28855;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                int64_t defunc_0_f_res_29108 = ((__global\n                           ",
            "                      int64_t *) mem_31912)[s_29103];\n                \n                ((__global int64_t *) mem_31933)[gtid_30724] =\n                    defunc_0_f_res_29108;\n                private_mem_33105[i_33107] = defunc_0_f_res_29108;\n            } else {\n                private_mem_33105[i_33107] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33108 = 0; i_33108 < (int64_t) 9; i_33108++) {\n            int64_t sharedIdx_33109 = sext_i32_i64(local_tid_33087) + i_33108 *\n                    segscan_group_sizze_30720;\n            \n            ((__local int64_t *) local_mem_33095)[sharedIdx_33109] =\n                private_mem_33105[i_33108];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33110 = 0; i_33110 < 9; i_33110++) {\n            int32_t sharedIdx_33111 = local_tid_33087 * 9 + i_33110;\n            \n            private_mem_33105[sext_i32_i64(i_33110)] = ((__local\n                                                         int64_t *) local_mem_33095)[sext_i32_i64(sharedIdx_33111)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_33112 = 0; i_33112 < (int64_t) 8; i_33112++) {\n            int64_t x_29099;\n            int64_t x_29100;\n            \n            x_29099 = private_mem_33105[i_33112];\n            x_29100 = private_mem_33105[i_33112 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29101;\n            \n            defunc_1_op_res_29101 = add64(x_29099, x_29100);\n            private_mem_33105[i_33112 + (int64_t) 1] = defunc_1_op_res_29101;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33087)] =\n            private_mem_33105[(int64_t) 8];\n      ",
            "  barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_33116;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_33113;\n        int64_t x_33114;\n        int64_t x_33117;\n        int64_t x_33118;\n        bool ltid_in_bounds_33120;\n        \n        ltid_in_bounds_33120 = slt64(sext_i32_i64(local_tid_33087),\n                                     segscan_group_sizze_30720);\n        \n        int32_t skip_threads_33121;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_33120) {\n                x_33114 = ((volatile __local\n                            int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_33087)];\n                if ((local_tid_33087 - squot32(local_tid_33087, 32) * 32) ==\n                    0) {\n                    x_33113 = x_33114;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_33121 = 1;\n            while (slt32(skip_threads_33121, 32)) {\n                if (sle32(skip_threads_33121, local_tid_33087 -\n                          squot32(local_tid_33087, 32) * 32) &&\n                    ltid_in_bounds_33120) {\n                    // read operands\n                    {\n                        x_33113 = ((volatile __local\n                                    int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_33087) -\n                                                                 sext_i32_i64(skip_threads_33121))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_33115 = add64(x_33113, x_33114);\n     ",
            "                   \n                        x_33113 = defunc_1_op_res_33115;\n                    }\n                }\n                if (sle32(wave_sizze_33089, skip_threads_33121)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_33121, local_tid_33087 -\n                          squot32(local_tid_33087, 32) * 32) &&\n                    ltid_in_bounds_33120) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_33087)] =\n                            x_33113;\n                        x_33114 = x_33113;\n                    }\n                }\n                if (sle32(wave_sizze_33089, skip_threads_33121)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_33121 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_33087 - squot32(local_tid_33087, 32) * 32) == 31 &&\n                ltid_in_bounds_33120) {\n                ((volatile __local\n                  int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_33087,\n                                                                   32))] =\n                    x_33113;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_33122;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_t",
            "id_33087, 32) == 0 && ltid_in_bounds_33120) {\n                    x_33118 = ((volatile __local\n                                int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_33087)];\n                    if ((local_tid_33087 - squot32(local_tid_33087, 32) * 32) ==\n                        0) {\n                        x_33117 = x_33118;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_33122 = 1;\n                while (slt32(skip_threads_33122, 32)) {\n                    if (sle32(skip_threads_33122, local_tid_33087 -\n                              squot32(local_tid_33087, 32) * 32) &&\n                        (squot32(local_tid_33087, 32) == 0 &&\n                         ltid_in_bounds_33120)) {\n                        // read operands\n                        {\n                            x_33117 = ((volatile __local\n                                        int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_33087) -\n                                                                     sext_i32_i64(skip_threads_33122))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_33119 = add64(x_33117,\n                                                                  x_33118);\n                            \n                            x_33117 = defunc_1_op_res_33119;\n                        }\n                    }\n                    if (sle32(wave_sizze_33089, skip_threads_33122)) {\n                        barrier(CLK_LOCAL_M",
            "EM_FENCE);\n                    }\n                    if (sle32(skip_threads_33122, local_tid_33087 -\n                              squot32(local_tid_33087, 32) * 32) &&\n                        (squot32(local_tid_33087, 32) == 0 &&\n                         ltid_in_bounds_33120)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_33087)] =\n                                x_33117;\n                            x_33118 = x_33117;\n                        }\n                    }\n                    if (sle32(wave_sizze_33089, skip_threads_33122)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_33122 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_33087, 32) == 0 || !ltid_in_bounds_33120)) {\n                // read operands\n                {\n                    x_33114 = x_33113;\n                    x_33113 = ((__local\n                                int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_33087,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_33115 = add64(x_33113, x_33114);\n                    \n                    x_33113 = defunc_1_op_res_33115;\n       ",
            "         }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33087)] =\n                        x_33113;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_33087, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33087)] =\n                    x_33114;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_33087 == 0) {\n            acc_33116 = ((__local\n                          int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30720 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_33116 = ((__local\n                          int64_t *) local_mem_33095)[squot64(byte_offsets_33091,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_33087) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_33123;\n    \n    prefix_33123 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_33103 == (int64_t) 0 && local_tid_33087 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_33084)[dynamic_id_331",
            "03] = acc_33116;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_33080)[dynamic_id_33103] = (int8_t) 2;\n            acc_33116 = (int64_t) 0;\n        }\n        if (!(dynamic_id_33103 == (int64_t) 0) && slt32(local_tid_33087,\n                                                        wave_sizze_33089)) {\n            if (local_tid_33087 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_33082)[dynamic_id_33103] =\n                    acc_33116;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_33080)[dynamic_id_33103] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_33095)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_33080)[dynamic_id_33103 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_33124;\n            \n            status_33124 = ((__local int8_t *) local_mem_33095)[(int64_t) 0];\n            if (status_33124 == (int8_t) 2) {\n                if (local_tid_33087 == 0) {\n                    prefix_33123 = ((volatile __global\n                                     int64_t *) incprefixes_mem_33084)[dynamic_id_33103 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_33125 = dynamic_id_33103 -\n                        sext_i32_i64(wave_sizze_33089);\n                \n                while (slt32(wave_sizze_33089 * -1, readOffset_33125)) {\n                    int32_t read_i_33126 = readOffset_33125 + local_tid_33087;\n                    int64_t aggr_33127 = (int64_t) 0;\n                    int8_t flag_33128 = (int8_t) 0;\n                    int8_t used_33",
            "129 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_33126)) {\n                        flag_33128 = ((volatile __global\n                                       int8_t *) status_flags_mem_33080)[sext_i32_i64(read_i_33126)];\n                        if (flag_33128 == (int8_t) 2) {\n                            aggr_33127 = ((volatile __global\n                                           int64_t *) incprefixes_mem_33084)[sext_i32_i64(read_i_33126)];\n                        } else {\n                            if (flag_33128 == (int8_t) 1) {\n                                aggr_33127 = ((volatile __global\n                                               int64_t *) aggregates_mem_33082)[sext_i32_i64(read_i_33126)];\n                                used_33129 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_33095)[squot64(warp_byte_offset_33093,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33087)] =\n                        aggr_33127;\n                    \n                    int8_t tmp_33130;\n                    \n                    tmp_33130 = flag_33128 | used_33129 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_33095)[sext_i32_i64(local_tid_33087)] =\n                        tmp_33130;\n                    mem_fence_local();\n                    flag_33128 = ((volatile __local\n                                   int8_t *) local_mem_33095)[sext_i32_i64(wave_sizze_33089) -\n                                                              (int64_t) 1];\n                    if (local_tid_33087 == 0) {\n                        if (!(flag_33128 == (int8_t) 2)) {\n                            int64_t x_33131 = (int64_t) 0;\n                            int64_t x_33132;\n                            int8_t flag1_33134;\n    ",
            "                        \n                            flag1_33134 = (int8_t) 0;\n                            \n                            int8_t flag2_33135;\n                            int8_t used1_33136;\n                            \n                            used1_33136 = (int8_t) 0;\n                            \n                            int8_t used2_33137;\n                            \n                            for (int32_t i_33138 = 0; i_33138 <\n                                 wave_sizze_33089; i_33138++) {\n                                flag2_33135 = ((__local\n                                                int8_t *) local_mem_33095)[sext_i32_i64(i_33138)];\n                                used2_33137 = lshr8(flag2_33135, (int8_t) 2);\n                                flag2_33135 = flag2_33135 & (int8_t) 3;\n                                x_33132 = ((__local\n                                            int64_t *) local_mem_33095)[squot64(warp_byte_offset_33093,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_33138)];\n                                if (!(flag2_33135 == (int8_t) 1)) {\n                                    flag1_33134 = flag2_33135;\n                                    used1_33136 = used2_33137;\n                                    x_33131 = x_33132;\n                                } else {\n                                    used1_33136 += used2_33137;\n                                    \n                                    int64_t defunc_1_op_res_33133;\n                                    \n                                    defunc_1_op_res_33133 = add64(x_33131,\n                                                                  x_33132);\n                                    x_33131 = defunc_1_op_res_33133;\n                                }\n                            }\n                            flag_33128 = flag1_3",
            "3134;\n                            used_33129 = used1_33136;\n                            aggr_33127 = x_33131;\n                        } else {\n                            aggr_33127 = ((__local\n                                           int64_t *) local_mem_33095)[squot64(warp_byte_offset_33093,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_33089) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_33128 == (int8_t) 2) {\n                            readOffset_33125 = wave_sizze_33089 * -1;\n                        } else {\n                            readOffset_33125 -= zext_i8_i32(used_33129);\n                        }\n                        ((__local int32_t *) local_mem_33095)[(int64_t) 0] =\n                            readOffset_33125;\n                        \n                        int64_t x_33139;\n                        \n                        x_33139 = aggr_33127;\n                        \n                        int64_t x_33140;\n                        \n                        x_33140 = prefix_33123;\n                        \n                        int64_t defunc_1_op_res_33141;\n                        \n                        defunc_1_op_res_33141 = add64(x_33139, x_33140);\n                        prefix_33123 = defunc_1_op_res_33141;\n                    }\n                    mem_fence_local();\n                    readOffset_33125 = ((__local\n                                         int32_t *) local_mem_33095)[(int64_t) 0];\n                }\n            }\n            if (local_tid_33087 == 0) {\n                int64_t x_33142 = prefix_33123;\n                int64_t x_33143 = acc_33116;\n                int64_t defunc_1_op_res_33144 = add64(x_33142, x_33143);\n                \n                ((volatile __global\n          ",
            "        int64_t *) incprefixes_mem_33084)[dynamic_id_33103] =\n                    defunc_1_op_res_33144;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_33080)[dynamic_id_33103] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_33095)[squot64(warp_byte_offset_33093,\n                                                      (int64_t) 8)] =\n                    prefix_33123;\n                acc_33116 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_33103 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_33123 = ((__local\n                             int64_t *) local_mem_33095)[squot64(warp_byte_offset_33093,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_33145;\n        int64_t x_33146;\n        int64_t x_33148;\n        \n        x_33148 = prefix_33123;\n        \n        int64_t x_33149;\n        \n        x_33149 = acc_33116;\n        \n        int64_t defunc_1_op_res_33150;\n        \n        defunc_1_op_res_33150 = add64(x_33148, x_33149);\n        x_33145 = defunc_1_op_res_33150;\n        for (int64_t i_33151 = 0; i_33151 < (int64_t) 9; i_33151++) {\n            x_33146 = private_mem_33105[i_33151];\n            \n            int64_t defunc_1_op_res_33147;\n            \n            defunc_1_op_res_33147 = add64(x_33145, x_33146);\n            private_mem_33105[i_33151] = defunc_1_op_res_33147;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33152 = 0; i_33152 < (int64_t) 9; i_33152++) {\n            int64_t sharedIdx_33153 = sext_i32_i64(local_tid_33087 * 9) +\n                    i_33152;\n            \n            ((__local int64_t *) local_mem_33095)[sharedIdx_33153] =\n                private_mem_33105[i_33152];\n        }\n   ",
            "     barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33154 = 0; i_33154 < (int64_t) 9; i_33154++) {\n            int32_t sharedIdx_33155 = local_tid_33087 +\n                    sext_i64_i32(segscan_group_sizze_30720 * i_33154);\n            \n            private_mem_33105[i_33154] = ((__local\n                                           int64_t *) local_mem_33095)[sext_i32_i64(sharedIdx_33155)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_33156 = 0; i_33156 < (int64_t) 9; i_33156++) {\n            int64_t gtid_30724 = blockOff_33104 + segscan_group_sizze_30720 *\n                    i_33156 + sext_i32_i64(local_tid_33087);\n            \n            if (slt64(gtid_30724, bytes_31829)) {\n                ((__global int64_t *) mem_31931)[gtid_30724] =\n                    private_mem_33105[i_33156];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_33103 == sdiv_up64(bytes_31829,\n                                          segscan_group_sizze_30720 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_33078)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30720\n}\n__kernel void clusterPointszisegscan_30758(__global int *global_failure,\n                                           uint local_mem_33355_backing_offset_0,\n                                           int64_t defunc_2_reduce_res_29111,\n                                           __global unsigned char *mem_31938,\n                                           __global unsigned char *mem_31942,\n                                           __global unsigned char *mem_31944,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_33332,\n                      ",
            "                     __global\n                                           unsigned char *status_flags_mem_33334,\n                                           __global\n                                           unsigned char *aggregates_mem_33336,\n                                           __global\n                                           unsigned char *incprefixes_mem_33338,\n                                           __global\n                                           unsigned char *aggregates_mem_33340,\n                                           __global\n                                           unsigned char *incprefixes_mem_33342)\n{\n    #define segscan_group_sizze_30753 (clusterPointszisegscan_group_sizze_30752)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_33355_backing_0 =\n                  &shared_mem[local_mem_33355_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33344;\n    int32_t local_tid_33345;\n    int64_t group_sizze_33348;\n    int32_t wave_sizze_33347;\n    int32_t group_tid_33346;\n    \n    global_tid_33344 = get_global_id(0);\n    local_tid_33345 = get_local_id(0);\n    group_sizze_33348 = get_local_size(0);\n    wave_sizze_33347 = LOCKSTEP_WIDTH;\n    group_tid_33346 = get_group_id(0);\n    \n    int32_t phys_tid_30758;\n    \n    phys_tid_30758 = global_tid_33344;\n    \n    int64_t byte_offsets_33349;\n    \n    byte_offsets_33349 = (int64_t) 0;\n    \n    int64_t byte_offsets_33350;\n    \n    byte_offsets_33350 = segscan_group_sizze_30753;\n    \n    int64_t byte_offsets_33351;\n    \n    byte_offsets_33351 = sdiv_up64(segscan_group_sizze_30753, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_30753 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_33352;\n    \n    warp_byte_offset_33352 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_33353;\n    \n    warp_byte_offset_33353 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_33354;\n    \n",
            "    warp_byte_offset_33354 = (int64_t) 320;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_33355;\n    \n    local_mem_33355 = (__local char *) local_mem_33355_backing_0;\n    \n    int64_t trans_arr_len_33356;\n    \n    trans_arr_len_33356 = (int64_t) 9 * segscan_group_sizze_30753;\n    \n    int32_t dynamic_id_33366;\n    \n    if (local_tid_33345 == 0) {\n        dynamic_id_33366 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_33332)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_33355)[(int64_t) 0] = dynamic_id_33366;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_33366 = ((__local int32_t *) local_mem_33355)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_33367;\n    \n    blockOff_33367 = sext_i32_i64(dynamic_id_33366) * (int64_t) 9 *\n        segscan_group_sizze_30753;\n    \n    bool private_mem_33368[9];\n    int64_t private_mem_33370[9];\n    \n    // Load and map\n    {\n        for (int64_t i_33372 = 0; i_33372 < (int64_t) 9; i_33372++) {\n            int64_t gtid_30757 = blockOff_33367 +\n                    sext_i32_i64(local_tid_33345) + i_33372 *\n                    segscan_group_sizze_30753;\n            \n            if (slt64(gtid_30757, defunc_2_reduce_res_29111)) {\n                int64_t x_29137 = ((__global int64_t *) mem_31938)[gtid_30757];\n                bool defunc_0_f_res_29138 = slt64((int64_t) 0, x_29137);\n                \n                private_mem_33368[i_33372] = defunc_0_f_res_29138;\n                private_mem_33370[i_33372] = x_29137;\n            } else {\n                private_mem_33368[i_33372] = 0;\n                private_mem_33370[i_33372] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33373 = 0; i_33373 < (int64_t) 9; i_33373++) {\n           ",
            " int64_t sharedIdx_33374 = sext_i32_i64(local_tid_33345) + i_33373 *\n                    segscan_group_sizze_30753;\n            \n            ((__local bool *) local_mem_33355)[sharedIdx_33374] =\n                private_mem_33368[i_33373];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33375 = 0; i_33375 < 9; i_33375++) {\n            int32_t sharedIdx_33376 = local_tid_33345 * 9 + i_33375;\n            \n            private_mem_33368[sext_i32_i64(i_33375)] = ((__local\n                                                         bool *) local_mem_33355)[sext_i32_i64(sharedIdx_33376)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33377 = 0; i_33377 < (int64_t) 9; i_33377++) {\n            int64_t sharedIdx_33378 = sext_i32_i64(local_tid_33345) + i_33377 *\n                    segscan_group_sizze_30753;\n            \n            ((__local int64_t *) local_mem_33355)[sharedIdx_33378] =\n                private_mem_33370[i_33377];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33379 = 0; i_33379 < 9; i_33379++) {\n            int32_t sharedIdx_33380 = local_tid_33345 * 9 + i_33379;\n            \n            private_mem_33370[sext_i32_i64(i_33379)] = ((__local\n                                                         int64_t *) local_mem_33355)[sext_i32_i64(sharedIdx_33380)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_33381 = 0; i_33381 < (int64_t) 8; i_33381++) {\n            bool x_29130;\n            bool x_29132;\n            \n            x_29130 = private_mem_33368[i_33381];\n            x_29132 = private_mem_33368[i_33381 + (int64_t) 1];\n            \n            int64_t x_29131;\n            int64_t x_29133;\n            \n            x_29131 = private_mem_33370[i_33381];\n            x_29133 = private_mem_33370[i_33381 + (int64_t) 1];\n            \n            bool defunc_1_op_res_29134;\n            \n            defunc_1_op_res_29134 = x_29130 || x_2913",
            "2;\n            \n            int64_t defunc_1_op_res_29135;\n            \n            if (x_29132) {\n                defunc_1_op_res_29135 = x_29133;\n            } else {\n                int64_t defunc_1_op_res_29136 = add64(x_29131, x_29133);\n                \n                defunc_1_op_res_29135 = defunc_1_op_res_29136;\n            }\n            private_mem_33368[i_33381 + (int64_t) 1] = defunc_1_op_res_29134;\n            private_mem_33370[i_33381 + (int64_t) 1] = defunc_1_op_res_29135;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_33355)[byte_offsets_33349 +\n                                           sext_i32_i64(local_tid_33345)] =\n            private_mem_33368[(int64_t) 8];\n        ((__local int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33345)] =\n            private_mem_33370[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_33389;\n    int64_t acc_33390;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_33382;\n        int64_t x_33383;\n        bool x_33384;\n        int64_t x_33385;\n        bool x_33391;\n        int64_t x_33392;\n        bool x_33393;\n        int64_t x_33394;\n        bool ltid_in_bounds_33398;\n        \n        ltid_in_bounds_33398 = slt64(sext_i32_i64(local_tid_33345),\n                                     segscan_group_sizze_30753);\n        \n        int32_t skip_threads_33399;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_33398) {\n                x_33384 = ((volatile __local\n                            bool *) local_mem_33355)[byte_offsets_33349 +\n                                                     sext_i32_i64(local_tid_33345)];\n                x_33385 = ((volatile __local\n                            int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n              ",
            "                                                  (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_33345)];\n                if ((local_tid_33345 - squot32(local_tid_33345, 32) * 32) ==\n                    0) {\n                    x_33382 = x_33384;\n                    x_33383 = x_33385;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_33399 = 1;\n            while (slt32(skip_threads_33399, 32)) {\n                if (sle32(skip_threads_33399, local_tid_33345 -\n                          squot32(local_tid_33345, 32) * 32) &&\n                    ltid_in_bounds_33398) {\n                    // read operands\n                    {\n                        x_33382 = ((volatile __local\n                                    bool *) local_mem_33355)[byte_offsets_33349 +\n                                                             (sext_i32_i64(local_tid_33345) -\n                                                              sext_i32_i64(skip_threads_33399))];\n                        x_33383 = ((volatile __local\n                                    int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_33345) -\n                                                                 sext_i32_i64(skip_threads_33399))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_33386 = x_33382 || x_33384;\n                        int64_t defunc_1_op_res_33387;\n                        \n                        if (x_33384) {\n                            defunc_1_op_res_33387 = x_33385;\n                        } else {\n                            int64_t defunc_1_op_res_33388 = add64(x_33383,\n                                     ",
            "                             x_33385);\n                            \n                            defunc_1_op_res_33387 = defunc_1_op_res_33388;\n                        }\n                        x_33382 = defunc_1_op_res_33386;\n                        x_33383 = defunc_1_op_res_33387;\n                    }\n                }\n                if (sle32(wave_sizze_33347, skip_threads_33399)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_33399, local_tid_33345 -\n                          squot32(local_tid_33345, 32) * 32) &&\n                    ltid_in_bounds_33398) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_33355)[byte_offsets_33349 +\n                                                   sext_i32_i64(local_tid_33345)] =\n                            x_33382;\n                        x_33384 = x_33382;\n                        ((volatile __local\n                          int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_33345)] =\n                            x_33383;\n                        x_33385 = x_33383;\n                    }\n                }\n                if (sle32(wave_sizze_33347, skip_threads_33399)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_33399 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_33345 - squot32(local_tid_33345, 32) * 32) == 31 &&\n                ltid_in_bounds_33398) {\n                ((volatile __local bool *) local_mem_33355)[byte_offsets_33349 +\n                                                            sext_i32_i64(squot32(local_tid_33345,\n          ",
            "                                                                       32))] =\n                    x_33382;\n                ((volatile __local\n                  int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_33345,\n                                                                   32))] =\n                    x_33383;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_33400;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_33345, 32) == 0 && ltid_in_bounds_33398) {\n                    x_33393 = ((volatile __local\n                                bool *) local_mem_33355)[byte_offsets_33349 +\n                                                         sext_i32_i64(local_tid_33345)];\n                    x_33394 = ((volatile __local\n                                int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_33345)];\n                    if ((local_tid_33345 - squot32(local_tid_33345, 32) * 32) ==\n                        0) {\n                        x_33391 = x_33393;\n                        x_33392 = x_33394;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_33400 = 1;\n                while (slt32(skip_threads_33400, 32)) {\n                    if (sle32(skip_threads_33400, local_tid_33345 -\n                              squot32(local_tid_33345, 32) * 32) &&\n                        (squot32(local_tid_33345, 32) == 0 &&\n                         l",
            "tid_in_bounds_33398)) {\n                        // read operands\n                        {\n                            x_33391 = ((volatile __local\n                                        bool *) local_mem_33355)[byte_offsets_33349 +\n                                                                 (sext_i32_i64(local_tid_33345) -\n                                                                  sext_i32_i64(skip_threads_33400))];\n                            x_33392 = ((volatile __local\n                                        int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_33345) -\n                                                                     sext_i32_i64(skip_threads_33400))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_33395 = x_33391 || x_33393;\n                            int64_t defunc_1_op_res_33396;\n                            \n                            if (x_33393) {\n                                defunc_1_op_res_33396 = x_33394;\n                            } else {\n                                int64_t defunc_1_op_res_33397 = add64(x_33392,\n                                                                      x_33394);\n                                \n                                defunc_1_op_res_33396 = defunc_1_op_res_33397;\n                            }\n                            x_33391 = defunc_1_op_res_33395;\n                            x_33392 = defunc_1_op_res_33396;\n                        }\n                    }\n                    if (sle32(wave_sizze_33347, skip_threads_33400)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_33400, local_tid_33345 -\n                       ",
            "       squot32(local_tid_33345, 32) * 32) &&\n                        (squot32(local_tid_33345, 32) == 0 &&\n                         ltid_in_bounds_33398)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_33355)[byte_offsets_33349 +\n                                                       sext_i32_i64(local_tid_33345)] =\n                                x_33391;\n                            x_33393 = x_33391;\n                            ((volatile __local\n                              int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_33345)] =\n                                x_33392;\n                            x_33394 = x_33392;\n                        }\n                    }\n                    if (sle32(wave_sizze_33347, skip_threads_33400)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_33400 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_33345, 32) == 0 || !ltid_in_bounds_33398)) {\n                // read operands\n                {\n                    x_33384 = x_33382;\n                    x_33385 = x_33383;\n                    x_33382 = ((__local\n                                bool *) local_mem_33355)[byte_offsets_33349 +\n                                                         (sext_i32_i64(squot32(local_tid_33345,\n                                                                               32)) -\n                                                          (int64_t) 1)];\n                    x_33383 = ((__local\n                                int64_t *) local_mem_33355)[squot64(byte_offset",
            "s_33350,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_33345,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_33386 = x_33382 || x_33384;\n                    int64_t defunc_1_op_res_33387;\n                    \n                    if (x_33384) {\n                        defunc_1_op_res_33387 = x_33385;\n                    } else {\n                        int64_t defunc_1_op_res_33388 = add64(x_33383, x_33385);\n                        \n                        defunc_1_op_res_33387 = defunc_1_op_res_33388;\n                    }\n                    x_33382 = defunc_1_op_res_33386;\n                    x_33383 = defunc_1_op_res_33387;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_33355)[byte_offsets_33349 +\n                                                       sext_i32_i64(local_tid_33345)] =\n                        x_33382;\n                    ((__local\n                      int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33345)] =\n                        x_33383;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_33345, 32) == 0) {\n                ((__local bool *) local_mem_33355)[byte_offsets_33349 +\n                                                   sext_i32_i64(local_tid_33345)] =\n                    x_33384;\n                ((__local\n                  int64_t *) loc",
            "al_mem_33355)[squot64(byte_offsets_33350,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33345)] =\n                    x_33385;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_33345 == 0) {\n            acc_33389 = ((__local bool *) local_mem_33355)[byte_offsets_33349 +\n                                                           (segscan_group_sizze_30753 -\n                                                            (int64_t) 1)];\n            acc_33390 = ((__local\n                          int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30753 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_33389 = ((__local bool *) local_mem_33355)[byte_offsets_33349 +\n                                                           (sext_i32_i64(local_tid_33345) -\n                                                            (int64_t) 1)];\n            acc_33390 = ((__local\n                          int64_t *) local_mem_33355)[squot64(byte_offsets_33350,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_33345) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_33401;\n    \n    prefix_33401 = 0;\n    \n    int64_t prefix_33402;\n    \n    prefix_33402 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_33366 == (int64_t) 0 && local_tid_33345 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_33338)[dynamic_id_33366] = acc_33389;\n            ((volatile __global\n              int64_t *)",
            " incprefixes_mem_33342)[dynamic_id_33366] = acc_33390;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_33334)[dynamic_id_33366] = (int8_t) 2;\n            acc_33389 = 0;\n            acc_33390 = (int64_t) 0;\n        }\n        if (!(dynamic_id_33366 == (int64_t) 0) && slt32(local_tid_33345,\n                                                        wave_sizze_33347)) {\n            if (local_tid_33345 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_33336)[dynamic_id_33366] = acc_33389;\n                ((volatile __global\n                  int64_t *) aggregates_mem_33340)[dynamic_id_33366] =\n                    acc_33390;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_33334)[dynamic_id_33366] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_33355)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_33334)[dynamic_id_33366 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_33403;\n            \n            status_33403 = ((__local int8_t *) local_mem_33355)[(int64_t) 0];\n            if (status_33403 == (int8_t) 2) {\n                if (local_tid_33345 == 0) {\n                    prefix_33401 = ((volatile __global\n                                     bool *) incprefixes_mem_33338)[dynamic_id_33366 -\n                                                                    (int64_t) 1];\n                    prefix_33402 = ((volatile __global\n                                     int64_t *) incprefixes_mem_33342)[dynamic_id_33366 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t",
            " readOffset_33404 = dynamic_id_33366 -\n                        sext_i32_i64(wave_sizze_33347);\n                \n                while (slt32(wave_sizze_33347 * -1, readOffset_33404)) {\n                    int32_t read_i_33405 = readOffset_33404 + local_tid_33345;\n                    bool aggr_33406 = 0;\n                    int64_t aggr_33407 = (int64_t) 0;\n                    int8_t flag_33408 = (int8_t) 0;\n                    int8_t used_33409 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_33405)) {\n                        flag_33408 = ((volatile __global\n                                       int8_t *) status_flags_mem_33334)[sext_i32_i64(read_i_33405)];\n                        if (flag_33408 == (int8_t) 2) {\n                            aggr_33406 = ((volatile __global\n                                           bool *) incprefixes_mem_33338)[sext_i32_i64(read_i_33405)];\n                            aggr_33407 = ((volatile __global\n                                           int64_t *) incprefixes_mem_33342)[sext_i32_i64(read_i_33405)];\n                        } else {\n                            if (flag_33408 == (int8_t) 1) {\n                                aggr_33406 = ((volatile __global\n                                               bool *) aggregates_mem_33336)[sext_i32_i64(read_i_33405)];\n                                aggr_33407 = ((volatile __global\n                                               int64_t *) aggregates_mem_33340)[sext_i32_i64(read_i_33405)];\n                                used_33409 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_33355)[warp_byte_offset_33352 +\n                                                       sext_i32_i64(local_tid_33345)] =\n                        aggr_33406;\n                    ((__local\n                      int64_t *) local_mem_33355)[squot64(warp_byte_offset_33353,\n                               ",
            "                           (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33345)] =\n                        aggr_33407;\n                    \n                    int8_t tmp_33410;\n                    \n                    tmp_33410 = flag_33408 | used_33409 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_33355)[sext_i32_i64(local_tid_33345)] =\n                        tmp_33410;\n                    mem_fence_local();\n                    flag_33408 = ((volatile __local\n                                   int8_t *) local_mem_33355)[sext_i32_i64(wave_sizze_33347) -\n                                                              (int64_t) 1];\n                    if (local_tid_33345 == 0) {\n                        if (!(flag_33408 == (int8_t) 2)) {\n                            bool x_33411 = 0;\n                            int64_t x_33412 = (int64_t) 0;\n                            bool x_33413;\n                            int64_t x_33414;\n                            int8_t flag1_33418;\n                            \n                            flag1_33418 = (int8_t) 0;\n                            \n                            int8_t flag2_33419;\n                            int8_t used1_33420;\n                            \n                            used1_33420 = (int8_t) 0;\n                            \n                            int8_t used2_33421;\n                            \n                            for (int32_t i_33422 = 0; i_33422 <\n                                 wave_sizze_33347; i_33422++) {\n                                flag2_33419 = ((__local\n                                                int8_t *) local_mem_33355)[sext_i32_i64(i_33422)];\n                                used2_33421 = lshr8(flag2_33419, (int8_t) 2);\n                                flag2_33419 = flag2_33419 & (int8_t) 3;\n                                x_33413 = ((__local\n                                            bool *",
            ") local_mem_33355)[warp_byte_offset_33352 +\n                                                                     sext_i32_i64(i_33422)];\n                                x_33414 = ((__local\n                                            int64_t *) local_mem_33355)[squot64(warp_byte_offset_33353,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_33422)];\n                                if (!(flag2_33419 == (int8_t) 1)) {\n                                    flag1_33418 = flag2_33419;\n                                    used1_33420 = used2_33421;\n                                    x_33411 = x_33413;\n                                    x_33412 = x_33414;\n                                } else {\n                                    used1_33420 += used2_33421;\n                                    \n                                    bool defunc_1_op_res_33415;\n                                    \n                                    defunc_1_op_res_33415 = x_33411 || x_33413;\n                                    \n                                    int64_t defunc_1_op_res_33416;\n                                    \n                                    if (x_33413) {\n                                        defunc_1_op_res_33416 = x_33414;\n                                    } else {\n                                        int64_t defunc_1_op_res_33417 =\n                                                add64(x_33412, x_33414);\n                                        \n                                        defunc_1_op_res_33416 =\n                                            defunc_1_op_res_33417;\n                                    }\n                                    x_33411 = defunc_1_op_res_33415;\n                                    x_33412 = defunc_1_op_res_33416;\n                                }\n                            }\n                      ",
            "      flag_33408 = flag1_33418;\n                            used_33409 = used1_33420;\n                            aggr_33406 = x_33411;\n                            aggr_33407 = x_33412;\n                        } else {\n                            aggr_33406 = ((__local\n                                           bool *) local_mem_33355)[warp_byte_offset_33352 +\n                                                                    (sext_i32_i64(wave_sizze_33347) -\n                                                                     (int64_t) 1)];\n                            aggr_33407 = ((__local\n                                           int64_t *) local_mem_33355)[squot64(warp_byte_offset_33353,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_33347) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_33408 == (int8_t) 2) {\n                            readOffset_33404 = wave_sizze_33347 * -1;\n                        } else {\n                            readOffset_33404 -= zext_i8_i32(used_33409);\n                        }\n                        ((__local int32_t *) local_mem_33355)[(int64_t) 0] =\n                            readOffset_33404;\n                        \n                        bool x_33423;\n                        \n                        x_33423 = aggr_33406;\n                        \n                        int64_t x_33424;\n                        \n                        x_33424 = aggr_33407;\n                        \n                        bool x_33425;\n                        \n                        x_33425 = prefix_33401;\n                        \n                        int64_t x_33426;\n                        \n                        x_33426 = prefix_33402;\n                        \n                        bool defu",
            "nc_1_op_res_33427;\n                        \n                        defunc_1_op_res_33427 = x_33423 || x_33425;\n                        \n                        int64_t defunc_1_op_res_33428;\n                        \n                        if (x_33425) {\n                            defunc_1_op_res_33428 = x_33426;\n                        } else {\n                            int64_t defunc_1_op_res_33429 = add64(x_33424,\n                                                                  x_33426);\n                            \n                            defunc_1_op_res_33428 = defunc_1_op_res_33429;\n                        }\n                        prefix_33401 = defunc_1_op_res_33427;\n                        prefix_33402 = defunc_1_op_res_33428;\n                    }\n                    mem_fence_local();\n                    readOffset_33404 = ((__local\n                                         int32_t *) local_mem_33355)[(int64_t) 0];\n                }\n            }\n            if (local_tid_33345 == 0) {\n                bool x_33430 = prefix_33401;\n                int64_t x_33431 = prefix_33402;\n                bool x_33432 = acc_33389;\n                int64_t x_33433 = acc_33390;\n                bool defunc_1_op_res_33434 = x_33430 || x_33432;\n                int64_t defunc_1_op_res_33435;\n                \n                if (x_33432) {\n                    defunc_1_op_res_33435 = x_33433;\n                } else {\n                    int64_t defunc_1_op_res_33436 = add64(x_33431, x_33433);\n                    \n                    defunc_1_op_res_33435 = defunc_1_op_res_33436;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_33338)[dynamic_id_33366] =\n                    defunc_1_op_res_33434;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_33342)[dynamic_id_33366] =\n                    defunc_1_op_res_33435;\n                mem_fence_global();\n                ((volatile __global\n        ",
            "          int8_t *) status_flags_mem_33334)[dynamic_id_33366] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_33355)[warp_byte_offset_33352] =\n                    prefix_33401;\n                ((__local\n                  int64_t *) local_mem_33355)[squot64(warp_byte_offset_33353,\n                                                      (int64_t) 8)] =\n                    prefix_33402;\n                acc_33389 = 0;\n                acc_33390 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_33366 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_33401 = ((__local\n                             bool *) local_mem_33355)[warp_byte_offset_33352];\n            prefix_33402 = ((__local\n                             int64_t *) local_mem_33355)[squot64(warp_byte_offset_33353,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_33437;\n        bool x_33439;\n        bool x_33444;\n        \n        x_33444 = prefix_33401;\n        \n        bool x_33446;\n        \n        x_33446 = acc_33389;\n        \n        int64_t x_33438;\n        int64_t x_33440;\n        int64_t x_33445;\n        \n        x_33445 = prefix_33402;\n        \n        int64_t x_33447;\n        \n        x_33447 = acc_33390;\n        \n        bool defunc_1_op_res_33448;\n        \n        defunc_1_op_res_33448 = x_33444 || x_33446;\n        \n        int64_t defunc_1_op_res_33449;\n        \n        if (x_33446) {\n            defunc_1_op_res_33449 = x_33447;\n        } else {\n            int64_t defunc_1_op_res_33450 = add64(x_33445, x_33447);\n            \n            defunc_1_op_res_33449 = defunc_1_op_res_33450;\n        }\n        x_33437 = defunc_1_op_res_33448;\n        x_33438 = defunc_1_op_res_33449;\n        for (int64_t i_33451 = 0; i_33451 < (int64_t) 9; i_33451++) {\n            x_33439 = private_mem_33368[i_33451];\n           ",
            " x_33440 = private_mem_33370[i_33451];\n            \n            bool defunc_1_op_res_33441;\n            \n            defunc_1_op_res_33441 = x_33437 || x_33439;\n            \n            int64_t defunc_1_op_res_33442;\n            \n            if (x_33439) {\n                defunc_1_op_res_33442 = x_33440;\n            } else {\n                int64_t defunc_1_op_res_33443 = add64(x_33438, x_33440);\n                \n                defunc_1_op_res_33442 = defunc_1_op_res_33443;\n            }\n            private_mem_33368[i_33451] = defunc_1_op_res_33441;\n            private_mem_33370[i_33451] = defunc_1_op_res_33442;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33452 = 0; i_33452 < (int64_t) 9; i_33452++) {\n            int64_t sharedIdx_33453 = sext_i32_i64(local_tid_33345 * 9) +\n                    i_33452;\n            \n            ((__local bool *) local_mem_33355)[sharedIdx_33453] =\n                private_mem_33368[i_33452];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33454 = 0; i_33454 < (int64_t) 9; i_33454++) {\n            int32_t sharedIdx_33455 = local_tid_33345 +\n                    sext_i64_i32(segscan_group_sizze_30753 * i_33454);\n            \n            private_mem_33368[i_33454] = ((__local\n                                           bool *) local_mem_33355)[sext_i32_i64(sharedIdx_33455)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33456 = 0; i_33456 < (int64_t) 9; i_33456++) {\n            int64_t sharedIdx_33457 = sext_i32_i64(local_tid_33345 * 9) +\n                    i_33456;\n            \n            ((__local int64_t *) local_mem_33355)[sharedIdx_33457] =\n                private_mem_33370[i_33456];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33458 = 0; i_33458 < (int64_t) 9; i_33458++) {\n            int32_t sharedIdx_33459 = local_tid_33345 +\n                    sext_i64_i32(segscan_group_sizze_30753 * i_",
            "33458);\n            \n            private_mem_33370[i_33458] = ((__local\n                                           int64_t *) local_mem_33355)[sext_i32_i64(sharedIdx_33459)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_33460 = 0; i_33460 < (int64_t) 9; i_33460++) {\n            int64_t gtid_30757 = blockOff_33367 + segscan_group_sizze_30753 *\n                    i_33460 + sext_i32_i64(local_tid_33345);\n            \n            if (slt64(gtid_30757, defunc_2_reduce_res_29111)) {\n                ((__global bool *) mem_31942)[gtid_30757] =\n                    private_mem_33368[i_33460];\n            }\n        }\n        for (int64_t i_33461 = 0; i_33461 < (int64_t) 9; i_33461++) {\n            int64_t gtid_30757 = blockOff_33367 + segscan_group_sizze_30753 *\n                    i_33461 + sext_i32_i64(local_tid_33345);\n            \n            if (slt64(gtid_30757, defunc_2_reduce_res_29111)) {\n                ((__global int64_t *) mem_31944)[gtid_30757] =\n                    private_mem_33370[i_33461];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_33366 == sdiv_up64(defunc_2_reduce_res_29111,\n                                          segscan_group_sizze_30753 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_33332)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30753\n}\n__kernel void clusterPointszisegscan_30784(__global int *global_failure,\n                                           uint local_mem_33493_backing_offset_0,\n                                           int64_t defunc_2_reduce_res_29111,\n                                           __global unsigned char *mem_31947,\n                                           __global unsigned char *mem_31950,\n                         ",
            "                  __global unsigned char *mem_31952,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_33470,\n                                           __global\n                                           unsigned char *status_flags_mem_33472,\n                                           __global\n                                           unsigned char *aggregates_mem_33474,\n                                           __global\n                                           unsigned char *incprefixes_mem_33476,\n                                           __global\n                                           unsigned char *aggregates_mem_33478,\n                                           __global\n                                           unsigned char *incprefixes_mem_33480)\n{\n    #define segscan_group_sizze_30779 (clusterPointszisegscan_group_sizze_30778)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_33493_backing_0 =\n                  &shared_mem[local_mem_33493_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33482;\n    int32_t local_tid_33483;\n    int64_t group_sizze_33486;\n    int32_t wave_sizze_33485;\n    int32_t group_tid_33484;\n    \n    global_tid_33482 = get_global_id(0);\n    local_tid_33483 = get_local_id(0);\n    group_sizze_33486 = get_local_size(0);\n    wave_sizze_33485 = LOCKSTEP_WIDTH;\n    group_tid_33484 = get_group_id(0);\n    \n    int32_t phys_tid_30784;\n    \n    phys_tid_30784 = global_tid_33482;\n    \n    int64_t byte_offsets_33487;\n    \n    byte_offsets_33487 = (int64_t) 0;\n    \n    int64_t byte_offsets_33488;\n    \n    byte_offsets_33488 = segscan_group_sizze_30779;\n    \n    int64_t byte_offsets_33489;\n    \n    byte_offsets_33489 = sdiv_up64(segscan_group_sizze_30779, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_30779 * (int64_t) 8;\n  ",
            "  \n    int64_t warp_byte_offset_33490;\n    \n    warp_byte_offset_33490 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_33491;\n    \n    warp_byte_offset_33491 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_33492;\n    \n    warp_byte_offset_33492 = (int64_t) 320;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_33493;\n    \n    local_mem_33493 = (__local char *) local_mem_33493_backing_0;\n    \n    int64_t trans_arr_len_33494;\n    \n    trans_arr_len_33494 = (int64_t) 9 * segscan_group_sizze_30779;\n    \n    int32_t dynamic_id_33504;\n    \n    if (local_tid_33483 == 0) {\n        dynamic_id_33504 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_33470)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_33493)[(int64_t) 0] = dynamic_id_33504;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_33504 = ((__local int32_t *) local_mem_33493)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_33505;\n    \n    blockOff_33505 = sext_i32_i64(dynamic_id_33504) * (int64_t) 9 *\n        segscan_group_sizze_30779;\n    \n    bool private_mem_33506[9];\n    int64_t private_mem_33508[9];\n    \n    // Load and map\n    {\n        for (int64_t i_33510 = 0; i_33510 < (int64_t) 9; i_33510++) {\n            int64_t gtid_30783 = blockOff_33505 +\n                    sext_i32_i64(local_tid_33483) + i_33510 *\n                    segscan_group_sizze_30779;\n            \n            if (slt64(gtid_30783, defunc_2_reduce_res_29111)) {\n                bool x_29228 = ((__global bool *) mem_31947)[gtid_30783];\n                \n                private_mem_33506[i_33510] = x_29228;\n                private_mem_33508[i_33510] = (int64_t) 1;\n            } else {\n                private_mem_33506[i_33510] = 0;\n                private_mem_33508[i_33510] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose sca",
            "n inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33511 = 0; i_33511 < (int64_t) 9; i_33511++) {\n            int64_t sharedIdx_33512 = sext_i32_i64(local_tid_33483) + i_33511 *\n                    segscan_group_sizze_30779;\n            \n            ((__local bool *) local_mem_33493)[sharedIdx_33512] =\n                private_mem_33506[i_33511];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33513 = 0; i_33513 < 9; i_33513++) {\n            int32_t sharedIdx_33514 = local_tid_33483 * 9 + i_33513;\n            \n            private_mem_33506[sext_i32_i64(i_33513)] = ((__local\n                                                         bool *) local_mem_33493)[sext_i32_i64(sharedIdx_33514)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33515 = 0; i_33515 < (int64_t) 9; i_33515++) {\n            int64_t sharedIdx_33516 = sext_i32_i64(local_tid_33483) + i_33515 *\n                    segscan_group_sizze_30779;\n            \n            ((__local int64_t *) local_mem_33493)[sharedIdx_33516] =\n                private_mem_33508[i_33515];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33517 = 0; i_33517 < 9; i_33517++) {\n            int32_t sharedIdx_33518 = local_tid_33483 * 9 + i_33517;\n            \n            private_mem_33508[sext_i32_i64(i_33517)] = ((__local\n                                                         int64_t *) local_mem_33493)[sext_i32_i64(sharedIdx_33518)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_33519 = 0; i_33519 < (int64_t) 8; i_33519++) {\n            bool x_29221;\n            bool x_29223;\n            \n            x_29221 = private_mem_33506[i_33519];\n            x_29223 = private_mem_33506[i_33519 + (int64_t) 1];\n            \n            int64_t x_29222;\n            int64_t x_29224;\n            \n            x_29222 = private_mem_33508[i_33519];\n            x_29224 = private_mem_33508[i_33519 +",
            " (int64_t) 1];\n            \n            bool defunc_1_op_res_29225;\n            \n            defunc_1_op_res_29225 = x_29221 || x_29223;\n            \n            int64_t defunc_1_op_res_29226;\n            \n            if (x_29223) {\n                defunc_1_op_res_29226 = x_29224;\n            } else {\n                int64_t defunc_1_op_res_29227 = add64(x_29222, x_29224);\n                \n                defunc_1_op_res_29226 = defunc_1_op_res_29227;\n            }\n            private_mem_33506[i_33519 + (int64_t) 1] = defunc_1_op_res_29225;\n            private_mem_33508[i_33519 + (int64_t) 1] = defunc_1_op_res_29226;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_33493)[byte_offsets_33487 +\n                                           sext_i32_i64(local_tid_33483)] =\n            private_mem_33506[(int64_t) 8];\n        ((__local int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33483)] =\n            private_mem_33508[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_33527;\n    int64_t acc_33528;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_33520;\n        int64_t x_33521;\n        bool x_33522;\n        int64_t x_33523;\n        bool x_33529;\n        int64_t x_33530;\n        bool x_33531;\n        int64_t x_33532;\n        bool ltid_in_bounds_33536;\n        \n        ltid_in_bounds_33536 = slt64(sext_i32_i64(local_tid_33483),\n                                     segscan_group_sizze_30779);\n        \n        int32_t skip_threads_33537;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_33536) {\n                x_33522 = ((volatile __local\n                            bool *) local_mem_33493)[byte_offsets_33487 +\n                                                     sext_i32_i64(local_tid_33483)];\n         ",
            "       x_33523 = ((volatile __local\n                            int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_33483)];\n                if ((local_tid_33483 - squot32(local_tid_33483, 32) * 32) ==\n                    0) {\n                    x_33520 = x_33522;\n                    x_33521 = x_33523;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_33537 = 1;\n            while (slt32(skip_threads_33537, 32)) {\n                if (sle32(skip_threads_33537, local_tid_33483 -\n                          squot32(local_tid_33483, 32) * 32) &&\n                    ltid_in_bounds_33536) {\n                    // read operands\n                    {\n                        x_33520 = ((volatile __local\n                                    bool *) local_mem_33493)[byte_offsets_33487 +\n                                                             (sext_i32_i64(local_tid_33483) -\n                                                              sext_i32_i64(skip_threads_33537))];\n                        x_33521 = ((volatile __local\n                                    int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_33483) -\n                                                                 sext_i32_i64(skip_threads_33537))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_33524 = x_33520 || x_33522;\n                        int64_t defunc_1_op_res_33525;\n                        \n                        if (x_33522) {\n                            defunc_1_op_res_33525 = x_33523;\n           ",
            "             } else {\n                            int64_t defunc_1_op_res_33526 = add64(x_33521,\n                                                                  x_33523);\n                            \n                            defunc_1_op_res_33525 = defunc_1_op_res_33526;\n                        }\n                        x_33520 = defunc_1_op_res_33524;\n                        x_33521 = defunc_1_op_res_33525;\n                    }\n                }\n                if (sle32(wave_sizze_33485, skip_threads_33537)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_33537, local_tid_33483 -\n                          squot32(local_tid_33483, 32) * 32) &&\n                    ltid_in_bounds_33536) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_33493)[byte_offsets_33487 +\n                                                   sext_i32_i64(local_tid_33483)] =\n                            x_33520;\n                        x_33522 = x_33520;\n                        ((volatile __local\n                          int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_33483)] =\n                            x_33521;\n                        x_33523 = x_33521;\n                    }\n                }\n                if (sle32(wave_sizze_33485, skip_threads_33537)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_33537 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_33483 - squot32(local_tid_33483, 32) * 32) == 31 &&\n                ltid_in_bounds_33536) {\n                ((volatile __local bool *) local_mem_33",
            "493)[byte_offsets_33487 +\n                                                            sext_i32_i64(squot32(local_tid_33483,\n                                                                                 32))] =\n                    x_33520;\n                ((volatile __local\n                  int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_33483,\n                                                                   32))] =\n                    x_33521;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_33538;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_33483, 32) == 0 && ltid_in_bounds_33536) {\n                    x_33531 = ((volatile __local\n                                bool *) local_mem_33493)[byte_offsets_33487 +\n                                                         sext_i32_i64(local_tid_33483)];\n                    x_33532 = ((volatile __local\n                                int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_33483)];\n                    if ((local_tid_33483 - squot32(local_tid_33483, 32) * 32) ==\n                        0) {\n                        x_33529 = x_33531;\n                        x_33530 = x_33532;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_33538 = 1;\n                while (slt32(skip_threads_33538, 32)) {\n                    if (sle32(skip_threads_33538, local_tid_33483 -\n                      ",
            "        squot32(local_tid_33483, 32) * 32) &&\n                        (squot32(local_tid_33483, 32) == 0 &&\n                         ltid_in_bounds_33536)) {\n                        // read operands\n                        {\n                            x_33529 = ((volatile __local\n                                        bool *) local_mem_33493)[byte_offsets_33487 +\n                                                                 (sext_i32_i64(local_tid_33483) -\n                                                                  sext_i32_i64(skip_threads_33538))];\n                            x_33530 = ((volatile __local\n                                        int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_33483) -\n                                                                     sext_i32_i64(skip_threads_33538))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_33533 = x_33529 || x_33531;\n                            int64_t defunc_1_op_res_33534;\n                            \n                            if (x_33531) {\n                                defunc_1_op_res_33534 = x_33532;\n                            } else {\n                                int64_t defunc_1_op_res_33535 = add64(x_33530,\n                                                                      x_33532);\n                                \n                                defunc_1_op_res_33534 = defunc_1_op_res_33535;\n                            }\n                            x_33529 = defunc_1_op_res_33533;\n                            x_33530 = defunc_1_op_res_33534;\n                        }\n                    }\n                    if (sle32(wave_sizze_33485, skip_threads_33538)) {\n                        barrier(C",
            "LK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_33538, local_tid_33483 -\n                              squot32(local_tid_33483, 32) * 32) &&\n                        (squot32(local_tid_33483, 32) == 0 &&\n                         ltid_in_bounds_33536)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_33493)[byte_offsets_33487 +\n                                                       sext_i32_i64(local_tid_33483)] =\n                                x_33529;\n                            x_33531 = x_33529;\n                            ((volatile __local\n                              int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_33483)] =\n                                x_33530;\n                            x_33532 = x_33530;\n                        }\n                    }\n                    if (sle32(wave_sizze_33485, skip_threads_33538)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_33538 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_33483, 32) == 0 || !ltid_in_bounds_33536)) {\n                // read operands\n                {\n                    x_33522 = x_33520;\n                    x_33523 = x_33521;\n                    x_33520 = ((__local\n                                bool *) local_mem_33493)[byte_offsets_33487 +\n                                                         (sext_i32_i64(squot32(local_tid_33483,\n                                                                               32)) -\n                                                          ",
            "(int64_t) 1)];\n                    x_33521 = ((__local\n                                int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_33483,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_33524 = x_33520 || x_33522;\n                    int64_t defunc_1_op_res_33525;\n                    \n                    if (x_33522) {\n                        defunc_1_op_res_33525 = x_33523;\n                    } else {\n                        int64_t defunc_1_op_res_33526 = add64(x_33521, x_33523);\n                        \n                        defunc_1_op_res_33525 = defunc_1_op_res_33526;\n                    }\n                    x_33520 = defunc_1_op_res_33524;\n                    x_33521 = defunc_1_op_res_33525;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_33493)[byte_offsets_33487 +\n                                                       sext_i32_i64(local_tid_33483)] =\n                        x_33520;\n                    ((__local\n                      int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33483)] =\n                        x_33521;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_33483, 32) == 0) {\n                ((__local bool *) local_mem_33493)[byte_offsets_33487 +\n                                     ",
            "              sext_i32_i64(local_tid_33483)] =\n                    x_33522;\n                ((__local\n                  int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33483)] =\n                    x_33523;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_33483 == 0) {\n            acc_33527 = ((__local bool *) local_mem_33493)[byte_offsets_33487 +\n                                                           (segscan_group_sizze_30779 -\n                                                            (int64_t) 1)];\n            acc_33528 = ((__local\n                          int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30779 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_33527 = ((__local bool *) local_mem_33493)[byte_offsets_33487 +\n                                                           (sext_i32_i64(local_tid_33483) -\n                                                            (int64_t) 1)];\n            acc_33528 = ((__local\n                          int64_t *) local_mem_33493)[squot64(byte_offsets_33488,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_33483) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_33539;\n    \n    prefix_33539 = 0;\n    \n    int64_t prefix_33540;\n    \n    prefix_33540 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_33504 == (int64_t) 0 && local_tid_33483 == 0) {\n            ((volatile __globa",
            "l\n              bool *) incprefixes_mem_33476)[dynamic_id_33504] = acc_33527;\n            ((volatile __global\n              int64_t *) incprefixes_mem_33480)[dynamic_id_33504] = acc_33528;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_33472)[dynamic_id_33504] = (int8_t) 2;\n            acc_33527 = 0;\n            acc_33528 = (int64_t) 0;\n        }\n        if (!(dynamic_id_33504 == (int64_t) 0) && slt32(local_tid_33483,\n                                                        wave_sizze_33485)) {\n            if (local_tid_33483 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_33474)[dynamic_id_33504] = acc_33527;\n                ((volatile __global\n                  int64_t *) aggregates_mem_33478)[dynamic_id_33504] =\n                    acc_33528;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_33472)[dynamic_id_33504] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_33493)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_33472)[dynamic_id_33504 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_33541;\n            \n            status_33541 = ((__local int8_t *) local_mem_33493)[(int64_t) 0];\n            if (status_33541 == (int8_t) 2) {\n                if (local_tid_33483 == 0) {\n                    prefix_33539 = ((volatile __global\n                                     bool *) incprefixes_mem_33476)[dynamic_id_33504 -\n                                                                    (int64_t) 1];\n                    prefix_33540 = ((volatile __global\n                                     int64_t *) incprefixes_mem_33480)[dynamic_id_33504 -\n             ",
            "                                                          (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_33542 = dynamic_id_33504 -\n                        sext_i32_i64(wave_sizze_33485);\n                \n                while (slt32(wave_sizze_33485 * -1, readOffset_33542)) {\n                    int32_t read_i_33543 = readOffset_33542 + local_tid_33483;\n                    bool aggr_33544 = 0;\n                    int64_t aggr_33545 = (int64_t) 0;\n                    int8_t flag_33546 = (int8_t) 0;\n                    int8_t used_33547 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_33543)) {\n                        flag_33546 = ((volatile __global\n                                       int8_t *) status_flags_mem_33472)[sext_i32_i64(read_i_33543)];\n                        if (flag_33546 == (int8_t) 2) {\n                            aggr_33544 = ((volatile __global\n                                           bool *) incprefixes_mem_33476)[sext_i32_i64(read_i_33543)];\n                            aggr_33545 = ((volatile __global\n                                           int64_t *) incprefixes_mem_33480)[sext_i32_i64(read_i_33543)];\n                        } else {\n                            if (flag_33546 == (int8_t) 1) {\n                                aggr_33544 = ((volatile __global\n                                               bool *) aggregates_mem_33474)[sext_i32_i64(read_i_33543)];\n                                aggr_33545 = ((volatile __global\n                                               int64_t *) aggregates_mem_33478)[sext_i32_i64(read_i_33543)];\n                                used_33547 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_33493)[warp_byte_offset_33490 +\n                                                       sext_i32_i64(local_tid_33483)] =\n                        aggr_33544;\n         ",
            "           ((__local\n                      int64_t *) local_mem_33493)[squot64(warp_byte_offset_33491,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33483)] =\n                        aggr_33545;\n                    \n                    int8_t tmp_33548;\n                    \n                    tmp_33548 = flag_33546 | used_33547 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_33493)[sext_i32_i64(local_tid_33483)] =\n                        tmp_33548;\n                    mem_fence_local();\n                    flag_33546 = ((volatile __local\n                                   int8_t *) local_mem_33493)[sext_i32_i64(wave_sizze_33485) -\n                                                              (int64_t) 1];\n                    if (local_tid_33483 == 0) {\n                        if (!(flag_33546 == (int8_t) 2)) {\n                            bool x_33549 = 0;\n                            int64_t x_33550 = (int64_t) 0;\n                            bool x_33551;\n                            int64_t x_33552;\n                            int8_t flag1_33556;\n                            \n                            flag1_33556 = (int8_t) 0;\n                            \n                            int8_t flag2_33557;\n                            int8_t used1_33558;\n                            \n                            used1_33558 = (int8_t) 0;\n                            \n                            int8_t used2_33559;\n                            \n                            for (int32_t i_33560 = 0; i_33560 <\n                                 wave_sizze_33485; i_33560++) {\n                                flag2_33557 = ((__local\n                                                int8_t *) local_mem_33493)[sext_i32_i64(i_33560)];\n                                used2_33559 = lshr8(flag2_33557, (int8_t) 2);\n                                flag2_33",
            "557 = flag2_33557 & (int8_t) 3;\n                                x_33551 = ((__local\n                                            bool *) local_mem_33493)[warp_byte_offset_33490 +\n                                                                     sext_i32_i64(i_33560)];\n                                x_33552 = ((__local\n                                            int64_t *) local_mem_33493)[squot64(warp_byte_offset_33491,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_33560)];\n                                if (!(flag2_33557 == (int8_t) 1)) {\n                                    flag1_33556 = flag2_33557;\n                                    used1_33558 = used2_33559;\n                                    x_33549 = x_33551;\n                                    x_33550 = x_33552;\n                                } else {\n                                    used1_33558 += used2_33559;\n                                    \n                                    bool defunc_1_op_res_33553;\n                                    \n                                    defunc_1_op_res_33553 = x_33549 || x_33551;\n                                    \n                                    int64_t defunc_1_op_res_33554;\n                                    \n                                    if (x_33551) {\n                                        defunc_1_op_res_33554 = x_33552;\n                                    } else {\n                                        int64_t defunc_1_op_res_33555 =\n                                                add64(x_33550, x_33552);\n                                        \n                                        defunc_1_op_res_33554 =\n                                            defunc_1_op_res_33555;\n                                    }\n                                    x_33549 = defunc_1_op_res_33553;\n                     ",
            "               x_33550 = defunc_1_op_res_33554;\n                                }\n                            }\n                            flag_33546 = flag1_33556;\n                            used_33547 = used1_33558;\n                            aggr_33544 = x_33549;\n                            aggr_33545 = x_33550;\n                        } else {\n                            aggr_33544 = ((__local\n                                           bool *) local_mem_33493)[warp_byte_offset_33490 +\n                                                                    (sext_i32_i64(wave_sizze_33485) -\n                                                                     (int64_t) 1)];\n                            aggr_33545 = ((__local\n                                           int64_t *) local_mem_33493)[squot64(warp_byte_offset_33491,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_33485) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_33546 == (int8_t) 2) {\n                            readOffset_33542 = wave_sizze_33485 * -1;\n                        } else {\n                            readOffset_33542 -= zext_i8_i32(used_33547);\n                        }\n                        ((__local int32_t *) local_mem_33493)[(int64_t) 0] =\n                            readOffset_33542;\n                        \n                        bool x_33561;\n                        \n                        x_33561 = aggr_33544;\n                        \n                        int64_t x_33562;\n                        \n                        x_33562 = aggr_33545;\n                        \n                        bool x_33563;\n                        \n                        x_33563 = prefix_33539;\n                        \n                        int64_t x_3356",
            "4;\n                        \n                        x_33564 = prefix_33540;\n                        \n                        bool defunc_1_op_res_33565;\n                        \n                        defunc_1_op_res_33565 = x_33561 || x_33563;\n                        \n                        int64_t defunc_1_op_res_33566;\n                        \n                        if (x_33563) {\n                            defunc_1_op_res_33566 = x_33564;\n                        } else {\n                            int64_t defunc_1_op_res_33567 = add64(x_33562,\n                                                                  x_33564);\n                            \n                            defunc_1_op_res_33566 = defunc_1_op_res_33567;\n                        }\n                        prefix_33539 = defunc_1_op_res_33565;\n                        prefix_33540 = defunc_1_op_res_33566;\n                    }\n                    mem_fence_local();\n                    readOffset_33542 = ((__local\n                                         int32_t *) local_mem_33493)[(int64_t) 0];\n                }\n            }\n            if (local_tid_33483 == 0) {\n                bool x_33568 = prefix_33539;\n                int64_t x_33569 = prefix_33540;\n                bool x_33570 = acc_33527;\n                int64_t x_33571 = acc_33528;\n                bool defunc_1_op_res_33572 = x_33568 || x_33570;\n                int64_t defunc_1_op_res_33573;\n                \n                if (x_33570) {\n                    defunc_1_op_res_33573 = x_33571;\n                } else {\n                    int64_t defunc_1_op_res_33574 = add64(x_33569, x_33571);\n                    \n                    defunc_1_op_res_33573 = defunc_1_op_res_33574;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_33476)[dynamic_id_33504] =\n                    defunc_1_op_res_33572;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_33480)[dynamic_i",
            "d_33504] =\n                    defunc_1_op_res_33573;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_33472)[dynamic_id_33504] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_33493)[warp_byte_offset_33490] =\n                    prefix_33539;\n                ((__local\n                  int64_t *) local_mem_33493)[squot64(warp_byte_offset_33491,\n                                                      (int64_t) 8)] =\n                    prefix_33540;\n                acc_33527 = 0;\n                acc_33528 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_33504 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_33539 = ((__local\n                             bool *) local_mem_33493)[warp_byte_offset_33490];\n            prefix_33540 = ((__local\n                             int64_t *) local_mem_33493)[squot64(warp_byte_offset_33491,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_33575;\n        bool x_33577;\n        bool x_33582;\n        \n        x_33582 = prefix_33539;\n        \n        bool x_33584;\n        \n        x_33584 = acc_33527;\n        \n        int64_t x_33576;\n        int64_t x_33578;\n        int64_t x_33583;\n        \n        x_33583 = prefix_33540;\n        \n        int64_t x_33585;\n        \n        x_33585 = acc_33528;\n        \n        bool defunc_1_op_res_33586;\n        \n        defunc_1_op_res_33586 = x_33582 || x_33584;\n        \n        int64_t defunc_1_op_res_33587;\n        \n        if (x_33584) {\n            defunc_1_op_res_33587 = x_33585;\n        } else {\n            int64_t defunc_1_op_res_33588 = add64(x_33583, x_33585);\n            \n            defunc_1_op_res_33587 = defunc_1_op_res_33588;\n        }\n        x_33575 = defunc_1_op_res_33586;\n        x_33576 = defunc_1_op_res_3358",
            "7;\n        for (int64_t i_33589 = 0; i_33589 < (int64_t) 9; i_33589++) {\n            x_33577 = private_mem_33506[i_33589];\n            x_33578 = private_mem_33508[i_33589];\n            \n            bool defunc_1_op_res_33579;\n            \n            defunc_1_op_res_33579 = x_33575 || x_33577;\n            \n            int64_t defunc_1_op_res_33580;\n            \n            if (x_33577) {\n                defunc_1_op_res_33580 = x_33578;\n            } else {\n                int64_t defunc_1_op_res_33581 = add64(x_33576, x_33578);\n                \n                defunc_1_op_res_33580 = defunc_1_op_res_33581;\n            }\n            private_mem_33506[i_33589] = defunc_1_op_res_33579;\n            private_mem_33508[i_33589] = defunc_1_op_res_33580;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33590 = 0; i_33590 < (int64_t) 9; i_33590++) {\n            int64_t sharedIdx_33591 = sext_i32_i64(local_tid_33483 * 9) +\n                    i_33590;\n            \n            ((__local bool *) local_mem_33493)[sharedIdx_33591] =\n                private_mem_33506[i_33590];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33592 = 0; i_33592 < (int64_t) 9; i_33592++) {\n            int32_t sharedIdx_33593 = local_tid_33483 +\n                    sext_i64_i32(segscan_group_sizze_30779 * i_33592);\n            \n            private_mem_33506[i_33592] = ((__local\n                                           bool *) local_mem_33493)[sext_i32_i64(sharedIdx_33593)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33594 = 0; i_33594 < (int64_t) 9; i_33594++) {\n            int64_t sharedIdx_33595 = sext_i32_i64(local_tid_33483 * 9) +\n                    i_33594;\n            \n            ((__local int64_t *) local_mem_33493)[sharedIdx_33595] =\n                private_mem_33508[i_33594];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33596 = 0; i_33596 < (int64_t) 9",
            "; i_33596++) {\n            int32_t sharedIdx_33597 = local_tid_33483 +\n                    sext_i64_i32(segscan_group_sizze_30779 * i_33596);\n            \n            private_mem_33508[i_33596] = ((__local\n                                           int64_t *) local_mem_33493)[sext_i32_i64(sharedIdx_33597)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_33598 = 0; i_33598 < (int64_t) 9; i_33598++) {\n            int64_t gtid_30783 = blockOff_33505 + segscan_group_sizze_30779 *\n                    i_33598 + sext_i32_i64(local_tid_33483);\n            \n            if (slt64(gtid_30783, defunc_2_reduce_res_29111)) {\n                ((__global bool *) mem_31950)[gtid_30783] =\n                    private_mem_33506[i_33598];\n            }\n        }\n        for (int64_t i_33599 = 0; i_33599 < (int64_t) 9; i_33599++) {\n            int64_t gtid_30783 = blockOff_33505 + segscan_group_sizze_30779 *\n                    i_33599 + sext_i32_i64(local_tid_33483);\n            \n            if (slt64(gtid_30783, defunc_2_reduce_res_29111)) {\n                ((__global int64_t *) mem_31952)[gtid_30783] =\n                    private_mem_33508[i_33599];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_33504 == sdiv_up64(defunc_2_reduce_res_29111,\n                                          segscan_group_sizze_30779 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_33470)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30779\n}\n__kernel void clusterPointszisegscan_30944(__global int *global_failure,\n                                           uint local_mem_33648_backing_offset_0,\n                                           int64_t defunc_2_reduce_res_29111,\n                                           int6",
            "4_t i32_res_29359,\n                                           int64_t i32_res_29360, __global\n                                           unsigned char *mem_param_31966,\n                                           __global unsigned char *mem_31978,\n                                           __global unsigned char *mem_31980,\n                                           __global unsigned char *mem_31982,\n                                           __global unsigned char *mem_31984,\n                                           __global unsigned char *mem_31986,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_33613,\n                                           __global\n                                           unsigned char *status_flags_mem_33615,\n                                           __global\n                                           unsigned char *aggregates_mem_33617,\n                                           __global\n                                           unsigned char *incprefixes_mem_33619,\n                                           __global\n                                           unsigned char *aggregates_mem_33621,\n                                           __global\n                                           unsigned char *incprefixes_mem_33623,\n                                           __global\n                                           unsigned char *aggregates_mem_33625,\n                                           __global\n                                           unsigned char *incprefixes_mem_33627,\n                                           __global\n                                           unsigned char *aggregates_mem_33629,\n                                           __global\n                                           unsigned char *incprefixes_mem_33631)\n{\n    #define segscan_group_sizze_30939 (clusterPointszisegscan_group_sizze_30938)\n    \n    const in",
            "t block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_33648_backing_0 =\n                  &shared_mem[local_mem_33648_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33633;\n    int32_t local_tid_33634;\n    int64_t group_sizze_33637;\n    int32_t wave_sizze_33636;\n    int32_t group_tid_33635;\n    \n    global_tid_33633 = get_global_id(0);\n    local_tid_33634 = get_local_id(0);\n    group_sizze_33637 = get_local_size(0);\n    wave_sizze_33636 = LOCKSTEP_WIDTH;\n    group_tid_33635 = get_group_id(0);\n    \n    int32_t phys_tid_30944;\n    \n    phys_tid_30944 = global_tid_33633;\n    \n    int64_t byte_offsets_33638;\n    \n    byte_offsets_33638 = (int64_t) 0;\n    \n    int64_t byte_offsets_33639;\n    \n    byte_offsets_33639 = segscan_group_sizze_30939 * (int64_t) 8;\n    \n    int64_t byte_offsets_33640;\n    \n    byte_offsets_33640 = sdiv_up64(segscan_group_sizze_30939 * (int64_t) 8,\n                                   (int64_t) 8) * (int64_t) 8 +\n        segscan_group_sizze_30939 * (int64_t) 8;\n    \n    int64_t byte_offsets_33641;\n    \n    byte_offsets_33641 = sdiv_up64(sdiv_up64(segscan_group_sizze_30939 *\n                                             (int64_t) 8, (int64_t) 8) *\n                                   (int64_t) 8 + segscan_group_sizze_30939 *\n                                   (int64_t) 8, (int64_t) 8) * (int64_t) 8 +\n        segscan_group_sizze_30939 * (int64_t) 8;\n    \n    int64_t byte_offsets_33642;\n    \n    byte_offsets_33642 =\n        sdiv_up64(sdiv_up64(sdiv_up64(segscan_group_sizze_30939 * (int64_t) 8,\n                                      (int64_t) 8) * (int64_t) 8 +\n                            segscan_group_sizze_30939 * (int64_t) 8,\n                            (int64_t) 8) * (int64_t) 8 +\n                  segscan_group_sizze_30939 * (int64_t) 8, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_30939 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_33",
            "643;\n    \n    warp_byte_offset_33643 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_33644;\n    \n    warp_byte_offset_33644 = (int64_t) 288;\n    \n    int64_t warp_byte_offset_33645;\n    \n    warp_byte_offset_33645 = (int64_t) 544;\n    \n    int64_t warp_byte_offset_33646;\n    \n    warp_byte_offset_33646 = (int64_t) 800;\n    \n    int64_t warp_byte_offset_33647;\n    \n    warp_byte_offset_33647 = (int64_t) 1056;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_33648;\n    \n    local_mem_33648 = (__local char *) local_mem_33648_backing_0;\n    \n    int64_t trans_arr_len_33649;\n    \n    trans_arr_len_33649 = (int64_t) 9 * segscan_group_sizze_30939;\n    \n    int32_t dynamic_id_33665;\n    \n    if (local_tid_33634 == 0) {\n        dynamic_id_33665 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_33613)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_33648)[(int64_t) 0] = dynamic_id_33665;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_33665 = ((__local int32_t *) local_mem_33648)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_33666;\n    \n    blockOff_33666 = sext_i32_i64(dynamic_id_33665) * (int64_t) 9 *\n        segscan_group_sizze_30939;\n    \n    int64_t private_mem_33667[9];\n    int64_t private_mem_33669[9];\n    int64_t private_mem_33671[9];\n    int64_t private_mem_33673[9];\n    \n    // Load and map\n    {\n        for (int64_t i_33675 = 0; i_33675 < (int64_t) 9; i_33675++) {\n            int64_t gtid_30943 = blockOff_33666 +\n                    sext_i32_i64(local_tid_33634) + i_33675 *\n                    segscan_group_sizze_30939;\n            \n            if (slt64(gtid_30943, defunc_2_reduce_res_29111)) {\n                int64_t x_29388 = ((__global\n                                    int64_t *) mem_param_31966)[gtid_30943];\n                int64_t zgzg_res_29389 ",
            "= ashr64(x_29388, i32_res_29359);\n                int64_t za_res_29390 = (int64_t) 1 & zgzg_res_29389;\n                int32_t to_i32_res_29391 = sext_i64_i32(za_res_29390);\n                int32_t x_29392 = mul32(2, to_i32_res_29391);\n                int64_t zgzg_res_29393 = ashr64(x_29388, i32_res_29360);\n                int64_t za_res_29394 = (int64_t) 1 & zgzg_res_29393;\n                int32_t to_i32_res_29395 = sext_i64_i32(za_res_29394);\n                int32_t defunc_0_f_res_29396 = add32(x_29392, to_i32_res_29395);\n                bool cond_29397 = defunc_0_f_res_29396 == 0;\n                int64_t defunc_0_f_res_29398 = btoi_bool_i64(cond_29397);\n                int64_t defunc_0_f_res_29399;\n                int64_t defunc_0_f_res_29400;\n                int64_t defunc_0_f_res_29401;\n                \n                if (cond_29397) {\n                    defunc_0_f_res_29399 = (int64_t) 0;\n                    defunc_0_f_res_29400 = (int64_t) 0;\n                    defunc_0_f_res_29401 = (int64_t) 0;\n                } else {\n                    bool cond_29402 = defunc_0_f_res_29396 == 1;\n                    int64_t defunc_0_f_res_f_res_29403 =\n                            btoi_bool_i64(cond_29402);\n                    int64_t defunc_0_f_res_f_res_29404;\n                    int64_t defunc_0_f_res_f_res_29405;\n                    \n                    if (cond_29402) {\n                        defunc_0_f_res_f_res_29404 = (int64_t) 0;\n                        defunc_0_f_res_f_res_29405 = (int64_t) 0;\n                    } else {\n                        bool cond_29406 = defunc_0_f_res_29396 == 2;\n                        int64_t defunc_0_f_res_f_res_f_res_29407 =\n                                btoi_bool_i64(cond_29406);\n                        bool cond_neg_29408 = !cond_29406;\n                        int64_t defunc_0_f_res_f_res_f_res_29409 =\n                                btoi_bool_i64(cond_neg_29408);\n                        \n                        defunc_0_f_",
            "res_f_res_29404 =\n                            defunc_0_f_res_f_res_f_res_29407;\n                        defunc_0_f_res_f_res_29405 =\n                            defunc_0_f_res_f_res_f_res_29409;\n                    }\n                    defunc_0_f_res_29399 = defunc_0_f_res_f_res_29403;\n                    defunc_0_f_res_29400 = defunc_0_f_res_f_res_29404;\n                    defunc_0_f_res_29401 = defunc_0_f_res_f_res_29405;\n                }\n                ((__global int32_t *) mem_31986)[gtid_30943] =\n                    defunc_0_f_res_29396;\n                private_mem_33667[i_33675] = defunc_0_f_res_29398;\n                private_mem_33669[i_33675] = defunc_0_f_res_29399;\n                private_mem_33671[i_33675] = defunc_0_f_res_29400;\n                private_mem_33673[i_33675] = defunc_0_f_res_29401;\n            } else {\n                private_mem_33667[i_33675] = (int64_t) 0;\n                private_mem_33669[i_33675] = (int64_t) 0;\n                private_mem_33671[i_33675] = (int64_t) 0;\n                private_mem_33673[i_33675] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33676 = 0; i_33676 < (int64_t) 9; i_33676++) {\n            int64_t sharedIdx_33677 = sext_i32_i64(local_tid_33634) + i_33676 *\n                    segscan_group_sizze_30939;\n            \n            ((__local int64_t *) local_mem_33648)[sharedIdx_33677] =\n                private_mem_33667[i_33676];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33678 = 0; i_33678 < 9; i_33678++) {\n            int32_t sharedIdx_33679 = local_tid_33634 * 9 + i_33678;\n            \n            private_mem_33667[sext_i32_i64(i_33678)] = ((__local\n                                                         int64_t *) local_mem_33648)[sext_i32_i64(sharedIdx_33679)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33680 = 0; i_33680 < (int64_t) 9; i_33680++) {\n          ",
            "  int64_t sharedIdx_33681 = sext_i32_i64(local_tid_33634) + i_33680 *\n                    segscan_group_sizze_30939;\n            \n            ((__local int64_t *) local_mem_33648)[sharedIdx_33681] =\n                private_mem_33669[i_33680];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33682 = 0; i_33682 < 9; i_33682++) {\n            int32_t sharedIdx_33683 = local_tid_33634 * 9 + i_33682;\n            \n            private_mem_33669[sext_i32_i64(i_33682)] = ((__local\n                                                         int64_t *) local_mem_33648)[sext_i32_i64(sharedIdx_33683)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33684 = 0; i_33684 < (int64_t) 9; i_33684++) {\n            int64_t sharedIdx_33685 = sext_i32_i64(local_tid_33634) + i_33684 *\n                    segscan_group_sizze_30939;\n            \n            ((__local int64_t *) local_mem_33648)[sharedIdx_33685] =\n                private_mem_33671[i_33684];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33686 = 0; i_33686 < 9; i_33686++) {\n            int32_t sharedIdx_33687 = local_tid_33634 * 9 + i_33686;\n            \n            private_mem_33671[sext_i32_i64(i_33686)] = ((__local\n                                                         int64_t *) local_mem_33648)[sext_i32_i64(sharedIdx_33687)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33688 = 0; i_33688 < (int64_t) 9; i_33688++) {\n            int64_t sharedIdx_33689 = sext_i32_i64(local_tid_33634) + i_33688 *\n                    segscan_group_sizze_30939;\n            \n            ((__local int64_t *) local_mem_33648)[sharedIdx_33689] =\n                private_mem_33673[i_33688];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33690 = 0; i_33690 < 9; i_33690++) {\n            int32_t sharedIdx_33691 = local_tid_33634 * 9 + i_33690;\n            \n            private_mem_33673[sext_i32_i64(i_33690)] = ((__local\n                ",
            "                                         int64_t *) local_mem_33648)[sext_i32_i64(sharedIdx_33691)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_33692 = 0; i_33692 < (int64_t) 8; i_33692++) {\n            int64_t x_29376;\n            int64_t x_29380;\n            \n            x_29376 = private_mem_33667[i_33692];\n            x_29380 = private_mem_33667[i_33692 + (int64_t) 1];\n            \n            int64_t x_29377;\n            int64_t x_29381;\n            \n            x_29377 = private_mem_33669[i_33692];\n            x_29381 = private_mem_33669[i_33692 + (int64_t) 1];\n            \n            int64_t x_29378;\n            int64_t x_29382;\n            \n            x_29378 = private_mem_33671[i_33692];\n            x_29382 = private_mem_33671[i_33692 + (int64_t) 1];\n            \n            int64_t x_29379;\n            int64_t x_29383;\n            \n            x_29379 = private_mem_33673[i_33692];\n            x_29383 = private_mem_33673[i_33692 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29384;\n            \n            defunc_1_op_res_29384 = add64(x_29376, x_29380);\n            \n            int64_t defunc_1_op_res_29385 = add64(x_29377, x_29381);\n            int64_t defunc_1_op_res_29386 = add64(x_29378, x_29382);\n            int64_t defunc_1_op_res_29387 = add64(x_29379, x_29383);\n            \n            private_mem_33667[i_33692 + (int64_t) 1] = defunc_1_op_res_29384;\n            private_mem_33669[i_33692 + (int64_t) 1] = defunc_1_op_res_29385;\n            private_mem_33671[i_33692 + (int64_t) 1] = defunc_1_op_res_29386;\n            private_mem_33673[i_33692 + (int64_t) 1] = defunc_1_op_res_29387;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33634)] =\n        ",
            "    private_mem_33667[(int64_t) 8];\n        ((__local int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33634)] =\n            private_mem_33669[(int64_t) 8];\n        ((__local int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33634)] =\n            private_mem_33671[(int64_t) 8];\n        ((__local int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33634)] =\n            private_mem_33673[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_33705;\n    int64_t acc_33706;\n    int64_t acc_33707;\n    int64_t acc_33708;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_33693;\n        int64_t x_33694;\n        int64_t x_33695;\n        int64_t x_33696;\n        int64_t x_33697;\n        int64_t x_33698;\n        int64_t x_33699;\n        int64_t x_33700;\n        int64_t x_33709;\n        int64_t x_33710;\n        int64_t x_33711;\n        int64_t x_33712;\n        int64_t x_33713;\n        int64_t x_33714;\n        int64_t x_33715;\n        int64_t x_33716;\n        bool ltid_in_bounds_33721;\n        \n        ltid_in_bounds_33721 = slt64(sext_i32_i64(local_tid_33634),\n                                     segscan_group_sizze_30939);\n        \n        int32_t skip_threads_33722;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_33721) {\n                x_33697 = ((volatile __local\n                            int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                                (int64_t) 8) +\n                                                ",
            "        sext_i32_i64(local_tid_33634)];\n                x_33698 = ((volatile __local\n                            int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_33634)];\n                x_33699 = ((volatile __local\n                            int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_33634)];\n                x_33700 = ((volatile __local\n                            int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_33634)];\n                if ((local_tid_33634 - squot32(local_tid_33634, 32) * 32) ==\n                    0) {\n                    x_33693 = x_33697;\n                    x_33694 = x_33698;\n                    x_33695 = x_33699;\n                    x_33696 = x_33700;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_33722 = 1;\n            while (slt32(skip_threads_33722, 32)) {\n                if (sle32(skip_threads_33722, local_tid_33634 -\n                          squot32(local_tid_33634, 32) * 32) &&\n                    ltid_in_bounds_33721) {\n                    // read operands\n                    {\n                        x_33693 = ((volatile __local\n                                    int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_33634) -\n                                                          ",
            "       sext_i32_i64(skip_threads_33722))];\n                        x_33694 = ((volatile __local\n                                    int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_33634) -\n                                                                 sext_i32_i64(skip_threads_33722))];\n                        x_33695 = ((volatile __local\n                                    int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_33634) -\n                                                                 sext_i32_i64(skip_threads_33722))];\n                        x_33696 = ((volatile __local\n                                    int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_33634) -\n                                                                 sext_i32_i64(skip_threads_33722))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_33701 = add64(x_33693, x_33697);\n                        int64_t defunc_1_op_res_33702 = add64(x_33694, x_33698);\n                        int64_t defunc_1_op_res_33703 = add64(x_33695, x_33699);\n                        int64_t defunc_1_op_res_33704 = add64(x_33696, x_33700);\n                        \n                        x_33693 = defunc_1_op_res_33701;\n                        x_33694 = defunc_1_op_res_33702;\n                        x_33695 = defunc_1_op_res_33703;\n                        x_33696 = defunc_1_op_res_33704;\n     ",
            "               }\n                }\n                if (sle32(wave_sizze_33636, skip_threads_33722)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_33722, local_tid_33634 -\n                          squot32(local_tid_33634, 32) * 32) &&\n                    ltid_in_bounds_33721) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_33634)] =\n                            x_33693;\n                        x_33697 = x_33693;\n                        ((volatile __local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_33634)] =\n                            x_33694;\n                        x_33698 = x_33694;\n                        ((volatile __local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_33634)] =\n                            x_33695;\n                        x_33699 = x_33695;\n                        ((volatile __local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_33634)] =\n                            x_33696;\n                        x_33700 = x_33696;\n                    }\n                }\n                if (sle32(wave_sizze_33636, skip_threads_33722)) {\n                 ",
            "   barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_33722 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_33634 - squot32(local_tid_33634, 32) * 32) == 31 &&\n                ltid_in_bounds_33721) {\n                ((volatile __local\n                  int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_33634,\n                                                                   32))] =\n                    x_33693;\n                ((volatile __local\n                  int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_33634,\n                                                                   32))] =\n                    x_33694;\n                ((volatile __local\n                  int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_33634,\n                                                                   32))] =\n                    x_33695;\n                ((volatile __local\n                  int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_33634,\n                                                                   32))] =\n                    x_33696;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t ski",
            "p_threads_33723;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_33634, 32) == 0 && ltid_in_bounds_33721) {\n                    x_33713 = ((volatile __local\n                                int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_33634)];\n                    x_33714 = ((volatile __local\n                                int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_33634)];\n                    x_33715 = ((volatile __local\n                                int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_33634)];\n                    x_33716 = ((volatile __local\n                                int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_33634)];\n                    if ((local_tid_33634 - squot32(local_tid_33634, 32) * 32) ==\n                        0) {\n                        x_33709 = x_33713;\n                        x_33710 = x_33714;\n                        x_33711 = x_33715;\n                        x_33712 = x_33716;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_33723 = 1;\n                while (slt32(skip_threads_33723, 32)) {\n                    if (sle32(skip_threads_33723, local_tid_33634 -\n         ",
            "                     squot32(local_tid_33634, 32) * 32) &&\n                        (squot32(local_tid_33634, 32) == 0 &&\n                         ltid_in_bounds_33721)) {\n                        // read operands\n                        {\n                            x_33709 = ((volatile __local\n                                        int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_33634) -\n                                                                     sext_i32_i64(skip_threads_33723))];\n                            x_33710 = ((volatile __local\n                                        int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_33634) -\n                                                                     sext_i32_i64(skip_threads_33723))];\n                            x_33711 = ((volatile __local\n                                        int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_33634) -\n                                                                     sext_i32_i64(skip_threads_33723))];\n                            x_33712 = ((volatile __local\n                                        int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_33634) -\n                                                                   ",
            "  sext_i32_i64(skip_threads_33723))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_33717 = add64(x_33709,\n                                                                  x_33713);\n                            int64_t defunc_1_op_res_33718 = add64(x_33710,\n                                                                  x_33714);\n                            int64_t defunc_1_op_res_33719 = add64(x_33711,\n                                                                  x_33715);\n                            int64_t defunc_1_op_res_33720 = add64(x_33712,\n                                                                  x_33716);\n                            \n                            x_33709 = defunc_1_op_res_33717;\n                            x_33710 = defunc_1_op_res_33718;\n                            x_33711 = defunc_1_op_res_33719;\n                            x_33712 = defunc_1_op_res_33720;\n                        }\n                    }\n                    if (sle32(wave_sizze_33636, skip_threads_33723)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_33723, local_tid_33634 -\n                              squot32(local_tid_33634, 32) * 32) &&\n                        (squot32(local_tid_33634, 32) == 0 &&\n                         ltid_in_bounds_33721)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_33634)] =\n                                x_33709;\n                            x_33713 = x_33709;\n                            ((volatile __local\n                              int64_t *",
            ") local_mem_33648)[squot64(byte_offsets_33639,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_33634)] =\n                                x_33710;\n                            x_33714 = x_33710;\n                            ((volatile __local\n                              int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_33634)] =\n                                x_33711;\n                            x_33715 = x_33711;\n                            ((volatile __local\n                              int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_33634)] =\n                                x_33712;\n                            x_33716 = x_33712;\n                        }\n                    }\n                    if (sle32(wave_sizze_33636, skip_threads_33723)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_33723 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_33634, 32) == 0 || !ltid_in_bounds_33721)) {\n                // read operands\n                {\n                    x_33697 = x_33693;\n                    x_33698 = x_33694;\n                    x_33699 = x_33695;\n                    x_33700 = x_33696;\n                    x_33693 = ((__local\n                                int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                                    (int64_t) 8) +\n                         ",
            "                                   (sext_i32_i64(squot32(local_tid_33634,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_33694 = ((__local\n                                int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_33634,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_33695 = ((__local\n                                int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_33634,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_33696 = ((__local\n                                int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_33634,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_33701 = add64(x_33693, x_33697);\n                    int64_t defunc_1_op_res_33702 = add64(x_33694, x_33698);\n                    int64_t defunc_1_op_res_33703 = add64(x_33695, x_33699);\n                    int64_t defu",
            "nc_1_op_res_33704 = add64(x_33696, x_33700);\n                    \n                    x_33693 = defunc_1_op_res_33701;\n                    x_33694 = defunc_1_op_res_33702;\n                    x_33695 = defunc_1_op_res_33703;\n                    x_33696 = defunc_1_op_res_33704;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33634)] =\n                        x_33693;\n                    ((__local\n                      int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33634)] =\n                        x_33694;\n                    ((__local\n                      int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33634)] =\n                        x_33695;\n                    ((__local\n                      int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33634)] =\n                        x_33696;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_33634, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33634)] =\n                   ",
            " x_33697;\n                ((__local\n                  int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33634)] =\n                    x_33698;\n                ((__local\n                  int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33634)] =\n                    x_33699;\n                ((__local\n                  int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33634)] =\n                    x_33700;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_33634 == 0) {\n            acc_33705 = ((__local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30939 -\n                                                       (int64_t) 1)];\n            acc_33706 = ((__local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30939 -\n                                                       (int64_t) 1)];\n            acc_33707 = ((__local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30939 -\n                                                       ",
            "(int64_t) 1)];\n            acc_33708 = ((__local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30939 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_33705 = ((__local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33638,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_33634) -\n                                                       (int64_t) 1)];\n            acc_33706 = ((__local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33639,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_33634) -\n                                                       (int64_t) 1)];\n            acc_33707 = ((__local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33640,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_33634) -\n                                                       (int64_t) 1)];\n            acc_33708 = ((__local\n                          int64_t *) local_mem_33648)[squot64(byte_offsets_33641,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_33634) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_33724;\n    \n    prefix_33724 = (int64_t) 0;\n    \n    int64_t prefix_33725;\n    \n    prefix_33725 = (int64_t) 0;\n    \n    int64_t prefix_33726;\n ",
            "   \n    prefix_33726 = (int64_t) 0;\n    \n    int64_t prefix_33727;\n    \n    prefix_33727 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_33665 == (int64_t) 0 && local_tid_33634 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_33619)[dynamic_id_33665] = acc_33705;\n            ((volatile __global\n              int64_t *) incprefixes_mem_33623)[dynamic_id_33665] = acc_33706;\n            ((volatile __global\n              int64_t *) incprefixes_mem_33627)[dynamic_id_33665] = acc_33707;\n            ((volatile __global\n              int64_t *) incprefixes_mem_33631)[dynamic_id_33665] = acc_33708;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_33615)[dynamic_id_33665] = (int8_t) 2;\n            acc_33705 = (int64_t) 0;\n            acc_33706 = (int64_t) 0;\n            acc_33707 = (int64_t) 0;\n            acc_33708 = (int64_t) 0;\n        }\n        if (!(dynamic_id_33665 == (int64_t) 0) && slt32(local_tid_33634,\n                                                        wave_sizze_33636)) {\n            if (local_tid_33634 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_33617)[dynamic_id_33665] =\n                    acc_33705;\n                ((volatile __global\n                  int64_t *) aggregates_mem_33621)[dynamic_id_33665] =\n                    acc_33706;\n                ((volatile __global\n                  int64_t *) aggregates_mem_33625)[dynamic_id_33665] =\n                    acc_33707;\n                ((volatile __global\n                  int64_t *) aggregates_mem_33629)[dynamic_id_33665] =\n                    acc_33708;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_33615)[dynamic_id_33665] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_33648)[(int64_t) 0] = ((__global\n                                                    ",
            "                  int8_t *) status_flags_mem_33615)[dynamic_id_33665 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_33728;\n            \n            status_33728 = ((__local int8_t *) local_mem_33648)[(int64_t) 0];\n            if (status_33728 == (int8_t) 2) {\n                if (local_tid_33634 == 0) {\n                    prefix_33724 = ((volatile __global\n                                     int64_t *) incprefixes_mem_33619)[dynamic_id_33665 -\n                                                                       (int64_t) 1];\n                    prefix_33725 = ((volatile __global\n                                     int64_t *) incprefixes_mem_33623)[dynamic_id_33665 -\n                                                                       (int64_t) 1];\n                    prefix_33726 = ((volatile __global\n                                     int64_t *) incprefixes_mem_33627)[dynamic_id_33665 -\n                                                                       (int64_t) 1];\n                    prefix_33727 = ((volatile __global\n                                     int64_t *) incprefixes_mem_33631)[dynamic_id_33665 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_33729 = dynamic_id_33665 -\n                        sext_i32_i64(wave_sizze_33636);\n                \n                while (slt32(wave_sizze_33636 * -1, readOffset_33729)) {\n                    int32_t read_i_33730 = readOffset_33729 + local_tid_33634;\n                    int64_t aggr_33731 = (int64_t) 0;\n                    int64_t aggr_33732 = (int64_t) 0;\n                    int64_t aggr_33733 = (int64_t) 0;\n                    int64_t aggr_33734 = (int64_t) 0;\n                    int8_t flag_33735 = (int8_t) 0;\n                    int8_",
            "t used_33736 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_33730)) {\n                        flag_33735 = ((volatile __global\n                                       int8_t *) status_flags_mem_33615)[sext_i32_i64(read_i_33730)];\n                        if (flag_33735 == (int8_t) 2) {\n                            aggr_33731 = ((volatile __global\n                                           int64_t *) incprefixes_mem_33619)[sext_i32_i64(read_i_33730)];\n                            aggr_33732 = ((volatile __global\n                                           int64_t *) incprefixes_mem_33623)[sext_i32_i64(read_i_33730)];\n                            aggr_33733 = ((volatile __global\n                                           int64_t *) incprefixes_mem_33627)[sext_i32_i64(read_i_33730)];\n                            aggr_33734 = ((volatile __global\n                                           int64_t *) incprefixes_mem_33631)[sext_i32_i64(read_i_33730)];\n                        } else {\n                            if (flag_33735 == (int8_t) 1) {\n                                aggr_33731 = ((volatile __global\n                                               int64_t *) aggregates_mem_33617)[sext_i32_i64(read_i_33730)];\n                                aggr_33732 = ((volatile __global\n                                               int64_t *) aggregates_mem_33621)[sext_i32_i64(read_i_33730)];\n                                aggr_33733 = ((volatile __global\n                                               int64_t *) aggregates_mem_33625)[sext_i32_i64(read_i_33730)];\n                                aggr_33734 = ((volatile __global\n                                               int64_t *) aggregates_mem_33629)[sext_i32_i64(read_i_33730)];\n                                used_33736 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_33648)[squot64(warp_by",
            "te_offset_33643,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33634)] =\n                        aggr_33731;\n                    ((__local\n                      int64_t *) local_mem_33648)[squot64(warp_byte_offset_33644,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33634)] =\n                        aggr_33732;\n                    ((__local\n                      int64_t *) local_mem_33648)[squot64(warp_byte_offset_33645,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33634)] =\n                        aggr_33733;\n                    ((__local\n                      int64_t *) local_mem_33648)[squot64(warp_byte_offset_33646,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33634)] =\n                        aggr_33734;\n                    \n                    int8_t tmp_33737;\n                    \n                    tmp_33737 = flag_33735 | used_33736 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_33648)[sext_i32_i64(local_tid_33634)] =\n                        tmp_33737;\n                    mem_fence_local();\n                    flag_33735 = ((volatile __local\n                                   int8_t *) local_mem_33648)[sext_i32_i64(wave_sizze_33636) -\n                                                              (int64_t) 1];\n                    if (local_tid_33634 == 0) {\n                        if (!(flag_33735 == (int8_t) 2)) {\n                            int64_t x_33738 = (int64_t) 0;\n                            int64_t x_33739 = (int64_t) 0;\n                            int64_t x_33740 = (int64_t) 0;\n                            int64_t",
            " x_33741 = (int64_t) 0;\n                            int64_t x_33742;\n                            int64_t x_33743;\n                            int64_t x_33744;\n                            int64_t x_33745;\n                            int8_t flag1_33750;\n                            \n                            flag1_33750 = (int8_t) 0;\n                            \n                            int8_t flag2_33751;\n                            int8_t used1_33752;\n                            \n                            used1_33752 = (int8_t) 0;\n                            \n                            int8_t used2_33753;\n                            \n                            for (int32_t i_33754 = 0; i_33754 <\n                                 wave_sizze_33636; i_33754++) {\n                                flag2_33751 = ((__local\n                                                int8_t *) local_mem_33648)[sext_i32_i64(i_33754)];\n                                used2_33753 = lshr8(flag2_33751, (int8_t) 2);\n                                flag2_33751 = flag2_33751 & (int8_t) 3;\n                                x_33742 = ((__local\n                                            int64_t *) local_mem_33648)[squot64(warp_byte_offset_33643,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_33754)];\n                                x_33743 = ((__local\n                                            int64_t *) local_mem_33648)[squot64(warp_byte_offset_33644,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_33754)];\n                                x_33744 = ((__local\n                                            int64_t *) local_mem_33648)[squot64(warp_byte_offset_33645,\n                                                                    ",
            "            (int64_t) 8) +\n                                                                        sext_i32_i64(i_33754)];\n                                x_33745 = ((__local\n                                            int64_t *) local_mem_33648)[squot64(warp_byte_offset_33646,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_33754)];\n                                if (!(flag2_33751 == (int8_t) 1)) {\n                                    flag1_33750 = flag2_33751;\n                                    used1_33752 = used2_33753;\n                                    x_33738 = x_33742;\n                                    x_33739 = x_33743;\n                                    x_33740 = x_33744;\n                                    x_33741 = x_33745;\n                                } else {\n                                    used1_33752 += used2_33753;\n                                    \n                                    int64_t defunc_1_op_res_33746;\n                                    \n                                    defunc_1_op_res_33746 = add64(x_33738,\n                                                                  x_33742);\n                                    \n                                    int64_t defunc_1_op_res_33747 =\n                                            add64(x_33739, x_33743);\n                                    int64_t defunc_1_op_res_33748 =\n                                            add64(x_33740, x_33744);\n                                    int64_t defunc_1_op_res_33749 =\n                                            add64(x_33741, x_33745);\n                                    \n                                    x_33738 = defunc_1_op_res_33746;\n                                    x_33739 = defunc_1_op_res_33747;\n                                    x_33740 = defunc_1_op_res_33748;\n                           ",
            "         x_33741 = defunc_1_op_res_33749;\n                                }\n                            }\n                            flag_33735 = flag1_33750;\n                            used_33736 = used1_33752;\n                            aggr_33731 = x_33738;\n                            aggr_33732 = x_33739;\n                            aggr_33733 = x_33740;\n                            aggr_33734 = x_33741;\n                        } else {\n                            aggr_33731 = ((__local\n                                           int64_t *) local_mem_33648)[squot64(warp_byte_offset_33643,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_33636) -\n                                                                        (int64_t) 1)];\n                            aggr_33732 = ((__local\n                                           int64_t *) local_mem_33648)[squot64(warp_byte_offset_33644,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_33636) -\n                                                                        (int64_t) 1)];\n                            aggr_33733 = ((__local\n                                           int64_t *) local_mem_33648)[squot64(warp_byte_offset_33645,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_33636) -\n                                                                        (int64_t) 1)];\n                            aggr_33734 = ((__local\n                                           int64_t *) local_mem_33648)[squot64(warp_byte_offset_33646,\n                                                                               ",
            "(int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_33636) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_33735 == (int8_t) 2) {\n                            readOffset_33729 = wave_sizze_33636 * -1;\n                        } else {\n                            readOffset_33729 -= zext_i8_i32(used_33736);\n                        }\n                        ((__local int32_t *) local_mem_33648)[(int64_t) 0] =\n                            readOffset_33729;\n                        \n                        int64_t x_33755;\n                        \n                        x_33755 = aggr_33731;\n                        \n                        int64_t x_33756;\n                        \n                        x_33756 = aggr_33732;\n                        \n                        int64_t x_33757;\n                        \n                        x_33757 = aggr_33733;\n                        \n                        int64_t x_33758;\n                        \n                        x_33758 = aggr_33734;\n                        \n                        int64_t x_33759;\n                        \n                        x_33759 = prefix_33724;\n                        \n                        int64_t x_33760;\n                        \n                        x_33760 = prefix_33725;\n                        \n                        int64_t x_33761;\n                        \n                        x_33761 = prefix_33726;\n                        \n                        int64_t x_33762;\n                        \n                        x_33762 = prefix_33727;\n                        \n                        int64_t defunc_1_op_res_33763;\n                        \n                        defunc_1_op_res_33763 = add64(x_33755, x_33759);\n                        \n                        int64_t defunc_1_op_res_33764 = add64(x_33756, x_33760)",
            ";\n                        int64_t defunc_1_op_res_33765 = add64(x_33757, x_33761);\n                        int64_t defunc_1_op_res_33766 = add64(x_33758, x_33762);\n                        \n                        prefix_33724 = defunc_1_op_res_33763;\n                        prefix_33725 = defunc_1_op_res_33764;\n                        prefix_33726 = defunc_1_op_res_33765;\n                        prefix_33727 = defunc_1_op_res_33766;\n                    }\n                    mem_fence_local();\n                    readOffset_33729 = ((__local\n                                         int32_t *) local_mem_33648)[(int64_t) 0];\n                }\n            }\n            if (local_tid_33634 == 0) {\n                int64_t x_33767 = prefix_33724;\n                int64_t x_33768 = prefix_33725;\n                int64_t x_33769 = prefix_33726;\n                int64_t x_33770 = prefix_33727;\n                int64_t x_33771 = acc_33705;\n                int64_t x_33772 = acc_33706;\n                int64_t x_33773 = acc_33707;\n                int64_t x_33774 = acc_33708;\n                int64_t defunc_1_op_res_33775 = add64(x_33767, x_33771);\n                int64_t defunc_1_op_res_33776 = add64(x_33768, x_33772);\n                int64_t defunc_1_op_res_33777 = add64(x_33769, x_33773);\n                int64_t defunc_1_op_res_33778 = add64(x_33770, x_33774);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_33619)[dynamic_id_33665] =\n                    defunc_1_op_res_33775;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_33623)[dynamic_id_33665] =\n                    defunc_1_op_res_33776;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_33627)[dynamic_id_33665] =\n                    defunc_1_op_res_33777;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_33631)[dynamic_id_33665] =\n                    defunc_1_op_res_33778;\n             ",
            "   mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_33615)[dynamic_id_33665] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_33648)[squot64(warp_byte_offset_33643,\n                                                      (int64_t) 8)] =\n                    prefix_33724;\n                ((__local\n                  int64_t *) local_mem_33648)[squot64(warp_byte_offset_33644,\n                                                      (int64_t) 8)] =\n                    prefix_33725;\n                ((__local\n                  int64_t *) local_mem_33648)[squot64(warp_byte_offset_33645,\n                                                      (int64_t) 8)] =\n                    prefix_33726;\n                ((__local\n                  int64_t *) local_mem_33648)[squot64(warp_byte_offset_33646,\n                                                      (int64_t) 8)] =\n                    prefix_33727;\n                acc_33705 = (int64_t) 0;\n                acc_33706 = (int64_t) 0;\n                acc_33707 = (int64_t) 0;\n                acc_33708 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_33665 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_33724 = ((__local\n                             int64_t *) local_mem_33648)[squot64(warp_byte_offset_33643,\n                                                                 (int64_t) 8)];\n            prefix_33725 = ((__local\n                             int64_t *) local_mem_33648)[squot64(warp_byte_offset_33644,\n                                                                 (int64_t) 8)];\n            prefix_33726 = ((__local\n                             int64_t *) local_mem_33648)[squot64(warp_byte_offset_33645,\n                                                                 (int64_t) 8)];\n            prefix_33727 = ((__local\n                             int64_t *) local_mem_33648)[squot64(warp_",
            "byte_offset_33646,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_33779;\n        int64_t x_33783;\n        int64_t x_33791;\n        \n        x_33791 = prefix_33724;\n        \n        int64_t x_33795;\n        \n        x_33795 = acc_33705;\n        \n        int64_t x_33780;\n        int64_t x_33784;\n        int64_t x_33792;\n        \n        x_33792 = prefix_33725;\n        \n        int64_t x_33796;\n        \n        x_33796 = acc_33706;\n        \n        int64_t x_33781;\n        int64_t x_33785;\n        int64_t x_33793;\n        \n        x_33793 = prefix_33726;\n        \n        int64_t x_33797;\n        \n        x_33797 = acc_33707;\n        \n        int64_t x_33782;\n        int64_t x_33786;\n        int64_t x_33794;\n        \n        x_33794 = prefix_33727;\n        \n        int64_t x_33798;\n        \n        x_33798 = acc_33708;\n        \n        int64_t defunc_1_op_res_33799;\n        \n        defunc_1_op_res_33799 = add64(x_33791, x_33795);\n        \n        int64_t defunc_1_op_res_33800 = add64(x_33792, x_33796);\n        int64_t defunc_1_op_res_33801 = add64(x_33793, x_33797);\n        int64_t defunc_1_op_res_33802 = add64(x_33794, x_33798);\n        \n        x_33779 = defunc_1_op_res_33799;\n        x_33780 = defunc_1_op_res_33800;\n        x_33781 = defunc_1_op_res_33801;\n        x_33782 = defunc_1_op_res_33802;\n        for (int64_t i_33803 = 0; i_33803 < (int64_t) 9; i_33803++) {\n            x_33783 = private_mem_33667[i_33803];\n            x_33784 = private_mem_33669[i_33803];\n            x_33785 = private_mem_33671[i_33803];\n            x_33786 = private_mem_33673[i_33803];\n            \n            int64_t defunc_1_op_res_33787;\n            \n            defunc_1_op_res_33787 = add64(x_33779, x_33783);\n            \n            int64_t defunc_1_op_res_33788 = add64(x_33780, x_33784);\n            int64_t defunc_1_op_res_33789 = add64(x_33781, ",
            "x_33785);\n            int64_t defunc_1_op_res_33790 = add64(x_33782, x_33786);\n            \n            private_mem_33667[i_33803] = defunc_1_op_res_33787;\n            private_mem_33669[i_33803] = defunc_1_op_res_33788;\n            private_mem_33671[i_33803] = defunc_1_op_res_33789;\n            private_mem_33673[i_33803] = defunc_1_op_res_33790;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33804 = 0; i_33804 < (int64_t) 9; i_33804++) {\n            int64_t sharedIdx_33805 = sext_i32_i64(local_tid_33634 * 9) +\n                    i_33804;\n            \n            ((__local int64_t *) local_mem_33648)[sharedIdx_33805] =\n                private_mem_33667[i_33804];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33806 = 0; i_33806 < (int64_t) 9; i_33806++) {\n            int32_t sharedIdx_33807 = local_tid_33634 +\n                    sext_i64_i32(segscan_group_sizze_30939 * i_33806);\n            \n            private_mem_33667[i_33806] = ((__local\n                                           int64_t *) local_mem_33648)[sext_i32_i64(sharedIdx_33807)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33808 = 0; i_33808 < (int64_t) 9; i_33808++) {\n            int64_t sharedIdx_33809 = sext_i32_i64(local_tid_33634 * 9) +\n                    i_33808;\n            \n            ((__local int64_t *) local_mem_33648)[sharedIdx_33809] =\n                private_mem_33669[i_33808];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33810 = 0; i_33810 < (int64_t) 9; i_33810++) {\n            int32_t sharedIdx_33811 = local_tid_33634 +\n                    sext_i64_i32(segscan_group_sizze_30939 * i_33810);\n            \n            private_mem_33669[i_33810] = ((__local\n                                           int64_t *) local_mem_33648)[sext_i32_i64(sharedIdx_33811)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33812 = 0; i_33812 < (",
            "int64_t) 9; i_33812++) {\n            int64_t sharedIdx_33813 = sext_i32_i64(local_tid_33634 * 9) +\n                    i_33812;\n            \n            ((__local int64_t *) local_mem_33648)[sharedIdx_33813] =\n                private_mem_33671[i_33812];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33814 = 0; i_33814 < (int64_t) 9; i_33814++) {\n            int32_t sharedIdx_33815 = local_tid_33634 +\n                    sext_i64_i32(segscan_group_sizze_30939 * i_33814);\n            \n            private_mem_33671[i_33814] = ((__local\n                                           int64_t *) local_mem_33648)[sext_i32_i64(sharedIdx_33815)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33816 = 0; i_33816 < (int64_t) 9; i_33816++) {\n            int64_t sharedIdx_33817 = sext_i32_i64(local_tid_33634 * 9) +\n                    i_33816;\n            \n            ((__local int64_t *) local_mem_33648)[sharedIdx_33817] =\n                private_mem_33673[i_33816];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33818 = 0; i_33818 < (int64_t) 9; i_33818++) {\n            int32_t sharedIdx_33819 = local_tid_33634 +\n                    sext_i64_i32(segscan_group_sizze_30939 * i_33818);\n            \n            private_mem_33673[i_33818] = ((__local\n                                           int64_t *) local_mem_33648)[sext_i32_i64(sharedIdx_33819)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_33820 = 0; i_33820 < (int64_t) 9; i_33820++) {\n            int64_t gtid_30943 = blockOff_33666 + segscan_group_sizze_30939 *\n                    i_33820 + sext_i32_i64(local_tid_33634);\n            \n            if (slt64(gtid_30943, defunc_2_reduce_res_29111)) {\n                ((__global int64_t *) mem_31978)[gtid_30943] =\n                    private_mem_33667[i_33820];\n            }\n        }\n        for (int64_t i_33821 = 0; i_33821 < (",
            "int64_t) 9; i_33821++) {\n            int64_t gtid_30943 = blockOff_33666 + segscan_group_sizze_30939 *\n                    i_33821 + sext_i32_i64(local_tid_33634);\n            \n            if (slt64(gtid_30943, defunc_2_reduce_res_29111)) {\n                ((__global int64_t *) mem_31980)[gtid_30943] =\n                    private_mem_33669[i_33821];\n            }\n        }\n        for (int64_t i_33822 = 0; i_33822 < (int64_t) 9; i_33822++) {\n            int64_t gtid_30943 = blockOff_33666 + segscan_group_sizze_30939 *\n                    i_33822 + sext_i32_i64(local_tid_33634);\n            \n            if (slt64(gtid_30943, defunc_2_reduce_res_29111)) {\n                ((__global int64_t *) mem_31982)[gtid_30943] =\n                    private_mem_33671[i_33822];\n            }\n        }\n        for (int64_t i_33823 = 0; i_33823 < (int64_t) 9; i_33823++) {\n            int64_t gtid_30943 = blockOff_33666 + segscan_group_sizze_30939 *\n                    i_33823 + sext_i32_i64(local_tid_33634);\n            \n            if (slt64(gtid_30943, defunc_2_reduce_res_29111)) {\n                ((__global int64_t *) mem_31984)[gtid_30943] =\n                    private_mem_33673[i_33823];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_33665 == sdiv_up64(defunc_2_reduce_res_29111,\n                                          segscan_group_sizze_30939 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_33613)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30939\n}\n__kernel void clusterPointszisegscan_31002(__global int *global_failure,\n                                           uint local_mem_33896_backing_offset_0,\n                                           int64_t defunc_0_f_res_29473,\n                                           __global unsigned char *mem_32018,\n             ",
            "                              __global unsigned char *mem_32021,\n                                           __global unsigned char *mem_32023,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_33873,\n                                           __global\n                                           unsigned char *status_flags_mem_33875,\n                                           __global\n                                           unsigned char *aggregates_mem_33877,\n                                           __global\n                                           unsigned char *incprefixes_mem_33879,\n                                           __global\n                                           unsigned char *aggregates_mem_33881,\n                                           __global\n                                           unsigned char *incprefixes_mem_33883)\n{\n    #define segscan_group_sizze_30997 (clusterPointszisegscan_group_sizze_30996)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_33896_backing_0 =\n                  &shared_mem[local_mem_33896_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_33885;\n    int32_t local_tid_33886;\n    int64_t group_sizze_33889;\n    int32_t wave_sizze_33888;\n    int32_t group_tid_33887;\n    \n    global_tid_33885 = get_global_id(0);\n    local_tid_33886 = get_local_id(0);\n    group_sizze_33889 = get_local_size(0);\n    wave_sizze_33888 = LOCKSTEP_WIDTH;\n    group_tid_33887 = get_group_id(0);\n    \n    int32_t phys_tid_31002;\n    \n    phys_tid_31002 = global_tid_33885;\n    \n    int64_t byte_offsets_33890;\n    \n    byte_offsets_33890 = (int64_t) 0;\n    \n    int64_t byte_offsets_33891;\n    \n    byte_offsets_33891 = segscan_group_sizze_30997;\n    \n    int64_t byte_offsets_33892;\n    \n    byte_offsets_33892 = sdiv_up64(segscan_group_siz",
            "ze_30997, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_30997 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_33893;\n    \n    warp_byte_offset_33893 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_33894;\n    \n    warp_byte_offset_33894 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_33895;\n    \n    warp_byte_offset_33895 = (int64_t) 320;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_33896;\n    \n    local_mem_33896 = (__local char *) local_mem_33896_backing_0;\n    \n    int64_t trans_arr_len_33897;\n    \n    trans_arr_len_33897 = (int64_t) 9 * segscan_group_sizze_30997;\n    \n    int32_t dynamic_id_33907;\n    \n    if (local_tid_33886 == 0) {\n        dynamic_id_33907 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_33873)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_33896)[(int64_t) 0] = dynamic_id_33907;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_33907 = ((__local int32_t *) local_mem_33896)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_33908;\n    \n    blockOff_33908 = sext_i32_i64(dynamic_id_33907) * (int64_t) 9 *\n        segscan_group_sizze_30997;\n    \n    bool private_mem_33909[9];\n    int64_t private_mem_33911[9];\n    \n    // Load and map\n    {\n        for (int64_t i_33913 = 0; i_33913 < (int64_t) 9; i_33913++) {\n            int64_t gtid_31001 = blockOff_33908 +\n                    sext_i32_i64(local_tid_33886) + i_33913 *\n                    segscan_group_sizze_30997;\n            \n            if (slt64(gtid_31001, defunc_0_f_res_29473)) {\n                bool x_29507 = ((__global bool *) mem_32018)[gtid_31001];\n                \n                private_mem_33909[i_33913] = x_29507;\n                private_mem_33911[i_33913] = (int64_t) 1;\n            } else {\n                private_mem_33909[i_33913] = 0;\n                private",
            "_mem_33911[i_33913] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33914 = 0; i_33914 < (int64_t) 9; i_33914++) {\n            int64_t sharedIdx_33915 = sext_i32_i64(local_tid_33886) + i_33914 *\n                    segscan_group_sizze_30997;\n            \n            ((__local bool *) local_mem_33896)[sharedIdx_33915] =\n                private_mem_33909[i_33914];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33916 = 0; i_33916 < 9; i_33916++) {\n            int32_t sharedIdx_33917 = local_tid_33886 * 9 + i_33916;\n            \n            private_mem_33909[sext_i32_i64(i_33916)] = ((__local\n                                                         bool *) local_mem_33896)[sext_i32_i64(sharedIdx_33917)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33918 = 0; i_33918 < (int64_t) 9; i_33918++) {\n            int64_t sharedIdx_33919 = sext_i32_i64(local_tid_33886) + i_33918 *\n                    segscan_group_sizze_30997;\n            \n            ((__local int64_t *) local_mem_33896)[sharedIdx_33919] =\n                private_mem_33911[i_33918];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_33920 = 0; i_33920 < 9; i_33920++) {\n            int32_t sharedIdx_33921 = local_tid_33886 * 9 + i_33920;\n            \n            private_mem_33911[sext_i32_i64(i_33920)] = ((__local\n                                                         int64_t *) local_mem_33896)[sext_i32_i64(sharedIdx_33921)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_33922 = 0; i_33922 < (int64_t) 8; i_33922++) {\n            bool x_29500;\n            bool x_29502;\n            \n            x_29500 = private_mem_33909[i_33922];\n            x_29502 = private_mem_33909[i_33922 + (int64_t) 1];\n            \n            int64_t x_29501;\n            int64_t x_29503;\n            \n            x_",
            "29501 = private_mem_33911[i_33922];\n            x_29503 = private_mem_33911[i_33922 + (int64_t) 1];\n            \n            bool defunc_1_op_res_29504;\n            \n            defunc_1_op_res_29504 = x_29500 || x_29502;\n            \n            int64_t defunc_1_op_res_29505;\n            \n            if (x_29502) {\n                defunc_1_op_res_29505 = x_29503;\n            } else {\n                int64_t defunc_1_op_res_29506 = add64(x_29501, x_29503);\n                \n                defunc_1_op_res_29505 = defunc_1_op_res_29506;\n            }\n            private_mem_33909[i_33922 + (int64_t) 1] = defunc_1_op_res_29504;\n            private_mem_33911[i_33922 + (int64_t) 1] = defunc_1_op_res_29505;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_33896)[byte_offsets_33890 +\n                                           sext_i32_i64(local_tid_33886)] =\n            private_mem_33909[(int64_t) 8];\n        ((__local int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33886)] =\n            private_mem_33911[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_33930;\n    int64_t acc_33931;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_33923;\n        int64_t x_33924;\n        bool x_33925;\n        int64_t x_33926;\n        bool x_33932;\n        int64_t x_33933;\n        bool x_33934;\n        int64_t x_33935;\n        bool ltid_in_bounds_33939;\n        \n        ltid_in_bounds_33939 = slt64(sext_i32_i64(local_tid_33886),\n                                     segscan_group_sizze_30997);\n        \n        int32_t skip_threads_33940;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_33939) {\n                x_33925 = ((volatile __local\n                            bool *) local_mem_33896)[byte_offsets_33890 +\n         ",
            "                                            sext_i32_i64(local_tid_33886)];\n                x_33926 = ((volatile __local\n                            int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_33886)];\n                if ((local_tid_33886 - squot32(local_tid_33886, 32) * 32) ==\n                    0) {\n                    x_33923 = x_33925;\n                    x_33924 = x_33926;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_33940 = 1;\n            while (slt32(skip_threads_33940, 32)) {\n                if (sle32(skip_threads_33940, local_tid_33886 -\n                          squot32(local_tid_33886, 32) * 32) &&\n                    ltid_in_bounds_33939) {\n                    // read operands\n                    {\n                        x_33923 = ((volatile __local\n                                    bool *) local_mem_33896)[byte_offsets_33890 +\n                                                             (sext_i32_i64(local_tid_33886) -\n                                                              sext_i32_i64(skip_threads_33940))];\n                        x_33924 = ((volatile __local\n                                    int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_33886) -\n                                                                 sext_i32_i64(skip_threads_33940))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_33927 = x_33923 || x_33925;\n                        int64_t defunc_1_op_res_33928;\n                        \n                        if",
            " (x_33925) {\n                            defunc_1_op_res_33928 = x_33926;\n                        } else {\n                            int64_t defunc_1_op_res_33929 = add64(x_33924,\n                                                                  x_33926);\n                            \n                            defunc_1_op_res_33928 = defunc_1_op_res_33929;\n                        }\n                        x_33923 = defunc_1_op_res_33927;\n                        x_33924 = defunc_1_op_res_33928;\n                    }\n                }\n                if (sle32(wave_sizze_33888, skip_threads_33940)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_33940, local_tid_33886 -\n                          squot32(local_tid_33886, 32) * 32) &&\n                    ltid_in_bounds_33939) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_33896)[byte_offsets_33890 +\n                                                   sext_i32_i64(local_tid_33886)] =\n                            x_33923;\n                        x_33925 = x_33923;\n                        ((volatile __local\n                          int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_33886)] =\n                            x_33924;\n                        x_33926 = x_33924;\n                    }\n                }\n                if (sle32(wave_sizze_33888, skip_threads_33940)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_33940 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_33886 - squot32(local_tid_33886, 32) * 32) == 31 &&\n          ",
            "      ltid_in_bounds_33939) {\n                ((volatile __local bool *) local_mem_33896)[byte_offsets_33890 +\n                                                            sext_i32_i64(squot32(local_tid_33886,\n                                                                                 32))] =\n                    x_33923;\n                ((volatile __local\n                  int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_33886,\n                                                                   32))] =\n                    x_33924;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_33941;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_33886, 32) == 0 && ltid_in_bounds_33939) {\n                    x_33934 = ((volatile __local\n                                bool *) local_mem_33896)[byte_offsets_33890 +\n                                                         sext_i32_i64(local_tid_33886)];\n                    x_33935 = ((volatile __local\n                                int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_33886)];\n                    if ((local_tid_33886 - squot32(local_tid_33886, 32) * 32) ==\n                        0) {\n                        x_33932 = x_33934;\n                        x_33933 = x_33935;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_33941 = 1;\n                while (slt32(skip_threads_33941, 32)) {\n     ",
            "               if (sle32(skip_threads_33941, local_tid_33886 -\n                              squot32(local_tid_33886, 32) * 32) &&\n                        (squot32(local_tid_33886, 32) == 0 &&\n                         ltid_in_bounds_33939)) {\n                        // read operands\n                        {\n                            x_33932 = ((volatile __local\n                                        bool *) local_mem_33896)[byte_offsets_33890 +\n                                                                 (sext_i32_i64(local_tid_33886) -\n                                                                  sext_i32_i64(skip_threads_33941))];\n                            x_33933 = ((volatile __local\n                                        int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_33886) -\n                                                                     sext_i32_i64(skip_threads_33941))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_33936 = x_33932 || x_33934;\n                            int64_t defunc_1_op_res_33937;\n                            \n                            if (x_33934) {\n                                defunc_1_op_res_33937 = x_33935;\n                            } else {\n                                int64_t defunc_1_op_res_33938 = add64(x_33933,\n                                                                      x_33935);\n                                \n                                defunc_1_op_res_33937 = defunc_1_op_res_33938;\n                            }\n                            x_33932 = defunc_1_op_res_33936;\n                            x_33933 = defunc_1_op_res_33937;\n                        }\n                    }\n                   ",
            " if (sle32(wave_sizze_33888, skip_threads_33941)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_33941, local_tid_33886 -\n                              squot32(local_tid_33886, 32) * 32) &&\n                        (squot32(local_tid_33886, 32) == 0 &&\n                         ltid_in_bounds_33939)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_33896)[byte_offsets_33890 +\n                                                       sext_i32_i64(local_tid_33886)] =\n                                x_33932;\n                            x_33934 = x_33932;\n                            ((volatile __local\n                              int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_33886)] =\n                                x_33933;\n                            x_33935 = x_33933;\n                        }\n                    }\n                    if (sle32(wave_sizze_33888, skip_threads_33941)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_33941 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_33886, 32) == 0 || !ltid_in_bounds_33939)) {\n                // read operands\n                {\n                    x_33925 = x_33923;\n                    x_33926 = x_33924;\n                    x_33923 = ((__local\n                                bool *) local_mem_33896)[byte_offsets_33890 +\n                                                         (sext_i32_i64(squot32(local_tid_33886,\n                                                           ",
            "                    32)) -\n                                                          (int64_t) 1)];\n                    x_33924 = ((__local\n                                int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_33886,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_33927 = x_33923 || x_33925;\n                    int64_t defunc_1_op_res_33928;\n                    \n                    if (x_33925) {\n                        defunc_1_op_res_33928 = x_33926;\n                    } else {\n                        int64_t defunc_1_op_res_33929 = add64(x_33924, x_33926);\n                        \n                        defunc_1_op_res_33928 = defunc_1_op_res_33929;\n                    }\n                    x_33923 = defunc_1_op_res_33927;\n                    x_33924 = defunc_1_op_res_33928;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_33896)[byte_offsets_33890 +\n                                                       sext_i32_i64(local_tid_33886)] =\n                        x_33923;\n                    ((__local\n                      int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33886)] =\n                        x_33924;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_33886, 32) == 0) {\n                ((__loca",
            "l bool *) local_mem_33896)[byte_offsets_33890 +\n                                                   sext_i32_i64(local_tid_33886)] =\n                    x_33925;\n                ((__local\n                  int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_33886)] =\n                    x_33926;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_33886 == 0) {\n            acc_33930 = ((__local bool *) local_mem_33896)[byte_offsets_33890 +\n                                                           (segscan_group_sizze_30997 -\n                                                            (int64_t) 1)];\n            acc_33931 = ((__local\n                          int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_30997 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_33930 = ((__local bool *) local_mem_33896)[byte_offsets_33890 +\n                                                           (sext_i32_i64(local_tid_33886) -\n                                                            (int64_t) 1)];\n            acc_33931 = ((__local\n                          int64_t *) local_mem_33896)[squot64(byte_offsets_33891,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_33886) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_33942;\n    \n    prefix_33942 = 0;\n    \n    int64_t prefix_33943;\n    \n    prefix_33943 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dyna",
            "mic_id_33907 == (int64_t) 0 && local_tid_33886 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_33879)[dynamic_id_33907] = acc_33930;\n            ((volatile __global\n              int64_t *) incprefixes_mem_33883)[dynamic_id_33907] = acc_33931;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_33875)[dynamic_id_33907] = (int8_t) 2;\n            acc_33930 = 0;\n            acc_33931 = (int64_t) 0;\n        }\n        if (!(dynamic_id_33907 == (int64_t) 0) && slt32(local_tid_33886,\n                                                        wave_sizze_33888)) {\n            if (local_tid_33886 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_33877)[dynamic_id_33907] = acc_33930;\n                ((volatile __global\n                  int64_t *) aggregates_mem_33881)[dynamic_id_33907] =\n                    acc_33931;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_33875)[dynamic_id_33907] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_33896)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_33875)[dynamic_id_33907 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_33944;\n            \n            status_33944 = ((__local int8_t *) local_mem_33896)[(int64_t) 0];\n            if (status_33944 == (int8_t) 2) {\n                if (local_tid_33886 == 0) {\n                    prefix_33942 = ((volatile __global\n                                     bool *) incprefixes_mem_33879)[dynamic_id_33907 -\n                                                                    (int64_t) 1];\n                    prefix_33943 = ((volatile __global\n                  ",
            "                   int64_t *) incprefixes_mem_33883)[dynamic_id_33907 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_33945 = dynamic_id_33907 -\n                        sext_i32_i64(wave_sizze_33888);\n                \n                while (slt32(wave_sizze_33888 * -1, readOffset_33945)) {\n                    int32_t read_i_33946 = readOffset_33945 + local_tid_33886;\n                    bool aggr_33947 = 0;\n                    int64_t aggr_33948 = (int64_t) 0;\n                    int8_t flag_33949 = (int8_t) 0;\n                    int8_t used_33950 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_33946)) {\n                        flag_33949 = ((volatile __global\n                                       int8_t *) status_flags_mem_33875)[sext_i32_i64(read_i_33946)];\n                        if (flag_33949 == (int8_t) 2) {\n                            aggr_33947 = ((volatile __global\n                                           bool *) incprefixes_mem_33879)[sext_i32_i64(read_i_33946)];\n                            aggr_33948 = ((volatile __global\n                                           int64_t *) incprefixes_mem_33883)[sext_i32_i64(read_i_33946)];\n                        } else {\n                            if (flag_33949 == (int8_t) 1) {\n                                aggr_33947 = ((volatile __global\n                                               bool *) aggregates_mem_33877)[sext_i32_i64(read_i_33946)];\n                                aggr_33948 = ((volatile __global\n                                               int64_t *) aggregates_mem_33881)[sext_i32_i64(read_i_33946)];\n                                used_33950 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_33896)[warp_byte_offset_33893 +\n                                                ",
            "       sext_i32_i64(local_tid_33886)] =\n                        aggr_33947;\n                    ((__local\n                      int64_t *) local_mem_33896)[squot64(warp_byte_offset_33894,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_33886)] =\n                        aggr_33948;\n                    \n                    int8_t tmp_33951;\n                    \n                    tmp_33951 = flag_33949 | used_33950 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_33896)[sext_i32_i64(local_tid_33886)] =\n                        tmp_33951;\n                    mem_fence_local();\n                    flag_33949 = ((volatile __local\n                                   int8_t *) local_mem_33896)[sext_i32_i64(wave_sizze_33888) -\n                                                              (int64_t) 1];\n                    if (local_tid_33886 == 0) {\n                        if (!(flag_33949 == (int8_t) 2)) {\n                            bool x_33952 = 0;\n                            int64_t x_33953 = (int64_t) 0;\n                            bool x_33954;\n                            int64_t x_33955;\n                            int8_t flag1_33959;\n                            \n                            flag1_33959 = (int8_t) 0;\n                            \n                            int8_t flag2_33960;\n                            int8_t used1_33961;\n                            \n                            used1_33961 = (int8_t) 0;\n                            \n                            int8_t used2_33962;\n                            \n                            for (int32_t i_33963 = 0; i_33963 <\n                                 wave_sizze_33888; i_33963++) {\n                                flag2_33960 = ((__local\n                                                int8_t *) local_mem_33896)[sext_i32_i64(i_33963)];\n                                u",
            "sed2_33962 = lshr8(flag2_33960, (int8_t) 2);\n                                flag2_33960 = flag2_33960 & (int8_t) 3;\n                                x_33954 = ((__local\n                                            bool *) local_mem_33896)[warp_byte_offset_33893 +\n                                                                     sext_i32_i64(i_33963)];\n                                x_33955 = ((__local\n                                            int64_t *) local_mem_33896)[squot64(warp_byte_offset_33894,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_33963)];\n                                if (!(flag2_33960 == (int8_t) 1)) {\n                                    flag1_33959 = flag2_33960;\n                                    used1_33961 = used2_33962;\n                                    x_33952 = x_33954;\n                                    x_33953 = x_33955;\n                                } else {\n                                    used1_33961 += used2_33962;\n                                    \n                                    bool defunc_1_op_res_33956;\n                                    \n                                    defunc_1_op_res_33956 = x_33952 || x_33954;\n                                    \n                                    int64_t defunc_1_op_res_33957;\n                                    \n                                    if (x_33954) {\n                                        defunc_1_op_res_33957 = x_33955;\n                                    } else {\n                                        int64_t defunc_1_op_res_33958 =\n                                                add64(x_33953, x_33955);\n                                        \n                                        defunc_1_op_res_33957 =\n                                            defunc_1_op_res_33958;\n                                    }\n     ",
            "                               x_33952 = defunc_1_op_res_33956;\n                                    x_33953 = defunc_1_op_res_33957;\n                                }\n                            }\n                            flag_33949 = flag1_33959;\n                            used_33950 = used1_33961;\n                            aggr_33947 = x_33952;\n                            aggr_33948 = x_33953;\n                        } else {\n                            aggr_33947 = ((__local\n                                           bool *) local_mem_33896)[warp_byte_offset_33893 +\n                                                                    (sext_i32_i64(wave_sizze_33888) -\n                                                                     (int64_t) 1)];\n                            aggr_33948 = ((__local\n                                           int64_t *) local_mem_33896)[squot64(warp_byte_offset_33894,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_33888) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_33949 == (int8_t) 2) {\n                            readOffset_33945 = wave_sizze_33888 * -1;\n                        } else {\n                            readOffset_33945 -= zext_i8_i32(used_33950);\n                        }\n                        ((__local int32_t *) local_mem_33896)[(int64_t) 0] =\n                            readOffset_33945;\n                        \n                        bool x_33964;\n                        \n                        x_33964 = aggr_33947;\n                        \n                        int64_t x_33965;\n                        \n                        x_33965 = aggr_33948;\n                        \n                        bool x_33966;\n                        \n                        x_",
            "33966 = prefix_33942;\n                        \n                        int64_t x_33967;\n                        \n                        x_33967 = prefix_33943;\n                        \n                        bool defunc_1_op_res_33968;\n                        \n                        defunc_1_op_res_33968 = x_33964 || x_33966;\n                        \n                        int64_t defunc_1_op_res_33969;\n                        \n                        if (x_33966) {\n                            defunc_1_op_res_33969 = x_33967;\n                        } else {\n                            int64_t defunc_1_op_res_33970 = add64(x_33965,\n                                                                  x_33967);\n                            \n                            defunc_1_op_res_33969 = defunc_1_op_res_33970;\n                        }\n                        prefix_33942 = defunc_1_op_res_33968;\n                        prefix_33943 = defunc_1_op_res_33969;\n                    }\n                    mem_fence_local();\n                    readOffset_33945 = ((__local\n                                         int32_t *) local_mem_33896)[(int64_t) 0];\n                }\n            }\n            if (local_tid_33886 == 0) {\n                bool x_33971 = prefix_33942;\n                int64_t x_33972 = prefix_33943;\n                bool x_33973 = acc_33930;\n                int64_t x_33974 = acc_33931;\n                bool defunc_1_op_res_33975 = x_33971 || x_33973;\n                int64_t defunc_1_op_res_33976;\n                \n                if (x_33973) {\n                    defunc_1_op_res_33976 = x_33974;\n                } else {\n                    int64_t defunc_1_op_res_33977 = add64(x_33972, x_33974);\n                    \n                    defunc_1_op_res_33976 = defunc_1_op_res_33977;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_33879)[dynamic_id_33907] =\n                    defunc_1_op_res_33975;\n            ",
            "    ((volatile __global\n                  int64_t *) incprefixes_mem_33883)[dynamic_id_33907] =\n                    defunc_1_op_res_33976;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_33875)[dynamic_id_33907] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_33896)[warp_byte_offset_33893] =\n                    prefix_33942;\n                ((__local\n                  int64_t *) local_mem_33896)[squot64(warp_byte_offset_33894,\n                                                      (int64_t) 8)] =\n                    prefix_33943;\n                acc_33930 = 0;\n                acc_33931 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_33907 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_33942 = ((__local\n                             bool *) local_mem_33896)[warp_byte_offset_33893];\n            prefix_33943 = ((__local\n                             int64_t *) local_mem_33896)[squot64(warp_byte_offset_33894,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_33978;\n        bool x_33980;\n        bool x_33985;\n        \n        x_33985 = prefix_33942;\n        \n        bool x_33987;\n        \n        x_33987 = acc_33930;\n        \n        int64_t x_33979;\n        int64_t x_33981;\n        int64_t x_33986;\n        \n        x_33986 = prefix_33943;\n        \n        int64_t x_33988;\n        \n        x_33988 = acc_33931;\n        \n        bool defunc_1_op_res_33989;\n        \n        defunc_1_op_res_33989 = x_33985 || x_33987;\n        \n        int64_t defunc_1_op_res_33990;\n        \n        if (x_33987) {\n            defunc_1_op_res_33990 = x_33988;\n        } else {\n            int64_t defunc_1_op_res_33991 = add64(x_33986, x_33988);\n            \n            defunc_1_op_res_33990 = defunc_1_op_res_33991;\n    ",
            "    }\n        x_33978 = defunc_1_op_res_33989;\n        x_33979 = defunc_1_op_res_33990;\n        for (int64_t i_33992 = 0; i_33992 < (int64_t) 9; i_33992++) {\n            x_33980 = private_mem_33909[i_33992];\n            x_33981 = private_mem_33911[i_33992];\n            \n            bool defunc_1_op_res_33982;\n            \n            defunc_1_op_res_33982 = x_33978 || x_33980;\n            \n            int64_t defunc_1_op_res_33983;\n            \n            if (x_33980) {\n                defunc_1_op_res_33983 = x_33981;\n            } else {\n                int64_t defunc_1_op_res_33984 = add64(x_33979, x_33981);\n                \n                defunc_1_op_res_33983 = defunc_1_op_res_33984;\n            }\n            private_mem_33909[i_33992] = defunc_1_op_res_33982;\n            private_mem_33911[i_33992] = defunc_1_op_res_33983;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33993 = 0; i_33993 < (int64_t) 9; i_33993++) {\n            int64_t sharedIdx_33994 = sext_i32_i64(local_tid_33886 * 9) +\n                    i_33993;\n            \n            ((__local bool *) local_mem_33896)[sharedIdx_33994] =\n                private_mem_33909[i_33993];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33995 = 0; i_33995 < (int64_t) 9; i_33995++) {\n            int32_t sharedIdx_33996 = local_tid_33886 +\n                    sext_i64_i32(segscan_group_sizze_30997 * i_33995);\n            \n            private_mem_33909[i_33995] = ((__local\n                                           bool *) local_mem_33896)[sext_i32_i64(sharedIdx_33996)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33997 = 0; i_33997 < (int64_t) 9; i_33997++) {\n            int64_t sharedIdx_33998 = sext_i32_i64(local_tid_33886 * 9) +\n                    i_33997;\n            \n            ((__local int64_t *) local_mem_33896)[sharedIdx_33998] =\n                private_mem_33911[i_33997];\n        }\n        ",
            "barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_33999 = 0; i_33999 < (int64_t) 9; i_33999++) {\n            int32_t sharedIdx_34000 = local_tid_33886 +\n                    sext_i64_i32(segscan_group_sizze_30997 * i_33999);\n            \n            private_mem_33911[i_33999] = ((__local\n                                           int64_t *) local_mem_33896)[sext_i32_i64(sharedIdx_34000)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_34001 = 0; i_34001 < (int64_t) 9; i_34001++) {\n            int64_t gtid_31001 = blockOff_33908 + segscan_group_sizze_30997 *\n                    i_34001 + sext_i32_i64(local_tid_33886);\n            \n            if (slt64(gtid_31001, defunc_0_f_res_29473)) {\n                ((__global bool *) mem_32021)[gtid_31001] =\n                    private_mem_33909[i_34001];\n            }\n        }\n        for (int64_t i_34002 = 0; i_34002 < (int64_t) 9; i_34002++) {\n            int64_t gtid_31001 = blockOff_33908 + segscan_group_sizze_30997 *\n                    i_34002 + sext_i32_i64(local_tid_33886);\n            \n            if (slt64(gtid_31001, defunc_0_f_res_29473)) {\n                ((__global int64_t *) mem_32023)[gtid_31001] =\n                    private_mem_33911[i_34002];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_33907 == sdiv_up64(defunc_0_f_res_29473,\n                                          segscan_group_sizze_30997 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_33873)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_30997\n}\n__kernel void clusterPointszisegscan_31010(__global int *global_failure,\n                                           uint local_mem_34023_backing_offset_0,\n                                           int64_t defu",
            "nc_0_f_res_29473,\n                                           __global unsigned char *mem_32018,\n                                           __global unsigned char *mem_32026,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_34006,\n                                           __global\n                                           unsigned char *status_flags_mem_34008,\n                                           __global\n                                           unsigned char *aggregates_mem_34010,\n                                           __global\n                                           unsigned char *incprefixes_mem_34012)\n{\n    #define segscan_group_sizze_31005 (clusterPointszisegscan_group_sizze_31004)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_34023_backing_0 =\n                  &shared_mem[local_mem_34023_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34014;\n    int32_t local_tid_34015;\n    int64_t group_sizze_34018;\n    int32_t wave_sizze_34017;\n    int32_t group_tid_34016;\n    \n    global_tid_34014 = get_global_id(0);\n    local_tid_34015 = get_local_id(0);\n    group_sizze_34018 = get_local_size(0);\n    wave_sizze_34017 = LOCKSTEP_WIDTH;\n    group_tid_34016 = get_group_id(0);\n    \n    int32_t phys_tid_31010;\n    \n    phys_tid_31010 = global_tid_34014;\n    \n    int64_t byte_offsets_34019;\n    \n    byte_offsets_34019 = (int64_t) 0;\n    \n    int64_t byte_offsets_34020;\n    \n    byte_offsets_34020 = segscan_group_sizze_31005 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_34021;\n    \n    warp_byte_offset_34021 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_34022;\n    \n    warp_byte_offset_34022 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_34023;\n    \n    local_mem_34023 = (__local char *) local",
            "_mem_34023_backing_0;\n    \n    int64_t trans_arr_len_34024;\n    \n    trans_arr_len_34024 = (int64_t) 9 * segscan_group_sizze_31005;\n    \n    int32_t dynamic_id_34031;\n    \n    if (local_tid_34015 == 0) {\n        dynamic_id_34031 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_34006)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_34023)[(int64_t) 0] = dynamic_id_34031;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_34031 = ((__local int32_t *) local_mem_34023)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_34032;\n    \n    blockOff_34032 = sext_i32_i64(dynamic_id_34031) * (int64_t) 9 *\n        segscan_group_sizze_31005;\n    \n    int64_t private_mem_34033[9];\n    \n    // Load and map\n    {\n        for (int64_t i_34035 = 0; i_34035 < (int64_t) 9; i_34035++) {\n            int64_t gtid_31009 = blockOff_34032 +\n                    sext_i32_i64(local_tid_34015) + i_34035 *\n                    segscan_group_sizze_31005;\n            \n            if (slt64(gtid_31009, defunc_0_f_res_29473)) {\n                int64_t i_p_o_31694 = add64((int64_t) 1, gtid_31009);\n                int64_t rot_i_31695 = smod64(i_p_o_31694, defunc_0_f_res_29473);\n                bool x_29514 = ((__global bool *) mem_32018)[rot_i_31695];\n                int64_t defunc_0_f_res_29515 = btoi_bool_i64(x_29514);\n                \n                private_mem_34033[i_34035] = defunc_0_f_res_29515;\n            } else {\n                private_mem_34033[i_34035] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34036 = 0; i_34036 < (int64_t) 9; i_34036++) {\n            int64_t sharedIdx_34037 = sext_i32_i64(local_tid_34015) + i_34036 *\n                    segscan_group_sizze_31005;\n            \n            ((__local int64_t *) local_mem_3",
            "4023)[sharedIdx_34037] =\n                private_mem_34033[i_34036];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34038 = 0; i_34038 < 9; i_34038++) {\n            int32_t sharedIdx_34039 = local_tid_34015 * 9 + i_34038;\n            \n            private_mem_34033[sext_i32_i64(i_34038)] = ((__local\n                                                         int64_t *) local_mem_34023)[sext_i32_i64(sharedIdx_34039)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_34040 = 0; i_34040 < (int64_t) 8; i_34040++) {\n            int64_t x_29511;\n            int64_t x_29512;\n            \n            x_29511 = private_mem_34033[i_34040];\n            x_29512 = private_mem_34033[i_34040 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29513;\n            \n            defunc_1_op_res_29513 = add64(x_29511, x_29512);\n            private_mem_34033[i_34040 + (int64_t) 1] = defunc_1_op_res_29513;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34015)] =\n            private_mem_34033[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_34044;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_34041;\n        int64_t x_34042;\n        int64_t x_34045;\n        int64_t x_34046;\n        bool ltid_in_bounds_34048;\n        \n        ltid_in_bounds_34048 = slt64(sext_i32_i64(local_tid_34015),\n                                     segscan_group_sizze_31005);\n        \n        int32_t skip_threads_34049;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_34048) {\n                x_34042 = ((volatile __local\n                            int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n               ",
            "                                                 (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_34015)];\n                if ((local_tid_34015 - squot32(local_tid_34015, 32) * 32) ==\n                    0) {\n                    x_34041 = x_34042;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_34049 = 1;\n            while (slt32(skip_threads_34049, 32)) {\n                if (sle32(skip_threads_34049, local_tid_34015 -\n                          squot32(local_tid_34015, 32) * 32) &&\n                    ltid_in_bounds_34048) {\n                    // read operands\n                    {\n                        x_34041 = ((volatile __local\n                                    int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_34015) -\n                                                                 sext_i32_i64(skip_threads_34049))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_34043 = add64(x_34041, x_34042);\n                        \n                        x_34041 = defunc_1_op_res_34043;\n                    }\n                }\n                if (sle32(wave_sizze_34017, skip_threads_34049)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_34049, local_tid_34015 -\n                          squot32(local_tid_34015, 32) * 32) &&\n                    ltid_in_bounds_34048) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                              (int64_t) ",
            "8) +\n                                                      sext_i32_i64(local_tid_34015)] =\n                            x_34041;\n                        x_34042 = x_34041;\n                    }\n                }\n                if (sle32(wave_sizze_34017, skip_threads_34049)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_34049 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_34015 - squot32(local_tid_34015, 32) * 32) == 31 &&\n                ltid_in_bounds_34048) {\n                ((volatile __local\n                  int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_34015,\n                                                                   32))] =\n                    x_34041;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_34050;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_34015, 32) == 0 && ltid_in_bounds_34048) {\n                    x_34046 = ((volatile __local\n                                int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_34015)];\n                    if ((local_tid_34015 - squot32(local_tid_34015, 32) * 32) ==\n                        0) {\n                        x_34045 = x_34046;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_34050 = 1;\n",
            "                while (slt32(skip_threads_34050, 32)) {\n                    if (sle32(skip_threads_34050, local_tid_34015 -\n                              squot32(local_tid_34015, 32) * 32) &&\n                        (squot32(local_tid_34015, 32) == 0 &&\n                         ltid_in_bounds_34048)) {\n                        // read operands\n                        {\n                            x_34045 = ((volatile __local\n                                        int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_34015) -\n                                                                     sext_i32_i64(skip_threads_34050))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_34047 = add64(x_34045,\n                                                                  x_34046);\n                            \n                            x_34045 = defunc_1_op_res_34047;\n                        }\n                    }\n                    if (sle32(wave_sizze_34017, skip_threads_34050)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_34050, local_tid_34015 -\n                              squot32(local_tid_34015, 32) * 32) &&\n                        (squot32(local_tid_34015, 32) == 0 &&\n                         ltid_in_bounds_34048)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_34015)] =\n                           ",
            "     x_34045;\n                            x_34046 = x_34045;\n                        }\n                    }\n                    if (sle32(wave_sizze_34017, skip_threads_34050)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_34050 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_34015, 32) == 0 || !ltid_in_bounds_34048)) {\n                // read operands\n                {\n                    x_34042 = x_34041;\n                    x_34041 = ((__local\n                                int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_34015,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_34043 = add64(x_34041, x_34042);\n                    \n                    x_34041 = defunc_1_op_res_34043;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34015)] =\n                        x_34041;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_34015, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                      ",
            "                                (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34015)] =\n                    x_34042;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_34015 == 0) {\n            acc_34044 = ((__local\n                          int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31005 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_34044 = ((__local\n                          int64_t *) local_mem_34023)[squot64(byte_offsets_34019,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_34015) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_34051;\n    \n    prefix_34051 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_34031 == (int64_t) 0 && local_tid_34015 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_34012)[dynamic_id_34031] = acc_34044;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_34008)[dynamic_id_34031] = (int8_t) 2;\n            acc_34044 = (int64_t) 0;\n        }\n        if (!(dynamic_id_34031 == (int64_t) 0) && slt32(local_tid_34015,\n                                                        wave_sizze_34017)) {\n            if (local_tid_34015 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_34010)[dynamic_id_34031] =\n                    acc_34044;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34008)[dynamic_id_34031] =",
            "\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_34023)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_34008)[dynamic_id_34031 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_34052;\n            \n            status_34052 = ((__local int8_t *) local_mem_34023)[(int64_t) 0];\n            if (status_34052 == (int8_t) 2) {\n                if (local_tid_34015 == 0) {\n                    prefix_34051 = ((volatile __global\n                                     int64_t *) incprefixes_mem_34012)[dynamic_id_34031 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_34053 = dynamic_id_34031 -\n                        sext_i32_i64(wave_sizze_34017);\n                \n                while (slt32(wave_sizze_34017 * -1, readOffset_34053)) {\n                    int32_t read_i_34054 = readOffset_34053 + local_tid_34015;\n                    int64_t aggr_34055 = (int64_t) 0;\n                    int8_t flag_34056 = (int8_t) 0;\n                    int8_t used_34057 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_34054)) {\n                        flag_34056 = ((volatile __global\n                                       int8_t *) status_flags_mem_34008)[sext_i32_i64(read_i_34054)];\n                        if (flag_34056 == (int8_t) 2) {\n                            aggr_34055 = ((volatile __global\n                                           int64_t *) incprefixes_mem_34012)[sext_i32_i64(read_i_34054)];\n                        } else {\n                            if (flag_34056 == (int8_t) 1) {\n                                aggr_34055 = ((volatile __global\n                                               int",
            "64_t *) aggregates_mem_34010)[sext_i32_i64(read_i_34054)];\n                                used_34057 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_34023)[squot64(warp_byte_offset_34021,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34015)] =\n                        aggr_34055;\n                    \n                    int8_t tmp_34058;\n                    \n                    tmp_34058 = flag_34056 | used_34057 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_34023)[sext_i32_i64(local_tid_34015)] =\n                        tmp_34058;\n                    mem_fence_local();\n                    flag_34056 = ((volatile __local\n                                   int8_t *) local_mem_34023)[sext_i32_i64(wave_sizze_34017) -\n                                                              (int64_t) 1];\n                    if (local_tid_34015 == 0) {\n                        if (!(flag_34056 == (int8_t) 2)) {\n                            int64_t x_34059 = (int64_t) 0;\n                            int64_t x_34060;\n                            int8_t flag1_34062;\n                            \n                            flag1_34062 = (int8_t) 0;\n                            \n                            int8_t flag2_34063;\n                            int8_t used1_34064;\n                            \n                            used1_34064 = (int8_t) 0;\n                            \n                            int8_t used2_34065;\n                            \n                            for (int32_t i_34066 = 0; i_34066 <\n                                 wave_sizze_34017; i_34066++) {\n                                flag2_34063 = ((__local\n                                                int8_t *) local_mem_34023)[sext_i32_i64(i_34066)];\n   ",
            "                             used2_34065 = lshr8(flag2_34063, (int8_t) 2);\n                                flag2_34063 = flag2_34063 & (int8_t) 3;\n                                x_34060 = ((__local\n                                            int64_t *) local_mem_34023)[squot64(warp_byte_offset_34021,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_34066)];\n                                if (!(flag2_34063 == (int8_t) 1)) {\n                                    flag1_34062 = flag2_34063;\n                                    used1_34064 = used2_34065;\n                                    x_34059 = x_34060;\n                                } else {\n                                    used1_34064 += used2_34065;\n                                    \n                                    int64_t defunc_1_op_res_34061;\n                                    \n                                    defunc_1_op_res_34061 = add64(x_34059,\n                                                                  x_34060);\n                                    x_34059 = defunc_1_op_res_34061;\n                                }\n                            }\n                            flag_34056 = flag1_34062;\n                            used_34057 = used1_34064;\n                            aggr_34055 = x_34059;\n                        } else {\n                            aggr_34055 = ((__local\n                                           int64_t *) local_mem_34023)[squot64(warp_byte_offset_34021,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_34017) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_34056 == (int8_t) 2) {\n              ",
            "              readOffset_34053 = wave_sizze_34017 * -1;\n                        } else {\n                            readOffset_34053 -= zext_i8_i32(used_34057);\n                        }\n                        ((__local int32_t *) local_mem_34023)[(int64_t) 0] =\n                            readOffset_34053;\n                        \n                        int64_t x_34067;\n                        \n                        x_34067 = aggr_34055;\n                        \n                        int64_t x_34068;\n                        \n                        x_34068 = prefix_34051;\n                        \n                        int64_t defunc_1_op_res_34069;\n                        \n                        defunc_1_op_res_34069 = add64(x_34067, x_34068);\n                        prefix_34051 = defunc_1_op_res_34069;\n                    }\n                    mem_fence_local();\n                    readOffset_34053 = ((__local\n                                         int32_t *) local_mem_34023)[(int64_t) 0];\n                }\n            }\n            if (local_tid_34015 == 0) {\n                int64_t x_34070 = prefix_34051;\n                int64_t x_34071 = acc_34044;\n                int64_t defunc_1_op_res_34072 = add64(x_34070, x_34071);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_34012)[dynamic_id_34031] =\n                    defunc_1_op_res_34072;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34008)[dynamic_id_34031] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_34023)[squot64(warp_byte_offset_34021,\n                                                      (int64_t) 8)] =\n                    prefix_34051;\n                acc_34044 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_34031 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_34051 = ((__lo",
            "cal\n                             int64_t *) local_mem_34023)[squot64(warp_byte_offset_34021,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_34073;\n        int64_t x_34074;\n        int64_t x_34076;\n        \n        x_34076 = prefix_34051;\n        \n        int64_t x_34077;\n        \n        x_34077 = acc_34044;\n        \n        int64_t defunc_1_op_res_34078;\n        \n        defunc_1_op_res_34078 = add64(x_34076, x_34077);\n        x_34073 = defunc_1_op_res_34078;\n        for (int64_t i_34079 = 0; i_34079 < (int64_t) 9; i_34079++) {\n            x_34074 = private_mem_34033[i_34079];\n            \n            int64_t defunc_1_op_res_34075;\n            \n            defunc_1_op_res_34075 = add64(x_34073, x_34074);\n            private_mem_34033[i_34079] = defunc_1_op_res_34075;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34080 = 0; i_34080 < (int64_t) 9; i_34080++) {\n            int64_t sharedIdx_34081 = sext_i32_i64(local_tid_34015 * 9) +\n                    i_34080;\n            \n            ((__local int64_t *) local_mem_34023)[sharedIdx_34081] =\n                private_mem_34033[i_34080];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34082 = 0; i_34082 < (int64_t) 9; i_34082++) {\n            int32_t sharedIdx_34083 = local_tid_34015 +\n                    sext_i64_i32(segscan_group_sizze_31005 * i_34082);\n            \n            private_mem_34033[i_34082] = ((__local\n                                           int64_t *) local_mem_34023)[sext_i32_i64(sharedIdx_34083)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_34084 = 0; i_34084 < (int64_t) 9; i_34084++) {\n            int64_t gtid_31009 = blockOff_34032 + segscan_group_sizze_31005 *\n                    i_3",
            "4084 + sext_i32_i64(local_tid_34015);\n            \n            if (slt64(gtid_31009, defunc_0_f_res_29473)) {\n                ((__global int64_t *) mem_32026)[gtid_31009] =\n                    private_mem_34033[i_34084];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_34031 == sdiv_up64(defunc_0_f_res_29473,\n                                          segscan_group_sizze_31005 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_34006)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31005\n}\n__kernel void clusterPointszisegscan_31024(__global int *global_failure,\n                                           uint local_mem_34110_backing_offset_0,\n                                           int64_t num_segments_29516, __global\n                                           unsigned char *mem_32028, __global\n                                           unsigned char *mem_32032, __global\n                                           unsigned char *clusterPointsziid_counter_mem_34093,\n                                           __global\n                                           unsigned char *status_flags_mem_34095,\n                                           __global\n                                           unsigned char *aggregates_mem_34097,\n                                           __global\n                                           unsigned char *incprefixes_mem_34099)\n{\n    #define segscan_group_sizze_31019 (clusterPointszisegscan_group_sizze_31018)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_34110_backing_0 =\n                  &shared_mem[local_mem_34110_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34101;\n    int32_t local_tid_34102;\n    int",
            "64_t group_sizze_34105;\n    int32_t wave_sizze_34104;\n    int32_t group_tid_34103;\n    \n    global_tid_34101 = get_global_id(0);\n    local_tid_34102 = get_local_id(0);\n    group_sizze_34105 = get_local_size(0);\n    wave_sizze_34104 = LOCKSTEP_WIDTH;\n    group_tid_34103 = get_group_id(0);\n    \n    int32_t phys_tid_31024;\n    \n    phys_tid_31024 = global_tid_34101;\n    \n    int64_t byte_offsets_34106;\n    \n    byte_offsets_34106 = (int64_t) 0;\n    \n    int64_t byte_offsets_34107;\n    \n    byte_offsets_34107 = segscan_group_sizze_31019 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_34108;\n    \n    warp_byte_offset_34108 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_34109;\n    \n    warp_byte_offset_34109 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_34110;\n    \n    local_mem_34110 = (__local char *) local_mem_34110_backing_0;\n    \n    int64_t trans_arr_len_34111;\n    \n    trans_arr_len_34111 = (int64_t) 9 * segscan_group_sizze_31019;\n    \n    int32_t dynamic_id_34118;\n    \n    if (local_tid_34102 == 0) {\n        dynamic_id_34118 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_34093)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_34110)[(int64_t) 0] = dynamic_id_34118;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_34118 = ((__local int32_t *) local_mem_34110)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_34119;\n    \n    blockOff_34119 = sext_i32_i64(dynamic_id_34118) * (int64_t) 9 *\n        segscan_group_sizze_31019;\n    \n    int64_t private_mem_34120[9];\n    \n    // Load and map\n    {\n        for (int64_t i_34122 = 0; i_34122 < (int64_t) 9; i_34122++) {\n            int64_t gtid_31023 = blockOff_34119 +\n                    sext_i32_i64(local_tid_34102) + i_34122 *\n                    segscan_group_sizze_31019;\n            \n        ",
            "    if (slt64(gtid_31023, num_segments_29516)) {\n                int64_t x_29535 = ((__global int64_t *) mem_32028)[gtid_31023];\n                \n                private_mem_34120[i_34122] = x_29535;\n            } else {\n                private_mem_34120[i_34122] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34123 = 0; i_34123 < (int64_t) 9; i_34123++) {\n            int64_t sharedIdx_34124 = sext_i32_i64(local_tid_34102) + i_34123 *\n                    segscan_group_sizze_31019;\n            \n            ((__local int64_t *) local_mem_34110)[sharedIdx_34124] =\n                private_mem_34120[i_34123];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34125 = 0; i_34125 < 9; i_34125++) {\n            int32_t sharedIdx_34126 = local_tid_34102 * 9 + i_34125;\n            \n            private_mem_34120[sext_i32_i64(i_34125)] = ((__local\n                                                         int64_t *) local_mem_34110)[sext_i32_i64(sharedIdx_34126)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_34127 = 0; i_34127 < (int64_t) 8; i_34127++) {\n            int64_t x_29532;\n            int64_t x_29533;\n            \n            x_29532 = private_mem_34120[i_34127];\n            x_29533 = private_mem_34120[i_34127 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29534;\n            \n            defunc_1_op_res_29534 = add64(x_29532, x_29533);\n            private_mem_34120[i_34127 + (int64_t) 1] = defunc_1_op_res_29534;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34102)] =\n            private_mem_34120[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n",
            "    int64_t acc_34131;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_34128;\n        int64_t x_34129;\n        int64_t x_34132;\n        int64_t x_34133;\n        bool ltid_in_bounds_34135;\n        \n        ltid_in_bounds_34135 = slt64(sext_i32_i64(local_tid_34102),\n                                     segscan_group_sizze_31019);\n        \n        int32_t skip_threads_34136;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_34135) {\n                x_34129 = ((volatile __local\n                            int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_34102)];\n                if ((local_tid_34102 - squot32(local_tid_34102, 32) * 32) ==\n                    0) {\n                    x_34128 = x_34129;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_34136 = 1;\n            while (slt32(skip_threads_34136, 32)) {\n                if (sle32(skip_threads_34136, local_tid_34102 -\n                          squot32(local_tid_34102, 32) * 32) &&\n                    ltid_in_bounds_34135) {\n                    // read operands\n                    {\n                        x_34128 = ((volatile __local\n                                    int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_34102) -\n                                                                 sext_i32_i64(skip_threads_34136))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_34130 = add64(x_34128, x_34129);\n                        \n                       ",
            " x_34128 = defunc_1_op_res_34130;\n                    }\n                }\n                if (sle32(wave_sizze_34104, skip_threads_34136)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_34136, local_tid_34102 -\n                          squot32(local_tid_34102, 32) * 32) &&\n                    ltid_in_bounds_34135) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_34102)] =\n                            x_34128;\n                        x_34129 = x_34128;\n                    }\n                }\n                if (sle32(wave_sizze_34104, skip_threads_34136)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_34136 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_34102 - squot32(local_tid_34102, 32) * 32) == 31 &&\n                ltid_in_bounds_34135) {\n                ((volatile __local\n                  int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_34102,\n                                                                   32))] =\n                    x_34128;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_34137;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_34102, 32) == 0 && ltid_in_bounds_34135)",
            " {\n                    x_34133 = ((volatile __local\n                                int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_34102)];\n                    if ((local_tid_34102 - squot32(local_tid_34102, 32) * 32) ==\n                        0) {\n                        x_34132 = x_34133;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_34137 = 1;\n                while (slt32(skip_threads_34137, 32)) {\n                    if (sle32(skip_threads_34137, local_tid_34102 -\n                              squot32(local_tid_34102, 32) * 32) &&\n                        (squot32(local_tid_34102, 32) == 0 &&\n                         ltid_in_bounds_34135)) {\n                        // read operands\n                        {\n                            x_34132 = ((volatile __local\n                                        int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_34102) -\n                                                                     sext_i32_i64(skip_threads_34137))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_34134 = add64(x_34132,\n                                                                  x_34133);\n                            \n                            x_34132 = defunc_1_op_res_34134;\n                        }\n                    }\n                    if (sle32(wave_sizze_34104, skip_threads_34137)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n          ",
            "          if (sle32(skip_threads_34137, local_tid_34102 -\n                              squot32(local_tid_34102, 32) * 32) &&\n                        (squot32(local_tid_34102, 32) == 0 &&\n                         ltid_in_bounds_34135)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_34102)] =\n                                x_34132;\n                            x_34133 = x_34132;\n                        }\n                    }\n                    if (sle32(wave_sizze_34104, skip_threads_34137)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_34137 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_34102, 32) == 0 || !ltid_in_bounds_34135)) {\n                // read operands\n                {\n                    x_34129 = x_34128;\n                    x_34128 = ((__local\n                                int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_34102,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_34130 = add64(x_34128, x_34129);\n                    \n                    x_34128 = defunc_1_op_res_34130;\n                }\n                // write final r",
            "esult\n                {\n                    ((__local\n                      int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34102)] =\n                        x_34128;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_34102, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34102)] =\n                    x_34129;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_34102 == 0) {\n            acc_34131 = ((__local\n                          int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31019 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_34131 = ((__local\n                          int64_t *) local_mem_34110)[squot64(byte_offsets_34106,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_34102) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_34138;\n    \n    prefix_34138 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_34118 == (int64_t) 0 && local_tid_34102 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_34099)[dynamic_id_34118] = acc_34131;\n            mem_fence_glob",
            "al();\n            ((volatile __global\n              int8_t *) status_flags_mem_34095)[dynamic_id_34118] = (int8_t) 2;\n            acc_34131 = (int64_t) 0;\n        }\n        if (!(dynamic_id_34118 == (int64_t) 0) && slt32(local_tid_34102,\n                                                        wave_sizze_34104)) {\n            if (local_tid_34102 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_34097)[dynamic_id_34118] =\n                    acc_34131;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34095)[dynamic_id_34118] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_34110)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_34095)[dynamic_id_34118 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_34139;\n            \n            status_34139 = ((__local int8_t *) local_mem_34110)[(int64_t) 0];\n            if (status_34139 == (int8_t) 2) {\n                if (local_tid_34102 == 0) {\n                    prefix_34138 = ((volatile __global\n                                     int64_t *) incprefixes_mem_34099)[dynamic_id_34118 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_34140 = dynamic_id_34118 -\n                        sext_i32_i64(wave_sizze_34104);\n                \n                while (slt32(wave_sizze_34104 * -1, readOffset_34140)) {\n                    int32_t read_i_34141 = readOffset_34140 + local_tid_34102;\n                    int64_t aggr_34142 = (int64_t) 0;\n                    int8_t flag_34143 = (int8_t) 0;\n                    int8_t used_34144 = (int8_t) 0;\n                    \n    ",
            "                if (sle32(0, read_i_34141)) {\n                        flag_34143 = ((volatile __global\n                                       int8_t *) status_flags_mem_34095)[sext_i32_i64(read_i_34141)];\n                        if (flag_34143 == (int8_t) 2) {\n                            aggr_34142 = ((volatile __global\n                                           int64_t *) incprefixes_mem_34099)[sext_i32_i64(read_i_34141)];\n                        } else {\n                            if (flag_34143 == (int8_t) 1) {\n                                aggr_34142 = ((volatile __global\n                                               int64_t *) aggregates_mem_34097)[sext_i32_i64(read_i_34141)];\n                                used_34144 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_34110)[squot64(warp_byte_offset_34108,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34102)] =\n                        aggr_34142;\n                    \n                    int8_t tmp_34145;\n                    \n                    tmp_34145 = flag_34143 | used_34144 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_34110)[sext_i32_i64(local_tid_34102)] =\n                        tmp_34145;\n                    mem_fence_local();\n                    flag_34143 = ((volatile __local\n                                   int8_t *) local_mem_34110)[sext_i32_i64(wave_sizze_34104) -\n                                                              (int64_t) 1];\n                    if (local_tid_34102 == 0) {\n                        if (!(flag_34143 == (int8_t) 2)) {\n                            int64_t x_34146 = (int64_t) 0;\n                            int64_t x_34147;\n                            int8_t flag1_34149;\n                            \n                  ",
            "          flag1_34149 = (int8_t) 0;\n                            \n                            int8_t flag2_34150;\n                            int8_t used1_34151;\n                            \n                            used1_34151 = (int8_t) 0;\n                            \n                            int8_t used2_34152;\n                            \n                            for (int32_t i_34153 = 0; i_34153 <\n                                 wave_sizze_34104; i_34153++) {\n                                flag2_34150 = ((__local\n                                                int8_t *) local_mem_34110)[sext_i32_i64(i_34153)];\n                                used2_34152 = lshr8(flag2_34150, (int8_t) 2);\n                                flag2_34150 = flag2_34150 & (int8_t) 3;\n                                x_34147 = ((__local\n                                            int64_t *) local_mem_34110)[squot64(warp_byte_offset_34108,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_34153)];\n                                if (!(flag2_34150 == (int8_t) 1)) {\n                                    flag1_34149 = flag2_34150;\n                                    used1_34151 = used2_34152;\n                                    x_34146 = x_34147;\n                                } else {\n                                    used1_34151 += used2_34152;\n                                    \n                                    int64_t defunc_1_op_res_34148;\n                                    \n                                    defunc_1_op_res_34148 = add64(x_34146,\n                                                                  x_34147);\n                                    x_34146 = defunc_1_op_res_34148;\n                                }\n                            }\n                            flag_34143 = flag1_34149;\n                            used_3414",
            "4 = used1_34151;\n                            aggr_34142 = x_34146;\n                        } else {\n                            aggr_34142 = ((__local\n                                           int64_t *) local_mem_34110)[squot64(warp_byte_offset_34108,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_34104) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_34143 == (int8_t) 2) {\n                            readOffset_34140 = wave_sizze_34104 * -1;\n                        } else {\n                            readOffset_34140 -= zext_i8_i32(used_34144);\n                        }\n                        ((__local int32_t *) local_mem_34110)[(int64_t) 0] =\n                            readOffset_34140;\n                        \n                        int64_t x_34154;\n                        \n                        x_34154 = aggr_34142;\n                        \n                        int64_t x_34155;\n                        \n                        x_34155 = prefix_34138;\n                        \n                        int64_t defunc_1_op_res_34156;\n                        \n                        defunc_1_op_res_34156 = add64(x_34154, x_34155);\n                        prefix_34138 = defunc_1_op_res_34156;\n                    }\n                    mem_fence_local();\n                    readOffset_34140 = ((__local\n                                         int32_t *) local_mem_34110)[(int64_t) 0];\n                }\n            }\n            if (local_tid_34102 == 0) {\n                int64_t x_34157 = prefix_34138;\n                int64_t x_34158 = acc_34131;\n                int64_t defunc_1_op_res_34159 = add64(x_34157, x_34158);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_34099)[d",
            "ynamic_id_34118] =\n                    defunc_1_op_res_34159;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34095)[dynamic_id_34118] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_34110)[squot64(warp_byte_offset_34108,\n                                                      (int64_t) 8)] =\n                    prefix_34138;\n                acc_34131 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_34118 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_34138 = ((__local\n                             int64_t *) local_mem_34110)[squot64(warp_byte_offset_34108,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_34160;\n        int64_t x_34161;\n        int64_t x_34163;\n        \n        x_34163 = prefix_34138;\n        \n        int64_t x_34164;\n        \n        x_34164 = acc_34131;\n        \n        int64_t defunc_1_op_res_34165;\n        \n        defunc_1_op_res_34165 = add64(x_34163, x_34164);\n        x_34160 = defunc_1_op_res_34165;\n        for (int64_t i_34166 = 0; i_34166 < (int64_t) 9; i_34166++) {\n            x_34161 = private_mem_34120[i_34166];\n            \n            int64_t defunc_1_op_res_34162;\n            \n            defunc_1_op_res_34162 = add64(x_34160, x_34161);\n            private_mem_34120[i_34166] = defunc_1_op_res_34162;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34167 = 0; i_34167 < (int64_t) 9; i_34167++) {\n            int64_t sharedIdx_34168 = sext_i32_i64(local_tid_34102 * 9) +\n                    i_34167;\n            \n            ((__local int64_t *) local_mem_34110)[sharedIdx_34168] =\n                private_mem_34120[i_34167];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        ",
            "for (int64_t i_34169 = 0; i_34169 < (int64_t) 9; i_34169++) {\n            int32_t sharedIdx_34170 = local_tid_34102 +\n                    sext_i64_i32(segscan_group_sizze_31019 * i_34169);\n            \n            private_mem_34120[i_34169] = ((__local\n                                           int64_t *) local_mem_34110)[sext_i32_i64(sharedIdx_34170)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_34171 = 0; i_34171 < (int64_t) 9; i_34171++) {\n            int64_t gtid_31023 = blockOff_34119 + segscan_group_sizze_31019 *\n                    i_34171 + sext_i32_i64(local_tid_34102);\n            \n            if (slt64(gtid_31023, num_segments_29516)) {\n                ((__global int64_t *) mem_32032)[gtid_31023] =\n                    private_mem_34120[i_34171];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_34118 == sdiv_up64(num_segments_29516,\n                                          segscan_group_sizze_31019 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_34093)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31019\n}\n__kernel void clusterPointszisegscan_31069(__global int *global_failure,\n                                           int failure_is_an_option, __global\n                                           int64_t *global_failure_args,\n                                           uint local_mem_34327_backing_offset_0,\n                                           int64_t n_28846,\n                                           int64_t maxSizze_29582, __global\n                                           unsigned char *mem_32048, __global\n                                           unsigned char *mem_param_32084,\n                                           __global\n                  ",
            "                         unsigned char *mem_param_32089,\n                                           __global\n                                           unsigned char *mem_param_32094,\n                                           __global unsigned char *mem_32103,\n                                           __global unsigned char *mem_32105,\n                                           __global unsigned char *mem_32107,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_34310,\n                                           __global\n                                           unsigned char *status_flags_mem_34312,\n                                           __global\n                                           unsigned char *aggregates_mem_34314,\n                                           __global\n                                           unsigned char *incprefixes_mem_34316)\n{\n    #define segscan_group_sizze_31064 (clusterPointszisegscan_group_sizze_31063)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_34327_backing_0 =\n                  &shared_mem[local_mem_34327_backing_offset_0];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_34318;\n    int32_t local_tid_34319;\n    int64_t group_sizze_34322;\n    int32_t wave_sizze_34321;\n    int32_t group_tid_34320;\n    \n    global_tid_34318 = get_global_id(0);\n    local_tid_34319 = get_local_id(0);\n    group_sizze_34322 = get_local_size(0);\n    wave_sizze_34321 = LOCKSTEP_WIDTH;\n    group_tid_34320 = get_group_id(0);\n    \n    int32_t phys_tid_31069;\n    \n    phys_tid_31069 = global_tid_34318;\n    \n    int64_t byte_offsets_34323;\n    \n    byte_offsets_34323 = (int6",
            "4_t) 0;\n    \n    int64_t byte_offsets_34324;\n    \n    byte_offsets_34324 = segscan_group_sizze_31064 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_34325;\n    \n    warp_byte_offset_34325 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_34326;\n    \n    warp_byte_offset_34326 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_34327;\n    \n    local_mem_34327 = (__local char *) local_mem_34327_backing_0;\n    \n    int64_t trans_arr_len_34328;\n    \n    trans_arr_len_34328 = (int64_t) 9 * segscan_group_sizze_31064;\n    \n    int32_t dynamic_id_34335;\n    \n    if (local_tid_34319 == 0) {\n        dynamic_id_34335 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_34310)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_34327)[(int64_t) 0] = dynamic_id_34335;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_34335 = ((__local int32_t *) local_mem_34327)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_34336;\n    \n    blockOff_34336 = sext_i32_i64(dynamic_id_34335) * (int64_t) 9 *\n        segscan_group_sizze_31064;\n    \n    int64_t private_mem_34337[9];\n    \n    // Load and map\n    {\n        for (int64_t i_34339 = 0; i_34339 < (int64_t) 9; i_34339++) {\n            int64_t gtid_31068 = blockOff_34336 +\n                    sext_i32_i64(local_tid_34319) + i_34339 *\n                    segscan_group_sizze_31064;\n            \n            if (slt64(gtid_31068, n_28846)) {\n                int64_t x_29624 = ((__global\n                                    int64_t *) mem_param_32089)[gtid_31068];\n                int32_t x_29625 = ((__global int32_t *) mem_32048)[gtid_31068];\n                bool x_29626 = sle64((int64_t) 0, x_29624);\n                bool y_29627 = slt64(x_29624, maxSizze_29582);\n                bool bounds_check_29628 = x_29626 && y_29627;\n             ",
            "   bool index_certs_29629;\n                \n                if (!bounds_check_29628) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 10) ==\n                            -1) {\n                            global_failure_args[0] = x_29624;\n                            global_failure_args[1] = maxSizze_29582;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                int32_t defunc_0_f_res_29630 = ((__global\n                                                 int32_t *) mem_param_32084)[x_29624];\n                int64_t v_29631 = sext_i32_i64(x_29625);\n                bool x_29632 = sle64((int64_t) 0, v_29631);\n                bool y_29633 = slt64(v_29631, n_28846);\n                bool bounds_check_29634 = x_29632 && y_29633;\n                bool index_certs_29635;\n                \n                if (!bounds_check_29634) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 11) ==\n                            -1) {\n                            global_failure_args[0] = v_29631;\n                            global_failure_args[1] = n_28846;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                int64_t x_29636 = ((__global\n                                    int64_t *) mem_param_32094)[v_29631];\n                int64_t defunc_0_f_res_29637 = x_29636 << (int64_t) 1;\n                \n                ((__global int64_t *) mem_32105)[gtid_31068] =\n                    defunc_0_f_res_29637;\n                ((__global int32_t *) mem_32107)[gtid_31068] =\n                    defunc_0_f_res_29630;\n                private_mem_34337[i_34339] = defunc_0_f_res_29637;\n            } else {\n     ",
            "           private_mem_34337[i_34339] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34340 = 0; i_34340 < (int64_t) 9; i_34340++) {\n            int64_t sharedIdx_34341 = sext_i32_i64(local_tid_34319) + i_34340 *\n                    segscan_group_sizze_31064;\n            \n            ((__local int64_t *) local_mem_34327)[sharedIdx_34341] =\n                private_mem_34337[i_34340];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34342 = 0; i_34342 < 9; i_34342++) {\n            int32_t sharedIdx_34343 = local_tid_34319 * 9 + i_34342;\n            \n            private_mem_34337[sext_i32_i64(i_34342)] = ((__local\n                                                         int64_t *) local_mem_34327)[sext_i32_i64(sharedIdx_34343)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_34344 = 0; i_34344 < (int64_t) 8; i_34344++) {\n            int64_t x_29621;\n            int64_t x_29622;\n            \n            x_29621 = private_mem_34337[i_34344];\n            x_29622 = private_mem_34337[i_34344 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29623;\n            \n            defunc_1_op_res_29623 = add64(x_29621, x_29622);\n            private_mem_34337[i_34344 + (int64_t) 1] = defunc_1_op_res_29623;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34319)] =\n            private_mem_34337[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_34348;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_34345;\n        int64_t x_34346;\n        int64_t x_34349;\n        int64_t x_34350;\n        bool ltid_in_bounds_34352;\n        \n        lti",
            "d_in_bounds_34352 = slt64(sext_i32_i64(local_tid_34319),\n                                     segscan_group_sizze_31064);\n        \n        int32_t skip_threads_34353;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_34352) {\n                x_34346 = ((volatile __local\n                            int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_34319)];\n                if ((local_tid_34319 - squot32(local_tid_34319, 32) * 32) ==\n                    0) {\n                    x_34345 = x_34346;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_34353 = 1;\n            while (slt32(skip_threads_34353, 32)) {\n                if (sle32(skip_threads_34353, local_tid_34319 -\n                          squot32(local_tid_34319, 32) * 32) &&\n                    ltid_in_bounds_34352) {\n                    // read operands\n                    {\n                        x_34345 = ((volatile __local\n                                    int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_34319) -\n                                                                 sext_i32_i64(skip_threads_34353))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_34347 = add64(x_34345, x_34346);\n                        \n                        x_34345 = defunc_1_op_res_34347;\n                    }\n                }\n                if (sle32(wave_sizze_34321, skip_threads_34353)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                i",
            "f (sle32(skip_threads_34353, local_tid_34319 -\n                          squot32(local_tid_34319, 32) * 32) &&\n                    ltid_in_bounds_34352) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_34319)] =\n                            x_34345;\n                        x_34346 = x_34345;\n                    }\n                }\n                if (sle32(wave_sizze_34321, skip_threads_34353)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_34353 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_34319 - squot32(local_tid_34319, 32) * 32) == 31 &&\n                ltid_in_bounds_34352) {\n                ((volatile __local\n                  int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_34319,\n                                                                   32))] =\n                    x_34345;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_34354;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_34319, 32) == 0 && ltid_in_bounds_34352) {\n                    x_34350 = ((volatile __local\n                                int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                                    (int64_t) 8) +\n   ",
            "                                                         sext_i32_i64(local_tid_34319)];\n                    if ((local_tid_34319 - squot32(local_tid_34319, 32) * 32) ==\n                        0) {\n                        x_34349 = x_34350;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_34354 = 1;\n                while (slt32(skip_threads_34354, 32)) {\n                    if (sle32(skip_threads_34354, local_tid_34319 -\n                              squot32(local_tid_34319, 32) * 32) &&\n                        (squot32(local_tid_34319, 32) == 0 &&\n                         ltid_in_bounds_34352)) {\n                        // read operands\n                        {\n                            x_34349 = ((volatile __local\n                                        int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_34319) -\n                                                                     sext_i32_i64(skip_threads_34354))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_34351 = add64(x_34349,\n                                                                  x_34350);\n                            \n                            x_34349 = defunc_1_op_res_34351;\n                        }\n                    }\n                    if (sle32(wave_sizze_34321, skip_threads_34354)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_34354, local_tid_34319 -\n                              squot32(local_tid_34319, 32) * 32) &&\n                        (squot32(local_tid_34319, 32) == 0 &&\n                         ltid_in_bound",
            "s_34352)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_34319)] =\n                                x_34349;\n                            x_34350 = x_34349;\n                        }\n                    }\n                    if (sle32(wave_sizze_34321, skip_threads_34354)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_34354 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_34319, 32) == 0 || !ltid_in_bounds_34352)) {\n                // read operands\n                {\n                    x_34346 = x_34345;\n                    x_34345 = ((__local\n                                int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_34319,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_34347 = add64(x_34345, x_34346);\n                    \n                    x_34345 = defunc_1_op_res_34347;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                          (int64_t) 8) +\n                     ",
            "                             sext_i32_i64(local_tid_34319)] =\n                        x_34345;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_34319, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34319)] =\n                    x_34346;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_34319 == 0) {\n            acc_34348 = ((__local\n                          int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31064 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_34348 = ((__local\n                          int64_t *) local_mem_34327)[squot64(byte_offsets_34323,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_34319) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_34355;\n    \n    prefix_34355 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_34335 == (int64_t) 0 && local_tid_34319 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_34316)[dynamic_id_34335] = acc_34348;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_34312)[dynamic_id_34335] = (int8_t) 2;\n            acc_34348 = (int64_t) 0;\n        }\n        if (!(dynamic_id_34335 == (int64_t) 0) && slt32(local",
            "_tid_34319,\n                                                        wave_sizze_34321)) {\n            if (local_tid_34319 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_34314)[dynamic_id_34335] =\n                    acc_34348;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34312)[dynamic_id_34335] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_34327)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_34312)[dynamic_id_34335 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_34356;\n            \n            status_34356 = ((__local int8_t *) local_mem_34327)[(int64_t) 0];\n            if (status_34356 == (int8_t) 2) {\n                if (local_tid_34319 == 0) {\n                    prefix_34355 = ((volatile __global\n                                     int64_t *) incprefixes_mem_34316)[dynamic_id_34335 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_34357 = dynamic_id_34335 -\n                        sext_i32_i64(wave_sizze_34321);\n                \n                while (slt32(wave_sizze_34321 * -1, readOffset_34357)) {\n                    int32_t read_i_34358 = readOffset_34357 + local_tid_34319;\n                    int64_t aggr_34359 = (int64_t) 0;\n                    int8_t flag_34360 = (int8_t) 0;\n                    int8_t used_34361 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_34358)) {\n                        flag_34360 = ((volatile __global\n                                       int8_t *) status_flags_mem_34312)[sext_i32_i64(read_i_34358)];\n                     ",
            "   if (flag_34360 == (int8_t) 2) {\n                            aggr_34359 = ((volatile __global\n                                           int64_t *) incprefixes_mem_34316)[sext_i32_i64(read_i_34358)];\n                        } else {\n                            if (flag_34360 == (int8_t) 1) {\n                                aggr_34359 = ((volatile __global\n                                               int64_t *) aggregates_mem_34314)[sext_i32_i64(read_i_34358)];\n                                used_34361 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_34327)[squot64(warp_byte_offset_34325,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34319)] =\n                        aggr_34359;\n                    \n                    int8_t tmp_34362;\n                    \n                    tmp_34362 = flag_34360 | used_34361 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_34327)[sext_i32_i64(local_tid_34319)] =\n                        tmp_34362;\n                    mem_fence_local();\n                    flag_34360 = ((volatile __local\n                                   int8_t *) local_mem_34327)[sext_i32_i64(wave_sizze_34321) -\n                                                              (int64_t) 1];\n                    if (local_tid_34319 == 0) {\n                        if (!(flag_34360 == (int8_t) 2)) {\n                            int64_t x_34363 = (int64_t) 0;\n                            int64_t x_34364;\n                            int8_t flag1_34366;\n                            \n                            flag1_34366 = (int8_t) 0;\n                            \n                            int8_t flag2_34367;\n                            int8_t used1_34368;\n                            \n                            used1_34",
            "368 = (int8_t) 0;\n                            \n                            int8_t used2_34369;\n                            \n                            for (int32_t i_34370 = 0; i_34370 <\n                                 wave_sizze_34321; i_34370++) {\n                                flag2_34367 = ((__local\n                                                int8_t *) local_mem_34327)[sext_i32_i64(i_34370)];\n                                used2_34369 = lshr8(flag2_34367, (int8_t) 2);\n                                flag2_34367 = flag2_34367 & (int8_t) 3;\n                                x_34364 = ((__local\n                                            int64_t *) local_mem_34327)[squot64(warp_byte_offset_34325,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_34370)];\n                                if (!(flag2_34367 == (int8_t) 1)) {\n                                    flag1_34366 = flag2_34367;\n                                    used1_34368 = used2_34369;\n                                    x_34363 = x_34364;\n                                } else {\n                                    used1_34368 += used2_34369;\n                                    \n                                    int64_t defunc_1_op_res_34365;\n                                    \n                                    defunc_1_op_res_34365 = add64(x_34363,\n                                                                  x_34364);\n                                    x_34363 = defunc_1_op_res_34365;\n                                }\n                            }\n                            flag_34360 = flag1_34366;\n                            used_34361 = used1_34368;\n                            aggr_34359 = x_34363;\n                        } else {\n                            aggr_34359 = ((__local\n                                           int64_t *) local_mem_34327)[squo",
            "t64(warp_byte_offset_34325,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_34321) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_34360 == (int8_t) 2) {\n                            readOffset_34357 = wave_sizze_34321 * -1;\n                        } else {\n                            readOffset_34357 -= zext_i8_i32(used_34361);\n                        }\n                        ((__local int32_t *) local_mem_34327)[(int64_t) 0] =\n                            readOffset_34357;\n                        \n                        int64_t x_34371;\n                        \n                        x_34371 = aggr_34359;\n                        \n                        int64_t x_34372;\n                        \n                        x_34372 = prefix_34355;\n                        \n                        int64_t defunc_1_op_res_34373;\n                        \n                        defunc_1_op_res_34373 = add64(x_34371, x_34372);\n                        prefix_34355 = defunc_1_op_res_34373;\n                    }\n                    mem_fence_local();\n                    readOffset_34357 = ((__local\n                                         int32_t *) local_mem_34327)[(int64_t) 0];\n                }\n            }\n            if (local_tid_34319 == 0) {\n                int64_t x_34374 = prefix_34355;\n                int64_t x_34375 = acc_34348;\n                int64_t defunc_1_op_res_34376 = add64(x_34374, x_34375);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_34316)[dynamic_id_34335] =\n                    defunc_1_op_res_34376;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34312)[dynamic_id_34335] =\n                    ",
            "(int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_34327)[squot64(warp_byte_offset_34325,\n                                                      (int64_t) 8)] =\n                    prefix_34355;\n                acc_34348 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_34335 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_34355 = ((__local\n                             int64_t *) local_mem_34327)[squot64(warp_byte_offset_34325,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_34377;\n        int64_t x_34378;\n        int64_t x_34380;\n        \n        x_34380 = prefix_34355;\n        \n        int64_t x_34381;\n        \n        x_34381 = acc_34348;\n        \n        int64_t defunc_1_op_res_34382;\n        \n        defunc_1_op_res_34382 = add64(x_34380, x_34381);\n        x_34377 = defunc_1_op_res_34382;\n        for (int64_t i_34383 = 0; i_34383 < (int64_t) 9; i_34383++) {\n            x_34378 = private_mem_34337[i_34383];\n            \n            int64_t defunc_1_op_res_34379;\n            \n            defunc_1_op_res_34379 = add64(x_34377, x_34378);\n            private_mem_34337[i_34383] = defunc_1_op_res_34379;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34384 = 0; i_34384 < (int64_t) 9; i_34384++) {\n            int64_t sharedIdx_34385 = sext_i32_i64(local_tid_34319 * 9) +\n                    i_34384;\n            \n            ((__local int64_t *) local_mem_34327)[sharedIdx_34385] =\n                private_mem_34337[i_34384];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34386 = 0; i_34386 < (int64_t) 9; i_34386++) {\n            int32_t sharedIdx_34387 = local_tid_34319 +\n                    sext_i64_i32(segscan_group_sizze_31064 * i_34386);\n            \n            private_mem_",
            "34337[i_34386] = ((__local\n                                           int64_t *) local_mem_34327)[sext_i32_i64(sharedIdx_34387)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_34388 = 0; i_34388 < (int64_t) 9; i_34388++) {\n            int64_t gtid_31068 = blockOff_34336 + segscan_group_sizze_31064 *\n                    i_34388 + sext_i32_i64(local_tid_34319);\n            \n            if (slt64(gtid_31068, n_28846)) {\n                ((__global int64_t *) mem_32103)[gtid_31068] =\n                    private_mem_34337[i_34388];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_34335 == sdiv_up64(n_28846, segscan_group_sizze_31064 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_34310)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31064\n}\n__kernel void clusterPointszisegscan_31102(__global int *global_failure,\n                                           uint local_mem_34585_backing_offset_0,\n                                           int64_t defunc_2_reduce_res_29639,\n                                           __global unsigned char *mem_32112,\n                                           __global unsigned char *mem_32116,\n                                           __global unsigned char *mem_32118,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_34562,\n                                           __global\n                                           unsigned char *status_flags_mem_34564,\n                                           __global\n                                           unsigned char *aggregates_mem_34566,\n                                           __global\n                       ",
            "                    unsigned char *incprefixes_mem_34568,\n                                           __global\n                                           unsigned char *aggregates_mem_34570,\n                                           __global\n                                           unsigned char *incprefixes_mem_34572)\n{\n    #define segscan_group_sizze_31097 (clusterPointszisegscan_group_sizze_31096)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_34585_backing_0 =\n                  &shared_mem[local_mem_34585_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34574;\n    int32_t local_tid_34575;\n    int64_t group_sizze_34578;\n    int32_t wave_sizze_34577;\n    int32_t group_tid_34576;\n    \n    global_tid_34574 = get_global_id(0);\n    local_tid_34575 = get_local_id(0);\n    group_sizze_34578 = get_local_size(0);\n    wave_sizze_34577 = LOCKSTEP_WIDTH;\n    group_tid_34576 = get_group_id(0);\n    \n    int32_t phys_tid_31102;\n    \n    phys_tid_31102 = global_tid_34574;\n    \n    int64_t byte_offsets_34579;\n    \n    byte_offsets_34579 = (int64_t) 0;\n    \n    int64_t byte_offsets_34580;\n    \n    byte_offsets_34580 = segscan_group_sizze_31097;\n    \n    int64_t byte_offsets_34581;\n    \n    byte_offsets_34581 = sdiv_up64(segscan_group_sizze_31097, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_31097 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_34582;\n    \n    warp_byte_offset_34582 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_34583;\n    \n    warp_byte_offset_34583 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_34584;\n    \n    warp_byte_offset_34584 = (int64_t) 320;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_34585;\n    \n    local_mem_34585 = (__local char *) local_mem_34585_backing_0;\n    \n    int64_t trans_arr_len_34586;\n    \n    trans_arr_len_34586 = (int64_t) 9 * segscan_group_sizze_31097;\n    \n   ",
            " int32_t dynamic_id_34596;\n    \n    if (local_tid_34575 == 0) {\n        dynamic_id_34596 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_34562)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_34585)[(int64_t) 0] = dynamic_id_34596;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_34596 = ((__local int32_t *) local_mem_34585)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_34597;\n    \n    blockOff_34597 = sext_i32_i64(dynamic_id_34596) * (int64_t) 9 *\n        segscan_group_sizze_31097;\n    \n    bool private_mem_34598[9];\n    int64_t private_mem_34600[9];\n    \n    // Load and map\n    {\n        for (int64_t i_34602 = 0; i_34602 < (int64_t) 9; i_34602++) {\n            int64_t gtid_31101 = blockOff_34597 +\n                    sext_i32_i64(local_tid_34575) + i_34602 *\n                    segscan_group_sizze_31097;\n            \n            if (slt64(gtid_31101, defunc_2_reduce_res_29639)) {\n                int64_t x_29665 = ((__global int64_t *) mem_32112)[gtid_31101];\n                bool defunc_0_f_res_29666 = slt64((int64_t) 0, x_29665);\n                \n                private_mem_34598[i_34602] = defunc_0_f_res_29666;\n                private_mem_34600[i_34602] = x_29665;\n            } else {\n                private_mem_34598[i_34602] = 0;\n                private_mem_34600[i_34602] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34603 = 0; i_34603 < (int64_t) 9; i_34603++) {\n            int64_t sharedIdx_34604 = sext_i32_i64(local_tid_34575) + i_34603 *\n                    segscan_group_sizze_31097;\n            \n            ((__local bool *) local_mem_34585)[sharedIdx_34604] =\n                private_mem_34598[i_34603];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34605 = 0",
            "; i_34605 < 9; i_34605++) {\n            int32_t sharedIdx_34606 = local_tid_34575 * 9 + i_34605;\n            \n            private_mem_34598[sext_i32_i64(i_34605)] = ((__local\n                                                         bool *) local_mem_34585)[sext_i32_i64(sharedIdx_34606)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34607 = 0; i_34607 < (int64_t) 9; i_34607++) {\n            int64_t sharedIdx_34608 = sext_i32_i64(local_tid_34575) + i_34607 *\n                    segscan_group_sizze_31097;\n            \n            ((__local int64_t *) local_mem_34585)[sharedIdx_34608] =\n                private_mem_34600[i_34607];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34609 = 0; i_34609 < 9; i_34609++) {\n            int32_t sharedIdx_34610 = local_tid_34575 * 9 + i_34609;\n            \n            private_mem_34600[sext_i32_i64(i_34609)] = ((__local\n                                                         int64_t *) local_mem_34585)[sext_i32_i64(sharedIdx_34610)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_34611 = 0; i_34611 < (int64_t) 8; i_34611++) {\n            bool x_29658;\n            bool x_29660;\n            \n            x_29658 = private_mem_34598[i_34611];\n            x_29660 = private_mem_34598[i_34611 + (int64_t) 1];\n            \n            int64_t x_29659;\n            int64_t x_29661;\n            \n            x_29659 = private_mem_34600[i_34611];\n            x_29661 = private_mem_34600[i_34611 + (int64_t) 1];\n            \n            bool defunc_1_op_res_29662;\n            \n            defunc_1_op_res_29662 = x_29658 || x_29660;\n            \n            int64_t defunc_1_op_res_29663;\n            \n            if (x_29660) {\n                defunc_1_op_res_29663 = x_29661;\n            } else {\n                int64_t defunc_1_op_res_29664 = add64(x_29659, x_29661);\n                \n                defunc_1_op_res_29663 = defunc_1_op_res_2966",
            "4;\n            }\n            private_mem_34598[i_34611 + (int64_t) 1] = defunc_1_op_res_29662;\n            private_mem_34600[i_34611 + (int64_t) 1] = defunc_1_op_res_29663;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_34585)[byte_offsets_34579 +\n                                           sext_i32_i64(local_tid_34575)] =\n            private_mem_34598[(int64_t) 8];\n        ((__local int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34575)] =\n            private_mem_34600[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_34619;\n    int64_t acc_34620;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_34612;\n        int64_t x_34613;\n        bool x_34614;\n        int64_t x_34615;\n        bool x_34621;\n        int64_t x_34622;\n        bool x_34623;\n        int64_t x_34624;\n        bool ltid_in_bounds_34628;\n        \n        ltid_in_bounds_34628 = slt64(sext_i32_i64(local_tid_34575),\n                                     segscan_group_sizze_31097);\n        \n        int32_t skip_threads_34629;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_34628) {\n                x_34614 = ((volatile __local\n                            bool *) local_mem_34585)[byte_offsets_34579 +\n                                                     sext_i32_i64(local_tid_34575)];\n                x_34615 = ((volatile __local\n                            int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_34575)];\n                if ((local_tid_34575 - squot32(local_tid_34575, 32) * 32) ==\n                    0) {\n                    x_34612 = x_34614;\n                    x_346",
            "13 = x_34615;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_34629 = 1;\n            while (slt32(skip_threads_34629, 32)) {\n                if (sle32(skip_threads_34629, local_tid_34575 -\n                          squot32(local_tid_34575, 32) * 32) &&\n                    ltid_in_bounds_34628) {\n                    // read operands\n                    {\n                        x_34612 = ((volatile __local\n                                    bool *) local_mem_34585)[byte_offsets_34579 +\n                                                             (sext_i32_i64(local_tid_34575) -\n                                                              sext_i32_i64(skip_threads_34629))];\n                        x_34613 = ((volatile __local\n                                    int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_34575) -\n                                                                 sext_i32_i64(skip_threads_34629))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_34616 = x_34612 || x_34614;\n                        int64_t defunc_1_op_res_34617;\n                        \n                        if (x_34614) {\n                            defunc_1_op_res_34617 = x_34615;\n                        } else {\n                            int64_t defunc_1_op_res_34618 = add64(x_34613,\n                                                                  x_34615);\n                            \n                            defunc_1_op_res_34617 = defunc_1_op_res_34618;\n                        }\n                        x_34612 = defunc_1_op_res_34616;\n                        x_34613 = defunc_1_op_res_34617;\n                    }\n              ",
            "  }\n                if (sle32(wave_sizze_34577, skip_threads_34629)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_34629, local_tid_34575 -\n                          squot32(local_tid_34575, 32) * 32) &&\n                    ltid_in_bounds_34628) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_34585)[byte_offsets_34579 +\n                                                   sext_i32_i64(local_tid_34575)] =\n                            x_34612;\n                        x_34614 = x_34612;\n                        ((volatile __local\n                          int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_34575)] =\n                            x_34613;\n                        x_34615 = x_34613;\n                    }\n                }\n                if (sle32(wave_sizze_34577, skip_threads_34629)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_34629 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_34575 - squot32(local_tid_34575, 32) * 32) == 31 &&\n                ltid_in_bounds_34628) {\n                ((volatile __local bool *) local_mem_34585)[byte_offsets_34579 +\n                                                            sext_i32_i64(squot32(local_tid_34575,\n                                                                                 32))] =\n                    x_34612;\n                ((volatile __local\n                  int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                      (int64_t) 8) +\n                                 ",
            "             sext_i32_i64(squot32(local_tid_34575,\n                                                                   32))] =\n                    x_34613;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_34630;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_34575, 32) == 0 && ltid_in_bounds_34628) {\n                    x_34623 = ((volatile __local\n                                bool *) local_mem_34585)[byte_offsets_34579 +\n                                                         sext_i32_i64(local_tid_34575)];\n                    x_34624 = ((volatile __local\n                                int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_34575)];\n                    if ((local_tid_34575 - squot32(local_tid_34575, 32) * 32) ==\n                        0) {\n                        x_34621 = x_34623;\n                        x_34622 = x_34624;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_34630 = 1;\n                while (slt32(skip_threads_34630, 32)) {\n                    if (sle32(skip_threads_34630, local_tid_34575 -\n                              squot32(local_tid_34575, 32) * 32) &&\n                        (squot32(local_tid_34575, 32) == 0 &&\n                         ltid_in_bounds_34628)) {\n                        // read operands\n                        {\n                            x_34621 = ((volatile __local\n                                        bool *) local_mem_34585)[byte_offsets_34579 +\n                                                                 (sext_i32_i64(local_",
            "tid_34575) -\n                                                                  sext_i32_i64(skip_threads_34630))];\n                            x_34622 = ((volatile __local\n                                        int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_34575) -\n                                                                     sext_i32_i64(skip_threads_34630))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_34625 = x_34621 || x_34623;\n                            int64_t defunc_1_op_res_34626;\n                            \n                            if (x_34623) {\n                                defunc_1_op_res_34626 = x_34624;\n                            } else {\n                                int64_t defunc_1_op_res_34627 = add64(x_34622,\n                                                                      x_34624);\n                                \n                                defunc_1_op_res_34626 = defunc_1_op_res_34627;\n                            }\n                            x_34621 = defunc_1_op_res_34625;\n                            x_34622 = defunc_1_op_res_34626;\n                        }\n                    }\n                    if (sle32(wave_sizze_34577, skip_threads_34630)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_34630, local_tid_34575 -\n                              squot32(local_tid_34575, 32) * 32) &&\n                        (squot32(local_tid_34575, 32) == 0 &&\n                         ltid_in_bounds_34628)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_3",
            "4585)[byte_offsets_34579 +\n                                                       sext_i32_i64(local_tid_34575)] =\n                                x_34621;\n                            x_34623 = x_34621;\n                            ((volatile __local\n                              int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_34575)] =\n                                x_34622;\n                            x_34624 = x_34622;\n                        }\n                    }\n                    if (sle32(wave_sizze_34577, skip_threads_34630)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_34630 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_34575, 32) == 0 || !ltid_in_bounds_34628)) {\n                // read operands\n                {\n                    x_34614 = x_34612;\n                    x_34615 = x_34613;\n                    x_34612 = ((__local\n                                bool *) local_mem_34585)[byte_offsets_34579 +\n                                                         (sext_i32_i64(squot32(local_tid_34575,\n                                                                               32)) -\n                                                          (int64_t) 1)];\n                    x_34613 = ((__local\n                                int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_34575,\n                                                                                  32)) -\n                                       ",
            "                      (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_34616 = x_34612 || x_34614;\n                    int64_t defunc_1_op_res_34617;\n                    \n                    if (x_34614) {\n                        defunc_1_op_res_34617 = x_34615;\n                    } else {\n                        int64_t defunc_1_op_res_34618 = add64(x_34613, x_34615);\n                        \n                        defunc_1_op_res_34617 = defunc_1_op_res_34618;\n                    }\n                    x_34612 = defunc_1_op_res_34616;\n                    x_34613 = defunc_1_op_res_34617;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_34585)[byte_offsets_34579 +\n                                                       sext_i32_i64(local_tid_34575)] =\n                        x_34612;\n                    ((__local\n                      int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34575)] =\n                        x_34613;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_34575, 32) == 0) {\n                ((__local bool *) local_mem_34585)[byte_offsets_34579 +\n                                                   sext_i32_i64(local_tid_34575)] =\n                    x_34614;\n                ((__local\n                  int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34575)] =\n                    x_34615;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n",
            "        if (local_tid_34575 == 0) {\n            acc_34619 = ((__local bool *) local_mem_34585)[byte_offsets_34579 +\n                                                           (segscan_group_sizze_31097 -\n                                                            (int64_t) 1)];\n            acc_34620 = ((__local\n                          int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31097 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_34619 = ((__local bool *) local_mem_34585)[byte_offsets_34579 +\n                                                           (sext_i32_i64(local_tid_34575) -\n                                                            (int64_t) 1)];\n            acc_34620 = ((__local\n                          int64_t *) local_mem_34585)[squot64(byte_offsets_34580,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_34575) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_34631;\n    \n    prefix_34631 = 0;\n    \n    int64_t prefix_34632;\n    \n    prefix_34632 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_34596 == (int64_t) 0 && local_tid_34575 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_34568)[dynamic_id_34596] = acc_34619;\n            ((volatile __global\n              int64_t *) incprefixes_mem_34572)[dynamic_id_34596] = acc_34620;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_34564)[dynamic_id_34596] = (int8_t) 2;\n            acc_34619 = 0;\n            acc_34620 = (int64_t) 0;\n        }\n        if (!(dynamic_id_34596 == (int64_t) 0)",
            " && slt32(local_tid_34575,\n                                                        wave_sizze_34577)) {\n            if (local_tid_34575 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_34566)[dynamic_id_34596] = acc_34619;\n                ((volatile __global\n                  int64_t *) aggregates_mem_34570)[dynamic_id_34596] =\n                    acc_34620;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34564)[dynamic_id_34596] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_34585)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_34564)[dynamic_id_34596 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_34633;\n            \n            status_34633 = ((__local int8_t *) local_mem_34585)[(int64_t) 0];\n            if (status_34633 == (int8_t) 2) {\n                if (local_tid_34575 == 0) {\n                    prefix_34631 = ((volatile __global\n                                     bool *) incprefixes_mem_34568)[dynamic_id_34596 -\n                                                                    (int64_t) 1];\n                    prefix_34632 = ((volatile __global\n                                     int64_t *) incprefixes_mem_34572)[dynamic_id_34596 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_34634 = dynamic_id_34596 -\n                        sext_i32_i64(wave_sizze_34577);\n                \n                while (slt32(wave_sizze_34577 * -1, readOffset_34634)) {\n                    int32_t read_i_34635 = readOffset_34634 + local_tid_34575;\n                    bool aggr_34636 = 0;\n              ",
            "      int64_t aggr_34637 = (int64_t) 0;\n                    int8_t flag_34638 = (int8_t) 0;\n                    int8_t used_34639 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_34635)) {\n                        flag_34638 = ((volatile __global\n                                       int8_t *) status_flags_mem_34564)[sext_i32_i64(read_i_34635)];\n                        if (flag_34638 == (int8_t) 2) {\n                            aggr_34636 = ((volatile __global\n                                           bool *) incprefixes_mem_34568)[sext_i32_i64(read_i_34635)];\n                            aggr_34637 = ((volatile __global\n                                           int64_t *) incprefixes_mem_34572)[sext_i32_i64(read_i_34635)];\n                        } else {\n                            if (flag_34638 == (int8_t) 1) {\n                                aggr_34636 = ((volatile __global\n                                               bool *) aggregates_mem_34566)[sext_i32_i64(read_i_34635)];\n                                aggr_34637 = ((volatile __global\n                                               int64_t *) aggregates_mem_34570)[sext_i32_i64(read_i_34635)];\n                                used_34639 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_34585)[warp_byte_offset_34582 +\n                                                       sext_i32_i64(local_tid_34575)] =\n                        aggr_34636;\n                    ((__local\n                      int64_t *) local_mem_34585)[squot64(warp_byte_offset_34583,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34575)] =\n                        aggr_34637;\n                    \n                    int8_t tmp_34640;\n                    \n                    tmp_34640 = flag_34638 | used_34639 << (int8_t) 2;\n       ",
            "             ((__local\n                      int8_t *) local_mem_34585)[sext_i32_i64(local_tid_34575)] =\n                        tmp_34640;\n                    mem_fence_local();\n                    flag_34638 = ((volatile __local\n                                   int8_t *) local_mem_34585)[sext_i32_i64(wave_sizze_34577) -\n                                                              (int64_t) 1];\n                    if (local_tid_34575 == 0) {\n                        if (!(flag_34638 == (int8_t) 2)) {\n                            bool x_34641 = 0;\n                            int64_t x_34642 = (int64_t) 0;\n                            bool x_34643;\n                            int64_t x_34644;\n                            int8_t flag1_34648;\n                            \n                            flag1_34648 = (int8_t) 0;\n                            \n                            int8_t flag2_34649;\n                            int8_t used1_34650;\n                            \n                            used1_34650 = (int8_t) 0;\n                            \n                            int8_t used2_34651;\n                            \n                            for (int32_t i_34652 = 0; i_34652 <\n                                 wave_sizze_34577; i_34652++) {\n                                flag2_34649 = ((__local\n                                                int8_t *) local_mem_34585)[sext_i32_i64(i_34652)];\n                                used2_34651 = lshr8(flag2_34649, (int8_t) 2);\n                                flag2_34649 = flag2_34649 & (int8_t) 3;\n                                x_34643 = ((__local\n                                            bool *) local_mem_34585)[warp_byte_offset_34582 +\n                                                                     sext_i32_i64(i_34652)];\n                                x_34644 = ((__local\n                                            int64_t *) local_mem_34585)[squot64(warp_byte_offset_34583,\n                          ",
            "                                                      (int64_t) 8) +\n                                                                        sext_i32_i64(i_34652)];\n                                if (!(flag2_34649 == (int8_t) 1)) {\n                                    flag1_34648 = flag2_34649;\n                                    used1_34650 = used2_34651;\n                                    x_34641 = x_34643;\n                                    x_34642 = x_34644;\n                                } else {\n                                    used1_34650 += used2_34651;\n                                    \n                                    bool defunc_1_op_res_34645;\n                                    \n                                    defunc_1_op_res_34645 = x_34641 || x_34643;\n                                    \n                                    int64_t defunc_1_op_res_34646;\n                                    \n                                    if (x_34643) {\n                                        defunc_1_op_res_34646 = x_34644;\n                                    } else {\n                                        int64_t defunc_1_op_res_34647 =\n                                                add64(x_34642, x_34644);\n                                        \n                                        defunc_1_op_res_34646 =\n                                            defunc_1_op_res_34647;\n                                    }\n                                    x_34641 = defunc_1_op_res_34645;\n                                    x_34642 = defunc_1_op_res_34646;\n                                }\n                            }\n                            flag_34638 = flag1_34648;\n                            used_34639 = used1_34650;\n                            aggr_34636 = x_34641;\n                            aggr_34637 = x_34642;\n                        } else {\n                            aggr_34636 = ((__local\n                                           bool *",
            ") local_mem_34585)[warp_byte_offset_34582 +\n                                                                    (sext_i32_i64(wave_sizze_34577) -\n                                                                     (int64_t) 1)];\n                            aggr_34637 = ((__local\n                                           int64_t *) local_mem_34585)[squot64(warp_byte_offset_34583,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_34577) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_34638 == (int8_t) 2) {\n                            readOffset_34634 = wave_sizze_34577 * -1;\n                        } else {\n                            readOffset_34634 -= zext_i8_i32(used_34639);\n                        }\n                        ((__local int32_t *) local_mem_34585)[(int64_t) 0] =\n                            readOffset_34634;\n                        \n                        bool x_34653;\n                        \n                        x_34653 = aggr_34636;\n                        \n                        int64_t x_34654;\n                        \n                        x_34654 = aggr_34637;\n                        \n                        bool x_34655;\n                        \n                        x_34655 = prefix_34631;\n                        \n                        int64_t x_34656;\n                        \n                        x_34656 = prefix_34632;\n                        \n                        bool defunc_1_op_res_34657;\n                        \n                        defunc_1_op_res_34657 = x_34653 || x_34655;\n                        \n                        int64_t defunc_1_op_res_34658;\n                        \n                        if (x_34655) {\n                            defunc_1_op_res_34658 = x_34656;\n  ",
            "                      } else {\n                            int64_t defunc_1_op_res_34659 = add64(x_34654,\n                                                                  x_34656);\n                            \n                            defunc_1_op_res_34658 = defunc_1_op_res_34659;\n                        }\n                        prefix_34631 = defunc_1_op_res_34657;\n                        prefix_34632 = defunc_1_op_res_34658;\n                    }\n                    mem_fence_local();\n                    readOffset_34634 = ((__local\n                                         int32_t *) local_mem_34585)[(int64_t) 0];\n                }\n            }\n            if (local_tid_34575 == 0) {\n                bool x_34660 = prefix_34631;\n                int64_t x_34661 = prefix_34632;\n                bool x_34662 = acc_34619;\n                int64_t x_34663 = acc_34620;\n                bool defunc_1_op_res_34664 = x_34660 || x_34662;\n                int64_t defunc_1_op_res_34665;\n                \n                if (x_34662) {\n                    defunc_1_op_res_34665 = x_34663;\n                } else {\n                    int64_t defunc_1_op_res_34666 = add64(x_34661, x_34663);\n                    \n                    defunc_1_op_res_34665 = defunc_1_op_res_34666;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_34568)[dynamic_id_34596] =\n                    defunc_1_op_res_34664;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_34572)[dynamic_id_34596] =\n                    defunc_1_op_res_34665;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34564)[dynamic_id_34596] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_34585)[warp_byte_offset_34582] =\n                    prefix_34631;\n                ((__local\n                  int64_t *) local_mem_34585)[squot64(warp_byte_offset_34583,\n        ",
            "                                              (int64_t) 8)] =\n                    prefix_34632;\n                acc_34619 = 0;\n                acc_34620 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_34596 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_34631 = ((__local\n                             bool *) local_mem_34585)[warp_byte_offset_34582];\n            prefix_34632 = ((__local\n                             int64_t *) local_mem_34585)[squot64(warp_byte_offset_34583,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_34667;\n        bool x_34669;\n        bool x_34674;\n        \n        x_34674 = prefix_34631;\n        \n        bool x_34676;\n        \n        x_34676 = acc_34619;\n        \n        int64_t x_34668;\n        int64_t x_34670;\n        int64_t x_34675;\n        \n        x_34675 = prefix_34632;\n        \n        int64_t x_34677;\n        \n        x_34677 = acc_34620;\n        \n        bool defunc_1_op_res_34678;\n        \n        defunc_1_op_res_34678 = x_34674 || x_34676;\n        \n        int64_t defunc_1_op_res_34679;\n        \n        if (x_34676) {\n            defunc_1_op_res_34679 = x_34677;\n        } else {\n            int64_t defunc_1_op_res_34680 = add64(x_34675, x_34677);\n            \n            defunc_1_op_res_34679 = defunc_1_op_res_34680;\n        }\n        x_34667 = defunc_1_op_res_34678;\n        x_34668 = defunc_1_op_res_34679;\n        for (int64_t i_34681 = 0; i_34681 < (int64_t) 9; i_34681++) {\n            x_34669 = private_mem_34598[i_34681];\n            x_34670 = private_mem_34600[i_34681];\n            \n            bool defunc_1_op_res_34671;\n            \n            defunc_1_op_res_34671 = x_34667 || x_34669;\n            \n            int64_t defunc_1_op_res_34672;\n            \n            if (x_34669) {\n                defunc_1_op_res_34672 = x_34670;\n            }",
            " else {\n                int64_t defunc_1_op_res_34673 = add64(x_34668, x_34670);\n                \n                defunc_1_op_res_34672 = defunc_1_op_res_34673;\n            }\n            private_mem_34598[i_34681] = defunc_1_op_res_34671;\n            private_mem_34600[i_34681] = defunc_1_op_res_34672;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34682 = 0; i_34682 < (int64_t) 9; i_34682++) {\n            int64_t sharedIdx_34683 = sext_i32_i64(local_tid_34575 * 9) +\n                    i_34682;\n            \n            ((__local bool *) local_mem_34585)[sharedIdx_34683] =\n                private_mem_34598[i_34682];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34684 = 0; i_34684 < (int64_t) 9; i_34684++) {\n            int32_t sharedIdx_34685 = local_tid_34575 +\n                    sext_i64_i32(segscan_group_sizze_31097 * i_34684);\n            \n            private_mem_34598[i_34684] = ((__local\n                                           bool *) local_mem_34585)[sext_i32_i64(sharedIdx_34685)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34686 = 0; i_34686 < (int64_t) 9; i_34686++) {\n            int64_t sharedIdx_34687 = sext_i32_i64(local_tid_34575 * 9) +\n                    i_34686;\n            \n            ((__local int64_t *) local_mem_34585)[sharedIdx_34687] =\n                private_mem_34600[i_34686];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34688 = 0; i_34688 < (int64_t) 9; i_34688++) {\n            int32_t sharedIdx_34689 = local_tid_34575 +\n                    sext_i64_i32(segscan_group_sizze_31097 * i_34688);\n            \n            private_mem_34600[i_34688] = ((__local\n                                           int64_t *) local_mem_34585)[sext_i32_i64(sharedIdx_34689)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_34690 = 0; i",
            "_34690 < (int64_t) 9; i_34690++) {\n            int64_t gtid_31101 = blockOff_34597 + segscan_group_sizze_31097 *\n                    i_34690 + sext_i32_i64(local_tid_34575);\n            \n            if (slt64(gtid_31101, defunc_2_reduce_res_29639)) {\n                ((__global bool *) mem_32116)[gtid_31101] =\n                    private_mem_34598[i_34690];\n            }\n        }\n        for (int64_t i_34691 = 0; i_34691 < (int64_t) 9; i_34691++) {\n            int64_t gtid_31101 = blockOff_34597 + segscan_group_sizze_31097 *\n                    i_34691 + sext_i32_i64(local_tid_34575);\n            \n            if (slt64(gtid_31101, defunc_2_reduce_res_29639)) {\n                ((__global int64_t *) mem_32118)[gtid_31101] =\n                    private_mem_34600[i_34691];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_34596 == sdiv_up64(defunc_2_reduce_res_29639,\n                                          segscan_group_sizze_31097 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_34562)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31097\n}\n__kernel void clusterPointszisegscan_31110(__global int *global_failure,\n                                           uint local_mem_34718_backing_offset_0,\n                                           int64_t defunc_2_reduce_res_29639,\n                                           __global unsigned char *mem_32118,\n                                           __global unsigned char *mem_32121,\n                                           __global unsigned char *mem_32123,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_34695,\n                                           __global\n                                           unsigned char *status_fl",
            "ags_mem_34697,\n                                           __global\n                                           unsigned char *aggregates_mem_34699,\n                                           __global\n                                           unsigned char *incprefixes_mem_34701,\n                                           __global\n                                           unsigned char *aggregates_mem_34703,\n                                           __global\n                                           unsigned char *incprefixes_mem_34705)\n{\n    #define segscan_group_sizze_31105 (clusterPointszisegscan_group_sizze_31104)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_34718_backing_0 =\n                  &shared_mem[local_mem_34718_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34707;\n    int32_t local_tid_34708;\n    int64_t group_sizze_34711;\n    int32_t wave_sizze_34710;\n    int32_t group_tid_34709;\n    \n    global_tid_34707 = get_global_id(0);\n    local_tid_34708 = get_local_id(0);\n    group_sizze_34711 = get_local_size(0);\n    wave_sizze_34710 = LOCKSTEP_WIDTH;\n    group_tid_34709 = get_group_id(0);\n    \n    int32_t phys_tid_31110;\n    \n    phys_tid_31110 = global_tid_34707;\n    \n    int64_t byte_offsets_34712;\n    \n    byte_offsets_34712 = (int64_t) 0;\n    \n    int64_t byte_offsets_34713;\n    \n    byte_offsets_34713 = segscan_group_sizze_31105;\n    \n    int64_t byte_offsets_34714;\n    \n    byte_offsets_34714 = sdiv_up64(segscan_group_sizze_31105, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_31105 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_34715;\n    \n    warp_byte_offset_34715 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_34716;\n    \n    warp_byte_offset_34716 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_34717;\n    \n    warp_byte_offset_34717 = (int64_t) 320;\n    // Allocate reused shared memeory\n    { }\n    \n  ",
            "  __local char *local_mem_34718;\n    \n    local_mem_34718 = (__local char *) local_mem_34718_backing_0;\n    \n    int64_t trans_arr_len_34719;\n    \n    trans_arr_len_34719 = (int64_t) 9 * segscan_group_sizze_31105;\n    \n    int32_t dynamic_id_34729;\n    \n    if (local_tid_34708 == 0) {\n        dynamic_id_34729 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_34695)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_34718)[(int64_t) 0] = dynamic_id_34729;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_34729 = ((__local int32_t *) local_mem_34718)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_34730;\n    \n    blockOff_34730 = sext_i32_i64(dynamic_id_34729) * (int64_t) 9 *\n        segscan_group_sizze_31105;\n    \n    bool private_mem_34731[9];\n    int64_t private_mem_34733[9];\n    \n    // Load and map\n    {\n        for (int64_t i_34735 = 0; i_34735 < (int64_t) 9; i_34735++) {\n            int64_t gtid_31109 = blockOff_34730 +\n                    sext_i32_i64(local_tid_34708) + i_34735 *\n                    segscan_group_sizze_31105;\n            \n            if (slt64(gtid_31109, defunc_2_reduce_res_29639)) {\n                int64_t x_29689 = ((__global int64_t *) mem_32118)[gtid_31109];\n                int64_t i_p_o_31710 = add64((int64_t) -1, gtid_31109);\n                int64_t rot_i_31711 = smod64(i_p_o_31710,\n                                             defunc_2_reduce_res_29639);\n                int64_t x_29690 = ((__global int64_t *) mem_32118)[rot_i_31711];\n                bool defunc_1_f_res_29692 = x_29689 == x_29690;\n                bool defunc_1_f_res_29693 = !defunc_1_f_res_29692;\n                \n                private_mem_34731[i_34735] = defunc_1_f_res_29693;\n                private_mem_34733[i_34735] = (int64_t) 1;\n            } else {\n                private_mem_34731[i_34735]",
            " = 0;\n                private_mem_34733[i_34735] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34736 = 0; i_34736 < (int64_t) 9; i_34736++) {\n            int64_t sharedIdx_34737 = sext_i32_i64(local_tid_34708) + i_34736 *\n                    segscan_group_sizze_31105;\n            \n            ((__local bool *) local_mem_34718)[sharedIdx_34737] =\n                private_mem_34731[i_34736];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34738 = 0; i_34738 < 9; i_34738++) {\n            int32_t sharedIdx_34739 = local_tid_34708 * 9 + i_34738;\n            \n            private_mem_34731[sext_i32_i64(i_34738)] = ((__local\n                                                         bool *) local_mem_34718)[sext_i32_i64(sharedIdx_34739)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34740 = 0; i_34740 < (int64_t) 9; i_34740++) {\n            int64_t sharedIdx_34741 = sext_i32_i64(local_tid_34708) + i_34740 *\n                    segscan_group_sizze_31105;\n            \n            ((__local int64_t *) local_mem_34718)[sharedIdx_34741] =\n                private_mem_34733[i_34740];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34742 = 0; i_34742 < 9; i_34742++) {\n            int32_t sharedIdx_34743 = local_tid_34708 * 9 + i_34742;\n            \n            private_mem_34733[sext_i32_i64(i_34742)] = ((__local\n                                                         int64_t *) local_mem_34718)[sext_i32_i64(sharedIdx_34743)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_34744 = 0; i_34744 < (int64_t) 8; i_34744++) {\n            bool x_29682;\n            bool x_29684;\n            \n            x_29682 = private_mem_34731[i_34744];\n            x_29684 = private_mem_34731[i_34744 + (int64_t) 1];\n            \n            int64_t x_29683;\n            int64_t x_29685",
            ";\n            \n            x_29683 = private_mem_34733[i_34744];\n            x_29685 = private_mem_34733[i_34744 + (int64_t) 1];\n            \n            bool defunc_1_op_res_29686;\n            \n            defunc_1_op_res_29686 = x_29682 || x_29684;\n            \n            int64_t defunc_1_op_res_29687;\n            \n            if (x_29684) {\n                defunc_1_op_res_29687 = x_29685;\n            } else {\n                int64_t defunc_1_op_res_29688 = add64(x_29683, x_29685);\n                \n                defunc_1_op_res_29687 = defunc_1_op_res_29688;\n            }\n            private_mem_34731[i_34744 + (int64_t) 1] = defunc_1_op_res_29686;\n            private_mem_34733[i_34744 + (int64_t) 1] = defunc_1_op_res_29687;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_34718)[byte_offsets_34712 +\n                                           sext_i32_i64(local_tid_34708)] =\n            private_mem_34731[(int64_t) 8];\n        ((__local int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34708)] =\n            private_mem_34733[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_34752;\n    int64_t acc_34753;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_34745;\n        int64_t x_34746;\n        bool x_34747;\n        int64_t x_34748;\n        bool x_34754;\n        int64_t x_34755;\n        bool x_34756;\n        int64_t x_34757;\n        bool ltid_in_bounds_34761;\n        \n        ltid_in_bounds_34761 = slt64(sext_i32_i64(local_tid_34708),\n                                     segscan_group_sizze_31105);\n        \n        int32_t skip_threads_34762;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_34761) {\n                x_34747 = ((volatile __local\n                            bool *) local_mem_34718)[b",
            "yte_offsets_34712 +\n                                                     sext_i32_i64(local_tid_34708)];\n                x_34748 = ((volatile __local\n                            int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_34708)];\n                if ((local_tid_34708 - squot32(local_tid_34708, 32) * 32) ==\n                    0) {\n                    x_34745 = x_34747;\n                    x_34746 = x_34748;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_34762 = 1;\n            while (slt32(skip_threads_34762, 32)) {\n                if (sle32(skip_threads_34762, local_tid_34708 -\n                          squot32(local_tid_34708, 32) * 32) &&\n                    ltid_in_bounds_34761) {\n                    // read operands\n                    {\n                        x_34745 = ((volatile __local\n                                    bool *) local_mem_34718)[byte_offsets_34712 +\n                                                             (sext_i32_i64(local_tid_34708) -\n                                                              sext_i32_i64(skip_threads_34762))];\n                        x_34746 = ((volatile __local\n                                    int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_34708) -\n                                                                 sext_i32_i64(skip_threads_34762))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_34749 = x_34745 || x_34747;\n                        int64_t defunc_1_op_res_34750;\n                      ",
            "  \n                        if (x_34747) {\n                            defunc_1_op_res_34750 = x_34748;\n                        } else {\n                            int64_t defunc_1_op_res_34751 = add64(x_34746,\n                                                                  x_34748);\n                            \n                            defunc_1_op_res_34750 = defunc_1_op_res_34751;\n                        }\n                        x_34745 = defunc_1_op_res_34749;\n                        x_34746 = defunc_1_op_res_34750;\n                    }\n                }\n                if (sle32(wave_sizze_34710, skip_threads_34762)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_34762, local_tid_34708 -\n                          squot32(local_tid_34708, 32) * 32) &&\n                    ltid_in_bounds_34761) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_34718)[byte_offsets_34712 +\n                                                   sext_i32_i64(local_tid_34708)] =\n                            x_34745;\n                        x_34747 = x_34745;\n                        ((volatile __local\n                          int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_34708)] =\n                            x_34746;\n                        x_34748 = x_34746;\n                    }\n                }\n                if (sle32(wave_sizze_34710, skip_threads_34762)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_34762 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_34708 - squot32(local_tid_34708, ",
            "32) * 32) == 31 &&\n                ltid_in_bounds_34761) {\n                ((volatile __local bool *) local_mem_34718)[byte_offsets_34712 +\n                                                            sext_i32_i64(squot32(local_tid_34708,\n                                                                                 32))] =\n                    x_34745;\n                ((volatile __local\n                  int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_34708,\n                                                                   32))] =\n                    x_34746;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_34763;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_34708, 32) == 0 && ltid_in_bounds_34761) {\n                    x_34756 = ((volatile __local\n                                bool *) local_mem_34718)[byte_offsets_34712 +\n                                                         sext_i32_i64(local_tid_34708)];\n                    x_34757 = ((volatile __local\n                                int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_34708)];\n                    if ((local_tid_34708 - squot32(local_tid_34708, 32) * 32) ==\n                        0) {\n                        x_34754 = x_34756;\n                        x_34755 = x_34757;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_34763 = 1;\n                while (slt32(ski",
            "p_threads_34763, 32)) {\n                    if (sle32(skip_threads_34763, local_tid_34708 -\n                              squot32(local_tid_34708, 32) * 32) &&\n                        (squot32(local_tid_34708, 32) == 0 &&\n                         ltid_in_bounds_34761)) {\n                        // read operands\n                        {\n                            x_34754 = ((volatile __local\n                                        bool *) local_mem_34718)[byte_offsets_34712 +\n                                                                 (sext_i32_i64(local_tid_34708) -\n                                                                  sext_i32_i64(skip_threads_34763))];\n                            x_34755 = ((volatile __local\n                                        int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_34708) -\n                                                                     sext_i32_i64(skip_threads_34763))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_34758 = x_34754 || x_34756;\n                            int64_t defunc_1_op_res_34759;\n                            \n                            if (x_34756) {\n                                defunc_1_op_res_34759 = x_34757;\n                            } else {\n                                int64_t defunc_1_op_res_34760 = add64(x_34755,\n                                                                      x_34757);\n                                \n                                defunc_1_op_res_34759 = defunc_1_op_res_34760;\n                            }\n                            x_34754 = defunc_1_op_res_34758;\n                            x_34755 = defunc_1_op_res_34759;\n                        }\n            ",
            "        }\n                    if (sle32(wave_sizze_34710, skip_threads_34763)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_34763, local_tid_34708 -\n                              squot32(local_tid_34708, 32) * 32) &&\n                        (squot32(local_tid_34708, 32) == 0 &&\n                         ltid_in_bounds_34761)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_34718)[byte_offsets_34712 +\n                                                       sext_i32_i64(local_tid_34708)] =\n                                x_34754;\n                            x_34756 = x_34754;\n                            ((volatile __local\n                              int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_34708)] =\n                                x_34755;\n                            x_34757 = x_34755;\n                        }\n                    }\n                    if (sle32(wave_sizze_34710, skip_threads_34763)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_34763 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_34708, 32) == 0 || !ltid_in_bounds_34761)) {\n                // read operands\n                {\n                    x_34747 = x_34745;\n                    x_34748 = x_34746;\n                    x_34745 = ((__local\n                                bool *) local_mem_34718)[byte_offsets_34712 +\n                                                         (sext_i32_i64(squot32(local_tid_34708,\n                              ",
            "                                                 32)) -\n                                                          (int64_t) 1)];\n                    x_34746 = ((__local\n                                int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_34708,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_34749 = x_34745 || x_34747;\n                    int64_t defunc_1_op_res_34750;\n                    \n                    if (x_34747) {\n                        defunc_1_op_res_34750 = x_34748;\n                    } else {\n                        int64_t defunc_1_op_res_34751 = add64(x_34746, x_34748);\n                        \n                        defunc_1_op_res_34750 = defunc_1_op_res_34751;\n                    }\n                    x_34745 = defunc_1_op_res_34749;\n                    x_34746 = defunc_1_op_res_34750;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_34718)[byte_offsets_34712 +\n                                                       sext_i32_i64(local_tid_34708)] =\n                        x_34745;\n                    ((__local\n                      int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34708)] =\n                        x_34746;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_34708, 32) == ",
            "0) {\n                ((__local bool *) local_mem_34718)[byte_offsets_34712 +\n                                                   sext_i32_i64(local_tid_34708)] =\n                    x_34747;\n                ((__local\n                  int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34708)] =\n                    x_34748;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_34708 == 0) {\n            acc_34752 = ((__local bool *) local_mem_34718)[byte_offsets_34712 +\n                                                           (segscan_group_sizze_31105 -\n                                                            (int64_t) 1)];\n            acc_34753 = ((__local\n                          int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31105 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_34752 = ((__local bool *) local_mem_34718)[byte_offsets_34712 +\n                                                           (sext_i32_i64(local_tid_34708) -\n                                                            (int64_t) 1)];\n            acc_34753 = ((__local\n                          int64_t *) local_mem_34718)[squot64(byte_offsets_34713,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_34708) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_34764;\n    \n    prefix_34764 = 0;\n    \n    int64_t prefix_34765;\n    \n    prefix_34765 = (int64_t) 0;\n    // Perform lo",
            "okback\n    {\n        if (dynamic_id_34729 == (int64_t) 0 && local_tid_34708 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_34701)[dynamic_id_34729] = acc_34752;\n            ((volatile __global\n              int64_t *) incprefixes_mem_34705)[dynamic_id_34729] = acc_34753;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_34697)[dynamic_id_34729] = (int8_t) 2;\n            acc_34752 = 0;\n            acc_34753 = (int64_t) 0;\n        }\n        if (!(dynamic_id_34729 == (int64_t) 0) && slt32(local_tid_34708,\n                                                        wave_sizze_34710)) {\n            if (local_tid_34708 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_34699)[dynamic_id_34729] = acc_34752;\n                ((volatile __global\n                  int64_t *) aggregates_mem_34703)[dynamic_id_34729] =\n                    acc_34753;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34697)[dynamic_id_34729] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_34718)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_34697)[dynamic_id_34729 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_34766;\n            \n            status_34766 = ((__local int8_t *) local_mem_34718)[(int64_t) 0];\n            if (status_34766 == (int8_t) 2) {\n                if (local_tid_34708 == 0) {\n                    prefix_34764 = ((volatile __global\n                                     bool *) incprefixes_mem_34701)[dynamic_id_34729 -\n                                                                    (int64_t) 1];\n                    prefix_34765 = ((volatil",
            "e __global\n                                     int64_t *) incprefixes_mem_34705)[dynamic_id_34729 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_34767 = dynamic_id_34729 -\n                        sext_i32_i64(wave_sizze_34710);\n                \n                while (slt32(wave_sizze_34710 * -1, readOffset_34767)) {\n                    int32_t read_i_34768 = readOffset_34767 + local_tid_34708;\n                    bool aggr_34769 = 0;\n                    int64_t aggr_34770 = (int64_t) 0;\n                    int8_t flag_34771 = (int8_t) 0;\n                    int8_t used_34772 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_34768)) {\n                        flag_34771 = ((volatile __global\n                                       int8_t *) status_flags_mem_34697)[sext_i32_i64(read_i_34768)];\n                        if (flag_34771 == (int8_t) 2) {\n                            aggr_34769 = ((volatile __global\n                                           bool *) incprefixes_mem_34701)[sext_i32_i64(read_i_34768)];\n                            aggr_34770 = ((volatile __global\n                                           int64_t *) incprefixes_mem_34705)[sext_i32_i64(read_i_34768)];\n                        } else {\n                            if (flag_34771 == (int8_t) 1) {\n                                aggr_34769 = ((volatile __global\n                                               bool *) aggregates_mem_34699)[sext_i32_i64(read_i_34768)];\n                                aggr_34770 = ((volatile __global\n                                               int64_t *) aggregates_mem_34703)[sext_i32_i64(read_i_34768)];\n                                used_34772 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_34718)[warp_byte_offset_34715 +\n                   ",
            "                                    sext_i32_i64(local_tid_34708)] =\n                        aggr_34769;\n                    ((__local\n                      int64_t *) local_mem_34718)[squot64(warp_byte_offset_34716,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34708)] =\n                        aggr_34770;\n                    \n                    int8_t tmp_34773;\n                    \n                    tmp_34773 = flag_34771 | used_34772 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_34718)[sext_i32_i64(local_tid_34708)] =\n                        tmp_34773;\n                    mem_fence_local();\n                    flag_34771 = ((volatile __local\n                                   int8_t *) local_mem_34718)[sext_i32_i64(wave_sizze_34710) -\n                                                              (int64_t) 1];\n                    if (local_tid_34708 == 0) {\n                        if (!(flag_34771 == (int8_t) 2)) {\n                            bool x_34774 = 0;\n                            int64_t x_34775 = (int64_t) 0;\n                            bool x_34776;\n                            int64_t x_34777;\n                            int8_t flag1_34781;\n                            \n                            flag1_34781 = (int8_t) 0;\n                            \n                            int8_t flag2_34782;\n                            int8_t used1_34783;\n                            \n                            used1_34783 = (int8_t) 0;\n                            \n                            int8_t used2_34784;\n                            \n                            for (int32_t i_34785 = 0; i_34785 <\n                                 wave_sizze_34710; i_34785++) {\n                                flag2_34782 = ((__local\n                                                int8_t *) local_mem_34718)[sext_i32_i64(i_34785)];\n    ",
            "                            used2_34784 = lshr8(flag2_34782, (int8_t) 2);\n                                flag2_34782 = flag2_34782 & (int8_t) 3;\n                                x_34776 = ((__local\n                                            bool *) local_mem_34718)[warp_byte_offset_34715 +\n                                                                     sext_i32_i64(i_34785)];\n                                x_34777 = ((__local\n                                            int64_t *) local_mem_34718)[squot64(warp_byte_offset_34716,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_34785)];\n                                if (!(flag2_34782 == (int8_t) 1)) {\n                                    flag1_34781 = flag2_34782;\n                                    used1_34783 = used2_34784;\n                                    x_34774 = x_34776;\n                                    x_34775 = x_34777;\n                                } else {\n                                    used1_34783 += used2_34784;\n                                    \n                                    bool defunc_1_op_res_34778;\n                                    \n                                    defunc_1_op_res_34778 = x_34774 || x_34776;\n                                    \n                                    int64_t defunc_1_op_res_34779;\n                                    \n                                    if (x_34776) {\n                                        defunc_1_op_res_34779 = x_34777;\n                                    } else {\n                                        int64_t defunc_1_op_res_34780 =\n                                                add64(x_34775, x_34777);\n                                        \n                                        defunc_1_op_res_34779 =\n                                            defunc_1_op_res_34780;\n              ",
            "                      }\n                                    x_34774 = defunc_1_op_res_34778;\n                                    x_34775 = defunc_1_op_res_34779;\n                                }\n                            }\n                            flag_34771 = flag1_34781;\n                            used_34772 = used1_34783;\n                            aggr_34769 = x_34774;\n                            aggr_34770 = x_34775;\n                        } else {\n                            aggr_34769 = ((__local\n                                           bool *) local_mem_34718)[warp_byte_offset_34715 +\n                                                                    (sext_i32_i64(wave_sizze_34710) -\n                                                                     (int64_t) 1)];\n                            aggr_34770 = ((__local\n                                           int64_t *) local_mem_34718)[squot64(warp_byte_offset_34716,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_34710) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_34771 == (int8_t) 2) {\n                            readOffset_34767 = wave_sizze_34710 * -1;\n                        } else {\n                            readOffset_34767 -= zext_i8_i32(used_34772);\n                        }\n                        ((__local int32_t *) local_mem_34718)[(int64_t) 0] =\n                            readOffset_34767;\n                        \n                        bool x_34786;\n                        \n                        x_34786 = aggr_34769;\n                        \n                        int64_t x_34787;\n                        \n                        x_34787 = aggr_34770;\n                        \n                        bool x_34788;\n                      ",
            "  \n                        x_34788 = prefix_34764;\n                        \n                        int64_t x_34789;\n                        \n                        x_34789 = prefix_34765;\n                        \n                        bool defunc_1_op_res_34790;\n                        \n                        defunc_1_op_res_34790 = x_34786 || x_34788;\n                        \n                        int64_t defunc_1_op_res_34791;\n                        \n                        if (x_34788) {\n                            defunc_1_op_res_34791 = x_34789;\n                        } else {\n                            int64_t defunc_1_op_res_34792 = add64(x_34787,\n                                                                  x_34789);\n                            \n                            defunc_1_op_res_34791 = defunc_1_op_res_34792;\n                        }\n                        prefix_34764 = defunc_1_op_res_34790;\n                        prefix_34765 = defunc_1_op_res_34791;\n                    }\n                    mem_fence_local();\n                    readOffset_34767 = ((__local\n                                         int32_t *) local_mem_34718)[(int64_t) 0];\n                }\n            }\n            if (local_tid_34708 == 0) {\n                bool x_34793 = prefix_34764;\n                int64_t x_34794 = prefix_34765;\n                bool x_34795 = acc_34752;\n                int64_t x_34796 = acc_34753;\n                bool defunc_1_op_res_34797 = x_34793 || x_34795;\n                int64_t defunc_1_op_res_34798;\n                \n                if (x_34795) {\n                    defunc_1_op_res_34798 = x_34796;\n                } else {\n                    int64_t defunc_1_op_res_34799 = add64(x_34794, x_34796);\n                    \n                    defunc_1_op_res_34798 = defunc_1_op_res_34799;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_34701)[dynamic_id_34729] =\n                    defunc",
            "_1_op_res_34797;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_34705)[dynamic_id_34729] =\n                    defunc_1_op_res_34798;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34697)[dynamic_id_34729] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_34718)[warp_byte_offset_34715] =\n                    prefix_34764;\n                ((__local\n                  int64_t *) local_mem_34718)[squot64(warp_byte_offset_34716,\n                                                      (int64_t) 8)] =\n                    prefix_34765;\n                acc_34752 = 0;\n                acc_34753 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_34729 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_34764 = ((__local\n                             bool *) local_mem_34718)[warp_byte_offset_34715];\n            prefix_34765 = ((__local\n                             int64_t *) local_mem_34718)[squot64(warp_byte_offset_34716,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_34800;\n        bool x_34802;\n        bool x_34807;\n        \n        x_34807 = prefix_34764;\n        \n        bool x_34809;\n        \n        x_34809 = acc_34752;\n        \n        int64_t x_34801;\n        int64_t x_34803;\n        int64_t x_34808;\n        \n        x_34808 = prefix_34765;\n        \n        int64_t x_34810;\n        \n        x_34810 = acc_34753;\n        \n        bool defunc_1_op_res_34811;\n        \n        defunc_1_op_res_34811 = x_34807 || x_34809;\n        \n        int64_t defunc_1_op_res_34812;\n        \n        if (x_34809) {\n            defunc_1_op_res_34812 = x_34810;\n        } else {\n            int64_t defunc_1_op_res_34813 = add64(x_34808, x_34810);\n            \n            defunc_1_op_res_34812 ",
            "= defunc_1_op_res_34813;\n        }\n        x_34800 = defunc_1_op_res_34811;\n        x_34801 = defunc_1_op_res_34812;\n        for (int64_t i_34814 = 0; i_34814 < (int64_t) 9; i_34814++) {\n            x_34802 = private_mem_34731[i_34814];\n            x_34803 = private_mem_34733[i_34814];\n            \n            bool defunc_1_op_res_34804;\n            \n            defunc_1_op_res_34804 = x_34800 || x_34802;\n            \n            int64_t defunc_1_op_res_34805;\n            \n            if (x_34802) {\n                defunc_1_op_res_34805 = x_34803;\n            } else {\n                int64_t defunc_1_op_res_34806 = add64(x_34801, x_34803);\n                \n                defunc_1_op_res_34805 = defunc_1_op_res_34806;\n            }\n            private_mem_34731[i_34814] = defunc_1_op_res_34804;\n            private_mem_34733[i_34814] = defunc_1_op_res_34805;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34815 = 0; i_34815 < (int64_t) 9; i_34815++) {\n            int64_t sharedIdx_34816 = sext_i32_i64(local_tid_34708 * 9) +\n                    i_34815;\n            \n            ((__local bool *) local_mem_34718)[sharedIdx_34816] =\n                private_mem_34731[i_34815];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34817 = 0; i_34817 < (int64_t) 9; i_34817++) {\n            int32_t sharedIdx_34818 = local_tid_34708 +\n                    sext_i64_i32(segscan_group_sizze_31105 * i_34817);\n            \n            private_mem_34731[i_34817] = ((__local\n                                           bool *) local_mem_34718)[sext_i32_i64(sharedIdx_34818)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34819 = 0; i_34819 < (int64_t) 9; i_34819++) {\n            int64_t sharedIdx_34820 = sext_i32_i64(local_tid_34708 * 9) +\n                    i_34819;\n            \n            ((__local int64_t *) local_mem_34718)[sharedIdx_34820] =\n                private_mem_34733",
            "[i_34819];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34821 = 0; i_34821 < (int64_t) 9; i_34821++) {\n            int32_t sharedIdx_34822 = local_tid_34708 +\n                    sext_i64_i32(segscan_group_sizze_31105 * i_34821);\n            \n            private_mem_34733[i_34821] = ((__local\n                                           int64_t *) local_mem_34718)[sext_i32_i64(sharedIdx_34822)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_34823 = 0; i_34823 < (int64_t) 9; i_34823++) {\n            int64_t gtid_31109 = blockOff_34730 + segscan_group_sizze_31105 *\n                    i_34823 + sext_i32_i64(local_tid_34708);\n            \n            if (slt64(gtid_31109, defunc_2_reduce_res_29639)) {\n                ((__global bool *) mem_32121)[gtid_31109] =\n                    private_mem_34731[i_34823];\n            }\n        }\n        for (int64_t i_34824 = 0; i_34824 < (int64_t) 9; i_34824++) {\n            int64_t gtid_31109 = blockOff_34730 + segscan_group_sizze_31105 *\n                    i_34824 + sext_i32_i64(local_tid_34708);\n            \n            if (slt64(gtid_31109, defunc_2_reduce_res_29639)) {\n                ((__global int64_t *) mem_32123)[gtid_31109] =\n                    private_mem_34733[i_34824];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_34729 == sdiv_up64(defunc_2_reduce_res_29639,\n                                          segscan_group_sizze_31105 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_34695)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31105\n}\n__kernel void clusterPointszisegscan_31228(__global int *global_failure,\n                                           uint local_mem_34872_backing_offset_0,\n           ",
            "                                int64_t defunc_2_reduce_res_29639,\n                                           int64_t i32_res_29773,\n                                           int64_t i32_res_29774, __global\n                                           unsigned char *mem_param_32137,\n                                           __global unsigned char *mem_32149,\n                                           __global unsigned char *mem_32151,\n                                           __global unsigned char *mem_32153,\n                                           __global unsigned char *mem_32155,\n                                           __global unsigned char *mem_32157,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_34837,\n                                           __global\n                                           unsigned char *status_flags_mem_34839,\n                                           __global\n                                           unsigned char *aggregates_mem_34841,\n                                           __global\n                                           unsigned char *incprefixes_mem_34843,\n                                           __global\n                                           unsigned char *aggregates_mem_34845,\n                                           __global\n                                           unsigned char *incprefixes_mem_34847,\n                                           __global\n                                           unsigned char *aggregates_mem_34849,\n                                           __global\n                                           unsigned char *incprefixes_mem_34851,\n                                           __global\n                                           unsigned char *aggregates_mem_34853,\n                                           __global\n                                           unsigned char *incprefix",
            "es_mem_34855)\n{\n    #define segscan_group_sizze_31223 (clusterPointszisegscan_group_sizze_31222)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_34872_backing_0 =\n                  &shared_mem[local_mem_34872_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_34857;\n    int32_t local_tid_34858;\n    int64_t group_sizze_34861;\n    int32_t wave_sizze_34860;\n    int32_t group_tid_34859;\n    \n    global_tid_34857 = get_global_id(0);\n    local_tid_34858 = get_local_id(0);\n    group_sizze_34861 = get_local_size(0);\n    wave_sizze_34860 = LOCKSTEP_WIDTH;\n    group_tid_34859 = get_group_id(0);\n    \n    int32_t phys_tid_31228;\n    \n    phys_tid_31228 = global_tid_34857;\n    \n    int64_t byte_offsets_34862;\n    \n    byte_offsets_34862 = (int64_t) 0;\n    \n    int64_t byte_offsets_34863;\n    \n    byte_offsets_34863 = segscan_group_sizze_31223 * (int64_t) 8;\n    \n    int64_t byte_offsets_34864;\n    \n    byte_offsets_34864 = sdiv_up64(segscan_group_sizze_31223 * (int64_t) 8,\n                                   (int64_t) 8) * (int64_t) 8 +\n        segscan_group_sizze_31223 * (int64_t) 8;\n    \n    int64_t byte_offsets_34865;\n    \n    byte_offsets_34865 = sdiv_up64(sdiv_up64(segscan_group_sizze_31223 *\n                                             (int64_t) 8, (int64_t) 8) *\n                                   (int64_t) 8 + segscan_group_sizze_31223 *\n                                   (int64_t) 8, (int64_t) 8) * (int64_t) 8 +\n        segscan_group_sizze_31223 * (int64_t) 8;\n    \n    int64_t byte_offsets_34866;\n    \n    byte_offsets_34866 =\n        sdiv_up64(sdiv_up64(sdiv_up64(segscan_group_sizze_31223 * (int64_t) 8,\n                                      (int64_t) 8) * (int64_t) 8 +\n                            segscan_group_sizze_31223 * (int64_t) 8,\n                            (int64_t) 8) * (int64_t) 8 +\n                  segscan_group_sizze_31223 * (int64_t) 8, ",
            "(int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_31223 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_34867;\n    \n    warp_byte_offset_34867 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_34868;\n    \n    warp_byte_offset_34868 = (int64_t) 288;\n    \n    int64_t warp_byte_offset_34869;\n    \n    warp_byte_offset_34869 = (int64_t) 544;\n    \n    int64_t warp_byte_offset_34870;\n    \n    warp_byte_offset_34870 = (int64_t) 800;\n    \n    int64_t warp_byte_offset_34871;\n    \n    warp_byte_offset_34871 = (int64_t) 1056;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_34872;\n    \n    local_mem_34872 = (__local char *) local_mem_34872_backing_0;\n    \n    int64_t trans_arr_len_34873;\n    \n    trans_arr_len_34873 = (int64_t) 9 * segscan_group_sizze_31223;\n    \n    int32_t dynamic_id_34889;\n    \n    if (local_tid_34858 == 0) {\n        dynamic_id_34889 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_34837)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_34872)[(int64_t) 0] = dynamic_id_34889;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_34889 = ((__local int32_t *) local_mem_34872)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_34890;\n    \n    blockOff_34890 = sext_i32_i64(dynamic_id_34889) * (int64_t) 9 *\n        segscan_group_sizze_31223;\n    \n    int64_t private_mem_34891[9];\n    int64_t private_mem_34893[9];\n    int64_t private_mem_34895[9];\n    int64_t private_mem_34897[9];\n    \n    // Load and map\n    {\n        for (int64_t i_34899 = 0; i_34899 < (int64_t) 9; i_34899++) {\n            int64_t gtid_31227 = blockOff_34890 +\n                    sext_i32_i64(local_tid_34858) + i_34899 *\n                    segscan_group_sizze_31223;\n            \n            if (slt64(gtid_31227, defunc_2_reduce_res_29639)) {\n                int64_t x_29802 = ((__global\n  ",
            "                                  int64_t *) mem_param_32137)[gtid_31227];\n                int64_t zgzg_res_29803 = ashr64(x_29802, i32_res_29773);\n                int64_t za_res_29804 = (int64_t) 1 & zgzg_res_29803;\n                int32_t to_i32_res_29805 = sext_i64_i32(za_res_29804);\n                int32_t x_29806 = mul32(2, to_i32_res_29805);\n                int64_t zgzg_res_29807 = ashr64(x_29802, i32_res_29774);\n                int64_t za_res_29808 = (int64_t) 1 & zgzg_res_29807;\n                int32_t to_i32_res_29809 = sext_i64_i32(za_res_29808);\n                int32_t defunc_0_f_res_29810 = add32(x_29806, to_i32_res_29809);\n                bool cond_29811 = defunc_0_f_res_29810 == 0;\n                int64_t defunc_0_f_res_29812 = btoi_bool_i64(cond_29811);\n                int64_t defunc_0_f_res_29813;\n                int64_t defunc_0_f_res_29814;\n                int64_t defunc_0_f_res_29815;\n                \n                if (cond_29811) {\n                    defunc_0_f_res_29813 = (int64_t) 0;\n                    defunc_0_f_res_29814 = (int64_t) 0;\n                    defunc_0_f_res_29815 = (int64_t) 0;\n                } else {\n                    bool cond_29816 = defunc_0_f_res_29810 == 1;\n                    int64_t defunc_0_f_res_f_res_29817 =\n                            btoi_bool_i64(cond_29816);\n                    int64_t defunc_0_f_res_f_res_29818;\n                    int64_t defunc_0_f_res_f_res_29819;\n                    \n                    if (cond_29816) {\n                        defunc_0_f_res_f_res_29818 = (int64_t) 0;\n                        defunc_0_f_res_f_res_29819 = (int64_t) 0;\n                    } else {\n                        bool cond_29820 = defunc_0_f_res_29810 == 2;\n                        int64_t defunc_0_f_res_f_res_f_res_29821 =\n                                btoi_bool_i64(cond_29820);\n                        bool cond_neg_29822 = !cond_29820;\n                        int64_t defunc_0_f_res_f_res_f_res_29823 =\n         ",
            "                       btoi_bool_i64(cond_neg_29822);\n                        \n                        defunc_0_f_res_f_res_29818 =\n                            defunc_0_f_res_f_res_f_res_29821;\n                        defunc_0_f_res_f_res_29819 =\n                            defunc_0_f_res_f_res_f_res_29823;\n                    }\n                    defunc_0_f_res_29813 = defunc_0_f_res_f_res_29817;\n                    defunc_0_f_res_29814 = defunc_0_f_res_f_res_29818;\n                    defunc_0_f_res_29815 = defunc_0_f_res_f_res_29819;\n                }\n                ((__global int32_t *) mem_32157)[gtid_31227] =\n                    defunc_0_f_res_29810;\n                private_mem_34891[i_34899] = defunc_0_f_res_29812;\n                private_mem_34893[i_34899] = defunc_0_f_res_29813;\n                private_mem_34895[i_34899] = defunc_0_f_res_29814;\n                private_mem_34897[i_34899] = defunc_0_f_res_29815;\n            } else {\n                private_mem_34891[i_34899] = (int64_t) 0;\n                private_mem_34893[i_34899] = (int64_t) 0;\n                private_mem_34895[i_34899] = (int64_t) 0;\n                private_mem_34897[i_34899] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34900 = 0; i_34900 < (int64_t) 9; i_34900++) {\n            int64_t sharedIdx_34901 = sext_i32_i64(local_tid_34858) + i_34900 *\n                    segscan_group_sizze_31223;\n            \n            ((__local int64_t *) local_mem_34872)[sharedIdx_34901] =\n                private_mem_34891[i_34900];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34902 = 0; i_34902 < 9; i_34902++) {\n            int32_t sharedIdx_34903 = local_tid_34858 * 9 + i_34902;\n            \n            private_mem_34891[sext_i32_i64(i_34902)] = ((__local\n                                                         int64_t *) local_mem_34872)[sext_i32_i64(sharedIdx_34903)];\n        }\n    ",
            "    barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34904 = 0; i_34904 < (int64_t) 9; i_34904++) {\n            int64_t sharedIdx_34905 = sext_i32_i64(local_tid_34858) + i_34904 *\n                    segscan_group_sizze_31223;\n            \n            ((__local int64_t *) local_mem_34872)[sharedIdx_34905] =\n                private_mem_34893[i_34904];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34906 = 0; i_34906 < 9; i_34906++) {\n            int32_t sharedIdx_34907 = local_tid_34858 * 9 + i_34906;\n            \n            private_mem_34893[sext_i32_i64(i_34906)] = ((__local\n                                                         int64_t *) local_mem_34872)[sext_i32_i64(sharedIdx_34907)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34908 = 0; i_34908 < (int64_t) 9; i_34908++) {\n            int64_t sharedIdx_34909 = sext_i32_i64(local_tid_34858) + i_34908 *\n                    segscan_group_sizze_31223;\n            \n            ((__local int64_t *) local_mem_34872)[sharedIdx_34909] =\n                private_mem_34895[i_34908];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34910 = 0; i_34910 < 9; i_34910++) {\n            int32_t sharedIdx_34911 = local_tid_34858 * 9 + i_34910;\n            \n            private_mem_34895[sext_i32_i64(i_34910)] = ((__local\n                                                         int64_t *) local_mem_34872)[sext_i32_i64(sharedIdx_34911)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_34912 = 0; i_34912 < (int64_t) 9; i_34912++) {\n            int64_t sharedIdx_34913 = sext_i32_i64(local_tid_34858) + i_34912 *\n                    segscan_group_sizze_31223;\n            \n            ((__local int64_t *) local_mem_34872)[sharedIdx_34913] =\n                private_mem_34897[i_34912];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_34914 = 0; i_34914 < 9; i_34914++) {\n            int32_t sharedIdx_34915 = local_tid_3",
            "4858 * 9 + i_34914;\n            \n            private_mem_34897[sext_i32_i64(i_34914)] = ((__local\n                                                         int64_t *) local_mem_34872)[sext_i32_i64(sharedIdx_34915)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_34916 = 0; i_34916 < (int64_t) 8; i_34916++) {\n            int64_t x_29790;\n            int64_t x_29794;\n            \n            x_29790 = private_mem_34891[i_34916];\n            x_29794 = private_mem_34891[i_34916 + (int64_t) 1];\n            \n            int64_t x_29791;\n            int64_t x_29795;\n            \n            x_29791 = private_mem_34893[i_34916];\n            x_29795 = private_mem_34893[i_34916 + (int64_t) 1];\n            \n            int64_t x_29792;\n            int64_t x_29796;\n            \n            x_29792 = private_mem_34895[i_34916];\n            x_29796 = private_mem_34895[i_34916 + (int64_t) 1];\n            \n            int64_t x_29793;\n            int64_t x_29797;\n            \n            x_29793 = private_mem_34897[i_34916];\n            x_29797 = private_mem_34897[i_34916 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29798;\n            \n            defunc_1_op_res_29798 = add64(x_29790, x_29794);\n            \n            int64_t defunc_1_op_res_29799 = add64(x_29791, x_29795);\n            int64_t defunc_1_op_res_29800 = add64(x_29792, x_29796);\n            int64_t defunc_1_op_res_29801 = add64(x_29793, x_29797);\n            \n            private_mem_34891[i_34916 + (int64_t) 1] = defunc_1_op_res_29798;\n            private_mem_34893[i_34916 + (int64_t) 1] = defunc_1_op_res_29799;\n            private_mem_34895[i_34916 + (int64_t) 1] = defunc_1_op_res_29800;\n            private_mem_34897[i_34916 + (int64_t) 1] = defunc_1_op_res_29801;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                          ",
            "            (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34858)] =\n            private_mem_34891[(int64_t) 8];\n        ((__local int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34858)] =\n            private_mem_34893[(int64_t) 8];\n        ((__local int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34858)] =\n            private_mem_34895[(int64_t) 8];\n        ((__local int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34858)] =\n            private_mem_34897[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_34929;\n    int64_t acc_34930;\n    int64_t acc_34931;\n    int64_t acc_34932;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_34917;\n        int64_t x_34918;\n        int64_t x_34919;\n        int64_t x_34920;\n        int64_t x_34921;\n        int64_t x_34922;\n        int64_t x_34923;\n        int64_t x_34924;\n        int64_t x_34933;\n        int64_t x_34934;\n        int64_t x_34935;\n        int64_t x_34936;\n        int64_t x_34937;\n        int64_t x_34938;\n        int64_t x_34939;\n        int64_t x_34940;\n        bool ltid_in_bounds_34945;\n        \n        ltid_in_bounds_34945 = slt64(sext_i32_i64(local_tid_34858),\n                                     segscan_group_sizze_31223);\n        \n        int32_t skip_threads_34946;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_34945) {\n                x_34921 = ((volatile __local\n                            int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n             ",
            "                                                   (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_34858)];\n                x_34922 = ((volatile __local\n                            int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_34858)];\n                x_34923 = ((volatile __local\n                            int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_34858)];\n                x_34924 = ((volatile __local\n                            int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_34858)];\n                if ((local_tid_34858 - squot32(local_tid_34858, 32) * 32) ==\n                    0) {\n                    x_34917 = x_34921;\n                    x_34918 = x_34922;\n                    x_34919 = x_34923;\n                    x_34920 = x_34924;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_34946 = 1;\n            while (slt32(skip_threads_34946, 32)) {\n                if (sle32(skip_threads_34946, local_tid_34858 -\n                          squot32(local_tid_34858, 32) * 32) &&\n                    ltid_in_bounds_34945) {\n                    // read operands\n                    {\n                        x_34917 = ((volatile __local\n                                    int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                                        (int64_t) 8) +\n                                         ",
            "                       (sext_i32_i64(local_tid_34858) -\n                                                                 sext_i32_i64(skip_threads_34946))];\n                        x_34918 = ((volatile __local\n                                    int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_34858) -\n                                                                 sext_i32_i64(skip_threads_34946))];\n                        x_34919 = ((volatile __local\n                                    int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_34858) -\n                                                                 sext_i32_i64(skip_threads_34946))];\n                        x_34920 = ((volatile __local\n                                    int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_34858) -\n                                                                 sext_i32_i64(skip_threads_34946))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_34925 = add64(x_34917, x_34921);\n                        int64_t defunc_1_op_res_34926 = add64(x_34918, x_34922);\n                        int64_t defunc_1_op_res_34927 = add64(x_34919, x_34923);\n                        int64_t defunc_1_op_res_34928 = add64(x_34920, x_34924);\n                        \n                        x_34917 = defunc_1_op_res_34925;\n                        x_34918 = defunc_1_op_res_34926;\n     ",
            "                   x_34919 = defunc_1_op_res_34927;\n                        x_34920 = defunc_1_op_res_34928;\n                    }\n                }\n                if (sle32(wave_sizze_34860, skip_threads_34946)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_34946, local_tid_34858 -\n                          squot32(local_tid_34858, 32) * 32) &&\n                    ltid_in_bounds_34945) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_34858)] =\n                            x_34917;\n                        x_34921 = x_34917;\n                        ((volatile __local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_34858)] =\n                            x_34918;\n                        x_34922 = x_34918;\n                        ((volatile __local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_34858)] =\n                            x_34919;\n                        x_34923 = x_34919;\n                        ((volatile __local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_34858)] =\n                            x_34920;\n                        x_34924 = x_34920;\n          ",
            "          }\n                }\n                if (sle32(wave_sizze_34860, skip_threads_34946)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_34946 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_34858 - squot32(local_tid_34858, 32) * 32) == 31 &&\n                ltid_in_bounds_34945) {\n                ((volatile __local\n                  int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_34858,\n                                                                   32))] =\n                    x_34917;\n                ((volatile __local\n                  int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_34858,\n                                                                   32))] =\n                    x_34918;\n                ((volatile __local\n                  int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_34858,\n                                                                   32))] =\n                    x_34919;\n                ((volatile __local\n                  int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_34858,\n                                                                   32))] =\n                    x_34920;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        /",
            "/ scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_34947;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_34858, 32) == 0 && ltid_in_bounds_34945) {\n                    x_34937 = ((volatile __local\n                                int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_34858)];\n                    x_34938 = ((volatile __local\n                                int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_34858)];\n                    x_34939 = ((volatile __local\n                                int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_34858)];\n                    x_34940 = ((volatile __local\n                                int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_34858)];\n                    if ((local_tid_34858 - squot32(local_tid_34858, 32) * 32) ==\n                        0) {\n                        x_34933 = x_34937;\n                        x_34934 = x_34938;\n                        x_34935 = x_34939;\n                        x_34936 = x_34940;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_34947 = 1;\n                whi",
            "le (slt32(skip_threads_34947, 32)) {\n                    if (sle32(skip_threads_34947, local_tid_34858 -\n                              squot32(local_tid_34858, 32) * 32) &&\n                        (squot32(local_tid_34858, 32) == 0 &&\n                         ltid_in_bounds_34945)) {\n                        // read operands\n                        {\n                            x_34933 = ((volatile __local\n                                        int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_34858) -\n                                                                     sext_i32_i64(skip_threads_34947))];\n                            x_34934 = ((volatile __local\n                                        int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_34858) -\n                                                                     sext_i32_i64(skip_threads_34947))];\n                            x_34935 = ((volatile __local\n                                        int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_34858) -\n                                                                     sext_i32_i64(skip_threads_34947))];\n                            x_34936 = ((volatile __local\n                                        int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                                            (int64_t) 8) +\n                                                      ",
            "              (sext_i32_i64(local_tid_34858) -\n                                                                     sext_i32_i64(skip_threads_34947))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_34941 = add64(x_34933,\n                                                                  x_34937);\n                            int64_t defunc_1_op_res_34942 = add64(x_34934,\n                                                                  x_34938);\n                            int64_t defunc_1_op_res_34943 = add64(x_34935,\n                                                                  x_34939);\n                            int64_t defunc_1_op_res_34944 = add64(x_34936,\n                                                                  x_34940);\n                            \n                            x_34933 = defunc_1_op_res_34941;\n                            x_34934 = defunc_1_op_res_34942;\n                            x_34935 = defunc_1_op_res_34943;\n                            x_34936 = defunc_1_op_res_34944;\n                        }\n                    }\n                    if (sle32(wave_sizze_34860, skip_threads_34947)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_34947, local_tid_34858 -\n                              squot32(local_tid_34858, 32) * 32) &&\n                        (squot32(local_tid_34858, 32) == 0 &&\n                         ltid_in_bounds_34945)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_34858)] =\n                                x_34933;\n                   ",
            "         x_34937 = x_34933;\n                            ((volatile __local\n                              int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_34858)] =\n                                x_34934;\n                            x_34938 = x_34934;\n                            ((volatile __local\n                              int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_34858)] =\n                                x_34935;\n                            x_34939 = x_34935;\n                            ((volatile __local\n                              int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_34858)] =\n                                x_34936;\n                            x_34940 = x_34936;\n                        }\n                    }\n                    if (sle32(wave_sizze_34860, skip_threads_34947)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_34947 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_34858, 32) == 0 || !ltid_in_bounds_34945)) {\n                // read operands\n                {\n                    x_34921 = x_34917;\n                    x_34922 = x_34918;\n                    x_34923 = x_34919;\n                    x_34924 = x_34920;\n                    x_34917 = ((__local\n                                int64_t *) local_mem_34872)[squot64(byte_offsets_3",
            "4862,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_34858,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_34918 = ((__local\n                                int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_34858,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_34919 = ((__local\n                                int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_34858,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                    x_34920 = ((__local\n                                int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_34858,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_34925 = add64(x_34917, x_34921);\n                    int64_t defunc_1_op_res_34926 = add64(x_34918, x_349",
            "22);\n                    int64_t defunc_1_op_res_34927 = add64(x_34919, x_34923);\n                    int64_t defunc_1_op_res_34928 = add64(x_34920, x_34924);\n                    \n                    x_34917 = defunc_1_op_res_34925;\n                    x_34918 = defunc_1_op_res_34926;\n                    x_34919 = defunc_1_op_res_34927;\n                    x_34920 = defunc_1_op_res_34928;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34858)] =\n                        x_34917;\n                    ((__local\n                      int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34858)] =\n                        x_34918;\n                    ((__local\n                      int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34858)] =\n                        x_34919;\n                    ((__local\n                      int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34858)] =\n                        x_34920;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_34858, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                     ",
            " (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34858)] =\n                    x_34921;\n                ((__local\n                  int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34858)] =\n                    x_34922;\n                ((__local\n                  int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34858)] =\n                    x_34923;\n                ((__local\n                  int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_34858)] =\n                    x_34924;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_34858 == 0) {\n            acc_34929 = ((__local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31223 -\n                                                       (int64_t) 1)];\n            acc_34930 = ((__local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31223 -\n                                                       (int64_t) 1)];\n            acc_34931 = ((__local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                              (int64_t) 8) +\n                        ",
            "                              (segscan_group_sizze_31223 -\n                                                       (int64_t) 1)];\n            acc_34932 = ((__local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31223 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_34929 = ((__local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34862,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_34858) -\n                                                       (int64_t) 1)];\n            acc_34930 = ((__local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34863,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_34858) -\n                                                       (int64_t) 1)];\n            acc_34931 = ((__local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34864,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_34858) -\n                                                       (int64_t) 1)];\n            acc_34932 = ((__local\n                          int64_t *) local_mem_34872)[squot64(byte_offsets_34865,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_34858) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_34948;\n    \n    prefix_34948 =",
            " (int64_t) 0;\n    \n    int64_t prefix_34949;\n    \n    prefix_34949 = (int64_t) 0;\n    \n    int64_t prefix_34950;\n    \n    prefix_34950 = (int64_t) 0;\n    \n    int64_t prefix_34951;\n    \n    prefix_34951 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_34889 == (int64_t) 0 && local_tid_34858 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_34843)[dynamic_id_34889] = acc_34929;\n            ((volatile __global\n              int64_t *) incprefixes_mem_34847)[dynamic_id_34889] = acc_34930;\n            ((volatile __global\n              int64_t *) incprefixes_mem_34851)[dynamic_id_34889] = acc_34931;\n            ((volatile __global\n              int64_t *) incprefixes_mem_34855)[dynamic_id_34889] = acc_34932;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_34839)[dynamic_id_34889] = (int8_t) 2;\n            acc_34929 = (int64_t) 0;\n            acc_34930 = (int64_t) 0;\n            acc_34931 = (int64_t) 0;\n            acc_34932 = (int64_t) 0;\n        }\n        if (!(dynamic_id_34889 == (int64_t) 0) && slt32(local_tid_34858,\n                                                        wave_sizze_34860)) {\n            if (local_tid_34858 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_34841)[dynamic_id_34889] =\n                    acc_34929;\n                ((volatile __global\n                  int64_t *) aggregates_mem_34845)[dynamic_id_34889] =\n                    acc_34930;\n                ((volatile __global\n                  int64_t *) aggregates_mem_34849)[dynamic_id_34889] =\n                    acc_34931;\n                ((volatile __global\n                  int64_t *) aggregates_mem_34853)[dynamic_id_34889] =\n                    acc_34932;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34839)[dynamic_id_34889] =\n                    (int8_t) 1;\n                (",
            "(__local int8_t *) local_mem_34872)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_34839)[dynamic_id_34889 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_34952;\n            \n            status_34952 = ((__local int8_t *) local_mem_34872)[(int64_t) 0];\n            if (status_34952 == (int8_t) 2) {\n                if (local_tid_34858 == 0) {\n                    prefix_34948 = ((volatile __global\n                                     int64_t *) incprefixes_mem_34843)[dynamic_id_34889 -\n                                                                       (int64_t) 1];\n                    prefix_34949 = ((volatile __global\n                                     int64_t *) incprefixes_mem_34847)[dynamic_id_34889 -\n                                                                       (int64_t) 1];\n                    prefix_34950 = ((volatile __global\n                                     int64_t *) incprefixes_mem_34851)[dynamic_id_34889 -\n                                                                       (int64_t) 1];\n                    prefix_34951 = ((volatile __global\n                                     int64_t *) incprefixes_mem_34855)[dynamic_id_34889 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_34953 = dynamic_id_34889 -\n                        sext_i32_i64(wave_sizze_34860);\n                \n                while (slt32(wave_sizze_34860 * -1, readOffset_34953)) {\n                    int32_t read_i_34954 = readOffset_34953 + local_tid_34858;\n                    int64_t aggr_34955 = (int64_t) 0;\n                    int64_t aggr_34956 = (int64_t) 0;\n                    int64_t aggr_34957 = (int64_t) 0;\n                 ",
            "   int64_t aggr_34958 = (int64_t) 0;\n                    int8_t flag_34959 = (int8_t) 0;\n                    int8_t used_34960 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_34954)) {\n                        flag_34959 = ((volatile __global\n                                       int8_t *) status_flags_mem_34839)[sext_i32_i64(read_i_34954)];\n                        if (flag_34959 == (int8_t) 2) {\n                            aggr_34955 = ((volatile __global\n                                           int64_t *) incprefixes_mem_34843)[sext_i32_i64(read_i_34954)];\n                            aggr_34956 = ((volatile __global\n                                           int64_t *) incprefixes_mem_34847)[sext_i32_i64(read_i_34954)];\n                            aggr_34957 = ((volatile __global\n                                           int64_t *) incprefixes_mem_34851)[sext_i32_i64(read_i_34954)];\n                            aggr_34958 = ((volatile __global\n                                           int64_t *) incprefixes_mem_34855)[sext_i32_i64(read_i_34954)];\n                        } else {\n                            if (flag_34959 == (int8_t) 1) {\n                                aggr_34955 = ((volatile __global\n                                               int64_t *) aggregates_mem_34841)[sext_i32_i64(read_i_34954)];\n                                aggr_34956 = ((volatile __global\n                                               int64_t *) aggregates_mem_34845)[sext_i32_i64(read_i_34954)];\n                                aggr_34957 = ((volatile __global\n                                               int64_t *) aggregates_mem_34849)[sext_i32_i64(read_i_34954)];\n                                aggr_34958 = ((volatile __global\n                                               int64_t *) aggregates_mem_34853)[sext_i32_i64(read_i_34954)];\n                                used_34960 = (int8_t) 1;\n                            }\n                        }\n   ",
            "                 }\n                    ((__local\n                      int64_t *) local_mem_34872)[squot64(warp_byte_offset_34867,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34858)] =\n                        aggr_34955;\n                    ((__local\n                      int64_t *) local_mem_34872)[squot64(warp_byte_offset_34868,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34858)] =\n                        aggr_34956;\n                    ((__local\n                      int64_t *) local_mem_34872)[squot64(warp_byte_offset_34869,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34858)] =\n                        aggr_34957;\n                    ((__local\n                      int64_t *) local_mem_34872)[squot64(warp_byte_offset_34870,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_34858)] =\n                        aggr_34958;\n                    \n                    int8_t tmp_34961;\n                    \n                    tmp_34961 = flag_34959 | used_34960 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_34872)[sext_i32_i64(local_tid_34858)] =\n                        tmp_34961;\n                    mem_fence_local();\n                    flag_34959 = ((volatile __local\n                                   int8_t *) local_mem_34872)[sext_i32_i64(wave_sizze_34860) -\n                                                              (int64_t) 1];\n                    if (local_tid_34858 == 0) {\n                        if (!(flag_34959 == (int8_t) 2)) {\n                            int64_t x_34962 = (int64_t) 0;\n                            int64_t x_3",
            "4963 = (int64_t) 0;\n                            int64_t x_34964 = (int64_t) 0;\n                            int64_t x_34965 = (int64_t) 0;\n                            int64_t x_34966;\n                            int64_t x_34967;\n                            int64_t x_34968;\n                            int64_t x_34969;\n                            int8_t flag1_34974;\n                            \n                            flag1_34974 = (int8_t) 0;\n                            \n                            int8_t flag2_34975;\n                            int8_t used1_34976;\n                            \n                            used1_34976 = (int8_t) 0;\n                            \n                            int8_t used2_34977;\n                            \n                            for (int32_t i_34978 = 0; i_34978 <\n                                 wave_sizze_34860; i_34978++) {\n                                flag2_34975 = ((__local\n                                                int8_t *) local_mem_34872)[sext_i32_i64(i_34978)];\n                                used2_34977 = lshr8(flag2_34975, (int8_t) 2);\n                                flag2_34975 = flag2_34975 & (int8_t) 3;\n                                x_34966 = ((__local\n                                            int64_t *) local_mem_34872)[squot64(warp_byte_offset_34867,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_34978)];\n                                x_34967 = ((__local\n                                            int64_t *) local_mem_34872)[squot64(warp_byte_offset_34868,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_34978)];\n                                x_34968 = ((__local\n                                            int64_t *) loc",
            "al_mem_34872)[squot64(warp_byte_offset_34869,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_34978)];\n                                x_34969 = ((__local\n                                            int64_t *) local_mem_34872)[squot64(warp_byte_offset_34870,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_34978)];\n                                if (!(flag2_34975 == (int8_t) 1)) {\n                                    flag1_34974 = flag2_34975;\n                                    used1_34976 = used2_34977;\n                                    x_34962 = x_34966;\n                                    x_34963 = x_34967;\n                                    x_34964 = x_34968;\n                                    x_34965 = x_34969;\n                                } else {\n                                    used1_34976 += used2_34977;\n                                    \n                                    int64_t defunc_1_op_res_34970;\n                                    \n                                    defunc_1_op_res_34970 = add64(x_34962,\n                                                                  x_34966);\n                                    \n                                    int64_t defunc_1_op_res_34971 =\n                                            add64(x_34963, x_34967);\n                                    int64_t defunc_1_op_res_34972 =\n                                            add64(x_34964, x_34968);\n                                    int64_t defunc_1_op_res_34973 =\n                                            add64(x_34965, x_34969);\n                                    \n                                    x_34962 = defunc_1_op_res_34970;\n                                    x_34963 = defun",
            "c_1_op_res_34971;\n                                    x_34964 = defunc_1_op_res_34972;\n                                    x_34965 = defunc_1_op_res_34973;\n                                }\n                            }\n                            flag_34959 = flag1_34974;\n                            used_34960 = used1_34976;\n                            aggr_34955 = x_34962;\n                            aggr_34956 = x_34963;\n                            aggr_34957 = x_34964;\n                            aggr_34958 = x_34965;\n                        } else {\n                            aggr_34955 = ((__local\n                                           int64_t *) local_mem_34872)[squot64(warp_byte_offset_34867,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_34860) -\n                                                                        (int64_t) 1)];\n                            aggr_34956 = ((__local\n                                           int64_t *) local_mem_34872)[squot64(warp_byte_offset_34868,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_34860) -\n                                                                        (int64_t) 1)];\n                            aggr_34957 = ((__local\n                                           int64_t *) local_mem_34872)[squot64(warp_byte_offset_34869,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_34860) -\n                                                                        (int64_t) 1)];\n                            aggr_34958 = ((__local\n                                           int64_t *) local_mem_3487",
            "2)[squot64(warp_byte_offset_34870,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_34860) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_34959 == (int8_t) 2) {\n                            readOffset_34953 = wave_sizze_34860 * -1;\n                        } else {\n                            readOffset_34953 -= zext_i8_i32(used_34960);\n                        }\n                        ((__local int32_t *) local_mem_34872)[(int64_t) 0] =\n                            readOffset_34953;\n                        \n                        int64_t x_34979;\n                        \n                        x_34979 = aggr_34955;\n                        \n                        int64_t x_34980;\n                        \n                        x_34980 = aggr_34956;\n                        \n                        int64_t x_34981;\n                        \n                        x_34981 = aggr_34957;\n                        \n                        int64_t x_34982;\n                        \n                        x_34982 = aggr_34958;\n                        \n                        int64_t x_34983;\n                        \n                        x_34983 = prefix_34948;\n                        \n                        int64_t x_34984;\n                        \n                        x_34984 = prefix_34949;\n                        \n                        int64_t x_34985;\n                        \n                        x_34985 = prefix_34950;\n                        \n                        int64_t x_34986;\n                        \n                        x_34986 = prefix_34951;\n                        \n                        int64_t defunc_1_op_res_34987;\n                        \n                        defunc_1_op_res_34987 = add64(x_34979, ",
            "x_34983);\n                        \n                        int64_t defunc_1_op_res_34988 = add64(x_34980, x_34984);\n                        int64_t defunc_1_op_res_34989 = add64(x_34981, x_34985);\n                        int64_t defunc_1_op_res_34990 = add64(x_34982, x_34986);\n                        \n                        prefix_34948 = defunc_1_op_res_34987;\n                        prefix_34949 = defunc_1_op_res_34988;\n                        prefix_34950 = defunc_1_op_res_34989;\n                        prefix_34951 = defunc_1_op_res_34990;\n                    }\n                    mem_fence_local();\n                    readOffset_34953 = ((__local\n                                         int32_t *) local_mem_34872)[(int64_t) 0];\n                }\n            }\n            if (local_tid_34858 == 0) {\n                int64_t x_34991 = prefix_34948;\n                int64_t x_34992 = prefix_34949;\n                int64_t x_34993 = prefix_34950;\n                int64_t x_34994 = prefix_34951;\n                int64_t x_34995 = acc_34929;\n                int64_t x_34996 = acc_34930;\n                int64_t x_34997 = acc_34931;\n                int64_t x_34998 = acc_34932;\n                int64_t defunc_1_op_res_34999 = add64(x_34991, x_34995);\n                int64_t defunc_1_op_res_35000 = add64(x_34992, x_34996);\n                int64_t defunc_1_op_res_35001 = add64(x_34993, x_34997);\n                int64_t defunc_1_op_res_35002 = add64(x_34994, x_34998);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_34843)[dynamic_id_34889] =\n                    defunc_1_op_res_34999;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_34847)[dynamic_id_34889] =\n                    defunc_1_op_res_35000;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_34851)[dynamic_id_34889] =\n                    defunc_1_op_res_35001;\n                ((volatile __global\n              ",
            "    int64_t *) incprefixes_mem_34855)[dynamic_id_34889] =\n                    defunc_1_op_res_35002;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_34839)[dynamic_id_34889] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_34872)[squot64(warp_byte_offset_34867,\n                                                      (int64_t) 8)] =\n                    prefix_34948;\n                ((__local\n                  int64_t *) local_mem_34872)[squot64(warp_byte_offset_34868,\n                                                      (int64_t) 8)] =\n                    prefix_34949;\n                ((__local\n                  int64_t *) local_mem_34872)[squot64(warp_byte_offset_34869,\n                                                      (int64_t) 8)] =\n                    prefix_34950;\n                ((__local\n                  int64_t *) local_mem_34872)[squot64(warp_byte_offset_34870,\n                                                      (int64_t) 8)] =\n                    prefix_34951;\n                acc_34929 = (int64_t) 0;\n                acc_34930 = (int64_t) 0;\n                acc_34931 = (int64_t) 0;\n                acc_34932 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_34889 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_34948 = ((__local\n                             int64_t *) local_mem_34872)[squot64(warp_byte_offset_34867,\n                                                                 (int64_t) 8)];\n            prefix_34949 = ((__local\n                             int64_t *) local_mem_34872)[squot64(warp_byte_offset_34868,\n                                                                 (int64_t) 8)];\n            prefix_34950 = ((__local\n                             int64_t *) local_mem_34872)[squot64(warp_byte_offset_34869,\n                                                                 (int64_t",
            ") 8)];\n            prefix_34951 = ((__local\n                             int64_t *) local_mem_34872)[squot64(warp_byte_offset_34870,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_35003;\n        int64_t x_35007;\n        int64_t x_35015;\n        \n        x_35015 = prefix_34948;\n        \n        int64_t x_35019;\n        \n        x_35019 = acc_34929;\n        \n        int64_t x_35004;\n        int64_t x_35008;\n        int64_t x_35016;\n        \n        x_35016 = prefix_34949;\n        \n        int64_t x_35020;\n        \n        x_35020 = acc_34930;\n        \n        int64_t x_35005;\n        int64_t x_35009;\n        int64_t x_35017;\n        \n        x_35017 = prefix_34950;\n        \n        int64_t x_35021;\n        \n        x_35021 = acc_34931;\n        \n        int64_t x_35006;\n        int64_t x_35010;\n        int64_t x_35018;\n        \n        x_35018 = prefix_34951;\n        \n        int64_t x_35022;\n        \n        x_35022 = acc_34932;\n        \n        int64_t defunc_1_op_res_35023;\n        \n        defunc_1_op_res_35023 = add64(x_35015, x_35019);\n        \n        int64_t defunc_1_op_res_35024 = add64(x_35016, x_35020);\n        int64_t defunc_1_op_res_35025 = add64(x_35017, x_35021);\n        int64_t defunc_1_op_res_35026 = add64(x_35018, x_35022);\n        \n        x_35003 = defunc_1_op_res_35023;\n        x_35004 = defunc_1_op_res_35024;\n        x_35005 = defunc_1_op_res_35025;\n        x_35006 = defunc_1_op_res_35026;\n        for (int64_t i_35027 = 0; i_35027 < (int64_t) 9; i_35027++) {\n            x_35007 = private_mem_34891[i_35027];\n            x_35008 = private_mem_34893[i_35027];\n            x_35009 = private_mem_34895[i_35027];\n            x_35010 = private_mem_34897[i_35027];\n            \n            int64_t defunc_1_op_res_35011;\n            \n            defunc_1_op_res_35011 = add64(x_35003, x_35007);\n            \n            in",
            "t64_t defunc_1_op_res_35012 = add64(x_35004, x_35008);\n            int64_t defunc_1_op_res_35013 = add64(x_35005, x_35009);\n            int64_t defunc_1_op_res_35014 = add64(x_35006, x_35010);\n            \n            private_mem_34891[i_35027] = defunc_1_op_res_35011;\n            private_mem_34893[i_35027] = defunc_1_op_res_35012;\n            private_mem_34895[i_35027] = defunc_1_op_res_35013;\n            private_mem_34897[i_35027] = defunc_1_op_res_35014;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35028 = 0; i_35028 < (int64_t) 9; i_35028++) {\n            int64_t sharedIdx_35029 = sext_i32_i64(local_tid_34858 * 9) +\n                    i_35028;\n            \n            ((__local int64_t *) local_mem_34872)[sharedIdx_35029] =\n                private_mem_34891[i_35028];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35030 = 0; i_35030 < (int64_t) 9; i_35030++) {\n            int32_t sharedIdx_35031 = local_tid_34858 +\n                    sext_i64_i32(segscan_group_sizze_31223 * i_35030);\n            \n            private_mem_34891[i_35030] = ((__local\n                                           int64_t *) local_mem_34872)[sext_i32_i64(sharedIdx_35031)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35032 = 0; i_35032 < (int64_t) 9; i_35032++) {\n            int64_t sharedIdx_35033 = sext_i32_i64(local_tid_34858 * 9) +\n                    i_35032;\n            \n            ((__local int64_t *) local_mem_34872)[sharedIdx_35033] =\n                private_mem_34893[i_35032];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35034 = 0; i_35034 < (int64_t) 9; i_35034++) {\n            int32_t sharedIdx_35035 = local_tid_34858 +\n                    sext_i64_i32(segscan_group_sizze_31223 * i_35034);\n            \n            private_mem_34893[i_35034] = ((__local\n                                           int64_t *) local_mem_34872)[sext_i32_i6",
            "4(sharedIdx_35035)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35036 = 0; i_35036 < (int64_t) 9; i_35036++) {\n            int64_t sharedIdx_35037 = sext_i32_i64(local_tid_34858 * 9) +\n                    i_35036;\n            \n            ((__local int64_t *) local_mem_34872)[sharedIdx_35037] =\n                private_mem_34895[i_35036];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35038 = 0; i_35038 < (int64_t) 9; i_35038++) {\n            int32_t sharedIdx_35039 = local_tid_34858 +\n                    sext_i64_i32(segscan_group_sizze_31223 * i_35038);\n            \n            private_mem_34895[i_35038] = ((__local\n                                           int64_t *) local_mem_34872)[sext_i32_i64(sharedIdx_35039)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35040 = 0; i_35040 < (int64_t) 9; i_35040++) {\n            int64_t sharedIdx_35041 = sext_i32_i64(local_tid_34858 * 9) +\n                    i_35040;\n            \n            ((__local int64_t *) local_mem_34872)[sharedIdx_35041] =\n                private_mem_34897[i_35040];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35042 = 0; i_35042 < (int64_t) 9; i_35042++) {\n            int32_t sharedIdx_35043 = local_tid_34858 +\n                    sext_i64_i32(segscan_group_sizze_31223 * i_35042);\n            \n            private_mem_34897[i_35042] = ((__local\n                                           int64_t *) local_mem_34872)[sext_i32_i64(sharedIdx_35043)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_35044 = 0; i_35044 < (int64_t) 9; i_35044++) {\n            int64_t gtid_31227 = blockOff_34890 + segscan_group_sizze_31223 *\n                    i_35044 + sext_i32_i64(local_tid_34858);\n            \n            if (slt64(gtid_31227, defunc_2_reduce_res_29639)) {\n                ((__global int64_t *) mem_32149)[gtid_31227] =\n   ",
            "                 private_mem_34891[i_35044];\n            }\n        }\n        for (int64_t i_35045 = 0; i_35045 < (int64_t) 9; i_35045++) {\n            int64_t gtid_31227 = blockOff_34890 + segscan_group_sizze_31223 *\n                    i_35045 + sext_i32_i64(local_tid_34858);\n            \n            if (slt64(gtid_31227, defunc_2_reduce_res_29639)) {\n                ((__global int64_t *) mem_32151)[gtid_31227] =\n                    private_mem_34893[i_35045];\n            }\n        }\n        for (int64_t i_35046 = 0; i_35046 < (int64_t) 9; i_35046++) {\n            int64_t gtid_31227 = blockOff_34890 + segscan_group_sizze_31223 *\n                    i_35046 + sext_i32_i64(local_tid_34858);\n            \n            if (slt64(gtid_31227, defunc_2_reduce_res_29639)) {\n                ((__global int64_t *) mem_32153)[gtid_31227] =\n                    private_mem_34895[i_35046];\n            }\n        }\n        for (int64_t i_35047 = 0; i_35047 < (int64_t) 9; i_35047++) {\n            int64_t gtid_31227 = blockOff_34890 + segscan_group_sizze_31223 *\n                    i_35047 + sext_i32_i64(local_tid_34858);\n            \n            if (slt64(gtid_31227, defunc_2_reduce_res_29639)) {\n                ((__global int64_t *) mem_32155)[gtid_31227] =\n                    private_mem_34897[i_35047];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_34889 == sdiv_up64(defunc_2_reduce_res_29639,\n                                          segscan_group_sizze_31223 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_34837)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31223\n}\n__kernel void clusterPointszisegscan_31294(__global int *global_failure,\n                                           uint local_mem_35089_backing_offset_0,\n                                           int64_t",
            " defunc_2_reduce_res_29639,\n                                           __global unsigned char *mem_32186,\n                                           __global unsigned char *mem_32189,\n                                           __global unsigned char *mem_32191,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_35066,\n                                           __global\n                                           unsigned char *status_flags_mem_35068,\n                                           __global\n                                           unsigned char *aggregates_mem_35070,\n                                           __global\n                                           unsigned char *incprefixes_mem_35072,\n                                           __global\n                                           unsigned char *aggregates_mem_35074,\n                                           __global\n                                           unsigned char *incprefixes_mem_35076)\n{\n    #define segscan_group_sizze_31289 (clusterPointszisegscan_group_sizze_31288)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_35089_backing_0 =\n                  &shared_mem[local_mem_35089_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35078;\n    int32_t local_tid_35079;\n    int64_t group_sizze_35082;\n    int32_t wave_sizze_35081;\n    int32_t group_tid_35080;\n    \n    global_tid_35078 = get_global_id(0);\n    local_tid_35079 = get_local_id(0);\n    group_sizze_35082 = get_local_size(0);\n    wave_sizze_35081 = LOCKSTEP_WIDTH;\n    group_tid_35080 = get_group_id(0);\n    \n    int32_t phys_tid_31294;\n    \n    phys_tid_31294 = global_tid_35078;\n    \n    int64_t byte_offsets_35083;\n    \n    byte_offsets_35083 = (int64_t) 0;\n    \n    int64_t byte_offsets_35084;\n    \n    byte_offsets_35084 = se",
            "gscan_group_sizze_31289;\n    \n    int64_t byte_offsets_35085;\n    \n    byte_offsets_35085 = sdiv_up64(segscan_group_sizze_31289, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_31289 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_35086;\n    \n    warp_byte_offset_35086 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_35087;\n    \n    warp_byte_offset_35087 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_35088;\n    \n    warp_byte_offset_35088 = (int64_t) 320;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_35089;\n    \n    local_mem_35089 = (__local char *) local_mem_35089_backing_0;\n    \n    int64_t trans_arr_len_35090;\n    \n    trans_arr_len_35090 = (int64_t) 9 * segscan_group_sizze_31289;\n    \n    int32_t dynamic_id_35100;\n    \n    if (local_tid_35079 == 0) {\n        dynamic_id_35100 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_35066)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_35089)[(int64_t) 0] = dynamic_id_35100;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_35100 = ((__local int32_t *) local_mem_35089)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_35101;\n    \n    blockOff_35101 = sext_i32_i64(dynamic_id_35100) * (int64_t) 9 *\n        segscan_group_sizze_31289;\n    \n    bool private_mem_35102[9];\n    int64_t private_mem_35104[9];\n    \n    // Load and map\n    {\n        for (int64_t i_35106 = 0; i_35106 < (int64_t) 9; i_35106++) {\n            int64_t gtid_31293 = blockOff_35101 +\n                    sext_i32_i64(local_tid_35079) + i_35106 *\n                    segscan_group_sizze_31289;\n            \n            if (slt64(gtid_31293, defunc_2_reduce_res_29639)) {\n                bool x_29891 = ((__global bool *) mem_32186)[gtid_31293];\n                \n                private_mem_35102[i_35106] = x_29891;\n                private_me",
            "m_35104[i_35106] = (int64_t) 1;\n            } else {\n                private_mem_35102[i_35106] = 0;\n                private_mem_35104[i_35106] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35107 = 0; i_35107 < (int64_t) 9; i_35107++) {\n            int64_t sharedIdx_35108 = sext_i32_i64(local_tid_35079) + i_35107 *\n                    segscan_group_sizze_31289;\n            \n            ((__local bool *) local_mem_35089)[sharedIdx_35108] =\n                private_mem_35102[i_35107];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_35109 = 0; i_35109 < 9; i_35109++) {\n            int32_t sharedIdx_35110 = local_tid_35079 * 9 + i_35109;\n            \n            private_mem_35102[sext_i32_i64(i_35109)] = ((__local\n                                                         bool *) local_mem_35089)[sext_i32_i64(sharedIdx_35110)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35111 = 0; i_35111 < (int64_t) 9; i_35111++) {\n            int64_t sharedIdx_35112 = sext_i32_i64(local_tid_35079) + i_35111 *\n                    segscan_group_sizze_31289;\n            \n            ((__local int64_t *) local_mem_35089)[sharedIdx_35112] =\n                private_mem_35104[i_35111];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_35113 = 0; i_35113 < 9; i_35113++) {\n            int32_t sharedIdx_35114 = local_tid_35079 * 9 + i_35113;\n            \n            private_mem_35104[sext_i32_i64(i_35113)] = ((__local\n                                                         int64_t *) local_mem_35089)[sext_i32_i64(sharedIdx_35114)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_35115 = 0; i_35115 < (int64_t) 8; i_35115++) {\n            bool x_29884;\n            bool x_29886;\n            \n            x_29884 = private_mem_35102[i_35115];\n            x_29886 = private_mem_3510",
            "2[i_35115 + (int64_t) 1];\n            \n            int64_t x_29885;\n            int64_t x_29887;\n            \n            x_29885 = private_mem_35104[i_35115];\n            x_29887 = private_mem_35104[i_35115 + (int64_t) 1];\n            \n            bool defunc_1_op_res_29888;\n            \n            defunc_1_op_res_29888 = x_29884 || x_29886;\n            \n            int64_t defunc_1_op_res_29889;\n            \n            if (x_29886) {\n                defunc_1_op_res_29889 = x_29887;\n            } else {\n                int64_t defunc_1_op_res_29890 = add64(x_29885, x_29887);\n                \n                defunc_1_op_res_29889 = defunc_1_op_res_29890;\n            }\n            private_mem_35102[i_35115 + (int64_t) 1] = defunc_1_op_res_29888;\n            private_mem_35104[i_35115 + (int64_t) 1] = defunc_1_op_res_29889;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_35089)[byte_offsets_35083 +\n                                           sext_i32_i64(local_tid_35079)] =\n            private_mem_35102[(int64_t) 8];\n        ((__local int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35079)] =\n            private_mem_35104[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_35123;\n    int64_t acc_35124;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_35116;\n        int64_t x_35117;\n        bool x_35118;\n        int64_t x_35119;\n        bool x_35125;\n        int64_t x_35126;\n        bool x_35127;\n        int64_t x_35128;\n        bool ltid_in_bounds_35132;\n        \n        ltid_in_bounds_35132 = slt64(sext_i32_i64(local_tid_35079),\n                                     segscan_group_sizze_31289);\n        \n        int32_t skip_threads_35133;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_35132) {\n    ",
            "            x_35118 = ((volatile __local\n                            bool *) local_mem_35089)[byte_offsets_35083 +\n                                                     sext_i32_i64(local_tid_35079)];\n                x_35119 = ((volatile __local\n                            int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_35079)];\n                if ((local_tid_35079 - squot32(local_tid_35079, 32) * 32) ==\n                    0) {\n                    x_35116 = x_35118;\n                    x_35117 = x_35119;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_35133 = 1;\n            while (slt32(skip_threads_35133, 32)) {\n                if (sle32(skip_threads_35133, local_tid_35079 -\n                          squot32(local_tid_35079, 32) * 32) &&\n                    ltid_in_bounds_35132) {\n                    // read operands\n                    {\n                        x_35116 = ((volatile __local\n                                    bool *) local_mem_35089)[byte_offsets_35083 +\n                                                             (sext_i32_i64(local_tid_35079) -\n                                                              sext_i32_i64(skip_threads_35133))];\n                        x_35117 = ((volatile __local\n                                    int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_35079) -\n                                                                 sext_i32_i64(skip_threads_35133))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_35120 = x_",
            "35116 || x_35118;\n                        int64_t defunc_1_op_res_35121;\n                        \n                        if (x_35118) {\n                            defunc_1_op_res_35121 = x_35119;\n                        } else {\n                            int64_t defunc_1_op_res_35122 = add64(x_35117,\n                                                                  x_35119);\n                            \n                            defunc_1_op_res_35121 = defunc_1_op_res_35122;\n                        }\n                        x_35116 = defunc_1_op_res_35120;\n                        x_35117 = defunc_1_op_res_35121;\n                    }\n                }\n                if (sle32(wave_sizze_35081, skip_threads_35133)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_35133, local_tid_35079 -\n                          squot32(local_tid_35079, 32) * 32) &&\n                    ltid_in_bounds_35132) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_35089)[byte_offsets_35083 +\n                                                   sext_i32_i64(local_tid_35079)] =\n                            x_35116;\n                        x_35118 = x_35116;\n                        ((volatile __local\n                          int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_35079)] =\n                            x_35117;\n                        x_35119 = x_35117;\n                    }\n                }\n                if (sle32(wave_sizze_35081, skip_threads_35133)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_35133 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes ",
            "its result to offset 'i'\n        {\n            if ((local_tid_35079 - squot32(local_tid_35079, 32) * 32) == 31 &&\n                ltid_in_bounds_35132) {\n                ((volatile __local bool *) local_mem_35089)[byte_offsets_35083 +\n                                                            sext_i32_i64(squot32(local_tid_35079,\n                                                                                 32))] =\n                    x_35116;\n                ((volatile __local\n                  int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_35079,\n                                                                   32))] =\n                    x_35117;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_35134;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_35079, 32) == 0 && ltid_in_bounds_35132) {\n                    x_35127 = ((volatile __local\n                                bool *) local_mem_35089)[byte_offsets_35083 +\n                                                         sext_i32_i64(local_tid_35079)];\n                    x_35128 = ((volatile __local\n                                int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_35079)];\n                    if ((local_tid_35079 - squot32(local_tid_35079, 32) * 32) ==\n                        0) {\n                        x_35125 = x_35127;\n                        x_35126 = x_35128;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers",
            " needed)\n            {\n                skip_threads_35134 = 1;\n                while (slt32(skip_threads_35134, 32)) {\n                    if (sle32(skip_threads_35134, local_tid_35079 -\n                              squot32(local_tid_35079, 32) * 32) &&\n                        (squot32(local_tid_35079, 32) == 0 &&\n                         ltid_in_bounds_35132)) {\n                        // read operands\n                        {\n                            x_35125 = ((volatile __local\n                                        bool *) local_mem_35089)[byte_offsets_35083 +\n                                                                 (sext_i32_i64(local_tid_35079) -\n                                                                  sext_i32_i64(skip_threads_35134))];\n                            x_35126 = ((volatile __local\n                                        int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_35079) -\n                                                                     sext_i32_i64(skip_threads_35134))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_35129 = x_35125 || x_35127;\n                            int64_t defunc_1_op_res_35130;\n                            \n                            if (x_35127) {\n                                defunc_1_op_res_35130 = x_35128;\n                            } else {\n                                int64_t defunc_1_op_res_35131 = add64(x_35126,\n                                                                      x_35128);\n                                \n                                defunc_1_op_res_35130 = defunc_1_op_res_35131;\n                            }\n                            x_35125 = defunc_1_op_res_35129;\n    ",
            "                        x_35126 = defunc_1_op_res_35130;\n                        }\n                    }\n                    if (sle32(wave_sizze_35081, skip_threads_35134)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_35134, local_tid_35079 -\n                              squot32(local_tid_35079, 32) * 32) &&\n                        (squot32(local_tid_35079, 32) == 0 &&\n                         ltid_in_bounds_35132)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_35089)[byte_offsets_35083 +\n                                                       sext_i32_i64(local_tid_35079)] =\n                                x_35125;\n                            x_35127 = x_35125;\n                            ((volatile __local\n                              int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_35079)] =\n                                x_35126;\n                            x_35128 = x_35126;\n                        }\n                    }\n                    if (sle32(wave_sizze_35081, skip_threads_35134)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_35134 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_35079, 32) == 0 || !ltid_in_bounds_35132)) {\n                // read operands\n                {\n                    x_35118 = x_35116;\n                    x_35119 = x_35117;\n                    x_35116 = ((__local\n                                bool *) local_mem_35089)[byte_offsets_35083 +\n                               ",
            "                          (sext_i32_i64(squot32(local_tid_35079,\n                                                                               32)) -\n                                                          (int64_t) 1)];\n                    x_35117 = ((__local\n                                int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_35079,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_35120 = x_35116 || x_35118;\n                    int64_t defunc_1_op_res_35121;\n                    \n                    if (x_35118) {\n                        defunc_1_op_res_35121 = x_35119;\n                    } else {\n                        int64_t defunc_1_op_res_35122 = add64(x_35117, x_35119);\n                        \n                        defunc_1_op_res_35121 = defunc_1_op_res_35122;\n                    }\n                    x_35116 = defunc_1_op_res_35120;\n                    x_35117 = defunc_1_op_res_35121;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_35089)[byte_offsets_35083 +\n                                                       sext_i32_i64(local_tid_35079)] =\n                        x_35116;\n                    ((__local\n                      int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35079)] =\n                        x_35117;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // re",
            "store correct values for first block\n        {\n            if (squot32(local_tid_35079, 32) == 0) {\n                ((__local bool *) local_mem_35089)[byte_offsets_35083 +\n                                                   sext_i32_i64(local_tid_35079)] =\n                    x_35118;\n                ((__local\n                  int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35079)] =\n                    x_35119;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_35079 == 0) {\n            acc_35123 = ((__local bool *) local_mem_35089)[byte_offsets_35083 +\n                                                           (segscan_group_sizze_31289 -\n                                                            (int64_t) 1)];\n            acc_35124 = ((__local\n                          int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31289 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_35123 = ((__local bool *) local_mem_35089)[byte_offsets_35083 +\n                                                           (sext_i32_i64(local_tid_35079) -\n                                                            (int64_t) 1)];\n            acc_35124 = ((__local\n                          int64_t *) local_mem_35089)[squot64(byte_offsets_35084,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_35079) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_35135;\n    \n    prefix_3",
            "5135 = 0;\n    \n    int64_t prefix_35136;\n    \n    prefix_35136 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_35100 == (int64_t) 0 && local_tid_35079 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_35072)[dynamic_id_35100] = acc_35123;\n            ((volatile __global\n              int64_t *) incprefixes_mem_35076)[dynamic_id_35100] = acc_35124;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_35068)[dynamic_id_35100] = (int8_t) 2;\n            acc_35123 = 0;\n            acc_35124 = (int64_t) 0;\n        }\n        if (!(dynamic_id_35100 == (int64_t) 0) && slt32(local_tid_35079,\n                                                        wave_sizze_35081)) {\n            if (local_tid_35079 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_35070)[dynamic_id_35100] = acc_35123;\n                ((volatile __global\n                  int64_t *) aggregates_mem_35074)[dynamic_id_35100] =\n                    acc_35124;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35068)[dynamic_id_35100] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_35089)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_35068)[dynamic_id_35100 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_35137;\n            \n            status_35137 = ((__local int8_t *) local_mem_35089)[(int64_t) 0];\n            if (status_35137 == (int8_t) 2) {\n                if (local_tid_35079 == 0) {\n                    prefix_35135 = ((volatile __global\n                                     bool *) incprefixes_mem_35072)[dynamic_id_35100 -\n                               ",
            "                                     (int64_t) 1];\n                    prefix_35136 = ((volatile __global\n                                     int64_t *) incprefixes_mem_35076)[dynamic_id_35100 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_35138 = dynamic_id_35100 -\n                        sext_i32_i64(wave_sizze_35081);\n                \n                while (slt32(wave_sizze_35081 * -1, readOffset_35138)) {\n                    int32_t read_i_35139 = readOffset_35138 + local_tid_35079;\n                    bool aggr_35140 = 0;\n                    int64_t aggr_35141 = (int64_t) 0;\n                    int8_t flag_35142 = (int8_t) 0;\n                    int8_t used_35143 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_35139)) {\n                        flag_35142 = ((volatile __global\n                                       int8_t *) status_flags_mem_35068)[sext_i32_i64(read_i_35139)];\n                        if (flag_35142 == (int8_t) 2) {\n                            aggr_35140 = ((volatile __global\n                                           bool *) incprefixes_mem_35072)[sext_i32_i64(read_i_35139)];\n                            aggr_35141 = ((volatile __global\n                                           int64_t *) incprefixes_mem_35076)[sext_i32_i64(read_i_35139)];\n                        } else {\n                            if (flag_35142 == (int8_t) 1) {\n                                aggr_35140 = ((volatile __global\n                                               bool *) aggregates_mem_35070)[sext_i32_i64(read_i_35139)];\n                                aggr_35141 = ((volatile __global\n                                               int64_t *) aggregates_mem_35074)[sext_i32_i64(read_i_35139)];\n                                used_35143 = (int8_t) 1;\n                            }\n                        }\n                    }\n    ",
            "                ((__local bool *) local_mem_35089)[warp_byte_offset_35086 +\n                                                       sext_i32_i64(local_tid_35079)] =\n                        aggr_35140;\n                    ((__local\n                      int64_t *) local_mem_35089)[squot64(warp_byte_offset_35087,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35079)] =\n                        aggr_35141;\n                    \n                    int8_t tmp_35144;\n                    \n                    tmp_35144 = flag_35142 | used_35143 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_35089)[sext_i32_i64(local_tid_35079)] =\n                        tmp_35144;\n                    mem_fence_local();\n                    flag_35142 = ((volatile __local\n                                   int8_t *) local_mem_35089)[sext_i32_i64(wave_sizze_35081) -\n                                                              (int64_t) 1];\n                    if (local_tid_35079 == 0) {\n                        if (!(flag_35142 == (int8_t) 2)) {\n                            bool x_35145 = 0;\n                            int64_t x_35146 = (int64_t) 0;\n                            bool x_35147;\n                            int64_t x_35148;\n                            int8_t flag1_35152;\n                            \n                            flag1_35152 = (int8_t) 0;\n                            \n                            int8_t flag2_35153;\n                            int8_t used1_35154;\n                            \n                            used1_35154 = (int8_t) 0;\n                            \n                            int8_t used2_35155;\n                            \n                            for (int32_t i_35156 = 0; i_35156 <\n                                 wave_sizze_35081; i_35156++) {\n                                flag2_35153 = ((__local\n        ",
            "                                        int8_t *) local_mem_35089)[sext_i32_i64(i_35156)];\n                                used2_35155 = lshr8(flag2_35153, (int8_t) 2);\n                                flag2_35153 = flag2_35153 & (int8_t) 3;\n                                x_35147 = ((__local\n                                            bool *) local_mem_35089)[warp_byte_offset_35086 +\n                                                                     sext_i32_i64(i_35156)];\n                                x_35148 = ((__local\n                                            int64_t *) local_mem_35089)[squot64(warp_byte_offset_35087,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_35156)];\n                                if (!(flag2_35153 == (int8_t) 1)) {\n                                    flag1_35152 = flag2_35153;\n                                    used1_35154 = used2_35155;\n                                    x_35145 = x_35147;\n                                    x_35146 = x_35148;\n                                } else {\n                                    used1_35154 += used2_35155;\n                                    \n                                    bool defunc_1_op_res_35149;\n                                    \n                                    defunc_1_op_res_35149 = x_35145 || x_35147;\n                                    \n                                    int64_t defunc_1_op_res_35150;\n                                    \n                                    if (x_35147) {\n                                        defunc_1_op_res_35150 = x_35148;\n                                    } else {\n                                        int64_t defunc_1_op_res_35151 =\n                                                add64(x_35146, x_35148);\n                                        \n                                        defunc_1_o",
            "p_res_35150 =\n                                            defunc_1_op_res_35151;\n                                    }\n                                    x_35145 = defunc_1_op_res_35149;\n                                    x_35146 = defunc_1_op_res_35150;\n                                }\n                            }\n                            flag_35142 = flag1_35152;\n                            used_35143 = used1_35154;\n                            aggr_35140 = x_35145;\n                            aggr_35141 = x_35146;\n                        } else {\n                            aggr_35140 = ((__local\n                                           bool *) local_mem_35089)[warp_byte_offset_35086 +\n                                                                    (sext_i32_i64(wave_sizze_35081) -\n                                                                     (int64_t) 1)];\n                            aggr_35141 = ((__local\n                                           int64_t *) local_mem_35089)[squot64(warp_byte_offset_35087,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_35081) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_35142 == (int8_t) 2) {\n                            readOffset_35138 = wave_sizze_35081 * -1;\n                        } else {\n                            readOffset_35138 -= zext_i8_i32(used_35143);\n                        }\n                        ((__local int32_t *) local_mem_35089)[(int64_t) 0] =\n                            readOffset_35138;\n                        \n                        bool x_35157;\n                        \n                        x_35157 = aggr_35140;\n                        \n                        int64_t x_35158;\n                        \n                        x_35158 = ag",
            "gr_35141;\n                        \n                        bool x_35159;\n                        \n                        x_35159 = prefix_35135;\n                        \n                        int64_t x_35160;\n                        \n                        x_35160 = prefix_35136;\n                        \n                        bool defunc_1_op_res_35161;\n                        \n                        defunc_1_op_res_35161 = x_35157 || x_35159;\n                        \n                        int64_t defunc_1_op_res_35162;\n                        \n                        if (x_35159) {\n                            defunc_1_op_res_35162 = x_35160;\n                        } else {\n                            int64_t defunc_1_op_res_35163 = add64(x_35158,\n                                                                  x_35160);\n                            \n                            defunc_1_op_res_35162 = defunc_1_op_res_35163;\n                        }\n                        prefix_35135 = defunc_1_op_res_35161;\n                        prefix_35136 = defunc_1_op_res_35162;\n                    }\n                    mem_fence_local();\n                    readOffset_35138 = ((__local\n                                         int32_t *) local_mem_35089)[(int64_t) 0];\n                }\n            }\n            if (local_tid_35079 == 0) {\n                bool x_35164 = prefix_35135;\n                int64_t x_35165 = prefix_35136;\n                bool x_35166 = acc_35123;\n                int64_t x_35167 = acc_35124;\n                bool defunc_1_op_res_35168 = x_35164 || x_35166;\n                int64_t defunc_1_op_res_35169;\n                \n                if (x_35166) {\n                    defunc_1_op_res_35169 = x_35167;\n                } else {\n                    int64_t defunc_1_op_res_35170 = add64(x_35165, x_35167);\n                    \n                    defunc_1_op_res_35169 = defunc_1_op_res_35170;\n                }\n                ((volatile __global\n",
            "                  bool *) incprefixes_mem_35072)[dynamic_id_35100] =\n                    defunc_1_op_res_35168;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_35076)[dynamic_id_35100] =\n                    defunc_1_op_res_35169;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35068)[dynamic_id_35100] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_35089)[warp_byte_offset_35086] =\n                    prefix_35135;\n                ((__local\n                  int64_t *) local_mem_35089)[squot64(warp_byte_offset_35087,\n                                                      (int64_t) 8)] =\n                    prefix_35136;\n                acc_35123 = 0;\n                acc_35124 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_35100 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_35135 = ((__local\n                             bool *) local_mem_35089)[warp_byte_offset_35086];\n            prefix_35136 = ((__local\n                             int64_t *) local_mem_35089)[squot64(warp_byte_offset_35087,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_35171;\n        bool x_35173;\n        bool x_35178;\n        \n        x_35178 = prefix_35135;\n        \n        bool x_35180;\n        \n        x_35180 = acc_35123;\n        \n        int64_t x_35172;\n        int64_t x_35174;\n        int64_t x_35179;\n        \n        x_35179 = prefix_35136;\n        \n        int64_t x_35181;\n        \n        x_35181 = acc_35124;\n        \n        bool defunc_1_op_res_35182;\n        \n        defunc_1_op_res_35182 = x_35178 || x_35180;\n        \n        int64_t defunc_1_op_res_35183;\n        \n        if (x_35180) {\n            defunc_1_op_res_35183 = x_35181;\n        } else {\n            int64_t d",
            "efunc_1_op_res_35184 = add64(x_35179, x_35181);\n            \n            defunc_1_op_res_35183 = defunc_1_op_res_35184;\n        }\n        x_35171 = defunc_1_op_res_35182;\n        x_35172 = defunc_1_op_res_35183;\n        for (int64_t i_35185 = 0; i_35185 < (int64_t) 9; i_35185++) {\n            x_35173 = private_mem_35102[i_35185];\n            x_35174 = private_mem_35104[i_35185];\n            \n            bool defunc_1_op_res_35175;\n            \n            defunc_1_op_res_35175 = x_35171 || x_35173;\n            \n            int64_t defunc_1_op_res_35176;\n            \n            if (x_35173) {\n                defunc_1_op_res_35176 = x_35174;\n            } else {\n                int64_t defunc_1_op_res_35177 = add64(x_35172, x_35174);\n                \n                defunc_1_op_res_35176 = defunc_1_op_res_35177;\n            }\n            private_mem_35102[i_35185] = defunc_1_op_res_35175;\n            private_mem_35104[i_35185] = defunc_1_op_res_35176;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35186 = 0; i_35186 < (int64_t) 9; i_35186++) {\n            int64_t sharedIdx_35187 = sext_i32_i64(local_tid_35079 * 9) +\n                    i_35186;\n            \n            ((__local bool *) local_mem_35089)[sharedIdx_35187] =\n                private_mem_35102[i_35186];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35188 = 0; i_35188 < (int64_t) 9; i_35188++) {\n            int32_t sharedIdx_35189 = local_tid_35079 +\n                    sext_i64_i32(segscan_group_sizze_31289 * i_35188);\n            \n            private_mem_35102[i_35188] = ((__local\n                                           bool *) local_mem_35089)[sext_i32_i64(sharedIdx_35189)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35190 = 0; i_35190 < (int64_t) 9; i_35190++) {\n            int64_t sharedIdx_35191 = sext_i32_i64(local_tid_35079 * 9) +\n                    i_35190;\n            \n       ",
            "     ((__local int64_t *) local_mem_35089)[sharedIdx_35191] =\n                private_mem_35104[i_35190];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35192 = 0; i_35192 < (int64_t) 9; i_35192++) {\n            int32_t sharedIdx_35193 = local_tid_35079 +\n                    sext_i64_i32(segscan_group_sizze_31289 * i_35192);\n            \n            private_mem_35104[i_35192] = ((__local\n                                           int64_t *) local_mem_35089)[sext_i32_i64(sharedIdx_35193)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_35194 = 0; i_35194 < (int64_t) 9; i_35194++) {\n            int64_t gtid_31293 = blockOff_35101 + segscan_group_sizze_31289 *\n                    i_35194 + sext_i32_i64(local_tid_35079);\n            \n            if (slt64(gtid_31293, defunc_2_reduce_res_29639)) {\n                ((__global bool *) mem_32189)[gtid_31293] =\n                    private_mem_35102[i_35194];\n            }\n        }\n        for (int64_t i_35195 = 0; i_35195 < (int64_t) 9; i_35195++) {\n            int64_t gtid_31293 = blockOff_35101 + segscan_group_sizze_31289 *\n                    i_35195 + sext_i32_i64(local_tid_35079);\n            \n            if (slt64(gtid_31293, defunc_2_reduce_res_29639)) {\n                ((__global int64_t *) mem_32191)[gtid_31293] =\n                    private_mem_35104[i_35195];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_35100 == sdiv_up64(defunc_2_reduce_res_29639,\n                                          segscan_group_sizze_31289 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_35066)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31289\n}\n__kernel void clusterPointszisegscan_31302(__global int *global_failure",
            ",\n                                           uint local_mem_35216_backing_offset_0,\n                                           int64_t defunc_2_reduce_res_29639,\n                                           __global unsigned char *mem_32186,\n                                           __global unsigned char *mem_32194,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_35199,\n                                           __global\n                                           unsigned char *status_flags_mem_35201,\n                                           __global\n                                           unsigned char *aggregates_mem_35203,\n                                           __global\n                                           unsigned char *incprefixes_mem_35205)\n{\n    #define segscan_group_sizze_31297 (clusterPointszisegscan_group_sizze_31296)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_35216_backing_0 =\n                  &shared_mem[local_mem_35216_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35207;\n    int32_t local_tid_35208;\n    int64_t group_sizze_35211;\n    int32_t wave_sizze_35210;\n    int32_t group_tid_35209;\n    \n    global_tid_35207 = get_global_id(0);\n    local_tid_35208 = get_local_id(0);\n    group_sizze_35211 = get_local_size(0);\n    wave_sizze_35210 = LOCKSTEP_WIDTH;\n    group_tid_35209 = get_group_id(0);\n    \n    int32_t phys_tid_31302;\n    \n    phys_tid_31302 = global_tid_35207;\n    \n    int64_t byte_offsets_35212;\n    \n    byte_offsets_35212 = (int64_t) 0;\n    \n    int64_t byte_offsets_35213;\n    \n    byte_offsets_35213 = segscan_group_sizze_31297 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_35214;\n    \n    warp_byte_offset_35214 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_35215;\n    \n    warp_byte_offset_35215 = (int64",
            "_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_35216;\n    \n    local_mem_35216 = (__local char *) local_mem_35216_backing_0;\n    \n    int64_t trans_arr_len_35217;\n    \n    trans_arr_len_35217 = (int64_t) 9 * segscan_group_sizze_31297;\n    \n    int32_t dynamic_id_35224;\n    \n    if (local_tid_35208 == 0) {\n        dynamic_id_35224 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_35199)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_35216)[(int64_t) 0] = dynamic_id_35224;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_35224 = ((__local int32_t *) local_mem_35216)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_35225;\n    \n    blockOff_35225 = sext_i32_i64(dynamic_id_35224) * (int64_t) 9 *\n        segscan_group_sizze_31297;\n    \n    int64_t private_mem_35226[9];\n    \n    // Load and map\n    {\n        for (int64_t i_35228 = 0; i_35228 < (int64_t) 9; i_35228++) {\n            int64_t gtid_31301 = blockOff_35225 +\n                    sext_i32_i64(local_tid_35208) + i_35228 *\n                    segscan_group_sizze_31297;\n            \n            if (slt64(gtid_31301, defunc_2_reduce_res_29639)) {\n                int64_t i_p_o_31715 = add64((int64_t) 1, gtid_31301);\n                int64_t rot_i_31716 = smod64(i_p_o_31715,\n                                             defunc_2_reduce_res_29639);\n                bool x_29898 = ((__global bool *) mem_32186)[rot_i_31716];\n                int64_t defunc_0_f_res_29899 = btoi_bool_i64(x_29898);\n                \n                private_mem_35226[i_35228] = defunc_0_f_res_29899;\n            } else {\n                private_mem_35226[i_35228] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35229 = 0; i_35229 < (int64_t) 9",
            "; i_35229++) {\n            int64_t sharedIdx_35230 = sext_i32_i64(local_tid_35208) + i_35229 *\n                    segscan_group_sizze_31297;\n            \n            ((__local int64_t *) local_mem_35216)[sharedIdx_35230] =\n                private_mem_35226[i_35229];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_35231 = 0; i_35231 < 9; i_35231++) {\n            int32_t sharedIdx_35232 = local_tid_35208 * 9 + i_35231;\n            \n            private_mem_35226[sext_i32_i64(i_35231)] = ((__local\n                                                         int64_t *) local_mem_35216)[sext_i32_i64(sharedIdx_35232)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_35233 = 0; i_35233 < (int64_t) 8; i_35233++) {\n            int64_t x_29895;\n            int64_t x_29896;\n            \n            x_29895 = private_mem_35226[i_35233];\n            x_29896 = private_mem_35226[i_35233 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29897;\n            \n            defunc_1_op_res_29897 = add64(x_29895, x_29896);\n            private_mem_35226[i_35233 + (int64_t) 1] = defunc_1_op_res_29897;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35208)] =\n            private_mem_35226[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_35237;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_35234;\n        int64_t x_35235;\n        int64_t x_35238;\n        int64_t x_35239;\n        bool ltid_in_bounds_35241;\n        \n        ltid_in_bounds_35241 = slt64(sext_i32_i64(local_tid_35208),\n                                     segscan_group_sizze_31297);\n        \n        int32_t skip_threads_35242;\n        \n        // read input for in-block ",
            "scan\n        {\n            if (ltid_in_bounds_35241) {\n                x_35235 = ((volatile __local\n                            int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_35208)];\n                if ((local_tid_35208 - squot32(local_tid_35208, 32) * 32) ==\n                    0) {\n                    x_35234 = x_35235;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_35242 = 1;\n            while (slt32(skip_threads_35242, 32)) {\n                if (sle32(skip_threads_35242, local_tid_35208 -\n                          squot32(local_tid_35208, 32) * 32) &&\n                    ltid_in_bounds_35241) {\n                    // read operands\n                    {\n                        x_35234 = ((volatile __local\n                                    int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_35208) -\n                                                                 sext_i32_i64(skip_threads_35242))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_35236 = add64(x_35234, x_35235);\n                        \n                        x_35234 = defunc_1_op_res_35236;\n                    }\n                }\n                if (sle32(wave_sizze_35210, skip_threads_35242)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_35242, local_tid_35208 -\n                          squot32(local_tid_35208, 32) * 32) &&\n                    ltid_in_bounds_35241) {\n                    // write result\n                    ",
            "{\n                        ((volatile __local\n                          int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_35208)] =\n                            x_35234;\n                        x_35235 = x_35234;\n                    }\n                }\n                if (sle32(wave_sizze_35210, skip_threads_35242)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_35242 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_35208 - squot32(local_tid_35208, 32) * 32) == 31 &&\n                ltid_in_bounds_35241) {\n                ((volatile __local\n                  int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_35208,\n                                                                   32))] =\n                    x_35234;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_35243;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_35208, 32) == 0 && ltid_in_bounds_35241) {\n                    x_35239 = ((volatile __local\n                                int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_35208)];\n                    if ((local_tid_35208 - squot32(local_tid_35208, 32) * 32) ==\n                        0) {\n            ",
            "            x_35238 = x_35239;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_35243 = 1;\n                while (slt32(skip_threads_35243, 32)) {\n                    if (sle32(skip_threads_35243, local_tid_35208 -\n                              squot32(local_tid_35208, 32) * 32) &&\n                        (squot32(local_tid_35208, 32) == 0 &&\n                         ltid_in_bounds_35241)) {\n                        // read operands\n                        {\n                            x_35238 = ((volatile __local\n                                        int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_35208) -\n                                                                     sext_i32_i64(skip_threads_35243))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_35240 = add64(x_35238,\n                                                                  x_35239);\n                            \n                            x_35238 = defunc_1_op_res_35240;\n                        }\n                    }\n                    if (sle32(wave_sizze_35210, skip_threads_35243)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_35243, local_tid_35208 -\n                              squot32(local_tid_35208, 32) * 32) &&\n                        (squot32(local_tid_35208, 32) == 0 &&\n                         ltid_in_bounds_35241)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n",
            "                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_35208)] =\n                                x_35238;\n                            x_35239 = x_35238;\n                        }\n                    }\n                    if (sle32(wave_sizze_35210, skip_threads_35243)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_35243 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_35208, 32) == 0 || !ltid_in_bounds_35241)) {\n                // read operands\n                {\n                    x_35235 = x_35234;\n                    x_35234 = ((__local\n                                int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_35208,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_35236 = add64(x_35234, x_35235);\n                    \n                    x_35234 = defunc_1_op_res_35236;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35208)] =\n                        x_35234;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values fo",
            "r first block\n        {\n            if (squot32(local_tid_35208, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35208)] =\n                    x_35235;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_35208 == 0) {\n            acc_35237 = ((__local\n                          int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31297 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_35237 = ((__local\n                          int64_t *) local_mem_35216)[squot64(byte_offsets_35212,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_35208) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_35244;\n    \n    prefix_35244 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_35224 == (int64_t) 0 && local_tid_35208 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_35205)[dynamic_id_35224] = acc_35237;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_35201)[dynamic_id_35224] = (int8_t) 2;\n            acc_35237 = (int64_t) 0;\n        }\n        if (!(dynamic_id_35224 == (int64_t) 0) && slt32(local_tid_35208,\n                                                        wave_sizze_35210)) {\n            if (local_tid_35208 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_35",
            "203)[dynamic_id_35224] =\n                    acc_35237;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35201)[dynamic_id_35224] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_35216)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_35201)[dynamic_id_35224 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_35245;\n            \n            status_35245 = ((__local int8_t *) local_mem_35216)[(int64_t) 0];\n            if (status_35245 == (int8_t) 2) {\n                if (local_tid_35208 == 0) {\n                    prefix_35244 = ((volatile __global\n                                     int64_t *) incprefixes_mem_35205)[dynamic_id_35224 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_35246 = dynamic_id_35224 -\n                        sext_i32_i64(wave_sizze_35210);\n                \n                while (slt32(wave_sizze_35210 * -1, readOffset_35246)) {\n                    int32_t read_i_35247 = readOffset_35246 + local_tid_35208;\n                    int64_t aggr_35248 = (int64_t) 0;\n                    int8_t flag_35249 = (int8_t) 0;\n                    int8_t used_35250 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_35247)) {\n                        flag_35249 = ((volatile __global\n                                       int8_t *) status_flags_mem_35201)[sext_i32_i64(read_i_35247)];\n                        if (flag_35249 == (int8_t) 2) {\n                            aggr_35248 = ((volatile __global\n                                           int64_t *) incprefixes_mem_35205)[sext_i32_i64(read_i_35247)];\n         ",
            "               } else {\n                            if (flag_35249 == (int8_t) 1) {\n                                aggr_35248 = ((volatile __global\n                                               int64_t *) aggregates_mem_35203)[sext_i32_i64(read_i_35247)];\n                                used_35250 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_35216)[squot64(warp_byte_offset_35214,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35208)] =\n                        aggr_35248;\n                    \n                    int8_t tmp_35251;\n                    \n                    tmp_35251 = flag_35249 | used_35250 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_35216)[sext_i32_i64(local_tid_35208)] =\n                        tmp_35251;\n                    mem_fence_local();\n                    flag_35249 = ((volatile __local\n                                   int8_t *) local_mem_35216)[sext_i32_i64(wave_sizze_35210) -\n                                                              (int64_t) 1];\n                    if (local_tid_35208 == 0) {\n                        if (!(flag_35249 == (int8_t) 2)) {\n                            int64_t x_35252 = (int64_t) 0;\n                            int64_t x_35253;\n                            int8_t flag1_35255;\n                            \n                            flag1_35255 = (int8_t) 0;\n                            \n                            int8_t flag2_35256;\n                            int8_t used1_35257;\n                            \n                            used1_35257 = (int8_t) 0;\n                            \n                            int8_t used2_35258;\n                            \n                            for (int32_t i_35259 = 0; i_35259 <\n                       ",
            "          wave_sizze_35210; i_35259++) {\n                                flag2_35256 = ((__local\n                                                int8_t *) local_mem_35216)[sext_i32_i64(i_35259)];\n                                used2_35258 = lshr8(flag2_35256, (int8_t) 2);\n                                flag2_35256 = flag2_35256 & (int8_t) 3;\n                                x_35253 = ((__local\n                                            int64_t *) local_mem_35216)[squot64(warp_byte_offset_35214,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_35259)];\n                                if (!(flag2_35256 == (int8_t) 1)) {\n                                    flag1_35255 = flag2_35256;\n                                    used1_35257 = used2_35258;\n                                    x_35252 = x_35253;\n                                } else {\n                                    used1_35257 += used2_35258;\n                                    \n                                    int64_t defunc_1_op_res_35254;\n                                    \n                                    defunc_1_op_res_35254 = add64(x_35252,\n                                                                  x_35253);\n                                    x_35252 = defunc_1_op_res_35254;\n                                }\n                            }\n                            flag_35249 = flag1_35255;\n                            used_35250 = used1_35257;\n                            aggr_35248 = x_35252;\n                        } else {\n                            aggr_35248 = ((__local\n                                           int64_t *) local_mem_35216)[squot64(warp_byte_offset_35214,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave",
            "_sizze_35210) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_35249 == (int8_t) 2) {\n                            readOffset_35246 = wave_sizze_35210 * -1;\n                        } else {\n                            readOffset_35246 -= zext_i8_i32(used_35250);\n                        }\n                        ((__local int32_t *) local_mem_35216)[(int64_t) 0] =\n                            readOffset_35246;\n                        \n                        int64_t x_35260;\n                        \n                        x_35260 = aggr_35248;\n                        \n                        int64_t x_35261;\n                        \n                        x_35261 = prefix_35244;\n                        \n                        int64_t defunc_1_op_res_35262;\n                        \n                        defunc_1_op_res_35262 = add64(x_35260, x_35261);\n                        prefix_35244 = defunc_1_op_res_35262;\n                    }\n                    mem_fence_local();\n                    readOffset_35246 = ((__local\n                                         int32_t *) local_mem_35216)[(int64_t) 0];\n                }\n            }\n            if (local_tid_35208 == 0) {\n                int64_t x_35263 = prefix_35244;\n                int64_t x_35264 = acc_35237;\n                int64_t defunc_1_op_res_35265 = add64(x_35263, x_35264);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_35205)[dynamic_id_35224] =\n                    defunc_1_op_res_35265;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35201)[dynamic_id_35224] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_35216)[squot64(warp_byte_offset_35214,\n                                                      (int64_t) 8)] =\n                    prefi",
            "x_35244;\n                acc_35237 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_35224 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_35244 = ((__local\n                             int64_t *) local_mem_35216)[squot64(warp_byte_offset_35214,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_35266;\n        int64_t x_35267;\n        int64_t x_35269;\n        \n        x_35269 = prefix_35244;\n        \n        int64_t x_35270;\n        \n        x_35270 = acc_35237;\n        \n        int64_t defunc_1_op_res_35271;\n        \n        defunc_1_op_res_35271 = add64(x_35269, x_35270);\n        x_35266 = defunc_1_op_res_35271;\n        for (int64_t i_35272 = 0; i_35272 < (int64_t) 9; i_35272++) {\n            x_35267 = private_mem_35226[i_35272];\n            \n            int64_t defunc_1_op_res_35268;\n            \n            defunc_1_op_res_35268 = add64(x_35266, x_35267);\n            private_mem_35226[i_35272] = defunc_1_op_res_35268;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35273 = 0; i_35273 < (int64_t) 9; i_35273++) {\n            int64_t sharedIdx_35274 = sext_i32_i64(local_tid_35208 * 9) +\n                    i_35273;\n            \n            ((__local int64_t *) local_mem_35216)[sharedIdx_35274] =\n                private_mem_35226[i_35273];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35275 = 0; i_35275 < (int64_t) 9; i_35275++) {\n            int32_t sharedIdx_35276 = local_tid_35208 +\n                    sext_i64_i32(segscan_group_sizze_31297 * i_35275);\n            \n            private_mem_35226[i_35275] = ((__local\n                                           int64_t *) local_mem_35216)[sext_i32_i64(sharedIdx_35276)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan res",
            "ults to global memory\n    {\n        for (int64_t i_35277 = 0; i_35277 < (int64_t) 9; i_35277++) {\n            int64_t gtid_31301 = blockOff_35225 + segscan_group_sizze_31297 *\n                    i_35277 + sext_i32_i64(local_tid_35208);\n            \n            if (slt64(gtid_31301, defunc_2_reduce_res_29639)) {\n                ((__global int64_t *) mem_32194)[gtid_31301] =\n                    private_mem_35226[i_35277];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_35224 == sdiv_up64(defunc_2_reduce_res_29639,\n                                          segscan_group_sizze_31297 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_35199)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31297\n}\n__kernel void clusterPointszisegscan_31316(__global int *global_failure,\n                                           uint local_mem_35303_backing_offset_0,\n                                           int64_t num_segments_29900, __global\n                                           unsigned char *mem_32196, __global\n                                           unsigned char *mem_32200, __global\n                                           unsigned char *clusterPointsziid_counter_mem_35286,\n                                           __global\n                                           unsigned char *status_flags_mem_35288,\n                                           __global\n                                           unsigned char *aggregates_mem_35290,\n                                           __global\n                                           unsigned char *incprefixes_mem_35292)\n{\n    #define segscan_group_sizze_31311 (clusterPointszisegscan_group_sizze_31310)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_",
            "mem_35303_backing_0 =\n                  &shared_mem[local_mem_35303_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35294;\n    int32_t local_tid_35295;\n    int64_t group_sizze_35298;\n    int32_t wave_sizze_35297;\n    int32_t group_tid_35296;\n    \n    global_tid_35294 = get_global_id(0);\n    local_tid_35295 = get_local_id(0);\n    group_sizze_35298 = get_local_size(0);\n    wave_sizze_35297 = LOCKSTEP_WIDTH;\n    group_tid_35296 = get_group_id(0);\n    \n    int32_t phys_tid_31316;\n    \n    phys_tid_31316 = global_tid_35294;\n    \n    int64_t byte_offsets_35299;\n    \n    byte_offsets_35299 = (int64_t) 0;\n    \n    int64_t byte_offsets_35300;\n    \n    byte_offsets_35300 = segscan_group_sizze_31311 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_35301;\n    \n    warp_byte_offset_35301 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_35302;\n    \n    warp_byte_offset_35302 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_35303;\n    \n    local_mem_35303 = (__local char *) local_mem_35303_backing_0;\n    \n    int64_t trans_arr_len_35304;\n    \n    trans_arr_len_35304 = (int64_t) 9 * segscan_group_sizze_31311;\n    \n    int32_t dynamic_id_35311;\n    \n    if (local_tid_35295 == 0) {\n        dynamic_id_35311 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_35286)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_35303)[(int64_t) 0] = dynamic_id_35311;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_35311 = ((__local int32_t *) local_mem_35303)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_35312;\n    \n    blockOff_35312 = sext_i32_i64(dynamic_id_35311) * (int64_t) 9 *\n        segscan_group_sizze_31311;\n    \n    int64_t private_mem_35313[9];\n    \n    // Load and map\n    {\n        for (int64_t i_35315 = 0; i_35315",
            " < (int64_t) 9; i_35315++) {\n            int64_t gtid_31315 = blockOff_35312 +\n                    sext_i32_i64(local_tid_35295) + i_35315 *\n                    segscan_group_sizze_31311;\n            \n            if (slt64(gtid_31315, num_segments_29900)) {\n                int64_t x_29917 = ((__global int64_t *) mem_32196)[gtid_31315];\n                \n                private_mem_35313[i_35315] = x_29917;\n            } else {\n                private_mem_35313[i_35315] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35316 = 0; i_35316 < (int64_t) 9; i_35316++) {\n            int64_t sharedIdx_35317 = sext_i32_i64(local_tid_35295) + i_35316 *\n                    segscan_group_sizze_31311;\n            \n            ((__local int64_t *) local_mem_35303)[sharedIdx_35317] =\n                private_mem_35313[i_35316];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_35318 = 0; i_35318 < 9; i_35318++) {\n            int32_t sharedIdx_35319 = local_tid_35295 * 9 + i_35318;\n            \n            private_mem_35313[sext_i32_i64(i_35318)] = ((__local\n                                                         int64_t *) local_mem_35303)[sext_i32_i64(sharedIdx_35319)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_35320 = 0; i_35320 < (int64_t) 8; i_35320++) {\n            int64_t x_29914;\n            int64_t x_29915;\n            \n            x_29914 = private_mem_35313[i_35320];\n            x_29915 = private_mem_35313[i_35320 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29916;\n            \n            defunc_1_op_res_29916 = add64(x_29914, x_29915);\n            private_mem_35313[i_35320 + (int64_t) 1] = defunc_1_op_res_29916;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                ",
            "                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35295)] =\n            private_mem_35313[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_35324;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_35321;\n        int64_t x_35322;\n        int64_t x_35325;\n        int64_t x_35326;\n        bool ltid_in_bounds_35328;\n        \n        ltid_in_bounds_35328 = slt64(sext_i32_i64(local_tid_35295),\n                                     segscan_group_sizze_31311);\n        \n        int32_t skip_threads_35329;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_35328) {\n                x_35322 = ((volatile __local\n                            int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_35295)];\n                if ((local_tid_35295 - squot32(local_tid_35295, 32) * 32) ==\n                    0) {\n                    x_35321 = x_35322;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_35329 = 1;\n            while (slt32(skip_threads_35329, 32)) {\n                if (sle32(skip_threads_35329, local_tid_35295 -\n                          squot32(local_tid_35295, 32) * 32) &&\n                    ltid_in_bounds_35328) {\n                    // read operands\n                    {\n                        x_35321 = ((volatile __local\n                                    int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_35295) -\n                                                                 sext_i32_i64(skip_threads_35329))];\n     ",
            "               }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_35323 = add64(x_35321, x_35322);\n                        \n                        x_35321 = defunc_1_op_res_35323;\n                    }\n                }\n                if (sle32(wave_sizze_35297, skip_threads_35329)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_35329, local_tid_35295 -\n                          squot32(local_tid_35295, 32) * 32) &&\n                    ltid_in_bounds_35328) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_35295)] =\n                            x_35321;\n                        x_35322 = x_35321;\n                    }\n                }\n                if (sle32(wave_sizze_35297, skip_threads_35329)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_35329 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_35295 - squot32(local_tid_35295, 32) * 32) == 31 &&\n                ltid_in_bounds_35328) {\n                ((volatile __local\n                  int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_35295,\n                                                                   32))] =\n                    x_35321;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for bl",
            "ock 'i+1'\n        {\n            int32_t skip_threads_35330;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_35295, 32) == 0 && ltid_in_bounds_35328) {\n                    x_35326 = ((volatile __local\n                                int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_35295)];\n                    if ((local_tid_35295 - squot32(local_tid_35295, 32) * 32) ==\n                        0) {\n                        x_35325 = x_35326;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_35330 = 1;\n                while (slt32(skip_threads_35330, 32)) {\n                    if (sle32(skip_threads_35330, local_tid_35295 -\n                              squot32(local_tid_35295, 32) * 32) &&\n                        (squot32(local_tid_35295, 32) == 0 &&\n                         ltid_in_bounds_35328)) {\n                        // read operands\n                        {\n                            x_35325 = ((volatile __local\n                                        int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_35295) -\n                                                                     sext_i32_i64(skip_threads_35330))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_35327 = add64(x_35325,\n                                                                  x_35326);\n                            \n                            x_35325 = defunc_1_op_res_353",
            "27;\n                        }\n                    }\n                    if (sle32(wave_sizze_35297, skip_threads_35330)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_35330, local_tid_35295 -\n                              squot32(local_tid_35295, 32) * 32) &&\n                        (squot32(local_tid_35295, 32) == 0 &&\n                         ltid_in_bounds_35328)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_35295)] =\n                                x_35325;\n                            x_35326 = x_35325;\n                        }\n                    }\n                    if (sle32(wave_sizze_35297, skip_threads_35330)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_35330 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_35295, 32) == 0 || !ltid_in_bounds_35328)) {\n                // read operands\n                {\n                    x_35322 = x_35321;\n                    x_35321 = ((__local\n                                int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_35295,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n          ",
            "      {\n                    int64_t defunc_1_op_res_35323 = add64(x_35321, x_35322);\n                    \n                    x_35321 = defunc_1_op_res_35323;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35295)] =\n                        x_35321;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_35295, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35295)] =\n                    x_35322;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_35295 == 0) {\n            acc_35324 = ((__local\n                          int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31311 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_35324 = ((__local\n                          int64_t *) local_mem_35303)[squot64(byte_offsets_35299,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_35295) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_35331;\n    \n    prefix_35331 = (int64_t) 0;\n    // Perform lookback\n    {",
            "\n        if (dynamic_id_35311 == (int64_t) 0 && local_tid_35295 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_35292)[dynamic_id_35311] = acc_35324;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_35288)[dynamic_id_35311] = (int8_t) 2;\n            acc_35324 = (int64_t) 0;\n        }\n        if (!(dynamic_id_35311 == (int64_t) 0) && slt32(local_tid_35295,\n                                                        wave_sizze_35297)) {\n            if (local_tid_35295 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_35290)[dynamic_id_35311] =\n                    acc_35324;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35288)[dynamic_id_35311] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_35303)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_35288)[dynamic_id_35311 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_35332;\n            \n            status_35332 = ((__local int8_t *) local_mem_35303)[(int64_t) 0];\n            if (status_35332 == (int8_t) 2) {\n                if (local_tid_35295 == 0) {\n                    prefix_35331 = ((volatile __global\n                                     int64_t *) incprefixes_mem_35292)[dynamic_id_35311 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_35333 = dynamic_id_35311 -\n                        sext_i32_i64(wave_sizze_35297);\n                \n                while (slt32(wave_sizze_35297 * -1, readOffset_35333)) {\n                    int32_t read_i_35334 = readOffset",
            "_35333 + local_tid_35295;\n                    int64_t aggr_35335 = (int64_t) 0;\n                    int8_t flag_35336 = (int8_t) 0;\n                    int8_t used_35337 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_35334)) {\n                        flag_35336 = ((volatile __global\n                                       int8_t *) status_flags_mem_35288)[sext_i32_i64(read_i_35334)];\n                        if (flag_35336 == (int8_t) 2) {\n                            aggr_35335 = ((volatile __global\n                                           int64_t *) incprefixes_mem_35292)[sext_i32_i64(read_i_35334)];\n                        } else {\n                            if (flag_35336 == (int8_t) 1) {\n                                aggr_35335 = ((volatile __global\n                                               int64_t *) aggregates_mem_35290)[sext_i32_i64(read_i_35334)];\n                                used_35337 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_35303)[squot64(warp_byte_offset_35301,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35295)] =\n                        aggr_35335;\n                    \n                    int8_t tmp_35338;\n                    \n                    tmp_35338 = flag_35336 | used_35337 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_35303)[sext_i32_i64(local_tid_35295)] =\n                        tmp_35338;\n                    mem_fence_local();\n                    flag_35336 = ((volatile __local\n                                   int8_t *) local_mem_35303)[sext_i32_i64(wave_sizze_35297) -\n                                                              (int64_t) 1];\n                    if (local_tid_35295 == 0) {\n                        if (!(flag_35336 == (int8",
            "_t) 2)) {\n                            int64_t x_35339 = (int64_t) 0;\n                            int64_t x_35340;\n                            int8_t flag1_35342;\n                            \n                            flag1_35342 = (int8_t) 0;\n                            \n                            int8_t flag2_35343;\n                            int8_t used1_35344;\n                            \n                            used1_35344 = (int8_t) 0;\n                            \n                            int8_t used2_35345;\n                            \n                            for (int32_t i_35346 = 0; i_35346 <\n                                 wave_sizze_35297; i_35346++) {\n                                flag2_35343 = ((__local\n                                                int8_t *) local_mem_35303)[sext_i32_i64(i_35346)];\n                                used2_35345 = lshr8(flag2_35343, (int8_t) 2);\n                                flag2_35343 = flag2_35343 & (int8_t) 3;\n                                x_35340 = ((__local\n                                            int64_t *) local_mem_35303)[squot64(warp_byte_offset_35301,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_35346)];\n                                if (!(flag2_35343 == (int8_t) 1)) {\n                                    flag1_35342 = flag2_35343;\n                                    used1_35344 = used2_35345;\n                                    x_35339 = x_35340;\n                                } else {\n                                    used1_35344 += used2_35345;\n                                    \n                                    int64_t defunc_1_op_res_35341;\n                                    \n                                    defunc_1_op_res_35341 = add64(x_35339,\n                                                                  x_35340);\n               ",
            "                     x_35339 = defunc_1_op_res_35341;\n                                }\n                            }\n                            flag_35336 = flag1_35342;\n                            used_35337 = used1_35344;\n                            aggr_35335 = x_35339;\n                        } else {\n                            aggr_35335 = ((__local\n                                           int64_t *) local_mem_35303)[squot64(warp_byte_offset_35301,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_35297) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_35336 == (int8_t) 2) {\n                            readOffset_35333 = wave_sizze_35297 * -1;\n                        } else {\n                            readOffset_35333 -= zext_i8_i32(used_35337);\n                        }\n                        ((__local int32_t *) local_mem_35303)[(int64_t) 0] =\n                            readOffset_35333;\n                        \n                        int64_t x_35347;\n                        \n                        x_35347 = aggr_35335;\n                        \n                        int64_t x_35348;\n                        \n                        x_35348 = prefix_35331;\n                        \n                        int64_t defunc_1_op_res_35349;\n                        \n                        defunc_1_op_res_35349 = add64(x_35347, x_35348);\n                        prefix_35331 = defunc_1_op_res_35349;\n                    }\n                    mem_fence_local();\n                    readOffset_35333 = ((__local\n                                         int32_t *) local_mem_35303)[(int64_t) 0];\n                }\n            }\n            if (local_tid_35295 == 0) {\n                int64_t x_35350 = prefix_35331;\n               ",
            " int64_t x_35351 = acc_35324;\n                int64_t defunc_1_op_res_35352 = add64(x_35350, x_35351);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_35292)[dynamic_id_35311] =\n                    defunc_1_op_res_35352;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35288)[dynamic_id_35311] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_35303)[squot64(warp_byte_offset_35301,\n                                                      (int64_t) 8)] =\n                    prefix_35331;\n                acc_35324 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_35311 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_35331 = ((__local\n                             int64_t *) local_mem_35303)[squot64(warp_byte_offset_35301,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_35353;\n        int64_t x_35354;\n        int64_t x_35356;\n        \n        x_35356 = prefix_35331;\n        \n        int64_t x_35357;\n        \n        x_35357 = acc_35324;\n        \n        int64_t defunc_1_op_res_35358;\n        \n        defunc_1_op_res_35358 = add64(x_35356, x_35357);\n        x_35353 = defunc_1_op_res_35358;\n        for (int64_t i_35359 = 0; i_35359 < (int64_t) 9; i_35359++) {\n            x_35354 = private_mem_35313[i_35359];\n            \n            int64_t defunc_1_op_res_35355;\n            \n            defunc_1_op_res_35355 = add64(x_35353, x_35354);\n            private_mem_35313[i_35359] = defunc_1_op_res_35355;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35360 = 0; i_35360 < (int64_t) 9; i_35360++) {\n            int64_t sharedIdx_35361 = sext_i32_i64(local_tid_35295 * 9) +\n  ",
            "                  i_35360;\n            \n            ((__local int64_t *) local_mem_35303)[sharedIdx_35361] =\n                private_mem_35313[i_35360];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35362 = 0; i_35362 < (int64_t) 9; i_35362++) {\n            int32_t sharedIdx_35363 = local_tid_35295 +\n                    sext_i64_i32(segscan_group_sizze_31311 * i_35362);\n            \n            private_mem_35313[i_35362] = ((__local\n                                           int64_t *) local_mem_35303)[sext_i32_i64(sharedIdx_35363)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_35364 = 0; i_35364 < (int64_t) 9; i_35364++) {\n            int64_t gtid_31315 = blockOff_35312 + segscan_group_sizze_31311 *\n                    i_35364 + sext_i32_i64(local_tid_35295);\n            \n            if (slt64(gtid_31315, num_segments_29900)) {\n                ((__global int64_t *) mem_32200)[gtid_31315] =\n                    private_mem_35313[i_35364];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_35311 == sdiv_up64(num_segments_29900,\n                                          segscan_group_sizze_31311 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_35286)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31311\n}\n__kernel void clusterPointszisegscan_31370(__global int *global_failure,\n                                           uint local_mem_35406_backing_offset_0,\n                                           int64_t num_segments_29900, __global\n                                           unsigned char *mem_32212, __global\n                                           unsigned char *mem_32215, __global\n                                           unsigned char *mem_322",
            "17, __global\n                                           unsigned char *clusterPointsziid_counter_mem_35383,\n                                           __global\n                                           unsigned char *status_flags_mem_35385,\n                                           __global\n                                           unsigned char *aggregates_mem_35387,\n                                           __global\n                                           unsigned char *incprefixes_mem_35389,\n                                           __global\n                                           unsigned char *aggregates_mem_35391,\n                                           __global\n                                           unsigned char *incprefixes_mem_35393)\n{\n    #define segscan_group_sizze_31365 (clusterPointszisegscan_group_sizze_31364)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_35406_backing_0 =\n                  &shared_mem[local_mem_35406_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35395;\n    int32_t local_tid_35396;\n    int64_t group_sizze_35399;\n    int32_t wave_sizze_35398;\n    int32_t group_tid_35397;\n    \n    global_tid_35395 = get_global_id(0);\n    local_tid_35396 = get_local_id(0);\n    group_sizze_35399 = get_local_size(0);\n    wave_sizze_35398 = LOCKSTEP_WIDTH;\n    group_tid_35397 = get_group_id(0);\n    \n    int32_t phys_tid_31370;\n    \n    phys_tid_31370 = global_tid_35395;\n    \n    int64_t byte_offsets_35400;\n    \n    byte_offsets_35400 = (int64_t) 0;\n    \n    int64_t byte_offsets_35401;\n    \n    byte_offsets_35401 = segscan_group_sizze_31365;\n    \n    int64_t byte_offsets_35402;\n    \n    byte_offsets_35402 = sdiv_up64(segscan_group_sizze_31365, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_31365 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_35403;\n    \n    warp_byte_offset_35403 = (int64_t) 32;\n    \n",
            "    int64_t warp_byte_offset_35404;\n    \n    warp_byte_offset_35404 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_35405;\n    \n    warp_byte_offset_35405 = (int64_t) 320;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_35406;\n    \n    local_mem_35406 = (__local char *) local_mem_35406_backing_0;\n    \n    int64_t trans_arr_len_35407;\n    \n    trans_arr_len_35407 = (int64_t) 9 * segscan_group_sizze_31365;\n    \n    int32_t dynamic_id_35417;\n    \n    if (local_tid_35396 == 0) {\n        dynamic_id_35417 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_35383)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_35406)[(int64_t) 0] = dynamic_id_35417;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_35417 = ((__local int32_t *) local_mem_35406)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_35418;\n    \n    blockOff_35418 = sext_i32_i64(dynamic_id_35417) * (int64_t) 9 *\n        segscan_group_sizze_31365;\n    \n    bool private_mem_35419[9];\n    int64_t private_mem_35421[9];\n    \n    // Load and map\n    {\n        for (int64_t i_35423 = 0; i_35423 < (int64_t) 9; i_35423++) {\n            int64_t gtid_31369 = blockOff_35418 +\n                    sext_i32_i64(local_tid_35396) + i_35423 *\n                    segscan_group_sizze_31365;\n            \n            if (slt64(gtid_31369, num_segments_29900)) {\n                bool x_29952 = ((__global bool *) mem_32212)[gtid_31369];\n                \n                private_mem_35419[i_35423] = x_29952;\n                private_mem_35421[i_35423] = (int64_t) 1;\n            } else {\n                private_mem_35419[i_35423] = 0;\n                private_mem_35421[i_35423] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35424 = 0; i_35424 < (i",
            "nt64_t) 9; i_35424++) {\n            int64_t sharedIdx_35425 = sext_i32_i64(local_tid_35396) + i_35424 *\n                    segscan_group_sizze_31365;\n            \n            ((__local bool *) local_mem_35406)[sharedIdx_35425] =\n                private_mem_35419[i_35424];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_35426 = 0; i_35426 < 9; i_35426++) {\n            int32_t sharedIdx_35427 = local_tid_35396 * 9 + i_35426;\n            \n            private_mem_35419[sext_i32_i64(i_35426)] = ((__local\n                                                         bool *) local_mem_35406)[sext_i32_i64(sharedIdx_35427)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35428 = 0; i_35428 < (int64_t) 9; i_35428++) {\n            int64_t sharedIdx_35429 = sext_i32_i64(local_tid_35396) + i_35428 *\n                    segscan_group_sizze_31365;\n            \n            ((__local int64_t *) local_mem_35406)[sharedIdx_35429] =\n                private_mem_35421[i_35428];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_35430 = 0; i_35430 < 9; i_35430++) {\n            int32_t sharedIdx_35431 = local_tid_35396 * 9 + i_35430;\n            \n            private_mem_35421[sext_i32_i64(i_35430)] = ((__local\n                                                         int64_t *) local_mem_35406)[sext_i32_i64(sharedIdx_35431)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_35432 = 0; i_35432 < (int64_t) 8; i_35432++) {\n            bool x_29945;\n            bool x_29947;\n            \n            x_29945 = private_mem_35419[i_35432];\n            x_29947 = private_mem_35419[i_35432 + (int64_t) 1];\n            \n            int64_t x_29946;\n            int64_t x_29948;\n            \n            x_29946 = private_mem_35421[i_35432];\n            x_29948 = private_mem_35421[i_35432 + (int64_t) 1];\n            \n            bool defunc_1_op_res_29949;\n            \n            defunc",
            "_1_op_res_29949 = x_29945 || x_29947;\n            \n            int64_t defunc_1_op_res_29950;\n            \n            if (x_29947) {\n                defunc_1_op_res_29950 = x_29948;\n            } else {\n                int64_t defunc_1_op_res_29951 = add64(x_29946, x_29948);\n                \n                defunc_1_op_res_29950 = defunc_1_op_res_29951;\n            }\n            private_mem_35419[i_35432 + (int64_t) 1] = defunc_1_op_res_29949;\n            private_mem_35421[i_35432 + (int64_t) 1] = defunc_1_op_res_29950;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_35406)[byte_offsets_35400 +\n                                           sext_i32_i64(local_tid_35396)] =\n            private_mem_35419[(int64_t) 8];\n        ((__local int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35396)] =\n            private_mem_35421[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_35440;\n    int64_t acc_35441;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_35433;\n        int64_t x_35434;\n        bool x_35435;\n        int64_t x_35436;\n        bool x_35442;\n        int64_t x_35443;\n        bool x_35444;\n        int64_t x_35445;\n        bool ltid_in_bounds_35449;\n        \n        ltid_in_bounds_35449 = slt64(sext_i32_i64(local_tid_35396),\n                                     segscan_group_sizze_31365);\n        \n        int32_t skip_threads_35450;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_35449) {\n                x_35435 = ((volatile __local\n                            bool *) local_mem_35406)[byte_offsets_35400 +\n                                                     sext_i32_i64(local_tid_35396)];\n                x_35436 = ((volatile __local\n                            int64_t *) local_mem_35406)[squot64",
            "(byte_offsets_35401,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_35396)];\n                if ((local_tid_35396 - squot32(local_tid_35396, 32) * 32) ==\n                    0) {\n                    x_35433 = x_35435;\n                    x_35434 = x_35436;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_35450 = 1;\n            while (slt32(skip_threads_35450, 32)) {\n                if (sle32(skip_threads_35450, local_tid_35396 -\n                          squot32(local_tid_35396, 32) * 32) &&\n                    ltid_in_bounds_35449) {\n                    // read operands\n                    {\n                        x_35433 = ((volatile __local\n                                    bool *) local_mem_35406)[byte_offsets_35400 +\n                                                             (sext_i32_i64(local_tid_35396) -\n                                                              sext_i32_i64(skip_threads_35450))];\n                        x_35434 = ((volatile __local\n                                    int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_35396) -\n                                                                 sext_i32_i64(skip_threads_35450))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_35437 = x_35433 || x_35435;\n                        int64_t defunc_1_op_res_35438;\n                        \n                        if (x_35435) {\n                            defunc_1_op_res_35438 = x_35436;\n                        } else {\n                            int64_t defunc_1_op_res_35439 = add64(x_35434,\n  ",
            "                                                                x_35436);\n                            \n                            defunc_1_op_res_35438 = defunc_1_op_res_35439;\n                        }\n                        x_35433 = defunc_1_op_res_35437;\n                        x_35434 = defunc_1_op_res_35438;\n                    }\n                }\n                if (sle32(wave_sizze_35398, skip_threads_35450)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_35450, local_tid_35396 -\n                          squot32(local_tid_35396, 32) * 32) &&\n                    ltid_in_bounds_35449) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_35406)[byte_offsets_35400 +\n                                                   sext_i32_i64(local_tid_35396)] =\n                            x_35433;\n                        x_35435 = x_35433;\n                        ((volatile __local\n                          int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_35396)] =\n                            x_35434;\n                        x_35436 = x_35434;\n                    }\n                }\n                if (sle32(wave_sizze_35398, skip_threads_35450)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_35450 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_35396 - squot32(local_tid_35396, 32) * 32) == 31 &&\n                ltid_in_bounds_35449) {\n                ((volatile __local bool *) local_mem_35406)[byte_offsets_35400 +\n                                                            sext_i32_i64(",
            "squot32(local_tid_35396,\n                                                                                 32))] =\n                    x_35433;\n                ((volatile __local\n                  int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_35396,\n                                                                   32))] =\n                    x_35434;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_35451;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_35396, 32) == 0 && ltid_in_bounds_35449) {\n                    x_35444 = ((volatile __local\n                                bool *) local_mem_35406)[byte_offsets_35400 +\n                                                         sext_i32_i64(local_tid_35396)];\n                    x_35445 = ((volatile __local\n                                int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_35396)];\n                    if ((local_tid_35396 - squot32(local_tid_35396, 32) * 32) ==\n                        0) {\n                        x_35442 = x_35444;\n                        x_35443 = x_35445;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_35451 = 1;\n                while (slt32(skip_threads_35451, 32)) {\n                    if (sle32(skip_threads_35451, local_tid_35396 -\n                              squot32(local_tid_35396, 32) * 32) &&\n                        (squot32(local_tid_35396, 32)",
            " == 0 &&\n                         ltid_in_bounds_35449)) {\n                        // read operands\n                        {\n                            x_35442 = ((volatile __local\n                                        bool *) local_mem_35406)[byte_offsets_35400 +\n                                                                 (sext_i32_i64(local_tid_35396) -\n                                                                  sext_i32_i64(skip_threads_35451))];\n                            x_35443 = ((volatile __local\n                                        int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_35396) -\n                                                                     sext_i32_i64(skip_threads_35451))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_35446 = x_35442 || x_35444;\n                            int64_t defunc_1_op_res_35447;\n                            \n                            if (x_35444) {\n                                defunc_1_op_res_35447 = x_35445;\n                            } else {\n                                int64_t defunc_1_op_res_35448 = add64(x_35443,\n                                                                      x_35445);\n                                \n                                defunc_1_op_res_35447 = defunc_1_op_res_35448;\n                            }\n                            x_35442 = defunc_1_op_res_35446;\n                            x_35443 = defunc_1_op_res_35447;\n                        }\n                    }\n                    if (sle32(wave_sizze_35398, skip_threads_35451)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_35451, local_",
            "tid_35396 -\n                              squot32(local_tid_35396, 32) * 32) &&\n                        (squot32(local_tid_35396, 32) == 0 &&\n                         ltid_in_bounds_35449)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_35406)[byte_offsets_35400 +\n                                                       sext_i32_i64(local_tid_35396)] =\n                                x_35442;\n                            x_35444 = x_35442;\n                            ((volatile __local\n                              int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_35396)] =\n                                x_35443;\n                            x_35445 = x_35443;\n                        }\n                    }\n                    if (sle32(wave_sizze_35398, skip_threads_35451)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_35451 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_35396, 32) == 0 || !ltid_in_bounds_35449)) {\n                // read operands\n                {\n                    x_35435 = x_35433;\n                    x_35436 = x_35434;\n                    x_35433 = ((__local\n                                bool *) local_mem_35406)[byte_offsets_35400 +\n                                                         (sext_i32_i64(squot32(local_tid_35396,\n                                                                               32)) -\n                                                          (int64_t) 1)];\n                    x_35434 = ((__local\n                                int64_t *) l",
            "ocal_mem_35406)[squot64(byte_offsets_35401,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_35396,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_35437 = x_35433 || x_35435;\n                    int64_t defunc_1_op_res_35438;\n                    \n                    if (x_35435) {\n                        defunc_1_op_res_35438 = x_35436;\n                    } else {\n                        int64_t defunc_1_op_res_35439 = add64(x_35434, x_35436);\n                        \n                        defunc_1_op_res_35438 = defunc_1_op_res_35439;\n                    }\n                    x_35433 = defunc_1_op_res_35437;\n                    x_35434 = defunc_1_op_res_35438;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_35406)[byte_offsets_35400 +\n                                                       sext_i32_i64(local_tid_35396)] =\n                        x_35433;\n                    ((__local\n                      int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35396)] =\n                        x_35434;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_35396, 32) == 0) {\n                ((__local bool *) local_mem_35406)[byte_offsets_35400 +\n                                                   sext_i32_i64(local_tid_35396)] =\n                    x_35435;\n                ((__loc",
            "al\n                  int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35396)] =\n                    x_35436;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_35396 == 0) {\n            acc_35440 = ((__local bool *) local_mem_35406)[byte_offsets_35400 +\n                                                           (segscan_group_sizze_31365 -\n                                                            (int64_t) 1)];\n            acc_35441 = ((__local\n                          int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31365 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_35440 = ((__local bool *) local_mem_35406)[byte_offsets_35400 +\n                                                           (sext_i32_i64(local_tid_35396) -\n                                                            (int64_t) 1)];\n            acc_35441 = ((__local\n                          int64_t *) local_mem_35406)[squot64(byte_offsets_35401,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_35396) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_35452;\n    \n    prefix_35452 = 0;\n    \n    int64_t prefix_35453;\n    \n    prefix_35453 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_35417 == (int64_t) 0 && local_tid_35396 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_35389)[dynamic_id_35417] = acc_35440;\n            ((volatil",
            "e __global\n              int64_t *) incprefixes_mem_35393)[dynamic_id_35417] = acc_35441;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_35385)[dynamic_id_35417] = (int8_t) 2;\n            acc_35440 = 0;\n            acc_35441 = (int64_t) 0;\n        }\n        if (!(dynamic_id_35417 == (int64_t) 0) && slt32(local_tid_35396,\n                                                        wave_sizze_35398)) {\n            if (local_tid_35396 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_35387)[dynamic_id_35417] = acc_35440;\n                ((volatile __global\n                  int64_t *) aggregates_mem_35391)[dynamic_id_35417] =\n                    acc_35441;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35385)[dynamic_id_35417] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_35406)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_35385)[dynamic_id_35417 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_35454;\n            \n            status_35454 = ((__local int8_t *) local_mem_35406)[(int64_t) 0];\n            if (status_35454 == (int8_t) 2) {\n                if (local_tid_35396 == 0) {\n                    prefix_35452 = ((volatile __global\n                                     bool *) incprefixes_mem_35389)[dynamic_id_35417 -\n                                                                    (int64_t) 1];\n                    prefix_35453 = ((volatile __global\n                                     int64_t *) incprefixes_mem_35393)[dynamic_id_35417 -\n                                                                       (int64_t) 1];\n                }\n         ",
            "   } else {\n                int32_t readOffset_35455 = dynamic_id_35417 -\n                        sext_i32_i64(wave_sizze_35398);\n                \n                while (slt32(wave_sizze_35398 * -1, readOffset_35455)) {\n                    int32_t read_i_35456 = readOffset_35455 + local_tid_35396;\n                    bool aggr_35457 = 0;\n                    int64_t aggr_35458 = (int64_t) 0;\n                    int8_t flag_35459 = (int8_t) 0;\n                    int8_t used_35460 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_35456)) {\n                        flag_35459 = ((volatile __global\n                                       int8_t *) status_flags_mem_35385)[sext_i32_i64(read_i_35456)];\n                        if (flag_35459 == (int8_t) 2) {\n                            aggr_35457 = ((volatile __global\n                                           bool *) incprefixes_mem_35389)[sext_i32_i64(read_i_35456)];\n                            aggr_35458 = ((volatile __global\n                                           int64_t *) incprefixes_mem_35393)[sext_i32_i64(read_i_35456)];\n                        } else {\n                            if (flag_35459 == (int8_t) 1) {\n                                aggr_35457 = ((volatile __global\n                                               bool *) aggregates_mem_35387)[sext_i32_i64(read_i_35456)];\n                                aggr_35458 = ((volatile __global\n                                               int64_t *) aggregates_mem_35391)[sext_i32_i64(read_i_35456)];\n                                used_35460 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_35406)[warp_byte_offset_35403 +\n                                                       sext_i32_i64(local_tid_35396)] =\n                        aggr_35457;\n                    ((__local\n                      int64_t *) local_mem_35406)[squot64(warp_byte_offset_354",
            "04,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35396)] =\n                        aggr_35458;\n                    \n                    int8_t tmp_35461;\n                    \n                    tmp_35461 = flag_35459 | used_35460 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_35406)[sext_i32_i64(local_tid_35396)] =\n                        tmp_35461;\n                    mem_fence_local();\n                    flag_35459 = ((volatile __local\n                                   int8_t *) local_mem_35406)[sext_i32_i64(wave_sizze_35398) -\n                                                              (int64_t) 1];\n                    if (local_tid_35396 == 0) {\n                        if (!(flag_35459 == (int8_t) 2)) {\n                            bool x_35462 = 0;\n                            int64_t x_35463 = (int64_t) 0;\n                            bool x_35464;\n                            int64_t x_35465;\n                            int8_t flag1_35469;\n                            \n                            flag1_35469 = (int8_t) 0;\n                            \n                            int8_t flag2_35470;\n                            int8_t used1_35471;\n                            \n                            used1_35471 = (int8_t) 0;\n                            \n                            int8_t used2_35472;\n                            \n                            for (int32_t i_35473 = 0; i_35473 <\n                                 wave_sizze_35398; i_35473++) {\n                                flag2_35470 = ((__local\n                                                int8_t *) local_mem_35406)[sext_i32_i64(i_35473)];\n                                used2_35472 = lshr8(flag2_35470, (int8_t) 2);\n                                flag2_35470 = flag2_35470 & (int8_t) 3;\n                                x_35464 = ((__local\n               ",
            "                             bool *) local_mem_35406)[warp_byte_offset_35403 +\n                                                                     sext_i32_i64(i_35473)];\n                                x_35465 = ((__local\n                                            int64_t *) local_mem_35406)[squot64(warp_byte_offset_35404,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_35473)];\n                                if (!(flag2_35470 == (int8_t) 1)) {\n                                    flag1_35469 = flag2_35470;\n                                    used1_35471 = used2_35472;\n                                    x_35462 = x_35464;\n                                    x_35463 = x_35465;\n                                } else {\n                                    used1_35471 += used2_35472;\n                                    \n                                    bool defunc_1_op_res_35466;\n                                    \n                                    defunc_1_op_res_35466 = x_35462 || x_35464;\n                                    \n                                    int64_t defunc_1_op_res_35467;\n                                    \n                                    if (x_35464) {\n                                        defunc_1_op_res_35467 = x_35465;\n                                    } else {\n                                        int64_t defunc_1_op_res_35468 =\n                                                add64(x_35463, x_35465);\n                                        \n                                        defunc_1_op_res_35467 =\n                                            defunc_1_op_res_35468;\n                                    }\n                                    x_35462 = defunc_1_op_res_35466;\n                                    x_35463 = defunc_1_op_res_35467;\n                                }\n                 ",
            "           }\n                            flag_35459 = flag1_35469;\n                            used_35460 = used1_35471;\n                            aggr_35457 = x_35462;\n                            aggr_35458 = x_35463;\n                        } else {\n                            aggr_35457 = ((__local\n                                           bool *) local_mem_35406)[warp_byte_offset_35403 +\n                                                                    (sext_i32_i64(wave_sizze_35398) -\n                                                                     (int64_t) 1)];\n                            aggr_35458 = ((__local\n                                           int64_t *) local_mem_35406)[squot64(warp_byte_offset_35404,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_35398) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_35459 == (int8_t) 2) {\n                            readOffset_35455 = wave_sizze_35398 * -1;\n                        } else {\n                            readOffset_35455 -= zext_i8_i32(used_35460);\n                        }\n                        ((__local int32_t *) local_mem_35406)[(int64_t) 0] =\n                            readOffset_35455;\n                        \n                        bool x_35474;\n                        \n                        x_35474 = aggr_35457;\n                        \n                        int64_t x_35475;\n                        \n                        x_35475 = aggr_35458;\n                        \n                        bool x_35476;\n                        \n                        x_35476 = prefix_35452;\n                        \n                        int64_t x_35477;\n                        \n                        x_35477 = prefix_35453;\n                       ",
            " \n                        bool defunc_1_op_res_35478;\n                        \n                        defunc_1_op_res_35478 = x_35474 || x_35476;\n                        \n                        int64_t defunc_1_op_res_35479;\n                        \n                        if (x_35476) {\n                            defunc_1_op_res_35479 = x_35477;\n                        } else {\n                            int64_t defunc_1_op_res_35480 = add64(x_35475,\n                                                                  x_35477);\n                            \n                            defunc_1_op_res_35479 = defunc_1_op_res_35480;\n                        }\n                        prefix_35452 = defunc_1_op_res_35478;\n                        prefix_35453 = defunc_1_op_res_35479;\n                    }\n                    mem_fence_local();\n                    readOffset_35455 = ((__local\n                                         int32_t *) local_mem_35406)[(int64_t) 0];\n                }\n            }\n            if (local_tid_35396 == 0) {\n                bool x_35481 = prefix_35452;\n                int64_t x_35482 = prefix_35453;\n                bool x_35483 = acc_35440;\n                int64_t x_35484 = acc_35441;\n                bool defunc_1_op_res_35485 = x_35481 || x_35483;\n                int64_t defunc_1_op_res_35486;\n                \n                if (x_35483) {\n                    defunc_1_op_res_35486 = x_35484;\n                } else {\n                    int64_t defunc_1_op_res_35487 = add64(x_35482, x_35484);\n                    \n                    defunc_1_op_res_35486 = defunc_1_op_res_35487;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_35389)[dynamic_id_35417] =\n                    defunc_1_op_res_35485;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_35393)[dynamic_id_35417] =\n                    defunc_1_op_res_35486;\n                mem_fence_global();\n         ",
            "       ((volatile __global\n                  int8_t *) status_flags_mem_35385)[dynamic_id_35417] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_35406)[warp_byte_offset_35403] =\n                    prefix_35452;\n                ((__local\n                  int64_t *) local_mem_35406)[squot64(warp_byte_offset_35404,\n                                                      (int64_t) 8)] =\n                    prefix_35453;\n                acc_35440 = 0;\n                acc_35441 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_35417 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_35452 = ((__local\n                             bool *) local_mem_35406)[warp_byte_offset_35403];\n            prefix_35453 = ((__local\n                             int64_t *) local_mem_35406)[squot64(warp_byte_offset_35404,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_35488;\n        bool x_35490;\n        bool x_35495;\n        \n        x_35495 = prefix_35452;\n        \n        bool x_35497;\n        \n        x_35497 = acc_35440;\n        \n        int64_t x_35489;\n        int64_t x_35491;\n        int64_t x_35496;\n        \n        x_35496 = prefix_35453;\n        \n        int64_t x_35498;\n        \n        x_35498 = acc_35441;\n        \n        bool defunc_1_op_res_35499;\n        \n        defunc_1_op_res_35499 = x_35495 || x_35497;\n        \n        int64_t defunc_1_op_res_35500;\n        \n        if (x_35497) {\n            defunc_1_op_res_35500 = x_35498;\n        } else {\n            int64_t defunc_1_op_res_35501 = add64(x_35496, x_35498);\n            \n            defunc_1_op_res_35500 = defunc_1_op_res_35501;\n        }\n        x_35488 = defunc_1_op_res_35499;\n        x_35489 = defunc_1_op_res_35500;\n        for (int64_t i_35502 = 0; i_35502 < (int64_t) 9; i_35502++) {\n            x_35490 = priv",
            "ate_mem_35419[i_35502];\n            x_35491 = private_mem_35421[i_35502];\n            \n            bool defunc_1_op_res_35492;\n            \n            defunc_1_op_res_35492 = x_35488 || x_35490;\n            \n            int64_t defunc_1_op_res_35493;\n            \n            if (x_35490) {\n                defunc_1_op_res_35493 = x_35491;\n            } else {\n                int64_t defunc_1_op_res_35494 = add64(x_35489, x_35491);\n                \n                defunc_1_op_res_35493 = defunc_1_op_res_35494;\n            }\n            private_mem_35419[i_35502] = defunc_1_op_res_35492;\n            private_mem_35421[i_35502] = defunc_1_op_res_35493;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35503 = 0; i_35503 < (int64_t) 9; i_35503++) {\n            int64_t sharedIdx_35504 = sext_i32_i64(local_tid_35396 * 9) +\n                    i_35503;\n            \n            ((__local bool *) local_mem_35406)[sharedIdx_35504] =\n                private_mem_35419[i_35503];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35505 = 0; i_35505 < (int64_t) 9; i_35505++) {\n            int32_t sharedIdx_35506 = local_tid_35396 +\n                    sext_i64_i32(segscan_group_sizze_31365 * i_35505);\n            \n            private_mem_35419[i_35505] = ((__local\n                                           bool *) local_mem_35406)[sext_i32_i64(sharedIdx_35506)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35507 = 0; i_35507 < (int64_t) 9; i_35507++) {\n            int64_t sharedIdx_35508 = sext_i32_i64(local_tid_35396 * 9) +\n                    i_35507;\n            \n            ((__local int64_t *) local_mem_35406)[sharedIdx_35508] =\n                private_mem_35421[i_35507];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35509 = 0; i_35509 < (int64_t) 9; i_35509++) {\n            int32_t sharedIdx_35510 = local_tid_35396 +\n                    sext_i64",
            "_i32(segscan_group_sizze_31365 * i_35509);\n            \n            private_mem_35421[i_35509] = ((__local\n                                           int64_t *) local_mem_35406)[sext_i32_i64(sharedIdx_35510)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_35511 = 0; i_35511 < (int64_t) 9; i_35511++) {\n            int64_t gtid_31369 = blockOff_35418 + segscan_group_sizze_31365 *\n                    i_35511 + sext_i32_i64(local_tid_35396);\n            \n            if (slt64(gtid_31369, num_segments_29900)) {\n                ((__global bool *) mem_32215)[gtid_31369] =\n                    private_mem_35419[i_35511];\n            }\n        }\n        for (int64_t i_35512 = 0; i_35512 < (int64_t) 9; i_35512++) {\n            int64_t gtid_31369 = blockOff_35418 + segscan_group_sizze_31365 *\n                    i_35512 + sext_i32_i64(local_tid_35396);\n            \n            if (slt64(gtid_31369, num_segments_29900)) {\n                ((__global int64_t *) mem_32217)[gtid_31369] =\n                    private_mem_35421[i_35512];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_35417 == sdiv_up64(num_segments_29900,\n                                          segscan_group_sizze_31365 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_35383)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31365\n}\n__kernel void clusterPointszisegscan_31378(__global int *global_failure,\n                                           uint local_mem_35533_backing_offset_0,\n                                           int64_t num_segments_29900, __global\n                                           unsigned char *mem_32212, __global\n                                           unsigned char *mem_32220, __global\n         ",
            "                                  unsigned char *clusterPointsziid_counter_mem_35516,\n                                           __global\n                                           unsigned char *status_flags_mem_35518,\n                                           __global\n                                           unsigned char *aggregates_mem_35520,\n                                           __global\n                                           unsigned char *incprefixes_mem_35522)\n{\n    #define segscan_group_sizze_31373 (clusterPointszisegscan_group_sizze_31372)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_35533_backing_0 =\n                  &shared_mem[local_mem_35533_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35524;\n    int32_t local_tid_35525;\n    int64_t group_sizze_35528;\n    int32_t wave_sizze_35527;\n    int32_t group_tid_35526;\n    \n    global_tid_35524 = get_global_id(0);\n    local_tid_35525 = get_local_id(0);\n    group_sizze_35528 = get_local_size(0);\n    wave_sizze_35527 = LOCKSTEP_WIDTH;\n    group_tid_35526 = get_group_id(0);\n    \n    int32_t phys_tid_31378;\n    \n    phys_tid_31378 = global_tid_35524;\n    \n    int64_t byte_offsets_35529;\n    \n    byte_offsets_35529 = (int64_t) 0;\n    \n    int64_t byte_offsets_35530;\n    \n    byte_offsets_35530 = segscan_group_sizze_31373 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_35531;\n    \n    warp_byte_offset_35531 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_35532;\n    \n    warp_byte_offset_35532 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_35533;\n    \n    local_mem_35533 = (__local char *) local_mem_35533_backing_0;\n    \n    int64_t trans_arr_len_35534;\n    \n    trans_arr_len_35534 = (int64_t) 9 * segscan_group_sizze_31373;\n    \n    int32_t dynamic_id_35541;\n    \n    if (local_tid_35525 == 0) {\n        dynamic_id_35541 = atom",
            "ic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_35516)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_35533)[(int64_t) 0] = dynamic_id_35541;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_35541 = ((__local int32_t *) local_mem_35533)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_35542;\n    \n    blockOff_35542 = sext_i32_i64(dynamic_id_35541) * (int64_t) 9 *\n        segscan_group_sizze_31373;\n    \n    int64_t private_mem_35543[9];\n    \n    // Load and map\n    {\n        for (int64_t i_35545 = 0; i_35545 < (int64_t) 9; i_35545++) {\n            int64_t gtid_31377 = blockOff_35542 +\n                    sext_i32_i64(local_tid_35525) + i_35545 *\n                    segscan_group_sizze_31373;\n            \n            if (slt64(gtid_31377, num_segments_29900)) {\n                int64_t i_p_o_31721 = add64((int64_t) 1, gtid_31377);\n                int64_t rot_i_31722 = smod64(i_p_o_31721, num_segments_29900);\n                bool x_29959 = ((__global bool *) mem_32212)[rot_i_31722];\n                int64_t defunc_0_f_res_29960 = btoi_bool_i64(x_29959);\n                \n                private_mem_35543[i_35545] = defunc_0_f_res_29960;\n            } else {\n                private_mem_35543[i_35545] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35546 = 0; i_35546 < (int64_t) 9; i_35546++) {\n            int64_t sharedIdx_35547 = sext_i32_i64(local_tid_35525) + i_35546 *\n                    segscan_group_sizze_31373;\n            \n            ((__local int64_t *) local_mem_35533)[sharedIdx_35547] =\n                private_mem_35543[i_35546];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_35548 = 0; i_35548 < 9; i_35548++) {\n            int32_t sharedIdx_35549 = local_tid_35525 * 9 + i_",
            "35548;\n            \n            private_mem_35543[sext_i32_i64(i_35548)] = ((__local\n                                                         int64_t *) local_mem_35533)[sext_i32_i64(sharedIdx_35549)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_35550 = 0; i_35550 < (int64_t) 8; i_35550++) {\n            int64_t x_29956;\n            int64_t x_29957;\n            \n            x_29956 = private_mem_35543[i_35550];\n            x_29957 = private_mem_35543[i_35550 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29958;\n            \n            defunc_1_op_res_29958 = add64(x_29956, x_29957);\n            private_mem_35543[i_35550 + (int64_t) 1] = defunc_1_op_res_29958;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35525)] =\n            private_mem_35543[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_35554;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_35551;\n        int64_t x_35552;\n        int64_t x_35555;\n        int64_t x_35556;\n        bool ltid_in_bounds_35558;\n        \n        ltid_in_bounds_35558 = slt64(sext_i32_i64(local_tid_35525),\n                                     segscan_group_sizze_31373);\n        \n        int32_t skip_threads_35559;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_35558) {\n                x_35552 = ((volatile __local\n                            int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_35525)];\n                if ((local_tid_35525 - squot32(local_tid_35525, 32) * 32) ==\n          ",
            "          0) {\n                    x_35551 = x_35552;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_35559 = 1;\n            while (slt32(skip_threads_35559, 32)) {\n                if (sle32(skip_threads_35559, local_tid_35525 -\n                          squot32(local_tid_35525, 32) * 32) &&\n                    ltid_in_bounds_35558) {\n                    // read operands\n                    {\n                        x_35551 = ((volatile __local\n                                    int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_35525) -\n                                                                 sext_i32_i64(skip_threads_35559))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_35553 = add64(x_35551, x_35552);\n                        \n                        x_35551 = defunc_1_op_res_35553;\n                    }\n                }\n                if (sle32(wave_sizze_35527, skip_threads_35559)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_35559, local_tid_35525 -\n                          squot32(local_tid_35525, 32) * 32) &&\n                    ltid_in_bounds_35558) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_35525)] =\n                            x_35551;\n                        x_35552 = x_35551;\n                    }\n                }\n                if (sle32(w",
            "ave_sizze_35527, skip_threads_35559)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_35559 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_35525 - squot32(local_tid_35525, 32) * 32) == 31 &&\n                ltid_in_bounds_35558) {\n                ((volatile __local\n                  int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_35525,\n                                                                   32))] =\n                    x_35551;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_35560;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_35525, 32) == 0 && ltid_in_bounds_35558) {\n                    x_35556 = ((volatile __local\n                                int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_35525)];\n                    if ((local_tid_35525 - squot32(local_tid_35525, 32) * 32) ==\n                        0) {\n                        x_35555 = x_35556;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_35560 = 1;\n                while (slt32(skip_threads_35560, 32)) {\n                    if (sle32(skip_threads_35560, local_tid_35525 -\n                              squot32(local_tid_35525, 32) * 32) &&\n                        (squot32(local_tid_3552",
            "5, 32) == 0 &&\n                         ltid_in_bounds_35558)) {\n                        // read operands\n                        {\n                            x_35555 = ((volatile __local\n                                        int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_35525) -\n                                                                     sext_i32_i64(skip_threads_35560))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_35557 = add64(x_35555,\n                                                                  x_35556);\n                            \n                            x_35555 = defunc_1_op_res_35557;\n                        }\n                    }\n                    if (sle32(wave_sizze_35527, skip_threads_35560)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_35560, local_tid_35525 -\n                              squot32(local_tid_35525, 32) * 32) &&\n                        (squot32(local_tid_35525, 32) == 0 &&\n                         ltid_in_bounds_35558)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_35525)] =\n                                x_35555;\n                            x_35556 = x_35555;\n                        }\n                    }\n                    if (sle32(wave_sizze_35527, skip_threads_35560)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n     ",
            "               }\n                    skip_threads_35560 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_35525, 32) == 0 || !ltid_in_bounds_35558)) {\n                // read operands\n                {\n                    x_35552 = x_35551;\n                    x_35551 = ((__local\n                                int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_35525,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_35553 = add64(x_35551, x_35552);\n                    \n                    x_35551 = defunc_1_op_res_35553;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35525)] =\n                        x_35551;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_35525, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35525)] =\n                    x_35552;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LO",
            "CAL_MEM_FENCE);\n        if (local_tid_35525 == 0) {\n            acc_35554 = ((__local\n                          int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31373 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_35554 = ((__local\n                          int64_t *) local_mem_35533)[squot64(byte_offsets_35529,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_35525) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_35561;\n    \n    prefix_35561 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_35541 == (int64_t) 0 && local_tid_35525 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_35522)[dynamic_id_35541] = acc_35554;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_35518)[dynamic_id_35541] = (int8_t) 2;\n            acc_35554 = (int64_t) 0;\n        }\n        if (!(dynamic_id_35541 == (int64_t) 0) && slt32(local_tid_35525,\n                                                        wave_sizze_35527)) {\n            if (local_tid_35525 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_35520)[dynamic_id_35541] =\n                    acc_35554;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35518)[dynamic_id_35541] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_35533)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_35518)[dynamic_id_35541 -\n    ",
            "                                                                                                    (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_35562;\n            \n            status_35562 = ((__local int8_t *) local_mem_35533)[(int64_t) 0];\n            if (status_35562 == (int8_t) 2) {\n                if (local_tid_35525 == 0) {\n                    prefix_35561 = ((volatile __global\n                                     int64_t *) incprefixes_mem_35522)[dynamic_id_35541 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_35563 = dynamic_id_35541 -\n                        sext_i32_i64(wave_sizze_35527);\n                \n                while (slt32(wave_sizze_35527 * -1, readOffset_35563)) {\n                    int32_t read_i_35564 = readOffset_35563 + local_tid_35525;\n                    int64_t aggr_35565 = (int64_t) 0;\n                    int8_t flag_35566 = (int8_t) 0;\n                    int8_t used_35567 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_35564)) {\n                        flag_35566 = ((volatile __global\n                                       int8_t *) status_flags_mem_35518)[sext_i32_i64(read_i_35564)];\n                        if (flag_35566 == (int8_t) 2) {\n                            aggr_35565 = ((volatile __global\n                                           int64_t *) incprefixes_mem_35522)[sext_i32_i64(read_i_35564)];\n                        } else {\n                            if (flag_35566 == (int8_t) 1) {\n                                aggr_35565 = ((volatile __global\n                                               int64_t *) aggregates_mem_35520)[sext_i32_i64(read_i_35564)];\n                                used_35567 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n               ",
            "       int64_t *) local_mem_35533)[squot64(warp_byte_offset_35531,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35525)] =\n                        aggr_35565;\n                    \n                    int8_t tmp_35568;\n                    \n                    tmp_35568 = flag_35566 | used_35567 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_35533)[sext_i32_i64(local_tid_35525)] =\n                        tmp_35568;\n                    mem_fence_local();\n                    flag_35566 = ((volatile __local\n                                   int8_t *) local_mem_35533)[sext_i32_i64(wave_sizze_35527) -\n                                                              (int64_t) 1];\n                    if (local_tid_35525 == 0) {\n                        if (!(flag_35566 == (int8_t) 2)) {\n                            int64_t x_35569 = (int64_t) 0;\n                            int64_t x_35570;\n                            int8_t flag1_35572;\n                            \n                            flag1_35572 = (int8_t) 0;\n                            \n                            int8_t flag2_35573;\n                            int8_t used1_35574;\n                            \n                            used1_35574 = (int8_t) 0;\n                            \n                            int8_t used2_35575;\n                            \n                            for (int32_t i_35576 = 0; i_35576 <\n                                 wave_sizze_35527; i_35576++) {\n                                flag2_35573 = ((__local\n                                                int8_t *) local_mem_35533)[sext_i32_i64(i_35576)];\n                                used2_35575 = lshr8(flag2_35573, (int8_t) 2);\n                                flag2_35573 = flag2_35573 & (int8_t) 3;\n                                x_35570 = ((__local\n                                        ",
            "    int64_t *) local_mem_35533)[squot64(warp_byte_offset_35531,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_35576)];\n                                if (!(flag2_35573 == (int8_t) 1)) {\n                                    flag1_35572 = flag2_35573;\n                                    used1_35574 = used2_35575;\n                                    x_35569 = x_35570;\n                                } else {\n                                    used1_35574 += used2_35575;\n                                    \n                                    int64_t defunc_1_op_res_35571;\n                                    \n                                    defunc_1_op_res_35571 = add64(x_35569,\n                                                                  x_35570);\n                                    x_35569 = defunc_1_op_res_35571;\n                                }\n                            }\n                            flag_35566 = flag1_35572;\n                            used_35567 = used1_35574;\n                            aggr_35565 = x_35569;\n                        } else {\n                            aggr_35565 = ((__local\n                                           int64_t *) local_mem_35533)[squot64(warp_byte_offset_35531,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_35527) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_35566 == (int8_t) 2) {\n                            readOffset_35563 = wave_sizze_35527 * -1;\n                        } else {\n                            readOffset_35563 -= zext_i8_i32(used_35567);\n                        }\n                        ((__local int32_t *) local_",
            "mem_35533)[(int64_t) 0] =\n                            readOffset_35563;\n                        \n                        int64_t x_35577;\n                        \n                        x_35577 = aggr_35565;\n                        \n                        int64_t x_35578;\n                        \n                        x_35578 = prefix_35561;\n                        \n                        int64_t defunc_1_op_res_35579;\n                        \n                        defunc_1_op_res_35579 = add64(x_35577, x_35578);\n                        prefix_35561 = defunc_1_op_res_35579;\n                    }\n                    mem_fence_local();\n                    readOffset_35563 = ((__local\n                                         int32_t *) local_mem_35533)[(int64_t) 0];\n                }\n            }\n            if (local_tid_35525 == 0) {\n                int64_t x_35580 = prefix_35561;\n                int64_t x_35581 = acc_35554;\n                int64_t defunc_1_op_res_35582 = add64(x_35580, x_35581);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_35522)[dynamic_id_35541] =\n                    defunc_1_op_res_35582;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35518)[dynamic_id_35541] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_35533)[squot64(warp_byte_offset_35531,\n                                                      (int64_t) 8)] =\n                    prefix_35561;\n                acc_35554 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_35541 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_35561 = ((__local\n                             int64_t *) local_mem_35533)[squot64(warp_byte_offset_35531,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // D",
            "istribute results\n    {\n        int64_t x_35583;\n        int64_t x_35584;\n        int64_t x_35586;\n        \n        x_35586 = prefix_35561;\n        \n        int64_t x_35587;\n        \n        x_35587 = acc_35554;\n        \n        int64_t defunc_1_op_res_35588;\n        \n        defunc_1_op_res_35588 = add64(x_35586, x_35587);\n        x_35583 = defunc_1_op_res_35588;\n        for (int64_t i_35589 = 0; i_35589 < (int64_t) 9; i_35589++) {\n            x_35584 = private_mem_35543[i_35589];\n            \n            int64_t defunc_1_op_res_35585;\n            \n            defunc_1_op_res_35585 = add64(x_35583, x_35584);\n            private_mem_35543[i_35589] = defunc_1_op_res_35585;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35590 = 0; i_35590 < (int64_t) 9; i_35590++) {\n            int64_t sharedIdx_35591 = sext_i32_i64(local_tid_35525 * 9) +\n                    i_35590;\n            \n            ((__local int64_t *) local_mem_35533)[sharedIdx_35591] =\n                private_mem_35543[i_35590];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35592 = 0; i_35592 < (int64_t) 9; i_35592++) {\n            int32_t sharedIdx_35593 = local_tid_35525 +\n                    sext_i64_i32(segscan_group_sizze_31373 * i_35592);\n            \n            private_mem_35543[i_35592] = ((__local\n                                           int64_t *) local_mem_35533)[sext_i32_i64(sharedIdx_35593)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_35594 = 0; i_35594 < (int64_t) 9; i_35594++) {\n            int64_t gtid_31377 = blockOff_35542 + segscan_group_sizze_31373 *\n                    i_35594 + sext_i32_i64(local_tid_35525);\n            \n            if (slt64(gtid_31377, num_segments_29900)) {\n                ((__global int64_t *) mem_32220)[gtid_31377] =\n                    private_mem_35543[i_35594];\n            }\n      ",
            "  }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_35541 == sdiv_up64(num_segments_29900,\n                                          segscan_group_sizze_31373 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_35516)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31373\n}\n__kernel void clusterPointszisegscan_31392(__global int *global_failure,\n                                           uint local_mem_35620_backing_offset_0,\n                                           int64_t num_segments_29961, __global\n                                           unsigned char *mem_32222, __global\n                                           unsigned char *mem_32226, __global\n                                           unsigned char *clusterPointsziid_counter_mem_35603,\n                                           __global\n                                           unsigned char *status_flags_mem_35605,\n                                           __global\n                                           unsigned char *aggregates_mem_35607,\n                                           __global\n                                           unsigned char *incprefixes_mem_35609)\n{\n    #define segscan_group_sizze_31387 (clusterPointszisegscan_group_sizze_31386)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_35620_backing_0 =\n                  &shared_mem[local_mem_35620_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35611;\n    int32_t local_tid_35612;\n    int64_t group_sizze_35615;\n    int32_t wave_sizze_35614;\n    int32_t group_tid_35613;\n    \n    global_tid_35611 = get_global_id(0);\n    local_tid_35612 = get_local_id(0);\n    group_sizze_35615 = get_local_size(0);\n    wave_sizze_35614 = LOCKSTEP_",
            "WIDTH;\n    group_tid_35613 = get_group_id(0);\n    \n    int32_t phys_tid_31392;\n    \n    phys_tid_31392 = global_tid_35611;\n    \n    int64_t byte_offsets_35616;\n    \n    byte_offsets_35616 = (int64_t) 0;\n    \n    int64_t byte_offsets_35617;\n    \n    byte_offsets_35617 = segscan_group_sizze_31387 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_35618;\n    \n    warp_byte_offset_35618 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_35619;\n    \n    warp_byte_offset_35619 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_35620;\n    \n    local_mem_35620 = (__local char *) local_mem_35620_backing_0;\n    \n    int64_t trans_arr_len_35621;\n    \n    trans_arr_len_35621 = (int64_t) 9 * segscan_group_sizze_31387;\n    \n    int32_t dynamic_id_35628;\n    \n    if (local_tid_35612 == 0) {\n        dynamic_id_35628 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_35603)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_35620)[(int64_t) 0] = dynamic_id_35628;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_35628 = ((__local int32_t *) local_mem_35620)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_35629;\n    \n    blockOff_35629 = sext_i32_i64(dynamic_id_35628) * (int64_t) 9 *\n        segscan_group_sizze_31387;\n    \n    int64_t private_mem_35630[9];\n    \n    // Load and map\n    {\n        for (int64_t i_35632 = 0; i_35632 < (int64_t) 9; i_35632++) {\n            int64_t gtid_31391 = blockOff_35629 +\n                    sext_i32_i64(local_tid_35612) + i_35632 *\n                    segscan_group_sizze_31387;\n            \n            if (slt64(gtid_31391, num_segments_29961)) {\n                int64_t x_29982 = ((__global int64_t *) mem_32222)[gtid_31391];\n                \n                private_mem_35630[i_35632] = x_29982;\n            } else {\n                privat",
            "e_mem_35630[i_35632] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35633 = 0; i_35633 < (int64_t) 9; i_35633++) {\n            int64_t sharedIdx_35634 = sext_i32_i64(local_tid_35612) + i_35633 *\n                    segscan_group_sizze_31387;\n            \n            ((__local int64_t *) local_mem_35620)[sharedIdx_35634] =\n                private_mem_35630[i_35633];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_35635 = 0; i_35635 < 9; i_35635++) {\n            int32_t sharedIdx_35636 = local_tid_35612 * 9 + i_35635;\n            \n            private_mem_35630[sext_i32_i64(i_35635)] = ((__local\n                                                         int64_t *) local_mem_35620)[sext_i32_i64(sharedIdx_35636)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_35637 = 0; i_35637 < (int64_t) 8; i_35637++) {\n            int64_t x_29979;\n            int64_t x_29980;\n            \n            x_29979 = private_mem_35630[i_35637];\n            x_29980 = private_mem_35630[i_35637 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_29981;\n            \n            defunc_1_op_res_29981 = add64(x_29979, x_29980);\n            private_mem_35630[i_35637 + (int64_t) 1] = defunc_1_op_res_29981;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35612)] =\n            private_mem_35630[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_35641;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_35638;\n        int64_t x_35639;\n        int64_t x_35642;\n        int64_t x_35643;\n        bool ltid_in_bounds_35645;\n        \n        ltid_in_bounds_35645",
            " = slt64(sext_i32_i64(local_tid_35612),\n                                     segscan_group_sizze_31387);\n        \n        int32_t skip_threads_35646;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_35645) {\n                x_35639 = ((volatile __local\n                            int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_35612)];\n                if ((local_tid_35612 - squot32(local_tid_35612, 32) * 32) ==\n                    0) {\n                    x_35638 = x_35639;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_35646 = 1;\n            while (slt32(skip_threads_35646, 32)) {\n                if (sle32(skip_threads_35646, local_tid_35612 -\n                          squot32(local_tid_35612, 32) * 32) &&\n                    ltid_in_bounds_35645) {\n                    // read operands\n                    {\n                        x_35638 = ((volatile __local\n                                    int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_35612) -\n                                                                 sext_i32_i64(skip_threads_35646))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_35640 = add64(x_35638, x_35639);\n                        \n                        x_35638 = defunc_1_op_res_35640;\n                    }\n                }\n                if (sle32(wave_sizze_35614, skip_threads_35646)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_thr",
            "eads_35646, local_tid_35612 -\n                          squot32(local_tid_35612, 32) * 32) &&\n                    ltid_in_bounds_35645) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_35612)] =\n                            x_35638;\n                        x_35639 = x_35638;\n                    }\n                }\n                if (sle32(wave_sizze_35614, skip_threads_35646)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_35646 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_35612 - squot32(local_tid_35612, 32) * 32) == 31 &&\n                ltid_in_bounds_35645) {\n                ((volatile __local\n                  int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_35612,\n                                                                   32))] =\n                    x_35638;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_35647;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_35612, 32) == 0 && ltid_in_bounds_35645) {\n                    x_35643 = ((volatile __local\n                                int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                                    (int64_t) 8) +\n                    ",
            "                                        sext_i32_i64(local_tid_35612)];\n                    if ((local_tid_35612 - squot32(local_tid_35612, 32) * 32) ==\n                        0) {\n                        x_35642 = x_35643;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_35647 = 1;\n                while (slt32(skip_threads_35647, 32)) {\n                    if (sle32(skip_threads_35647, local_tid_35612 -\n                              squot32(local_tid_35612, 32) * 32) &&\n                        (squot32(local_tid_35612, 32) == 0 &&\n                         ltid_in_bounds_35645)) {\n                        // read operands\n                        {\n                            x_35642 = ((volatile __local\n                                        int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_35612) -\n                                                                     sext_i32_i64(skip_threads_35647))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_35644 = add64(x_35642,\n                                                                  x_35643);\n                            \n                            x_35642 = defunc_1_op_res_35644;\n                        }\n                    }\n                    if (sle32(wave_sizze_35614, skip_threads_35647)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_35647, local_tid_35612 -\n                              squot32(local_tid_35612, 32) * 32) &&\n                        (squot32(local_tid_35612, 32) == 0 &&\n                         ltid_in_bounds_35645)) {\n     ",
            "                   // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_35612)] =\n                                x_35642;\n                            x_35643 = x_35642;\n                        }\n                    }\n                    if (sle32(wave_sizze_35614, skip_threads_35647)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_35647 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_35612, 32) == 0 || !ltid_in_bounds_35645)) {\n                // read operands\n                {\n                    x_35639 = x_35638;\n                    x_35638 = ((__local\n                                int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_35612,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_35640 = add64(x_35638, x_35639);\n                    \n                    x_35638 = defunc_1_op_res_35640;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                          (int64_t) 8) +\n                                      ",
            "            sext_i32_i64(local_tid_35612)] =\n                        x_35638;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_35612, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35612)] =\n                    x_35639;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_35612 == 0) {\n            acc_35641 = ((__local\n                          int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31387 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_35641 = ((__local\n                          int64_t *) local_mem_35620)[squot64(byte_offsets_35616,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_35612) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_35648;\n    \n    prefix_35648 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_35628 == (int64_t) 0 && local_tid_35612 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_35609)[dynamic_id_35628] = acc_35641;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_35605)[dynamic_id_35628] = (int8_t) 2;\n            acc_35641 = (int64_t) 0;\n        }\n        if (!(dynamic_id_35628 == (int64_t) 0) && slt32(local_tid_35612,\n     ",
            "                                                   wave_sizze_35614)) {\n            if (local_tid_35612 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_35607)[dynamic_id_35628] =\n                    acc_35641;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35605)[dynamic_id_35628] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_35620)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_35605)[dynamic_id_35628 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_35649;\n            \n            status_35649 = ((__local int8_t *) local_mem_35620)[(int64_t) 0];\n            if (status_35649 == (int8_t) 2) {\n                if (local_tid_35612 == 0) {\n                    prefix_35648 = ((volatile __global\n                                     int64_t *) incprefixes_mem_35609)[dynamic_id_35628 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_35650 = dynamic_id_35628 -\n                        sext_i32_i64(wave_sizze_35614);\n                \n                while (slt32(wave_sizze_35614 * -1, readOffset_35650)) {\n                    int32_t read_i_35651 = readOffset_35650 + local_tid_35612;\n                    int64_t aggr_35652 = (int64_t) 0;\n                    int8_t flag_35653 = (int8_t) 0;\n                    int8_t used_35654 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_35651)) {\n                        flag_35653 = ((volatile __global\n                                       int8_t *) status_flags_mem_35605)[sext_i32_i64(read_i_35651)];\n                        if (flag_35653",
            " == (int8_t) 2) {\n                            aggr_35652 = ((volatile __global\n                                           int64_t *) incprefixes_mem_35609)[sext_i32_i64(read_i_35651)];\n                        } else {\n                            if (flag_35653 == (int8_t) 1) {\n                                aggr_35652 = ((volatile __global\n                                               int64_t *) aggregates_mem_35607)[sext_i32_i64(read_i_35651)];\n                                used_35654 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_35620)[squot64(warp_byte_offset_35618,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35612)] =\n                        aggr_35652;\n                    \n                    int8_t tmp_35655;\n                    \n                    tmp_35655 = flag_35653 | used_35654 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_35620)[sext_i32_i64(local_tid_35612)] =\n                        tmp_35655;\n                    mem_fence_local();\n                    flag_35653 = ((volatile __local\n                                   int8_t *) local_mem_35620)[sext_i32_i64(wave_sizze_35614) -\n                                                              (int64_t) 1];\n                    if (local_tid_35612 == 0) {\n                        if (!(flag_35653 == (int8_t) 2)) {\n                            int64_t x_35656 = (int64_t) 0;\n                            int64_t x_35657;\n                            int8_t flag1_35659;\n                            \n                            flag1_35659 = (int8_t) 0;\n                            \n                            int8_t flag2_35660;\n                            int8_t used1_35661;\n                            \n                            used1_35661 = (int8_t) 0;",
            "\n                            \n                            int8_t used2_35662;\n                            \n                            for (int32_t i_35663 = 0; i_35663 <\n                                 wave_sizze_35614; i_35663++) {\n                                flag2_35660 = ((__local\n                                                int8_t *) local_mem_35620)[sext_i32_i64(i_35663)];\n                                used2_35662 = lshr8(flag2_35660, (int8_t) 2);\n                                flag2_35660 = flag2_35660 & (int8_t) 3;\n                                x_35657 = ((__local\n                                            int64_t *) local_mem_35620)[squot64(warp_byte_offset_35618,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_35663)];\n                                if (!(flag2_35660 == (int8_t) 1)) {\n                                    flag1_35659 = flag2_35660;\n                                    used1_35661 = used2_35662;\n                                    x_35656 = x_35657;\n                                } else {\n                                    used1_35661 += used2_35662;\n                                    \n                                    int64_t defunc_1_op_res_35658;\n                                    \n                                    defunc_1_op_res_35658 = add64(x_35656,\n                                                                  x_35657);\n                                    x_35656 = defunc_1_op_res_35658;\n                                }\n                            }\n                            flag_35653 = flag1_35659;\n                            used_35654 = used1_35661;\n                            aggr_35652 = x_35656;\n                        } else {\n                            aggr_35652 = ((__local\n                                           int64_t *) local_mem_35620)[squot64(warp_byte_off",
            "set_35618,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_35614) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_35653 == (int8_t) 2) {\n                            readOffset_35650 = wave_sizze_35614 * -1;\n                        } else {\n                            readOffset_35650 -= zext_i8_i32(used_35654);\n                        }\n                        ((__local int32_t *) local_mem_35620)[(int64_t) 0] =\n                            readOffset_35650;\n                        \n                        int64_t x_35664;\n                        \n                        x_35664 = aggr_35652;\n                        \n                        int64_t x_35665;\n                        \n                        x_35665 = prefix_35648;\n                        \n                        int64_t defunc_1_op_res_35666;\n                        \n                        defunc_1_op_res_35666 = add64(x_35664, x_35665);\n                        prefix_35648 = defunc_1_op_res_35666;\n                    }\n                    mem_fence_local();\n                    readOffset_35650 = ((__local\n                                         int32_t *) local_mem_35620)[(int64_t) 0];\n                }\n            }\n            if (local_tid_35612 == 0) {\n                int64_t x_35667 = prefix_35648;\n                int64_t x_35668 = acc_35641;\n                int64_t defunc_1_op_res_35669 = add64(x_35667, x_35668);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_35609)[dynamic_id_35628] =\n                    defunc_1_op_res_35669;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35605)[dynamic_id_35628] =\n                    (int8_t) 2;\n     ",
            "           ((__local\n                  int64_t *) local_mem_35620)[squot64(warp_byte_offset_35618,\n                                                      (int64_t) 8)] =\n                    prefix_35648;\n                acc_35641 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_35628 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_35648 = ((__local\n                             int64_t *) local_mem_35620)[squot64(warp_byte_offset_35618,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_35670;\n        int64_t x_35671;\n        int64_t x_35673;\n        \n        x_35673 = prefix_35648;\n        \n        int64_t x_35674;\n        \n        x_35674 = acc_35641;\n        \n        int64_t defunc_1_op_res_35675;\n        \n        defunc_1_op_res_35675 = add64(x_35673, x_35674);\n        x_35670 = defunc_1_op_res_35675;\n        for (int64_t i_35676 = 0; i_35676 < (int64_t) 9; i_35676++) {\n            x_35671 = private_mem_35630[i_35676];\n            \n            int64_t defunc_1_op_res_35672;\n            \n            defunc_1_op_res_35672 = add64(x_35670, x_35671);\n            private_mem_35630[i_35676] = defunc_1_op_res_35672;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35677 = 0; i_35677 < (int64_t) 9; i_35677++) {\n            int64_t sharedIdx_35678 = sext_i32_i64(local_tid_35612 * 9) +\n                    i_35677;\n            \n            ((__local int64_t *) local_mem_35620)[sharedIdx_35678] =\n                private_mem_35630[i_35677];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35679 = 0; i_35679 < (int64_t) 9; i_35679++) {\n            int32_t sharedIdx_35680 = local_tid_35612 +\n                    sext_i64_i32(segscan_group_sizze_31387 * i_35679);\n            \n            private_mem_35630[i_35679] = ",
            "((__local\n                                           int64_t *) local_mem_35620)[sext_i32_i64(sharedIdx_35680)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_35681 = 0; i_35681 < (int64_t) 9; i_35681++) {\n            int64_t gtid_31391 = blockOff_35629 + segscan_group_sizze_31387 *\n                    i_35681 + sext_i32_i64(local_tid_35612);\n            \n            if (slt64(gtid_31391, num_segments_29961)) {\n                ((__global int64_t *) mem_32226)[gtid_31391] =\n                    private_mem_35630[i_35681];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_35628 == sdiv_up64(num_segments_29961,\n                                          segscan_group_sizze_31387 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_35603)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31387\n}\n__kernel void clusterPointszisegscan_31446(__global int *global_failure,\n                                           uint local_mem_35835_backing_offset_0,\n                                           int64_t n_28846,\n                                           int64_t i32_res_30043, __global\n                                           unsigned char *clusterWith_res_mem_32285,\n                                           __global unsigned char *mem_32288,\n                                           __global unsigned char *mem_32290,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_35818,\n                                           __global\n                                           unsigned char *status_flags_mem_35820,\n                                           __global\n                                           u",
            "nsigned char *aggregates_mem_35822,\n                                           __global\n                                           unsigned char *incprefixes_mem_35824)\n{\n    #define segscan_group_sizze_31441 (clusterPointszisegscan_group_sizze_31440)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_35835_backing_0 =\n                  &shared_mem[local_mem_35835_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_35826;\n    int32_t local_tid_35827;\n    int64_t group_sizze_35830;\n    int32_t wave_sizze_35829;\n    int32_t group_tid_35828;\n    \n    global_tid_35826 = get_global_id(0);\n    local_tid_35827 = get_local_id(0);\n    group_sizze_35830 = get_local_size(0);\n    wave_sizze_35829 = LOCKSTEP_WIDTH;\n    group_tid_35828 = get_group_id(0);\n    \n    int32_t phys_tid_31446;\n    \n    phys_tid_31446 = global_tid_35826;\n    \n    int64_t byte_offsets_35831;\n    \n    byte_offsets_35831 = (int64_t) 0;\n    \n    int64_t byte_offsets_35832;\n    \n    byte_offsets_35832 = segscan_group_sizze_31441 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_35833;\n    \n    warp_byte_offset_35833 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_35834;\n    \n    warp_byte_offset_35834 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_35835;\n    \n    local_mem_35835 = (__local char *) local_mem_35835_backing_0;\n    \n    int64_t trans_arr_len_35836;\n    \n    trans_arr_len_35836 = (int64_t) 9 * segscan_group_sizze_31441;\n    \n    int32_t dynamic_id_35843;\n    \n    if (local_tid_35827 == 0) {\n        dynamic_id_35843 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_35818)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_35835)[(int64_t) 0] = dynamic_id_35843;\n    }\n    barrier(CLK_LOCAL_M",
            "EM_FENCE);\n    dynamic_id_35843 = ((__local int32_t *) local_mem_35835)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_35844;\n    \n    blockOff_35844 = sext_i32_i64(dynamic_id_35843) * (int64_t) 9 *\n        segscan_group_sizze_31441;\n    \n    int64_t private_mem_35845[9];\n    \n    // Load and map\n    {\n        for (int64_t i_35847 = 0; i_35847 < (int64_t) 9; i_35847++) {\n            int64_t gtid_31445 = blockOff_35844 +\n                    sext_i32_i64(local_tid_35827) + i_35847 *\n                    segscan_group_sizze_31441;\n            \n            if (slt64(gtid_31445, n_28846)) {\n                int64_t x_30049 = ((__global\n                                    int64_t *) clusterWith_res_mem_32285)[gtid_31445];\n                bool defunc_0_p_res_30050 = slt64(i32_res_30043, x_30049);\n                bool cond_neg_30051 = !defunc_0_p_res_30050;\n                int64_t defunc_1_lifted_lambda_res_30052 =\n                        btoi_bool_i64(cond_neg_30051);\n                bool is_i_30053 = defunc_1_lifted_lambda_res_30052 ==\n                     (int64_t) 0;\n                bool cond_neg_30054 = !is_i_30053;\n                int64_t part_res_30055 = btoi_bool_i64(cond_neg_30054);\n                int64_t part_res_30056 = btoi_bool_i64(is_i_30053);\n                \n                ((__global int64_t *) mem_32290)[gtid_31445] = part_res_30055;\n                private_mem_35845[i_35847] = part_res_30056;\n            } else {\n                private_mem_35845[i_35847] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35848 = 0; i_35848 < (int64_t) 9; i_35848++) {\n            int64_t sharedIdx_35849 = sext_i32_i64(local_tid_35827) + i_35848 *\n                    segscan_group_sizze_31441;\n            \n            ((__local int64_t *) local_mem_35835)[sharedIdx_35849] =\n                private_mem_35845[i_35848];\n        }\n        barrier(CLK_LOCAL_MEM_FE",
            "NCE);\n        for (int32_t i_35850 = 0; i_35850 < 9; i_35850++) {\n            int32_t sharedIdx_35851 = local_tid_35827 * 9 + i_35850;\n            \n            private_mem_35845[sext_i32_i64(i_35850)] = ((__local\n                                                         int64_t *) local_mem_35835)[sext_i32_i64(sharedIdx_35851)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_35852 = 0; i_35852 < (int64_t) 8; i_35852++) {\n            int64_t x_30046;\n            int64_t y_30047;\n            \n            x_30046 = private_mem_35845[i_35852];\n            y_30047 = private_mem_35845[i_35852 + (int64_t) 1];\n            \n            int64_t zz_30048;\n            \n            zz_30048 = x_30046 + y_30047;\n            private_mem_35845[i_35852 + (int64_t) 1] = zz_30048;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35827)] =\n            private_mem_35845[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_35856;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_35853;\n        int64_t y_35854;\n        int64_t x_35857;\n        int64_t y_35858;\n        bool ltid_in_bounds_35860;\n        \n        ltid_in_bounds_35860 = slt64(sext_i32_i64(local_tid_35827),\n                                     segscan_group_sizze_31441);\n        \n        int32_t skip_threads_35861;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_35860) {\n                y_35854 = ((volatile __local\n                            int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_35827)];\n    ",
            "            if ((local_tid_35827 - squot32(local_tid_35827, 32) * 32) ==\n                    0) {\n                    x_35853 = y_35854;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_35861 = 1;\n            while (slt32(skip_threads_35861, 32)) {\n                if (sle32(skip_threads_35861, local_tid_35827 -\n                          squot32(local_tid_35827, 32) * 32) &&\n                    ltid_in_bounds_35860) {\n                    // read operands\n                    {\n                        x_35853 = ((volatile __local\n                                    int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_35827) -\n                                                                 sext_i32_i64(skip_threads_35861))];\n                    }\n                    // perform operation\n                    {\n                        int64_t zz_35855 = x_35853 + y_35854;\n                        \n                        x_35853 = zz_35855;\n                    }\n                }\n                if (sle32(wave_sizze_35829, skip_threads_35861)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_35861, local_tid_35827 -\n                          squot32(local_tid_35827, 32) * 32) &&\n                    ltid_in_bounds_35860) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_35827)] =\n                            x_35853;\n                        y_35854 = x_35853;\n                ",
            "    }\n                }\n                if (sle32(wave_sizze_35829, skip_threads_35861)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_35861 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_35827 - squot32(local_tid_35827, 32) * 32) == 31 &&\n                ltid_in_bounds_35860) {\n                ((volatile __local\n                  int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_35827,\n                                                                   32))] =\n                    x_35853;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_35862;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_35827, 32) == 0 && ltid_in_bounds_35860) {\n                    y_35858 = ((volatile __local\n                                int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_35827)];\n                    if ((local_tid_35827 - squot32(local_tid_35827, 32) * 32) ==\n                        0) {\n                        x_35857 = y_35858;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_35862 = 1;\n                while (slt32(skip_threads_35862, 32)) {\n                    if (sle32(skip_threads_35862, local_tid_35827 -\n                              squot32(local_tid_35827, 32) * 32)",
            " &&\n                        (squot32(local_tid_35827, 32) == 0 &&\n                         ltid_in_bounds_35860)) {\n                        // read operands\n                        {\n                            x_35857 = ((volatile __local\n                                        int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_35827) -\n                                                                     sext_i32_i64(skip_threads_35862))];\n                        }\n                        // perform operation\n                        {\n                            int64_t zz_35859 = x_35857 + y_35858;\n                            \n                            x_35857 = zz_35859;\n                        }\n                    }\n                    if (sle32(wave_sizze_35829, skip_threads_35862)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_35862, local_tid_35827 -\n                              squot32(local_tid_35827, 32) * 32) &&\n                        (squot32(local_tid_35827, 32) == 0 &&\n                         ltid_in_bounds_35860)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_35827)] =\n                                x_35857;\n                            y_35858 = x_35857;\n                        }\n                    }\n                    if (sle32(wave_sizze_35829, skip_threads_35862)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threa",
            "ds_35862 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_35827, 32) == 0 || !ltid_in_bounds_35860)) {\n                // read operands\n                {\n                    y_35854 = x_35853;\n                    x_35853 = ((__local\n                                int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_35827,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t zz_35855 = x_35853 + y_35854;\n                    \n                    x_35853 = zz_35855;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35827)] =\n                        x_35853;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_35827, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35827)] =\n                    y_35854;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_35827 == 0) {\n            acc_35856 = ((_",
            "_local\n                          int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31441 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_35856 = ((__local\n                          int64_t *) local_mem_35835)[squot64(byte_offsets_35831,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_35827) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_35863;\n    \n    prefix_35863 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_35843 == (int64_t) 0 && local_tid_35827 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_35824)[dynamic_id_35843] = acc_35856;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_35820)[dynamic_id_35843] = (int8_t) 2;\n            acc_35856 = (int64_t) 0;\n        }\n        if (!(dynamic_id_35843 == (int64_t) 0) && slt32(local_tid_35827,\n                                                        wave_sizze_35829)) {\n            if (local_tid_35827 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_35822)[dynamic_id_35843] =\n                    acc_35856;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35820)[dynamic_id_35843] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_35835)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_35820)[dynamic_id_35843 -\n                                                                                   ",
            "                     (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_35864;\n            \n            status_35864 = ((__local int8_t *) local_mem_35835)[(int64_t) 0];\n            if (status_35864 == (int8_t) 2) {\n                if (local_tid_35827 == 0) {\n                    prefix_35863 = ((volatile __global\n                                     int64_t *) incprefixes_mem_35824)[dynamic_id_35843 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_35865 = dynamic_id_35843 -\n                        sext_i32_i64(wave_sizze_35829);\n                \n                while (slt32(wave_sizze_35829 * -1, readOffset_35865)) {\n                    int32_t read_i_35866 = readOffset_35865 + local_tid_35827;\n                    int64_t aggr_35867 = (int64_t) 0;\n                    int8_t flag_35868 = (int8_t) 0;\n                    int8_t used_35869 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_35866)) {\n                        flag_35868 = ((volatile __global\n                                       int8_t *) status_flags_mem_35820)[sext_i32_i64(read_i_35866)];\n                        if (flag_35868 == (int8_t) 2) {\n                            aggr_35867 = ((volatile __global\n                                           int64_t *) incprefixes_mem_35824)[sext_i32_i64(read_i_35866)];\n                        } else {\n                            if (flag_35868 == (int8_t) 1) {\n                                aggr_35867 = ((volatile __global\n                                               int64_t *) aggregates_mem_35822)[sext_i32_i64(read_i_35866)];\n                                used_35869 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_35835)[squot64(warp_byte_offset_35833,\n            ",
            "                                              (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35827)] =\n                        aggr_35867;\n                    \n                    int8_t tmp_35870;\n                    \n                    tmp_35870 = flag_35868 | used_35869 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_35835)[sext_i32_i64(local_tid_35827)] =\n                        tmp_35870;\n                    mem_fence_local();\n                    flag_35868 = ((volatile __local\n                                   int8_t *) local_mem_35835)[sext_i32_i64(wave_sizze_35829) -\n                                                              (int64_t) 1];\n                    if (local_tid_35827 == 0) {\n                        if (!(flag_35868 == (int8_t) 2)) {\n                            int64_t x_35871 = (int64_t) 0;\n                            int64_t y_35872;\n                            int8_t flag1_35874;\n                            \n                            flag1_35874 = (int8_t) 0;\n                            \n                            int8_t flag2_35875;\n                            int8_t used1_35876;\n                            \n                            used1_35876 = (int8_t) 0;\n                            \n                            int8_t used2_35877;\n                            \n                            for (int32_t i_35878 = 0; i_35878 <\n                                 wave_sizze_35829; i_35878++) {\n                                flag2_35875 = ((__local\n                                                int8_t *) local_mem_35835)[sext_i32_i64(i_35878)];\n                                used2_35877 = lshr8(flag2_35875, (int8_t) 2);\n                                flag2_35875 = flag2_35875 & (int8_t) 3;\n                                y_35872 = ((__local\n                                            int64_t *) local_mem_35835)[squot64(warp_byte_offset_35833,\n               ",
            "                                                                 (int64_t) 8) +\n                                                                        sext_i32_i64(i_35878)];\n                                if (!(flag2_35875 == (int8_t) 1)) {\n                                    flag1_35874 = flag2_35875;\n                                    used1_35876 = used2_35877;\n                                    x_35871 = y_35872;\n                                } else {\n                                    used1_35876 += used2_35877;\n                                    \n                                    int64_t zz_35873;\n                                    \n                                    zz_35873 = x_35871 + y_35872;\n                                    x_35871 = zz_35873;\n                                }\n                            }\n                            flag_35868 = flag1_35874;\n                            used_35869 = used1_35876;\n                            aggr_35867 = x_35871;\n                        } else {\n                            aggr_35867 = ((__local\n                                           int64_t *) local_mem_35835)[squot64(warp_byte_offset_35833,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_35829) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_35868 == (int8_t) 2) {\n                            readOffset_35865 = wave_sizze_35829 * -1;\n                        } else {\n                            readOffset_35865 -= zext_i8_i32(used_35869);\n                        }\n                        ((__local int32_t *) local_mem_35835)[(int64_t) 0] =\n                            readOffset_35865;\n                        \n                        int64_t x_35879;\n                        \n                        x_3",
            "5879 = aggr_35867;\n                        \n                        int64_t y_35880;\n                        \n                        y_35880 = prefix_35863;\n                        \n                        int64_t zz_35881;\n                        \n                        zz_35881 = x_35879 + y_35880;\n                        prefix_35863 = zz_35881;\n                    }\n                    mem_fence_local();\n                    readOffset_35865 = ((__local\n                                         int32_t *) local_mem_35835)[(int64_t) 0];\n                }\n            }\n            if (local_tid_35827 == 0) {\n                int64_t x_35882 = prefix_35863;\n                int64_t y_35883 = acc_35856;\n                int64_t zz_35884 = x_35882 + y_35883;\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_35824)[dynamic_id_35843] =\n                    zz_35884;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35820)[dynamic_id_35843] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_35835)[squot64(warp_byte_offset_35833,\n                                                      (int64_t) 8)] =\n                    prefix_35863;\n                acc_35856 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_35843 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_35863 = ((__local\n                             int64_t *) local_mem_35835)[squot64(warp_byte_offset_35833,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_35885;\n        int64_t y_35886;\n        int64_t x_35888;\n        \n        x_35888 = prefix_35863;\n        \n        int64_t y_35889;\n        \n        y_35889 = acc_35856;\n        \n        int64_t zz_35890;\n        \n        zz_",
            "35890 = x_35888 + y_35889;\n        x_35885 = zz_35890;\n        for (int64_t i_35891 = 0; i_35891 < (int64_t) 9; i_35891++) {\n            y_35886 = private_mem_35845[i_35891];\n            \n            int64_t zz_35887;\n            \n            zz_35887 = x_35885 + y_35886;\n            private_mem_35845[i_35891] = zz_35887;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35892 = 0; i_35892 < (int64_t) 9; i_35892++) {\n            int64_t sharedIdx_35893 = sext_i32_i64(local_tid_35827 * 9) +\n                    i_35892;\n            \n            ((__local int64_t *) local_mem_35835)[sharedIdx_35893] =\n                private_mem_35845[i_35892];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35894 = 0; i_35894 < (int64_t) 9; i_35894++) {\n            int32_t sharedIdx_35895 = local_tid_35827 +\n                    sext_i64_i32(segscan_group_sizze_31441 * i_35894);\n            \n            private_mem_35845[i_35894] = ((__local\n                                           int64_t *) local_mem_35835)[sext_i32_i64(sharedIdx_35895)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_35896 = 0; i_35896 < (int64_t) 9; i_35896++) {\n            int64_t gtid_31445 = blockOff_35844 + segscan_group_sizze_31441 *\n                    i_35896 + sext_i32_i64(local_tid_35827);\n            \n            if (slt64(gtid_31445, n_28846)) {\n                ((__global int64_t *) mem_32288)[gtid_31445] =\n                    private_mem_35845[i_35896];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_35843 == sdiv_up64(n_28846, segscan_group_sizze_31441 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_35818)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n",
            "    #undef segscan_group_sizze_31441\n}\n__kernel void clusterPointszisegscan_31460(__global int *global_failure,\n                                           int failure_is_an_option, __global\n                                           int64_t *global_failure_args,\n                                           uint local_mem_35923_backing_offset_0,\n                                           int64_t n_28846,\n                                           int64_t partition_sizze_30057,\n                                           __global\n                                           unsigned char *clusterWith_res_mem_32285,\n                                           __global unsigned char *mem_32292,\n                                           __global unsigned char *mem_32300,\n                                           __global unsigned char *mem_32302,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_35906,\n                                           __global\n                                           unsigned char *status_flags_mem_35908,\n                                           __global\n                                           unsigned char *aggregates_mem_35910,\n                                           __global\n                                           unsigned char *incprefixes_mem_35912)\n{\n    #define segscan_group_sizze_31455 (clusterPointszisegscan_group_sizze_31454)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_35923_backing_0 =\n                  &shared_mem[local_mem_35923_backing_offset_0];\n    volatile __local bool local_failure;\n    \n    if (failure_is_an_option) {\n        int failed = *global_failure >= 0;\n        \n        if (failed)\n            return;\n    }\n    local_failure = false;\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t global_tid_35914;\n    int32_t local_tid_35915;\n    int64_t g",
            "roup_sizze_35918;\n    int32_t wave_sizze_35917;\n    int32_t group_tid_35916;\n    \n    global_tid_35914 = get_global_id(0);\n    local_tid_35915 = get_local_id(0);\n    group_sizze_35918 = get_local_size(0);\n    wave_sizze_35917 = LOCKSTEP_WIDTH;\n    group_tid_35916 = get_group_id(0);\n    \n    int32_t phys_tid_31460;\n    \n    phys_tid_31460 = global_tid_35914;\n    \n    int64_t byte_offsets_35919;\n    \n    byte_offsets_35919 = (int64_t) 0;\n    \n    int64_t byte_offsets_35920;\n    \n    byte_offsets_35920 = segscan_group_sizze_31455 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_35921;\n    \n    warp_byte_offset_35921 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_35922;\n    \n    warp_byte_offset_35922 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_35923;\n    \n    local_mem_35923 = (__local char *) local_mem_35923_backing_0;\n    \n    int64_t trans_arr_len_35924;\n    \n    trans_arr_len_35924 = (int64_t) 9 * segscan_group_sizze_31455;\n    \n    int32_t dynamic_id_35931;\n    \n    if (local_tid_35915 == 0) {\n        dynamic_id_35931 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_35906)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_35923)[(int64_t) 0] = dynamic_id_35931;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_35931 = ((__local int32_t *) local_mem_35923)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_35932;\n    \n    blockOff_35932 = sext_i32_i64(dynamic_id_35931) * (int64_t) 9 *\n        segscan_group_sizze_31455;\n    \n    int64_t private_mem_35933[9];\n    \n    // Load and map\n    {\n        for (int64_t i_35935 = 0; i_35935 < (int64_t) 9; i_35935++) {\n            int64_t gtid_31459 = blockOff_35932 +\n                    sext_i32_i64(local_tid_35915) + i_35935 *\n                    segscan_group_sizze_31455;\n            \n            if",
            " (slt64(gtid_31459, partition_sizze_30057)) {\n                int32_t x_30091 = ((__global int32_t *) mem_32292)[gtid_31459];\n                int64_t v_30092 = sext_i32_i64(x_30091);\n                bool x_30093 = sle64((int64_t) 0, v_30092);\n                bool y_30094 = slt64(v_30092, n_28846);\n                bool bounds_check_30095 = x_30093 && y_30094;\n                bool index_certs_30096;\n                \n                if (!bounds_check_30095) {\n                    {\n                        if (atomic_cmpxchg_i32_global(global_failure, -1, 22) ==\n                            -1) {\n                            global_failure_args[0] = v_30092;\n                            global_failure_args[1] = n_28846;\n                            ;\n                        }\n                        local_failure = true;\n                        goto error_0;\n                    }\n                }\n                \n                int64_t defunc_0_f_res_30097 = ((__global\n                                                 int64_t *) clusterWith_res_mem_32285)[v_30092];\n                \n                ((__global int64_t *) mem_32302)[gtid_31459] =\n                    defunc_0_f_res_30097;\n                private_mem_35933[i_35935] = defunc_0_f_res_30097;\n            } else {\n                private_mem_35933[i_35935] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35936 = 0; i_35936 < (int64_t) 9; i_35936++) {\n            int64_t sharedIdx_35937 = sext_i32_i64(local_tid_35915) + i_35936 *\n                    segscan_group_sizze_31455;\n            \n            ((__local int64_t *) local_mem_35923)[sharedIdx_35937] =\n                private_mem_35933[i_35936];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_35938 = 0; i_35938 < 9; i_35938++) {\n            int32_t sharedIdx_35939 = local_tid_35915 * 9 + i_35938;\n            \n            private_mem_35933[sext_i32_i64",
            "(i_35938)] = ((__local\n                                                         int64_t *) local_mem_35923)[sext_i32_i64(sharedIdx_35939)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_35940 = 0; i_35940 < (int64_t) 8; i_35940++) {\n            int64_t x_30088;\n            int64_t x_30089;\n            \n            x_30088 = private_mem_35933[i_35940];\n            x_30089 = private_mem_35933[i_35940 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_30090;\n            \n            defunc_1_op_res_30090 = add64(x_30088, x_30089);\n            private_mem_35933[i_35940 + (int64_t) 1] = defunc_1_op_res_30090;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35915)] =\n            private_mem_35933[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_35944;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_35941;\n        int64_t x_35942;\n        int64_t x_35945;\n        int64_t x_35946;\n        bool ltid_in_bounds_35948;\n        \n        ltid_in_bounds_35948 = slt64(sext_i32_i64(local_tid_35915),\n                                     segscan_group_sizze_31455);\n        \n        int32_t skip_threads_35949;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_35948) {\n                x_35942 = ((volatile __local\n                            int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_35915)];\n                if ((local_tid_35915 - squot32(local_tid_35915, 32) * 32) ==\n                    0) {\n                    x_35941 = x_35942;\n        ",
            "        }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_35949 = 1;\n            while (slt32(skip_threads_35949, 32)) {\n                if (sle32(skip_threads_35949, local_tid_35915 -\n                          squot32(local_tid_35915, 32) * 32) &&\n                    ltid_in_bounds_35948) {\n                    // read operands\n                    {\n                        x_35941 = ((volatile __local\n                                    int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_35915) -\n                                                                 sext_i32_i64(skip_threads_35949))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_35943 = add64(x_35941, x_35942);\n                        \n                        x_35941 = defunc_1_op_res_35943;\n                    }\n                }\n                if (sle32(wave_sizze_35917, skip_threads_35949)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_35949, local_tid_35915 -\n                          squot32(local_tid_35915, 32) * 32) &&\n                    ltid_in_bounds_35948) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_35915)] =\n                            x_35941;\n                        x_35942 = x_35941;\n                    }\n                }\n                if (sle32(wave_sizze_35917, skip_threads_35949)) {\n                    ba",
            "rrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_35949 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_35915 - squot32(local_tid_35915, 32) * 32) == 31 &&\n                ltid_in_bounds_35948) {\n                ((volatile __local\n                  int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_35915,\n                                                                   32))] =\n                    x_35941;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_35950;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_35915, 32) == 0 && ltid_in_bounds_35948) {\n                    x_35946 = ((volatile __local\n                                int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_35915)];\n                    if ((local_tid_35915 - squot32(local_tid_35915, 32) * 32) ==\n                        0) {\n                        x_35945 = x_35946;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_35950 = 1;\n                while (slt32(skip_threads_35950, 32)) {\n                    if (sle32(skip_threads_35950, local_tid_35915 -\n                              squot32(local_tid_35915, 32) * 32) &&\n                        (squot32(local_tid_35915, 32) == 0 &&\n                         ltid_in_bounds_35948))",
            " {\n                        // read operands\n                        {\n                            x_35945 = ((volatile __local\n                                        int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_35915) -\n                                                                     sext_i32_i64(skip_threads_35950))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_35947 = add64(x_35945,\n                                                                  x_35946);\n                            \n                            x_35945 = defunc_1_op_res_35947;\n                        }\n                    }\n                    if (sle32(wave_sizze_35917, skip_threads_35950)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_35950, local_tid_35915 -\n                              squot32(local_tid_35915, 32) * 32) &&\n                        (squot32(local_tid_35915, 32) == 0 &&\n                         ltid_in_bounds_35948)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_35915)] =\n                                x_35945;\n                            x_35946 = x_35945;\n                        }\n                    }\n                    if (sle32(wave_sizze_35917, skip_threads_35950)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_35950 *= 2;\n",
            "                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_35915, 32) == 0 || !ltid_in_bounds_35948)) {\n                // read operands\n                {\n                    x_35942 = x_35941;\n                    x_35941 = ((__local\n                                int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_35915,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_35943 = add64(x_35941, x_35942);\n                    \n                    x_35941 = defunc_1_op_res_35943;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35915)] =\n                        x_35941;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_35915, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_35915)] =\n                    x_35942;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_35915 == 0) {\n          ",
            "  acc_35944 = ((__local\n                          int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31455 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_35944 = ((__local\n                          int64_t *) local_mem_35923)[squot64(byte_offsets_35919,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_35915) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_35951;\n    \n    prefix_35951 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_35931 == (int64_t) 0 && local_tid_35915 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_35912)[dynamic_id_35931] = acc_35944;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_35908)[dynamic_id_35931] = (int8_t) 2;\n            acc_35944 = (int64_t) 0;\n        }\n        if (!(dynamic_id_35931 == (int64_t) 0) && slt32(local_tid_35915,\n                                                        wave_sizze_35917)) {\n            if (local_tid_35915 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_35910)[dynamic_id_35931] =\n                    acc_35944;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35908)[dynamic_id_35931] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_35923)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_35908)[dynamic_id_35931 -\n                                                                  ",
            "                                      (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_35952;\n            \n            status_35952 = ((__local int8_t *) local_mem_35923)[(int64_t) 0];\n            if (status_35952 == (int8_t) 2) {\n                if (local_tid_35915 == 0) {\n                    prefix_35951 = ((volatile __global\n                                     int64_t *) incprefixes_mem_35912)[dynamic_id_35931 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_35953 = dynamic_id_35931 -\n                        sext_i32_i64(wave_sizze_35917);\n                \n                while (slt32(wave_sizze_35917 * -1, readOffset_35953)) {\n                    int32_t read_i_35954 = readOffset_35953 + local_tid_35915;\n                    int64_t aggr_35955 = (int64_t) 0;\n                    int8_t flag_35956 = (int8_t) 0;\n                    int8_t used_35957 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_35954)) {\n                        flag_35956 = ((volatile __global\n                                       int8_t *) status_flags_mem_35908)[sext_i32_i64(read_i_35954)];\n                        if (flag_35956 == (int8_t) 2) {\n                            aggr_35955 = ((volatile __global\n                                           int64_t *) incprefixes_mem_35912)[sext_i32_i64(read_i_35954)];\n                        } else {\n                            if (flag_35956 == (int8_t) 1) {\n                                aggr_35955 = ((volatile __global\n                                               int64_t *) aggregates_mem_35910)[sext_i32_i64(read_i_35954)];\n                                used_35957 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_35923)[squot64(warp_byte_offset_35",
            "921,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_35915)] =\n                        aggr_35955;\n                    \n                    int8_t tmp_35958;\n                    \n                    tmp_35958 = flag_35956 | used_35957 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_35923)[sext_i32_i64(local_tid_35915)] =\n                        tmp_35958;\n                    mem_fence_local();\n                    flag_35956 = ((volatile __local\n                                   int8_t *) local_mem_35923)[sext_i32_i64(wave_sizze_35917) -\n                                                              (int64_t) 1];\n                    if (local_tid_35915 == 0) {\n                        if (!(flag_35956 == (int8_t) 2)) {\n                            int64_t x_35959 = (int64_t) 0;\n                            int64_t x_35960;\n                            int8_t flag1_35962;\n                            \n                            flag1_35962 = (int8_t) 0;\n                            \n                            int8_t flag2_35963;\n                            int8_t used1_35964;\n                            \n                            used1_35964 = (int8_t) 0;\n                            \n                            int8_t used2_35965;\n                            \n                            for (int32_t i_35966 = 0; i_35966 <\n                                 wave_sizze_35917; i_35966++) {\n                                flag2_35963 = ((__local\n                                                int8_t *) local_mem_35923)[sext_i32_i64(i_35966)];\n                                used2_35965 = lshr8(flag2_35963, (int8_t) 2);\n                                flag2_35963 = flag2_35963 & (int8_t) 3;\n                                x_35960 = ((__local\n                                            int64_t *) local_mem_35923)[squot64(warp_byte_offset_35921",
            ",\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_35966)];\n                                if (!(flag2_35963 == (int8_t) 1)) {\n                                    flag1_35962 = flag2_35963;\n                                    used1_35964 = used2_35965;\n                                    x_35959 = x_35960;\n                                } else {\n                                    used1_35964 += used2_35965;\n                                    \n                                    int64_t defunc_1_op_res_35961;\n                                    \n                                    defunc_1_op_res_35961 = add64(x_35959,\n                                                                  x_35960);\n                                    x_35959 = defunc_1_op_res_35961;\n                                }\n                            }\n                            flag_35956 = flag1_35962;\n                            used_35957 = used1_35964;\n                            aggr_35955 = x_35959;\n                        } else {\n                            aggr_35955 = ((__local\n                                           int64_t *) local_mem_35923)[squot64(warp_byte_offset_35921,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_35917) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_35956 == (int8_t) 2) {\n                            readOffset_35953 = wave_sizze_35917 * -1;\n                        } else {\n                            readOffset_35953 -= zext_i8_i32(used_35957);\n                        }\n                        ((__local int32_t *) local_mem_35923)[(int64_t) 0] =\n                            readOffs",
            "et_35953;\n                        \n                        int64_t x_35967;\n                        \n                        x_35967 = aggr_35955;\n                        \n                        int64_t x_35968;\n                        \n                        x_35968 = prefix_35951;\n                        \n                        int64_t defunc_1_op_res_35969;\n                        \n                        defunc_1_op_res_35969 = add64(x_35967, x_35968);\n                        prefix_35951 = defunc_1_op_res_35969;\n                    }\n                    mem_fence_local();\n                    readOffset_35953 = ((__local\n                                         int32_t *) local_mem_35923)[(int64_t) 0];\n                }\n            }\n            if (local_tid_35915 == 0) {\n                int64_t x_35970 = prefix_35951;\n                int64_t x_35971 = acc_35944;\n                int64_t defunc_1_op_res_35972 = add64(x_35970, x_35971);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_35912)[dynamic_id_35931] =\n                    defunc_1_op_res_35972;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_35908)[dynamic_id_35931] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_35923)[squot64(warp_byte_offset_35921,\n                                                      (int64_t) 8)] =\n                    prefix_35951;\n                acc_35944 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_35931 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_35951 = ((__local\n                             int64_t *) local_mem_35923)[squot64(warp_byte_offset_35921,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_35973;\n        int64",
            "_t x_35974;\n        int64_t x_35976;\n        \n        x_35976 = prefix_35951;\n        \n        int64_t x_35977;\n        \n        x_35977 = acc_35944;\n        \n        int64_t defunc_1_op_res_35978;\n        \n        defunc_1_op_res_35978 = add64(x_35976, x_35977);\n        x_35973 = defunc_1_op_res_35978;\n        for (int64_t i_35979 = 0; i_35979 < (int64_t) 9; i_35979++) {\n            x_35974 = private_mem_35933[i_35979];\n            \n            int64_t defunc_1_op_res_35975;\n            \n            defunc_1_op_res_35975 = add64(x_35973, x_35974);\n            private_mem_35933[i_35979] = defunc_1_op_res_35975;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35980 = 0; i_35980 < (int64_t) 9; i_35980++) {\n            int64_t sharedIdx_35981 = sext_i32_i64(local_tid_35915 * 9) +\n                    i_35980;\n            \n            ((__local int64_t *) local_mem_35923)[sharedIdx_35981] =\n                private_mem_35933[i_35980];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_35982 = 0; i_35982 < (int64_t) 9; i_35982++) {\n            int32_t sharedIdx_35983 = local_tid_35915 +\n                    sext_i64_i32(segscan_group_sizze_31455 * i_35982);\n            \n            private_mem_35933[i_35982] = ((__local\n                                           int64_t *) local_mem_35923)[sext_i32_i64(sharedIdx_35983)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_35984 = 0; i_35984 < (int64_t) 9; i_35984++) {\n            int64_t gtid_31459 = blockOff_35932 + segscan_group_sizze_31455 *\n                    i_35984 + sext_i32_i64(local_tid_35915);\n            \n            if (slt64(gtid_31459, partition_sizze_30057)) {\n                ((__global int64_t *) mem_32300)[gtid_31459] =\n                    private_mem_35933[i_35984];\n            }\n        }\n    }\n    // If this is the last block, reset the dynam",
            "icId\n    {\n        if (dynamic_id_35931 == sdiv_up64(partition_sizze_30057,\n                                          segscan_group_sizze_31455 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_35906)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31455\n}\n__kernel void clusterPointszisegscan_31493(__global int *global_failure,\n                                           uint local_mem_36182_backing_offset_0,\n                                           int64_t defunc_2_reduce_res_30100,\n                                           __global unsigned char *mem_32307,\n                                           __global unsigned char *mem_32311,\n                                           __global unsigned char *mem_32313,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_36159,\n                                           __global\n                                           unsigned char *status_flags_mem_36161,\n                                           __global\n                                           unsigned char *aggregates_mem_36163,\n                                           __global\n                                           unsigned char *incprefixes_mem_36165,\n                                           __global\n                                           unsigned char *aggregates_mem_36167,\n                                           __global\n                                           unsigned char *incprefixes_mem_36169)\n{\n    #define segscan_group_sizze_31488 (clusterPointszisegscan_group_sizze_31487)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_36182_backing_0 =\n                  &shared_mem[local_mem_36182_backing_offset_0];\n    \n    if (*global_failure",
            " >= 0)\n        return;\n    \n    int32_t global_tid_36171;\n    int32_t local_tid_36172;\n    int64_t group_sizze_36175;\n    int32_t wave_sizze_36174;\n    int32_t group_tid_36173;\n    \n    global_tid_36171 = get_global_id(0);\n    local_tid_36172 = get_local_id(0);\n    group_sizze_36175 = get_local_size(0);\n    wave_sizze_36174 = LOCKSTEP_WIDTH;\n    group_tid_36173 = get_group_id(0);\n    \n    int32_t phys_tid_31493;\n    \n    phys_tid_31493 = global_tid_36171;\n    \n    int64_t byte_offsets_36176;\n    \n    byte_offsets_36176 = (int64_t) 0;\n    \n    int64_t byte_offsets_36177;\n    \n    byte_offsets_36177 = segscan_group_sizze_31488;\n    \n    int64_t byte_offsets_36178;\n    \n    byte_offsets_36178 = sdiv_up64(segscan_group_sizze_31488, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_31488 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_36179;\n    \n    warp_byte_offset_36179 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_36180;\n    \n    warp_byte_offset_36180 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_36181;\n    \n    warp_byte_offset_36181 = (int64_t) 320;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_36182;\n    \n    local_mem_36182 = (__local char *) local_mem_36182_backing_0;\n    \n    int64_t trans_arr_len_36183;\n    \n    trans_arr_len_36183 = (int64_t) 9 * segscan_group_sizze_31488;\n    \n    int32_t dynamic_id_36193;\n    \n    if (local_tid_36172 == 0) {\n        dynamic_id_36193 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_36159)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_36182)[(int64_t) 0] = dynamic_id_36193;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_36193 = ((__local int32_t *) local_mem_36182)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_36194;\n    \n    blockOff_36194 = sext_i32_i64(dynamic_id_36193) * (int64_t) 9 *\n    ",
            "    segscan_group_sizze_31488;\n    \n    bool private_mem_36195[9];\n    int64_t private_mem_36197[9];\n    \n    // Load and map\n    {\n        for (int64_t i_36199 = 0; i_36199 < (int64_t) 9; i_36199++) {\n            int64_t gtid_31492 = blockOff_36194 +\n                    sext_i32_i64(local_tid_36172) + i_36199 *\n                    segscan_group_sizze_31488;\n            \n            if (slt64(gtid_31492, defunc_2_reduce_res_30100)) {\n                int64_t x_30126 = ((__global int64_t *) mem_32307)[gtid_31492];\n                bool defunc_0_f_res_30127 = slt64((int64_t) 0, x_30126);\n                \n                private_mem_36195[i_36199] = defunc_0_f_res_30127;\n                private_mem_36197[i_36199] = x_30126;\n            } else {\n                private_mem_36195[i_36199] = 0;\n                private_mem_36197[i_36199] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36200 = 0; i_36200 < (int64_t) 9; i_36200++) {\n            int64_t sharedIdx_36201 = sext_i32_i64(local_tid_36172) + i_36200 *\n                    segscan_group_sizze_31488;\n            \n            ((__local bool *) local_mem_36182)[sharedIdx_36201] =\n                private_mem_36195[i_36200];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36202 = 0; i_36202 < 9; i_36202++) {\n            int32_t sharedIdx_36203 = local_tid_36172 * 9 + i_36202;\n            \n            private_mem_36195[sext_i32_i64(i_36202)] = ((__local\n                                                         bool *) local_mem_36182)[sext_i32_i64(sharedIdx_36203)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36204 = 0; i_36204 < (int64_t) 9; i_36204++) {\n            int64_t sharedIdx_36205 = sext_i32_i64(local_tid_36172) + i_36204 *\n                    segscan_group_sizze_31488;\n            \n            ((__local int64_t *) local_mem_36182)[sharedIdx_36205] =\n                private_m",
            "em_36197[i_36204];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36206 = 0; i_36206 < 9; i_36206++) {\n            int32_t sharedIdx_36207 = local_tid_36172 * 9 + i_36206;\n            \n            private_mem_36197[sext_i32_i64(i_36206)] = ((__local\n                                                         int64_t *) local_mem_36182)[sext_i32_i64(sharedIdx_36207)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_36208 = 0; i_36208 < (int64_t) 8; i_36208++) {\n            bool x_30119;\n            bool x_30121;\n            \n            x_30119 = private_mem_36195[i_36208];\n            x_30121 = private_mem_36195[i_36208 + (int64_t) 1];\n            \n            int64_t x_30120;\n            int64_t x_30122;\n            \n            x_30120 = private_mem_36197[i_36208];\n            x_30122 = private_mem_36197[i_36208 + (int64_t) 1];\n            \n            bool defunc_1_op_res_30123;\n            \n            defunc_1_op_res_30123 = x_30119 || x_30121;\n            \n            int64_t defunc_1_op_res_30124;\n            \n            if (x_30121) {\n                defunc_1_op_res_30124 = x_30122;\n            } else {\n                int64_t defunc_1_op_res_30125 = add64(x_30120, x_30122);\n                \n                defunc_1_op_res_30124 = defunc_1_op_res_30125;\n            }\n            private_mem_36195[i_36208 + (int64_t) 1] = defunc_1_op_res_30123;\n            private_mem_36197[i_36208 + (int64_t) 1] = defunc_1_op_res_30124;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_36182)[byte_offsets_36176 +\n                                           sext_i32_i64(local_tid_36172)] =\n            private_mem_36195[(int64_t) 8];\n        ((__local int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_36172)] =\n",
            "            private_mem_36197[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_36216;\n    int64_t acc_36217;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_36209;\n        int64_t x_36210;\n        bool x_36211;\n        int64_t x_36212;\n        bool x_36218;\n        int64_t x_36219;\n        bool x_36220;\n        int64_t x_36221;\n        bool ltid_in_bounds_36225;\n        \n        ltid_in_bounds_36225 = slt64(sext_i32_i64(local_tid_36172),\n                                     segscan_group_sizze_31488);\n        \n        int32_t skip_threads_36226;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_36225) {\n                x_36211 = ((volatile __local\n                            bool *) local_mem_36182)[byte_offsets_36176 +\n                                                     sext_i32_i64(local_tid_36172)];\n                x_36212 = ((volatile __local\n                            int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_36172)];\n                if ((local_tid_36172 - squot32(local_tid_36172, 32) * 32) ==\n                    0) {\n                    x_36209 = x_36211;\n                    x_36210 = x_36212;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_36226 = 1;\n            while (slt32(skip_threads_36226, 32)) {\n                if (sle32(skip_threads_36226, local_tid_36172 -\n                          squot32(local_tid_36172, 32) * 32) &&\n                    ltid_in_bounds_36225) {\n                    // read operands\n                    {\n                        x_36209 = ((volatile __local\n                                    bool *) local_mem_36182)[byte_offsets_36176 +\n                                                             (sex",
            "t_i32_i64(local_tid_36172) -\n                                                              sext_i32_i64(skip_threads_36226))];\n                        x_36210 = ((volatile __local\n                                    int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_36172) -\n                                                                 sext_i32_i64(skip_threads_36226))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_36213 = x_36209 || x_36211;\n                        int64_t defunc_1_op_res_36214;\n                        \n                        if (x_36211) {\n                            defunc_1_op_res_36214 = x_36212;\n                        } else {\n                            int64_t defunc_1_op_res_36215 = add64(x_36210,\n                                                                  x_36212);\n                            \n                            defunc_1_op_res_36214 = defunc_1_op_res_36215;\n                        }\n                        x_36209 = defunc_1_op_res_36213;\n                        x_36210 = defunc_1_op_res_36214;\n                    }\n                }\n                if (sle32(wave_sizze_36174, skip_threads_36226)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_36226, local_tid_36172 -\n                          squot32(local_tid_36172, 32) * 32) &&\n                    ltid_in_bounds_36225) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_36182)[byte_offsets_36176 +\n                                                   sext_i32_i64(local_tid_36172)] =\n                            x_36209;\n                        x_36211 = x_",
            "36209;\n                        ((volatile __local\n                          int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_36172)] =\n                            x_36210;\n                        x_36212 = x_36210;\n                    }\n                }\n                if (sle32(wave_sizze_36174, skip_threads_36226)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_36226 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_36172 - squot32(local_tid_36172, 32) * 32) == 31 &&\n                ltid_in_bounds_36225) {\n                ((volatile __local bool *) local_mem_36182)[byte_offsets_36176 +\n                                                            sext_i32_i64(squot32(local_tid_36172,\n                                                                                 32))] =\n                    x_36209;\n                ((volatile __local\n                  int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_36172,\n                                                                   32))] =\n                    x_36210;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_36227;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_36172, 32) == 0 && ltid_in_bounds_36225) {\n                    x_36220 = ((volatile __local\n                                bool *) local_mem_36182)[byte_offsets_36176 +\n     ",
            "                                                    sext_i32_i64(local_tid_36172)];\n                    x_36221 = ((volatile __local\n                                int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_36172)];\n                    if ((local_tid_36172 - squot32(local_tid_36172, 32) * 32) ==\n                        0) {\n                        x_36218 = x_36220;\n                        x_36219 = x_36221;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_36227 = 1;\n                while (slt32(skip_threads_36227, 32)) {\n                    if (sle32(skip_threads_36227, local_tid_36172 -\n                              squot32(local_tid_36172, 32) * 32) &&\n                        (squot32(local_tid_36172, 32) == 0 &&\n                         ltid_in_bounds_36225)) {\n                        // read operands\n                        {\n                            x_36218 = ((volatile __local\n                                        bool *) local_mem_36182)[byte_offsets_36176 +\n                                                                 (sext_i32_i64(local_tid_36172) -\n                                                                  sext_i32_i64(skip_threads_36227))];\n                            x_36219 = ((volatile __local\n                                        int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_36172) -\n                                                                     sext_i32_i64(skip_threads_36227))];\n                        }\n                        // perform operation\n     ",
            "                   {\n                            bool defunc_1_op_res_36222 = x_36218 || x_36220;\n                            int64_t defunc_1_op_res_36223;\n                            \n                            if (x_36220) {\n                                defunc_1_op_res_36223 = x_36221;\n                            } else {\n                                int64_t defunc_1_op_res_36224 = add64(x_36219,\n                                                                      x_36221);\n                                \n                                defunc_1_op_res_36223 = defunc_1_op_res_36224;\n                            }\n                            x_36218 = defunc_1_op_res_36222;\n                            x_36219 = defunc_1_op_res_36223;\n                        }\n                    }\n                    if (sle32(wave_sizze_36174, skip_threads_36227)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_36227, local_tid_36172 -\n                              squot32(local_tid_36172, 32) * 32) &&\n                        (squot32(local_tid_36172, 32) == 0 &&\n                         ltid_in_bounds_36225)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_36182)[byte_offsets_36176 +\n                                                       sext_i32_i64(local_tid_36172)] =\n                                x_36218;\n                            x_36220 = x_36218;\n                            ((volatile __local\n                              int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_36172)] =\n                                x_36219;\n                            x_36221 = x_36219;\n                        }\n                   ",
            " }\n                    if (sle32(wave_sizze_36174, skip_threads_36227)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_36227 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_36172, 32) == 0 || !ltid_in_bounds_36225)) {\n                // read operands\n                {\n                    x_36211 = x_36209;\n                    x_36212 = x_36210;\n                    x_36209 = ((__local\n                                bool *) local_mem_36182)[byte_offsets_36176 +\n                                                         (sext_i32_i64(squot32(local_tid_36172,\n                                                                               32)) -\n                                                          (int64_t) 1)];\n                    x_36210 = ((__local\n                                int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_36172,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_36213 = x_36209 || x_36211;\n                    int64_t defunc_1_op_res_36214;\n                    \n                    if (x_36211) {\n                        defunc_1_op_res_36214 = x_36212;\n                    } else {\n                        int64_t defunc_1_op_res_36215 = add64(x_36210, x_36212);\n                        \n                        defunc_1_op_res_36214 = defunc_1_op_res_36215;\n                    }\n                    x_36209 = defunc_1_op_res_36213;\n                 ",
            "   x_36210 = defunc_1_op_res_36214;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_36182)[byte_offsets_36176 +\n                                                       sext_i32_i64(local_tid_36172)] =\n                        x_36209;\n                    ((__local\n                      int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36172)] =\n                        x_36210;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_36172, 32) == 0) {\n                ((__local bool *) local_mem_36182)[byte_offsets_36176 +\n                                                   sext_i32_i64(local_tid_36172)] =\n                    x_36211;\n                ((__local\n                  int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_36172)] =\n                    x_36212;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_36172 == 0) {\n            acc_36216 = ((__local bool *) local_mem_36182)[byte_offsets_36176 +\n                                                           (segscan_group_sizze_31488 -\n                                                            (int64_t) 1)];\n            acc_36217 = ((__local\n                          int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31488 -\n                                                       (int64_t) 1)];\n        } else {",
            "\n            acc_36216 = ((__local bool *) local_mem_36182)[byte_offsets_36176 +\n                                                           (sext_i32_i64(local_tid_36172) -\n                                                            (int64_t) 1)];\n            acc_36217 = ((__local\n                          int64_t *) local_mem_36182)[squot64(byte_offsets_36177,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_36172) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_36228;\n    \n    prefix_36228 = 0;\n    \n    int64_t prefix_36229;\n    \n    prefix_36229 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_36193 == (int64_t) 0 && local_tid_36172 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_36165)[dynamic_id_36193] = acc_36216;\n            ((volatile __global\n              int64_t *) incprefixes_mem_36169)[dynamic_id_36193] = acc_36217;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_36161)[dynamic_id_36193] = (int8_t) 2;\n            acc_36216 = 0;\n            acc_36217 = (int64_t) 0;\n        }\n        if (!(dynamic_id_36193 == (int64_t) 0) && slt32(local_tid_36172,\n                                                        wave_sizze_36174)) {\n            if (local_tid_36172 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_36163)[dynamic_id_36193] = acc_36216;\n                ((volatile __global\n                  int64_t *) aggregates_mem_36167)[dynamic_id_36193] =\n                    acc_36217;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36161)[dynamic_id_36193] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_36182)[(int64_t) 0] = ",
            "((__global\n                                                                      int8_t *) status_flags_mem_36161)[dynamic_id_36193 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_36230;\n            \n            status_36230 = ((__local int8_t *) local_mem_36182)[(int64_t) 0];\n            if (status_36230 == (int8_t) 2) {\n                if (local_tid_36172 == 0) {\n                    prefix_36228 = ((volatile __global\n                                     bool *) incprefixes_mem_36165)[dynamic_id_36193 -\n                                                                    (int64_t) 1];\n                    prefix_36229 = ((volatile __global\n                                     int64_t *) incprefixes_mem_36169)[dynamic_id_36193 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_36231 = dynamic_id_36193 -\n                        sext_i32_i64(wave_sizze_36174);\n                \n                while (slt32(wave_sizze_36174 * -1, readOffset_36231)) {\n                    int32_t read_i_36232 = readOffset_36231 + local_tid_36172;\n                    bool aggr_36233 = 0;\n                    int64_t aggr_36234 = (int64_t) 0;\n                    int8_t flag_36235 = (int8_t) 0;\n                    int8_t used_36236 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_36232)) {\n                        flag_36235 = ((volatile __global\n                                       int8_t *) status_flags_mem_36161)[sext_i32_i64(read_i_36232)];\n                        if (flag_36235 == (int8_t) 2) {\n                            aggr_36233 = ((volatile __global\n                                           bool *) incprefixes_mem_36165)[sext_i32_i64(read_i_36232)];\n                            aggr_36234 = ((vola",
            "tile __global\n                                           int64_t *) incprefixes_mem_36169)[sext_i32_i64(read_i_36232)];\n                        } else {\n                            if (flag_36235 == (int8_t) 1) {\n                                aggr_36233 = ((volatile __global\n                                               bool *) aggregates_mem_36163)[sext_i32_i64(read_i_36232)];\n                                aggr_36234 = ((volatile __global\n                                               int64_t *) aggregates_mem_36167)[sext_i32_i64(read_i_36232)];\n                                used_36236 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_36182)[warp_byte_offset_36179 +\n                                                       sext_i32_i64(local_tid_36172)] =\n                        aggr_36233;\n                    ((__local\n                      int64_t *) local_mem_36182)[squot64(warp_byte_offset_36180,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36172)] =\n                        aggr_36234;\n                    \n                    int8_t tmp_36237;\n                    \n                    tmp_36237 = flag_36235 | used_36236 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_36182)[sext_i32_i64(local_tid_36172)] =\n                        tmp_36237;\n                    mem_fence_local();\n                    flag_36235 = ((volatile __local\n                                   int8_t *) local_mem_36182)[sext_i32_i64(wave_sizze_36174) -\n                                                              (int64_t) 1];\n                    if (local_tid_36172 == 0) {\n                        if (!(flag_36235 == (int8_t) 2)) {\n                            bool x_36238 = 0;\n                            int64_t x_36239 = (int64_t) 0;\n                           ",
            " bool x_36240;\n                            int64_t x_36241;\n                            int8_t flag1_36245;\n                            \n                            flag1_36245 = (int8_t) 0;\n                            \n                            int8_t flag2_36246;\n                            int8_t used1_36247;\n                            \n                            used1_36247 = (int8_t) 0;\n                            \n                            int8_t used2_36248;\n                            \n                            for (int32_t i_36249 = 0; i_36249 <\n                                 wave_sizze_36174; i_36249++) {\n                                flag2_36246 = ((__local\n                                                int8_t *) local_mem_36182)[sext_i32_i64(i_36249)];\n                                used2_36248 = lshr8(flag2_36246, (int8_t) 2);\n                                flag2_36246 = flag2_36246 & (int8_t) 3;\n                                x_36240 = ((__local\n                                            bool *) local_mem_36182)[warp_byte_offset_36179 +\n                                                                     sext_i32_i64(i_36249)];\n                                x_36241 = ((__local\n                                            int64_t *) local_mem_36182)[squot64(warp_byte_offset_36180,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_36249)];\n                                if (!(flag2_36246 == (int8_t) 1)) {\n                                    flag1_36245 = flag2_36246;\n                                    used1_36247 = used2_36248;\n                                    x_36238 = x_36240;\n                                    x_36239 = x_36241;\n                                } else {\n                                    used1_36247 += used2_36248;\n                                    \n                              ",
            "      bool defunc_1_op_res_36242;\n                                    \n                                    defunc_1_op_res_36242 = x_36238 || x_36240;\n                                    \n                                    int64_t defunc_1_op_res_36243;\n                                    \n                                    if (x_36240) {\n                                        defunc_1_op_res_36243 = x_36241;\n                                    } else {\n                                        int64_t defunc_1_op_res_36244 =\n                                                add64(x_36239, x_36241);\n                                        \n                                        defunc_1_op_res_36243 =\n                                            defunc_1_op_res_36244;\n                                    }\n                                    x_36238 = defunc_1_op_res_36242;\n                                    x_36239 = defunc_1_op_res_36243;\n                                }\n                            }\n                            flag_36235 = flag1_36245;\n                            used_36236 = used1_36247;\n                            aggr_36233 = x_36238;\n                            aggr_36234 = x_36239;\n                        } else {\n                            aggr_36233 = ((__local\n                                           bool *) local_mem_36182)[warp_byte_offset_36179 +\n                                                                    (sext_i32_i64(wave_sizze_36174) -\n                                                                     (int64_t) 1)];\n                            aggr_36234 = ((__local\n                                           int64_t *) local_mem_36182)[squot64(warp_byte_offset_36180,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_36174) -\n                                                          ",
            "              (int64_t) 1)];\n                        }\n                        if (flag_36235 == (int8_t) 2) {\n                            readOffset_36231 = wave_sizze_36174 * -1;\n                        } else {\n                            readOffset_36231 -= zext_i8_i32(used_36236);\n                        }\n                        ((__local int32_t *) local_mem_36182)[(int64_t) 0] =\n                            readOffset_36231;\n                        \n                        bool x_36250;\n                        \n                        x_36250 = aggr_36233;\n                        \n                        int64_t x_36251;\n                        \n                        x_36251 = aggr_36234;\n                        \n                        bool x_36252;\n                        \n                        x_36252 = prefix_36228;\n                        \n                        int64_t x_36253;\n                        \n                        x_36253 = prefix_36229;\n                        \n                        bool defunc_1_op_res_36254;\n                        \n                        defunc_1_op_res_36254 = x_36250 || x_36252;\n                        \n                        int64_t defunc_1_op_res_36255;\n                        \n                        if (x_36252) {\n                            defunc_1_op_res_36255 = x_36253;\n                        } else {\n                            int64_t defunc_1_op_res_36256 = add64(x_36251,\n                                                                  x_36253);\n                            \n                            defunc_1_op_res_36255 = defunc_1_op_res_36256;\n                        }\n                        prefix_36228 = defunc_1_op_res_36254;\n                        prefix_36229 = defunc_1_op_res_36255;\n                    }\n                    mem_fence_local();\n                    readOffset_36231 = ((__local\n                                         int32_t *) local_mem_36182)[(int64_t) 0];\n            ",
            "    }\n            }\n            if (local_tid_36172 == 0) {\n                bool x_36257 = prefix_36228;\n                int64_t x_36258 = prefix_36229;\n                bool x_36259 = acc_36216;\n                int64_t x_36260 = acc_36217;\n                bool defunc_1_op_res_36261 = x_36257 || x_36259;\n                int64_t defunc_1_op_res_36262;\n                \n                if (x_36259) {\n                    defunc_1_op_res_36262 = x_36260;\n                } else {\n                    int64_t defunc_1_op_res_36263 = add64(x_36258, x_36260);\n                    \n                    defunc_1_op_res_36262 = defunc_1_op_res_36263;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_36165)[dynamic_id_36193] =\n                    defunc_1_op_res_36261;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_36169)[dynamic_id_36193] =\n                    defunc_1_op_res_36262;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36161)[dynamic_id_36193] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_36182)[warp_byte_offset_36179] =\n                    prefix_36228;\n                ((__local\n                  int64_t *) local_mem_36182)[squot64(warp_byte_offset_36180,\n                                                      (int64_t) 8)] =\n                    prefix_36229;\n                acc_36216 = 0;\n                acc_36217 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_36193 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_36228 = ((__local\n                             bool *) local_mem_36182)[warp_byte_offset_36179];\n            prefix_36229 = ((__local\n                             int64_t *) local_mem_36182)[squot64(warp_byte_offset_36180,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_F",
            "ENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_36264;\n        bool x_36266;\n        bool x_36271;\n        \n        x_36271 = prefix_36228;\n        \n        bool x_36273;\n        \n        x_36273 = acc_36216;\n        \n        int64_t x_36265;\n        int64_t x_36267;\n        int64_t x_36272;\n        \n        x_36272 = prefix_36229;\n        \n        int64_t x_36274;\n        \n        x_36274 = acc_36217;\n        \n        bool defunc_1_op_res_36275;\n        \n        defunc_1_op_res_36275 = x_36271 || x_36273;\n        \n        int64_t defunc_1_op_res_36276;\n        \n        if (x_36273) {\n            defunc_1_op_res_36276 = x_36274;\n        } else {\n            int64_t defunc_1_op_res_36277 = add64(x_36272, x_36274);\n            \n            defunc_1_op_res_36276 = defunc_1_op_res_36277;\n        }\n        x_36264 = defunc_1_op_res_36275;\n        x_36265 = defunc_1_op_res_36276;\n        for (int64_t i_36278 = 0; i_36278 < (int64_t) 9; i_36278++) {\n            x_36266 = private_mem_36195[i_36278];\n            x_36267 = private_mem_36197[i_36278];\n            \n            bool defunc_1_op_res_36268;\n            \n            defunc_1_op_res_36268 = x_36264 || x_36266;\n            \n            int64_t defunc_1_op_res_36269;\n            \n            if (x_36266) {\n                defunc_1_op_res_36269 = x_36267;\n            } else {\n                int64_t defunc_1_op_res_36270 = add64(x_36265, x_36267);\n                \n                defunc_1_op_res_36269 = defunc_1_op_res_36270;\n            }\n            private_mem_36195[i_36278] = defunc_1_op_res_36268;\n            private_mem_36197[i_36278] = defunc_1_op_res_36269;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36279 = 0; i_36279 < (int64_t) 9; i_36279++) {\n            int64_t sharedIdx_36280 = sext_i32_i64(local_tid_36172 * 9) +\n                    i_36279;\n            \n            ((__local bool *) local_mem_36182)[sharedIdx_36280]",
            " =\n                private_mem_36195[i_36279];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36281 = 0; i_36281 < (int64_t) 9; i_36281++) {\n            int32_t sharedIdx_36282 = local_tid_36172 +\n                    sext_i64_i32(segscan_group_sizze_31488 * i_36281);\n            \n            private_mem_36195[i_36281] = ((__local\n                                           bool *) local_mem_36182)[sext_i32_i64(sharedIdx_36282)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36283 = 0; i_36283 < (int64_t) 9; i_36283++) {\n            int64_t sharedIdx_36284 = sext_i32_i64(local_tid_36172 * 9) +\n                    i_36283;\n            \n            ((__local int64_t *) local_mem_36182)[sharedIdx_36284] =\n                private_mem_36197[i_36283];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36285 = 0; i_36285 < (int64_t) 9; i_36285++) {\n            int32_t sharedIdx_36286 = local_tid_36172 +\n                    sext_i64_i32(segscan_group_sizze_31488 * i_36285);\n            \n            private_mem_36197[i_36285] = ((__local\n                                           int64_t *) local_mem_36182)[sext_i32_i64(sharedIdx_36286)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_36287 = 0; i_36287 < (int64_t) 9; i_36287++) {\n            int64_t gtid_31492 = blockOff_36194 + segscan_group_sizze_31488 *\n                    i_36287 + sext_i32_i64(local_tid_36172);\n            \n            if (slt64(gtid_31492, defunc_2_reduce_res_30100)) {\n                ((__global bool *) mem_32311)[gtid_31492] =\n                    private_mem_36195[i_36287];\n            }\n        }\n        for (int64_t i_36288 = 0; i_36288 < (int64_t) 9; i_36288++) {\n            int64_t gtid_31492 = blockOff_36194 + segscan_group_sizze_31488 *\n                    i_36288 + sext_i32_i64(local_tid_36172);\n            \n            if (slt64(gtid_31492, de",
            "func_2_reduce_res_30100)) {\n                ((__global int64_t *) mem_32313)[gtid_31492] =\n                    private_mem_36197[i_36288];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_36193 == sdiv_up64(defunc_2_reduce_res_30100,\n                                          segscan_group_sizze_31488 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_36159)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31488\n}\n__kernel void clusterPointszisegscan_31519(__global int *global_failure,\n                                           uint local_mem_36314_backing_offset_0,\n                                           int64_t partition_sizze_30057,\n                                           __global unsigned char *mem_32302,\n                                           __global unsigned char *mem_32319,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_36297,\n                                           __global\n                                           unsigned char *status_flags_mem_36299,\n                                           __global\n                                           unsigned char *aggregates_mem_36301,\n                                           __global\n                                           unsigned char *incprefixes_mem_36303)\n{\n    #define segscan_group_sizze_31514 (clusterPointszisegscan_group_sizze_31513)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_36314_backing_0 =\n                  &shared_mem[local_mem_36314_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36305;\n    int32_t local_tid_36306;\n    int64_t group_sizze_36309;\n    int",
            "32_t wave_sizze_36308;\n    int32_t group_tid_36307;\n    \n    global_tid_36305 = get_global_id(0);\n    local_tid_36306 = get_local_id(0);\n    group_sizze_36309 = get_local_size(0);\n    wave_sizze_36308 = LOCKSTEP_WIDTH;\n    group_tid_36307 = get_group_id(0);\n    \n    int32_t phys_tid_31519;\n    \n    phys_tid_31519 = global_tid_36305;\n    \n    int64_t byte_offsets_36310;\n    \n    byte_offsets_36310 = (int64_t) 0;\n    \n    int64_t byte_offsets_36311;\n    \n    byte_offsets_36311 = segscan_group_sizze_31514 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_36312;\n    \n    warp_byte_offset_36312 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_36313;\n    \n    warp_byte_offset_36313 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_36314;\n    \n    local_mem_36314 = (__local char *) local_mem_36314_backing_0;\n    \n    int64_t trans_arr_len_36315;\n    \n    trans_arr_len_36315 = (int64_t) 9 * segscan_group_sizze_31514;\n    \n    int32_t dynamic_id_36322;\n    \n    if (local_tid_36306 == 0) {\n        dynamic_id_36322 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_36297)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_36314)[(int64_t) 0] = dynamic_id_36322;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_36322 = ((__local int32_t *) local_mem_36314)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_36323;\n    \n    blockOff_36323 = sext_i32_i64(dynamic_id_36322) * (int64_t) 9 *\n        segscan_group_sizze_31514;\n    \n    int64_t private_mem_36324[9];\n    \n    // Load and map\n    {\n        for (int64_t i_36326 = 0; i_36326 < (int64_t) 9; i_36326++) {\n            int64_t gtid_31518 = blockOff_36323 +\n                    sext_i32_i64(local_tid_36306) + i_36326 *\n                    segscan_group_sizze_31514;\n            \n            if (slt64(gtid_31518, parti",
            "tion_sizze_30057)) {\n                int64_t x_30142 = ((__global int64_t *) mem_32302)[gtid_31518];\n                \n                private_mem_36324[i_36326] = x_30142;\n            } else {\n                private_mem_36324[i_36326] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36327 = 0; i_36327 < (int64_t) 9; i_36327++) {\n            int64_t sharedIdx_36328 = sext_i32_i64(local_tid_36306) + i_36327 *\n                    segscan_group_sizze_31514;\n            \n            ((__local int64_t *) local_mem_36314)[sharedIdx_36328] =\n                private_mem_36324[i_36327];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36329 = 0; i_36329 < 9; i_36329++) {\n            int32_t sharedIdx_36330 = local_tid_36306 * 9 + i_36329;\n            \n            private_mem_36324[sext_i32_i64(i_36329)] = ((__local\n                                                         int64_t *) local_mem_36314)[sext_i32_i64(sharedIdx_36330)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_36331 = 0; i_36331 < (int64_t) 8; i_36331++) {\n            int64_t x_30139;\n            int64_t x_30140;\n            \n            x_30139 = private_mem_36324[i_36331];\n            x_30140 = private_mem_36324[i_36331 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_30141;\n            \n            defunc_1_op_res_30141 = add64(x_30139, x_30140);\n            private_mem_36324[i_36331 + (int64_t) 1] = defunc_1_op_res_30141;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_36306)] =\n            private_mem_36324[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_36335;\n    \n",
            "    // Scan results (with warp scan)\n    {\n        int64_t x_36332;\n        int64_t x_36333;\n        int64_t x_36336;\n        int64_t x_36337;\n        bool ltid_in_bounds_36339;\n        \n        ltid_in_bounds_36339 = slt64(sext_i32_i64(local_tid_36306),\n                                     segscan_group_sizze_31514);\n        \n        int32_t skip_threads_36340;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_36339) {\n                x_36333 = ((volatile __local\n                            int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_36306)];\n                if ((local_tid_36306 - squot32(local_tid_36306, 32) * 32) ==\n                    0) {\n                    x_36332 = x_36333;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_36340 = 1;\n            while (slt32(skip_threads_36340, 32)) {\n                if (sle32(skip_threads_36340, local_tid_36306 -\n                          squot32(local_tid_36306, 32) * 32) &&\n                    ltid_in_bounds_36339) {\n                    // read operands\n                    {\n                        x_36332 = ((volatile __local\n                                    int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_36306) -\n                                                                 sext_i32_i64(skip_threads_36340))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_36334 = add64(x_36332, x_36333);\n                        \n                        x_36332 = defunc_1_op_res_3",
            "6334;\n                    }\n                }\n                if (sle32(wave_sizze_36308, skip_threads_36340)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_36340, local_tid_36306 -\n                          squot32(local_tid_36306, 32) * 32) &&\n                    ltid_in_bounds_36339) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_36306)] =\n                            x_36332;\n                        x_36333 = x_36332;\n                    }\n                }\n                if (sle32(wave_sizze_36308, skip_threads_36340)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_36340 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_36306 - squot32(local_tid_36306, 32) * 32) == 31 &&\n                ltid_in_bounds_36339) {\n                ((volatile __local\n                  int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_36306,\n                                                                   32))] =\n                    x_36332;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_36341;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_36306, 32) == 0 && ltid_in_bounds_36339) {\n                    x_363",
            "37 = ((volatile __local\n                                int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_36306)];\n                    if ((local_tid_36306 - squot32(local_tid_36306, 32) * 32) ==\n                        0) {\n                        x_36336 = x_36337;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_36341 = 1;\n                while (slt32(skip_threads_36341, 32)) {\n                    if (sle32(skip_threads_36341, local_tid_36306 -\n                              squot32(local_tid_36306, 32) * 32) &&\n                        (squot32(local_tid_36306, 32) == 0 &&\n                         ltid_in_bounds_36339)) {\n                        // read operands\n                        {\n                            x_36336 = ((volatile __local\n                                        int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_36306) -\n                                                                     sext_i32_i64(skip_threads_36341))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_36338 = add64(x_36336,\n                                                                  x_36337);\n                            \n                            x_36336 = defunc_1_op_res_36338;\n                        }\n                    }\n                    if (sle32(wave_sizze_36308, skip_threads_36341)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_thr",
            "eads_36341, local_tid_36306 -\n                              squot32(local_tid_36306, 32) * 32) &&\n                        (squot32(local_tid_36306, 32) == 0 &&\n                         ltid_in_bounds_36339)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_36306)] =\n                                x_36336;\n                            x_36337 = x_36336;\n                        }\n                    }\n                    if (sle32(wave_sizze_36308, skip_threads_36341)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_36341 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_36306, 32) == 0 || !ltid_in_bounds_36339)) {\n                // read operands\n                {\n                    x_36333 = x_36332;\n                    x_36332 = ((__local\n                                int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_36306,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_36334 = add64(x_36332, x_36333);\n                    \n                    x_36332 = defunc_1_op_res_36334;\n                }\n                // write final result\n                {\n    ",
            "                ((__local\n                      int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36306)] =\n                        x_36332;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_36306, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_36306)] =\n                    x_36333;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_36306 == 0) {\n            acc_36335 = ((__local\n                          int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31514 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_36335 = ((__local\n                          int64_t *) local_mem_36314)[squot64(byte_offsets_36310,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_36306) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_36342;\n    \n    prefix_36342 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_36322 == (int64_t) 0 && local_tid_36306 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_36303)[dynamic_id_36322] = acc_36335;\n            mem_fence_global();\n            ((volatile",
            " __global\n              int8_t *) status_flags_mem_36299)[dynamic_id_36322] = (int8_t) 2;\n            acc_36335 = (int64_t) 0;\n        }\n        if (!(dynamic_id_36322 == (int64_t) 0) && slt32(local_tid_36306,\n                                                        wave_sizze_36308)) {\n            if (local_tid_36306 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_36301)[dynamic_id_36322] =\n                    acc_36335;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36299)[dynamic_id_36322] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_36314)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_36299)[dynamic_id_36322 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_36343;\n            \n            status_36343 = ((__local int8_t *) local_mem_36314)[(int64_t) 0];\n            if (status_36343 == (int8_t) 2) {\n                if (local_tid_36306 == 0) {\n                    prefix_36342 = ((volatile __global\n                                     int64_t *) incprefixes_mem_36303)[dynamic_id_36322 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_36344 = dynamic_id_36322 -\n                        sext_i32_i64(wave_sizze_36308);\n                \n                while (slt32(wave_sizze_36308 * -1, readOffset_36344)) {\n                    int32_t read_i_36345 = readOffset_36344 + local_tid_36306;\n                    int64_t aggr_36346 = (int64_t) 0;\n                    int8_t flag_36347 = (int8_t) 0;\n                    int8_t used_36348 = (int8_t) 0;\n                    \n                    if (sle32(0,",
            " read_i_36345)) {\n                        flag_36347 = ((volatile __global\n                                       int8_t *) status_flags_mem_36299)[sext_i32_i64(read_i_36345)];\n                        if (flag_36347 == (int8_t) 2) {\n                            aggr_36346 = ((volatile __global\n                                           int64_t *) incprefixes_mem_36303)[sext_i32_i64(read_i_36345)];\n                        } else {\n                            if (flag_36347 == (int8_t) 1) {\n                                aggr_36346 = ((volatile __global\n                                               int64_t *) aggregates_mem_36301)[sext_i32_i64(read_i_36345)];\n                                used_36348 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_36314)[squot64(warp_byte_offset_36312,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36306)] =\n                        aggr_36346;\n                    \n                    int8_t tmp_36349;\n                    \n                    tmp_36349 = flag_36347 | used_36348 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_36314)[sext_i32_i64(local_tid_36306)] =\n                        tmp_36349;\n                    mem_fence_local();\n                    flag_36347 = ((volatile __local\n                                   int8_t *) local_mem_36314)[sext_i32_i64(wave_sizze_36308) -\n                                                              (int64_t) 1];\n                    if (local_tid_36306 == 0) {\n                        if (!(flag_36347 == (int8_t) 2)) {\n                            int64_t x_36350 = (int64_t) 0;\n                            int64_t x_36351;\n                            int8_t flag1_36353;\n                            \n                            flag1_36353 = (int",
            "8_t) 0;\n                            \n                            int8_t flag2_36354;\n                            int8_t used1_36355;\n                            \n                            used1_36355 = (int8_t) 0;\n                            \n                            int8_t used2_36356;\n                            \n                            for (int32_t i_36357 = 0; i_36357 <\n                                 wave_sizze_36308; i_36357++) {\n                                flag2_36354 = ((__local\n                                                int8_t *) local_mem_36314)[sext_i32_i64(i_36357)];\n                                used2_36356 = lshr8(flag2_36354, (int8_t) 2);\n                                flag2_36354 = flag2_36354 & (int8_t) 3;\n                                x_36351 = ((__local\n                                            int64_t *) local_mem_36314)[squot64(warp_byte_offset_36312,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_36357)];\n                                if (!(flag2_36354 == (int8_t) 1)) {\n                                    flag1_36353 = flag2_36354;\n                                    used1_36355 = used2_36356;\n                                    x_36350 = x_36351;\n                                } else {\n                                    used1_36355 += used2_36356;\n                                    \n                                    int64_t defunc_1_op_res_36352;\n                                    \n                                    defunc_1_op_res_36352 = add64(x_36350,\n                                                                  x_36351);\n                                    x_36350 = defunc_1_op_res_36352;\n                                }\n                            }\n                            flag_36347 = flag1_36353;\n                            used_36348 = used1_36355;\n           ",
            "                 aggr_36346 = x_36350;\n                        } else {\n                            aggr_36346 = ((__local\n                                           int64_t *) local_mem_36314)[squot64(warp_byte_offset_36312,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_36308) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_36347 == (int8_t) 2) {\n                            readOffset_36344 = wave_sizze_36308 * -1;\n                        } else {\n                            readOffset_36344 -= zext_i8_i32(used_36348);\n                        }\n                        ((__local int32_t *) local_mem_36314)[(int64_t) 0] =\n                            readOffset_36344;\n                        \n                        int64_t x_36358;\n                        \n                        x_36358 = aggr_36346;\n                        \n                        int64_t x_36359;\n                        \n                        x_36359 = prefix_36342;\n                        \n                        int64_t defunc_1_op_res_36360;\n                        \n                        defunc_1_op_res_36360 = add64(x_36358, x_36359);\n                        prefix_36342 = defunc_1_op_res_36360;\n                    }\n                    mem_fence_local();\n                    readOffset_36344 = ((__local\n                                         int32_t *) local_mem_36314)[(int64_t) 0];\n                }\n            }\n            if (local_tid_36306 == 0) {\n                int64_t x_36361 = prefix_36342;\n                int64_t x_36362 = acc_36335;\n                int64_t defunc_1_op_res_36363 = add64(x_36361, x_36362);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_36303)[dynamic_id_36322] =\n         ",
            "           defunc_1_op_res_36363;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36299)[dynamic_id_36322] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_36314)[squot64(warp_byte_offset_36312,\n                                                      (int64_t) 8)] =\n                    prefix_36342;\n                acc_36335 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_36322 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_36342 = ((__local\n                             int64_t *) local_mem_36314)[squot64(warp_byte_offset_36312,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_36364;\n        int64_t x_36365;\n        int64_t x_36367;\n        \n        x_36367 = prefix_36342;\n        \n        int64_t x_36368;\n        \n        x_36368 = acc_36335;\n        \n        int64_t defunc_1_op_res_36369;\n        \n        defunc_1_op_res_36369 = add64(x_36367, x_36368);\n        x_36364 = defunc_1_op_res_36369;\n        for (int64_t i_36370 = 0; i_36370 < (int64_t) 9; i_36370++) {\n            x_36365 = private_mem_36324[i_36370];\n            \n            int64_t defunc_1_op_res_36366;\n            \n            defunc_1_op_res_36366 = add64(x_36364, x_36365);\n            private_mem_36324[i_36370] = defunc_1_op_res_36366;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36371 = 0; i_36371 < (int64_t) 9; i_36371++) {\n            int64_t sharedIdx_36372 = sext_i32_i64(local_tid_36306 * 9) +\n                    i_36371;\n            \n            ((__local int64_t *) local_mem_36314)[sharedIdx_36372] =\n                private_mem_36324[i_36371];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36373 = 0; i_",
            "36373 < (int64_t) 9; i_36373++) {\n            int32_t sharedIdx_36374 = local_tid_36306 +\n                    sext_i64_i32(segscan_group_sizze_31514 * i_36373);\n            \n            private_mem_36324[i_36373] = ((__local\n                                           int64_t *) local_mem_36314)[sext_i32_i64(sharedIdx_36374)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_36375 = 0; i_36375 < (int64_t) 9; i_36375++) {\n            int64_t gtid_31518 = blockOff_36323 + segscan_group_sizze_31514 *\n                    i_36375 + sext_i32_i64(local_tid_36306);\n            \n            if (slt64(gtid_31518, partition_sizze_30057)) {\n                ((__global int64_t *) mem_32319)[gtid_31518] =\n                    private_mem_36324[i_36375];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_36322 == sdiv_up64(partition_sizze_30057,\n                                          segscan_group_sizze_31514 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_36297)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31514\n}\n__kernel void clusterPointszisegscan_31527(__global int *global_failure,\n                                           uint local_mem_36407_backing_offset_0,\n                                           int64_t defunc_2_reduce_res_30100,\n                                           __global unsigned char *mem_32316,\n                                           __global unsigned char *mem_32324,\n                                           __global unsigned char *mem_32326,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_36384,\n                                           __global\n                     ",
            "                      unsigned char *status_flags_mem_36386,\n                                           __global\n                                           unsigned char *aggregates_mem_36388,\n                                           __global\n                                           unsigned char *incprefixes_mem_36390,\n                                           __global\n                                           unsigned char *aggregates_mem_36392,\n                                           __global\n                                           unsigned char *incprefixes_mem_36394)\n{\n    #define segscan_group_sizze_31522 (clusterPointszisegscan_group_sizze_31521)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_36407_backing_0 =\n                  &shared_mem[local_mem_36407_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36396;\n    int32_t local_tid_36397;\n    int64_t group_sizze_36400;\n    int32_t wave_sizze_36399;\n    int32_t group_tid_36398;\n    \n    global_tid_36396 = get_global_id(0);\n    local_tid_36397 = get_local_id(0);\n    group_sizze_36400 = get_local_size(0);\n    wave_sizze_36399 = LOCKSTEP_WIDTH;\n    group_tid_36398 = get_group_id(0);\n    \n    int32_t phys_tid_31527;\n    \n    phys_tid_31527 = global_tid_36396;\n    \n    int64_t byte_offsets_36401;\n    \n    byte_offsets_36401 = (int64_t) 0;\n    \n    int64_t byte_offsets_36402;\n    \n    byte_offsets_36402 = segscan_group_sizze_31522;\n    \n    int64_t byte_offsets_36403;\n    \n    byte_offsets_36403 = sdiv_up64(segscan_group_sizze_31522, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_31522 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_36404;\n    \n    warp_byte_offset_36404 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_36405;\n    \n    warp_byte_offset_36405 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_36406;\n    \n    warp_byte_offset_36406 = (int64_t) 320;\n    // ",
            "Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_36407;\n    \n    local_mem_36407 = (__local char *) local_mem_36407_backing_0;\n    \n    int64_t trans_arr_len_36408;\n    \n    trans_arr_len_36408 = (int64_t) 9 * segscan_group_sizze_31522;\n    \n    int32_t dynamic_id_36418;\n    \n    if (local_tid_36397 == 0) {\n        dynamic_id_36418 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_36384)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_36407)[(int64_t) 0] = dynamic_id_36418;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_36418 = ((__local int32_t *) local_mem_36407)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_36419;\n    \n    blockOff_36419 = sext_i32_i64(dynamic_id_36418) * (int64_t) 9 *\n        segscan_group_sizze_31522;\n    \n    bool private_mem_36420[9];\n    int64_t private_mem_36422[9];\n    \n    // Load and map\n    {\n        for (int64_t i_36424 = 0; i_36424 < (int64_t) 9; i_36424++) {\n            int64_t gtid_31526 = blockOff_36419 +\n                    sext_i32_i64(local_tid_36397) + i_36424 *\n                    segscan_group_sizze_31522;\n            \n            if (slt64(gtid_31526, defunc_2_reduce_res_30100)) {\n                bool x_30166 = ((__global bool *) mem_32316)[gtid_31526];\n                \n                private_mem_36420[i_36424] = x_30166;\n                private_mem_36422[i_36424] = (int64_t) 1;\n            } else {\n                private_mem_36420[i_36424] = 0;\n                private_mem_36422[i_36424] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36425 = 0; i_36425 < (int64_t) 9; i_36425++) {\n            int64_t sharedIdx_36426 = sext_i32_i64(local_tid_36397) + i_36425 *\n                    segscan_group_sizze_31522;\n            \n          ",
            "  ((__local bool *) local_mem_36407)[sharedIdx_36426] =\n                private_mem_36420[i_36425];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36427 = 0; i_36427 < 9; i_36427++) {\n            int32_t sharedIdx_36428 = local_tid_36397 * 9 + i_36427;\n            \n            private_mem_36420[sext_i32_i64(i_36427)] = ((__local\n                                                         bool *) local_mem_36407)[sext_i32_i64(sharedIdx_36428)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36429 = 0; i_36429 < (int64_t) 9; i_36429++) {\n            int64_t sharedIdx_36430 = sext_i32_i64(local_tid_36397) + i_36429 *\n                    segscan_group_sizze_31522;\n            \n            ((__local int64_t *) local_mem_36407)[sharedIdx_36430] =\n                private_mem_36422[i_36429];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36431 = 0; i_36431 < 9; i_36431++) {\n            int32_t sharedIdx_36432 = local_tid_36397 * 9 + i_36431;\n            \n            private_mem_36422[sext_i32_i64(i_36431)] = ((__local\n                                                         int64_t *) local_mem_36407)[sext_i32_i64(sharedIdx_36432)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_36433 = 0; i_36433 < (int64_t) 8; i_36433++) {\n            bool x_30159;\n            bool x_30161;\n            \n            x_30159 = private_mem_36420[i_36433];\n            x_30161 = private_mem_36420[i_36433 + (int64_t) 1];\n            \n            int64_t x_30160;\n            int64_t x_30162;\n            \n            x_30160 = private_mem_36422[i_36433];\n            x_30162 = private_mem_36422[i_36433 + (int64_t) 1];\n            \n            bool defunc_1_op_res_30163;\n            \n            defunc_1_op_res_30163 = x_30159 || x_30161;\n            \n            int64_t defunc_1_op_res_30164;\n            \n            if (x_30161) {\n                defunc_1_op_res_30164 = ",
            "x_30162;\n            } else {\n                int64_t defunc_1_op_res_30165 = add64(x_30160, x_30162);\n                \n                defunc_1_op_res_30164 = defunc_1_op_res_30165;\n            }\n            private_mem_36420[i_36433 + (int64_t) 1] = defunc_1_op_res_30163;\n            private_mem_36422[i_36433 + (int64_t) 1] = defunc_1_op_res_30164;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_36407)[byte_offsets_36401 +\n                                           sext_i32_i64(local_tid_36397)] =\n            private_mem_36420[(int64_t) 8];\n        ((__local int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_36397)] =\n            private_mem_36422[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_36441;\n    int64_t acc_36442;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_36434;\n        int64_t x_36435;\n        bool x_36436;\n        int64_t x_36437;\n        bool x_36443;\n        int64_t x_36444;\n        bool x_36445;\n        int64_t x_36446;\n        bool ltid_in_bounds_36450;\n        \n        ltid_in_bounds_36450 = slt64(sext_i32_i64(local_tid_36397),\n                                     segscan_group_sizze_31522);\n        \n        int32_t skip_threads_36451;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_36450) {\n                x_36436 = ((volatile __local\n                            bool *) local_mem_36407)[byte_offsets_36401 +\n                                                     sext_i32_i64(local_tid_36397)];\n                x_36437 = ((volatile __local\n                            int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local",
            "_tid_36397)];\n                if ((local_tid_36397 - squot32(local_tid_36397, 32) * 32) ==\n                    0) {\n                    x_36434 = x_36436;\n                    x_36435 = x_36437;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_36451 = 1;\n            while (slt32(skip_threads_36451, 32)) {\n                if (sle32(skip_threads_36451, local_tid_36397 -\n                          squot32(local_tid_36397, 32) * 32) &&\n                    ltid_in_bounds_36450) {\n                    // read operands\n                    {\n                        x_36434 = ((volatile __local\n                                    bool *) local_mem_36407)[byte_offsets_36401 +\n                                                             (sext_i32_i64(local_tid_36397) -\n                                                              sext_i32_i64(skip_threads_36451))];\n                        x_36435 = ((volatile __local\n                                    int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_36397) -\n                                                                 sext_i32_i64(skip_threads_36451))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_36438 = x_36434 || x_36436;\n                        int64_t defunc_1_op_res_36439;\n                        \n                        if (x_36436) {\n                            defunc_1_op_res_36439 = x_36437;\n                        } else {\n                            int64_t defunc_1_op_res_36440 = add64(x_36435,\n                                                                  x_36437);\n                            \n                            defunc_1_op_res_36439 = defunc_1_op_res_364",
            "40;\n                        }\n                        x_36434 = defunc_1_op_res_36438;\n                        x_36435 = defunc_1_op_res_36439;\n                    }\n                }\n                if (sle32(wave_sizze_36399, skip_threads_36451)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_36451, local_tid_36397 -\n                          squot32(local_tid_36397, 32) * 32) &&\n                    ltid_in_bounds_36450) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_36407)[byte_offsets_36401 +\n                                                   sext_i32_i64(local_tid_36397)] =\n                            x_36434;\n                        x_36436 = x_36434;\n                        ((volatile __local\n                          int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_36397)] =\n                            x_36435;\n                        x_36437 = x_36435;\n                    }\n                }\n                if (sle32(wave_sizze_36399, skip_threads_36451)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_36451 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_36397 - squot32(local_tid_36397, 32) * 32) == 31 &&\n                ltid_in_bounds_36450) {\n                ((volatile __local bool *) local_mem_36407)[byte_offsets_36401 +\n                                                            sext_i32_i64(squot32(local_tid_36397,\n                                                                                 32))] =\n                    x_36434;\n                ((volatile __lo",
            "cal\n                  int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_36397,\n                                                                   32))] =\n                    x_36435;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_36452;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_36397, 32) == 0 && ltid_in_bounds_36450) {\n                    x_36445 = ((volatile __local\n                                bool *) local_mem_36407)[byte_offsets_36401 +\n                                                         sext_i32_i64(local_tid_36397)];\n                    x_36446 = ((volatile __local\n                                int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_36397)];\n                    if ((local_tid_36397 - squot32(local_tid_36397, 32) * 32) ==\n                        0) {\n                        x_36443 = x_36445;\n                        x_36444 = x_36446;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_36452 = 1;\n                while (slt32(skip_threads_36452, 32)) {\n                    if (sle32(skip_threads_36452, local_tid_36397 -\n                              squot32(local_tid_36397, 32) * 32) &&\n                        (squot32(local_tid_36397, 32) == 0 &&\n                         ltid_in_bounds_36450)) {\n                        // read operands\n                        {\n                            x_36443 = ((volatile",
            " __local\n                                        bool *) local_mem_36407)[byte_offsets_36401 +\n                                                                 (sext_i32_i64(local_tid_36397) -\n                                                                  sext_i32_i64(skip_threads_36452))];\n                            x_36444 = ((volatile __local\n                                        int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_36397) -\n                                                                     sext_i32_i64(skip_threads_36452))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_36447 = x_36443 || x_36445;\n                            int64_t defunc_1_op_res_36448;\n                            \n                            if (x_36445) {\n                                defunc_1_op_res_36448 = x_36446;\n                            } else {\n                                int64_t defunc_1_op_res_36449 = add64(x_36444,\n                                                                      x_36446);\n                                \n                                defunc_1_op_res_36448 = defunc_1_op_res_36449;\n                            }\n                            x_36443 = defunc_1_op_res_36447;\n                            x_36444 = defunc_1_op_res_36448;\n                        }\n                    }\n                    if (sle32(wave_sizze_36399, skip_threads_36452)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_36452, local_tid_36397 -\n                              squot32(local_tid_36397, 32) * 32) &&\n                        (squot32(local_tid_36397, 32) == 0 &&\n                         ltid_in",
            "_bounds_36450)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_36407)[byte_offsets_36401 +\n                                                       sext_i32_i64(local_tid_36397)] =\n                                x_36443;\n                            x_36445 = x_36443;\n                            ((volatile __local\n                              int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_36397)] =\n                                x_36444;\n                            x_36446 = x_36444;\n                        }\n                    }\n                    if (sle32(wave_sizze_36399, skip_threads_36452)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_36452 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_36397, 32) == 0 || !ltid_in_bounds_36450)) {\n                // read operands\n                {\n                    x_36436 = x_36434;\n                    x_36437 = x_36435;\n                    x_36434 = ((__local\n                                bool *) local_mem_36407)[byte_offsets_36401 +\n                                                         (sext_i32_i64(squot32(local_tid_36397,\n                                                                               32)) -\n                                                          (int64_t) 1)];\n                    x_36435 = ((__local\n                                int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                                    (int64_t) 8) +\n                                               ",
            "             (sext_i32_i64(squot32(local_tid_36397,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_36438 = x_36434 || x_36436;\n                    int64_t defunc_1_op_res_36439;\n                    \n                    if (x_36436) {\n                        defunc_1_op_res_36439 = x_36437;\n                    } else {\n                        int64_t defunc_1_op_res_36440 = add64(x_36435, x_36437);\n                        \n                        defunc_1_op_res_36439 = defunc_1_op_res_36440;\n                    }\n                    x_36434 = defunc_1_op_res_36438;\n                    x_36435 = defunc_1_op_res_36439;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_36407)[byte_offsets_36401 +\n                                                       sext_i32_i64(local_tid_36397)] =\n                        x_36434;\n                    ((__local\n                      int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36397)] =\n                        x_36435;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_36397, 32) == 0) {\n                ((__local bool *) local_mem_36407)[byte_offsets_36401 +\n                                                   sext_i32_i64(local_tid_36397)] =\n                    x_36436;\n                ((__local\n                  int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                      (int64_t) 8) +\n                            ",
            "                  sext_i32_i64(local_tid_36397)] =\n                    x_36437;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_36397 == 0) {\n            acc_36441 = ((__local bool *) local_mem_36407)[byte_offsets_36401 +\n                                                           (segscan_group_sizze_31522 -\n                                                            (int64_t) 1)];\n            acc_36442 = ((__local\n                          int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31522 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_36441 = ((__local bool *) local_mem_36407)[byte_offsets_36401 +\n                                                           (sext_i32_i64(local_tid_36397) -\n                                                            (int64_t) 1)];\n            acc_36442 = ((__local\n                          int64_t *) local_mem_36407)[squot64(byte_offsets_36402,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_36397) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_36453;\n    \n    prefix_36453 = 0;\n    \n    int64_t prefix_36454;\n    \n    prefix_36454 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_36418 == (int64_t) 0 && local_tid_36397 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_36390)[dynamic_id_36418] = acc_36441;\n            ((volatile __global\n              int64_t *) incprefixes_mem_36394)[dynamic_id_36418] = acc_36442;\n            mem_fence_global();\n            ((volatile __global\n              int8_t",
            " *) status_flags_mem_36386)[dynamic_id_36418] = (int8_t) 2;\n            acc_36441 = 0;\n            acc_36442 = (int64_t) 0;\n        }\n        if (!(dynamic_id_36418 == (int64_t) 0) && slt32(local_tid_36397,\n                                                        wave_sizze_36399)) {\n            if (local_tid_36397 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_36388)[dynamic_id_36418] = acc_36441;\n                ((volatile __global\n                  int64_t *) aggregates_mem_36392)[dynamic_id_36418] =\n                    acc_36442;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36386)[dynamic_id_36418] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_36407)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_36386)[dynamic_id_36418 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_36455;\n            \n            status_36455 = ((__local int8_t *) local_mem_36407)[(int64_t) 0];\n            if (status_36455 == (int8_t) 2) {\n                if (local_tid_36397 == 0) {\n                    prefix_36453 = ((volatile __global\n                                     bool *) incprefixes_mem_36390)[dynamic_id_36418 -\n                                                                    (int64_t) 1];\n                    prefix_36454 = ((volatile __global\n                                     int64_t *) incprefixes_mem_36394)[dynamic_id_36418 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_36456 = dynamic_id_36418 -\n                        sext_i32_i64(wave_sizze_36399);\n                \n                while (slt3",
            "2(wave_sizze_36399 * -1, readOffset_36456)) {\n                    int32_t read_i_36457 = readOffset_36456 + local_tid_36397;\n                    bool aggr_36458 = 0;\n                    int64_t aggr_36459 = (int64_t) 0;\n                    int8_t flag_36460 = (int8_t) 0;\n                    int8_t used_36461 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_36457)) {\n                        flag_36460 = ((volatile __global\n                                       int8_t *) status_flags_mem_36386)[sext_i32_i64(read_i_36457)];\n                        if (flag_36460 == (int8_t) 2) {\n                            aggr_36458 = ((volatile __global\n                                           bool *) incprefixes_mem_36390)[sext_i32_i64(read_i_36457)];\n                            aggr_36459 = ((volatile __global\n                                           int64_t *) incprefixes_mem_36394)[sext_i32_i64(read_i_36457)];\n                        } else {\n                            if (flag_36460 == (int8_t) 1) {\n                                aggr_36458 = ((volatile __global\n                                               bool *) aggregates_mem_36388)[sext_i32_i64(read_i_36457)];\n                                aggr_36459 = ((volatile __global\n                                               int64_t *) aggregates_mem_36392)[sext_i32_i64(read_i_36457)];\n                                used_36461 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_36407)[warp_byte_offset_36404 +\n                                                       sext_i32_i64(local_tid_36397)] =\n                        aggr_36458;\n                    ((__local\n                      int64_t *) local_mem_36407)[squot64(warp_byte_offset_36405,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36397)] =\n              ",
            "          aggr_36459;\n                    \n                    int8_t tmp_36462;\n                    \n                    tmp_36462 = flag_36460 | used_36461 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_36407)[sext_i32_i64(local_tid_36397)] =\n                        tmp_36462;\n                    mem_fence_local();\n                    flag_36460 = ((volatile __local\n                                   int8_t *) local_mem_36407)[sext_i32_i64(wave_sizze_36399) -\n                                                              (int64_t) 1];\n                    if (local_tid_36397 == 0) {\n                        if (!(flag_36460 == (int8_t) 2)) {\n                            bool x_36463 = 0;\n                            int64_t x_36464 = (int64_t) 0;\n                            bool x_36465;\n                            int64_t x_36466;\n                            int8_t flag1_36470;\n                            \n                            flag1_36470 = (int8_t) 0;\n                            \n                            int8_t flag2_36471;\n                            int8_t used1_36472;\n                            \n                            used1_36472 = (int8_t) 0;\n                            \n                            int8_t used2_36473;\n                            \n                            for (int32_t i_36474 = 0; i_36474 <\n                                 wave_sizze_36399; i_36474++) {\n                                flag2_36471 = ((__local\n                                                int8_t *) local_mem_36407)[sext_i32_i64(i_36474)];\n                                used2_36473 = lshr8(flag2_36471, (int8_t) 2);\n                                flag2_36471 = flag2_36471 & (int8_t) 3;\n                                x_36465 = ((__local\n                                            bool *) local_mem_36407)[warp_byte_offset_36404 +\n                                                                     sext_i32_i64(i_36474)];\n  ",
            "                              x_36466 = ((__local\n                                            int64_t *) local_mem_36407)[squot64(warp_byte_offset_36405,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_36474)];\n                                if (!(flag2_36471 == (int8_t) 1)) {\n                                    flag1_36470 = flag2_36471;\n                                    used1_36472 = used2_36473;\n                                    x_36463 = x_36465;\n                                    x_36464 = x_36466;\n                                } else {\n                                    used1_36472 += used2_36473;\n                                    \n                                    bool defunc_1_op_res_36467;\n                                    \n                                    defunc_1_op_res_36467 = x_36463 || x_36465;\n                                    \n                                    int64_t defunc_1_op_res_36468;\n                                    \n                                    if (x_36465) {\n                                        defunc_1_op_res_36468 = x_36466;\n                                    } else {\n                                        int64_t defunc_1_op_res_36469 =\n                                                add64(x_36464, x_36466);\n                                        \n                                        defunc_1_op_res_36468 =\n                                            defunc_1_op_res_36469;\n                                    }\n                                    x_36463 = defunc_1_op_res_36467;\n                                    x_36464 = defunc_1_op_res_36468;\n                                }\n                            }\n                            flag_36460 = flag1_36470;\n                            used_36461 = used1_36472;\n                            aggr_36458 = x_36463;\n   ",
            "                         aggr_36459 = x_36464;\n                        } else {\n                            aggr_36458 = ((__local\n                                           bool *) local_mem_36407)[warp_byte_offset_36404 +\n                                                                    (sext_i32_i64(wave_sizze_36399) -\n                                                                     (int64_t) 1)];\n                            aggr_36459 = ((__local\n                                           int64_t *) local_mem_36407)[squot64(warp_byte_offset_36405,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_36399) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_36460 == (int8_t) 2) {\n                            readOffset_36456 = wave_sizze_36399 * -1;\n                        } else {\n                            readOffset_36456 -= zext_i8_i32(used_36461);\n                        }\n                        ((__local int32_t *) local_mem_36407)[(int64_t) 0] =\n                            readOffset_36456;\n                        \n                        bool x_36475;\n                        \n                        x_36475 = aggr_36458;\n                        \n                        int64_t x_36476;\n                        \n                        x_36476 = aggr_36459;\n                        \n                        bool x_36477;\n                        \n                        x_36477 = prefix_36453;\n                        \n                        int64_t x_36478;\n                        \n                        x_36478 = prefix_36454;\n                        \n                        bool defunc_1_op_res_36479;\n                        \n                        defunc_1_op_res_36479 = x_36475 || x_36477;\n                        \n  ",
            "                      int64_t defunc_1_op_res_36480;\n                        \n                        if (x_36477) {\n                            defunc_1_op_res_36480 = x_36478;\n                        } else {\n                            int64_t defunc_1_op_res_36481 = add64(x_36476,\n                                                                  x_36478);\n                            \n                            defunc_1_op_res_36480 = defunc_1_op_res_36481;\n                        }\n                        prefix_36453 = defunc_1_op_res_36479;\n                        prefix_36454 = defunc_1_op_res_36480;\n                    }\n                    mem_fence_local();\n                    readOffset_36456 = ((__local\n                                         int32_t *) local_mem_36407)[(int64_t) 0];\n                }\n            }\n            if (local_tid_36397 == 0) {\n                bool x_36482 = prefix_36453;\n                int64_t x_36483 = prefix_36454;\n                bool x_36484 = acc_36441;\n                int64_t x_36485 = acc_36442;\n                bool defunc_1_op_res_36486 = x_36482 || x_36484;\n                int64_t defunc_1_op_res_36487;\n                \n                if (x_36484) {\n                    defunc_1_op_res_36487 = x_36485;\n                } else {\n                    int64_t defunc_1_op_res_36488 = add64(x_36483, x_36485);\n                    \n                    defunc_1_op_res_36487 = defunc_1_op_res_36488;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_36390)[dynamic_id_36418] =\n                    defunc_1_op_res_36486;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_36394)[dynamic_id_36418] =\n                    defunc_1_op_res_36487;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36386)[dynamic_id_36418] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem",
            "_36407)[warp_byte_offset_36404] =\n                    prefix_36453;\n                ((__local\n                  int64_t *) local_mem_36407)[squot64(warp_byte_offset_36405,\n                                                      (int64_t) 8)] =\n                    prefix_36454;\n                acc_36441 = 0;\n                acc_36442 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_36418 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_36453 = ((__local\n                             bool *) local_mem_36407)[warp_byte_offset_36404];\n            prefix_36454 = ((__local\n                             int64_t *) local_mem_36407)[squot64(warp_byte_offset_36405,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_36489;\n        bool x_36491;\n        bool x_36496;\n        \n        x_36496 = prefix_36453;\n        \n        bool x_36498;\n        \n        x_36498 = acc_36441;\n        \n        int64_t x_36490;\n        int64_t x_36492;\n        int64_t x_36497;\n        \n        x_36497 = prefix_36454;\n        \n        int64_t x_36499;\n        \n        x_36499 = acc_36442;\n        \n        bool defunc_1_op_res_36500;\n        \n        defunc_1_op_res_36500 = x_36496 || x_36498;\n        \n        int64_t defunc_1_op_res_36501;\n        \n        if (x_36498) {\n            defunc_1_op_res_36501 = x_36499;\n        } else {\n            int64_t defunc_1_op_res_36502 = add64(x_36497, x_36499);\n            \n            defunc_1_op_res_36501 = defunc_1_op_res_36502;\n        }\n        x_36489 = defunc_1_op_res_36500;\n        x_36490 = defunc_1_op_res_36501;\n        for (int64_t i_36503 = 0; i_36503 < (int64_t) 9; i_36503++) {\n            x_36491 = private_mem_36420[i_36503];\n            x_36492 = private_mem_36422[i_36503];\n            \n            bool defunc_1_op_res_36493;\n            \n            defunc_1_op_res_36493 ",
            "= x_36489 || x_36491;\n            \n            int64_t defunc_1_op_res_36494;\n            \n            if (x_36491) {\n                defunc_1_op_res_36494 = x_36492;\n            } else {\n                int64_t defunc_1_op_res_36495 = add64(x_36490, x_36492);\n                \n                defunc_1_op_res_36494 = defunc_1_op_res_36495;\n            }\n            private_mem_36420[i_36503] = defunc_1_op_res_36493;\n            private_mem_36422[i_36503] = defunc_1_op_res_36494;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36504 = 0; i_36504 < (int64_t) 9; i_36504++) {\n            int64_t sharedIdx_36505 = sext_i32_i64(local_tid_36397 * 9) +\n                    i_36504;\n            \n            ((__local bool *) local_mem_36407)[sharedIdx_36505] =\n                private_mem_36420[i_36504];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36506 = 0; i_36506 < (int64_t) 9; i_36506++) {\n            int32_t sharedIdx_36507 = local_tid_36397 +\n                    sext_i64_i32(segscan_group_sizze_31522 * i_36506);\n            \n            private_mem_36420[i_36506] = ((__local\n                                           bool *) local_mem_36407)[sext_i32_i64(sharedIdx_36507)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36508 = 0; i_36508 < (int64_t) 9; i_36508++) {\n            int64_t sharedIdx_36509 = sext_i32_i64(local_tid_36397 * 9) +\n                    i_36508;\n            \n            ((__local int64_t *) local_mem_36407)[sharedIdx_36509] =\n                private_mem_36422[i_36508];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36510 = 0; i_36510 < (int64_t) 9; i_36510++) {\n            int32_t sharedIdx_36511 = local_tid_36397 +\n                    sext_i64_i32(segscan_group_sizze_31522 * i_36510);\n            \n            private_mem_36422[i_36510] = ((__local\n                                           int64_t *) local_mem_364",
            "07)[sext_i32_i64(sharedIdx_36511)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_36512 = 0; i_36512 < (int64_t) 9; i_36512++) {\n            int64_t gtid_31526 = blockOff_36419 + segscan_group_sizze_31522 *\n                    i_36512 + sext_i32_i64(local_tid_36397);\n            \n            if (slt64(gtid_31526, defunc_2_reduce_res_30100)) {\n                ((__global bool *) mem_32324)[gtid_31526] =\n                    private_mem_36420[i_36512];\n            }\n        }\n        for (int64_t i_36513 = 0; i_36513 < (int64_t) 9; i_36513++) {\n            int64_t gtid_31526 = blockOff_36419 + segscan_group_sizze_31522 *\n                    i_36513 + sext_i32_i64(local_tid_36397);\n            \n            if (slt64(gtid_31526, defunc_2_reduce_res_30100)) {\n                ((__global int64_t *) mem_32326)[gtid_31526] =\n                    private_mem_36422[i_36513];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_36418 == sdiv_up64(defunc_2_reduce_res_30100,\n                                          segscan_group_sizze_31522 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_36384)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31522\n}\n__kernel void clusterPointszisegscan_31591(__global int *global_failure,\n                                           uint local_mem_36539_backing_offset_0,\n                                           int64_t sizze_30080, __global\n                                           unsigned char *clusterWith_res_mem_32335,\n                                           __global unsigned char *mem_32338,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_36522,\n               ",
            "                            __global\n                                           unsigned char *status_flags_mem_36524,\n                                           __global\n                                           unsigned char *aggregates_mem_36526,\n                                           __global\n                                           unsigned char *incprefixes_mem_36528)\n{\n    #define segscan_group_sizze_31586 (clusterPointszisegscan_group_sizze_31585)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_36539_backing_0 =\n                  &shared_mem[local_mem_36539_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36530;\n    int32_t local_tid_36531;\n    int64_t group_sizze_36534;\n    int32_t wave_sizze_36533;\n    int32_t group_tid_36532;\n    \n    global_tid_36530 = get_global_id(0);\n    local_tid_36531 = get_local_id(0);\n    group_sizze_36534 = get_local_size(0);\n    wave_sizze_36533 = LOCKSTEP_WIDTH;\n    group_tid_36532 = get_group_id(0);\n    \n    int32_t phys_tid_31591;\n    \n    phys_tid_31591 = global_tid_36530;\n    \n    int64_t byte_offsets_36535;\n    \n    byte_offsets_36535 = (int64_t) 0;\n    \n    int64_t byte_offsets_36536;\n    \n    byte_offsets_36536 = segscan_group_sizze_31586 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_36537;\n    \n    warp_byte_offset_36537 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_36538;\n    \n    warp_byte_offset_36538 = (int64_t) 288;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_36539;\n    \n    local_mem_36539 = (__local char *) local_mem_36539_backing_0;\n    \n    int64_t trans_arr_len_36540;\n    \n    trans_arr_len_36540 = (int64_t) 9 * segscan_group_sizze_31586;\n    \n    int32_t dynamic_id_36547;\n    \n    if (local_tid_36531 == 0) {\n        dynamic_id_36547 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clu",
            "sterPointsziid_counter_mem_36522)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_36539)[(int64_t) 0] = dynamic_id_36547;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_36547 = ((__local int32_t *) local_mem_36539)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_36548;\n    \n    blockOff_36548 = sext_i32_i64(dynamic_id_36547) * (int64_t) 9 *\n        segscan_group_sizze_31586;\n    \n    int64_t private_mem_36549[9];\n    \n    // Load and map\n    {\n        for (int64_t i_36551 = 0; i_36551 < (int64_t) 9; i_36551++) {\n            int64_t gtid_31590 = blockOff_36548 +\n                    sext_i32_i64(local_tid_36531) + i_36551 *\n                    segscan_group_sizze_31586;\n            \n            if (slt64(gtid_31590, sizze_30080)) {\n                int64_t x_30207 = ((__global\n                                    int64_t *) clusterWith_res_mem_32335)[gtid_31590];\n                \n                private_mem_36549[i_36551] = x_30207;\n            } else {\n                private_mem_36549[i_36551] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36552 = 0; i_36552 < (int64_t) 9; i_36552++) {\n            int64_t sharedIdx_36553 = sext_i32_i64(local_tid_36531) + i_36552 *\n                    segscan_group_sizze_31586;\n            \n            ((__local int64_t *) local_mem_36539)[sharedIdx_36553] =\n                private_mem_36549[i_36552];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36554 = 0; i_36554 < 9; i_36554++) {\n            int32_t sharedIdx_36555 = local_tid_36531 * 9 + i_36554;\n            \n            private_mem_36549[sext_i32_i64(i_36554)] = ((__local\n                                                         int64_t *) local_mem_36539)[sext_i32_i64(sharedIdx_36555)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {",
            "\n        for (int64_t i_36556 = 0; i_36556 < (int64_t) 8; i_36556++) {\n            int64_t x_30204;\n            int64_t x_30205;\n            \n            x_30204 = private_mem_36549[i_36556];\n            x_30205 = private_mem_36549[i_36556 + (int64_t) 1];\n            \n            int64_t defunc_1_op_res_30206;\n            \n            defunc_1_op_res_30206 = add64(x_30204, x_30205);\n            private_mem_36549[i_36556 + (int64_t) 1] = defunc_1_op_res_30206;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_36531)] =\n            private_mem_36549[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t acc_36560;\n    \n    // Scan results (with warp scan)\n    {\n        int64_t x_36557;\n        int64_t x_36558;\n        int64_t x_36561;\n        int64_t x_36562;\n        bool ltid_in_bounds_36564;\n        \n        ltid_in_bounds_36564 = slt64(sext_i32_i64(local_tid_36531),\n                                     segscan_group_sizze_31586);\n        \n        int32_t skip_threads_36565;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_36564) {\n                x_36558 = ((volatile __local\n                            int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_36531)];\n                if ((local_tid_36531 - squot32(local_tid_36531, 32) * 32) ==\n                    0) {\n                    x_36557 = x_36558;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_36565 = 1;\n            while (slt32(skip_threads_36565, 32)) {\n                if (sle32(skip_thr",
            "eads_36565, local_tid_36531 -\n                          squot32(local_tid_36531, 32) * 32) &&\n                    ltid_in_bounds_36564) {\n                    // read operands\n                    {\n                        x_36557 = ((volatile __local\n                                    int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_36531) -\n                                                                 sext_i32_i64(skip_threads_36565))];\n                    }\n                    // perform operation\n                    {\n                        int64_t defunc_1_op_res_36559 = add64(x_36557, x_36558);\n                        \n                        x_36557 = defunc_1_op_res_36559;\n                    }\n                }\n                if (sle32(wave_sizze_36533, skip_threads_36565)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_36565, local_tid_36531 -\n                          squot32(local_tid_36531, 32) * 32) &&\n                    ltid_in_bounds_36564) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                              (int64_t) 8) +\n                                                      sext_i32_i64(local_tid_36531)] =\n                            x_36557;\n                        x_36558 = x_36557;\n                    }\n                }\n                if (sle32(wave_sizze_36533, skip_threads_36565)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_36565 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n     ",
            "   {\n            if ((local_tid_36531 - squot32(local_tid_36531, 32) * 32) == 31 &&\n                ltid_in_bounds_36564) {\n                ((volatile __local\n                  int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_36531,\n                                                                   32))] =\n                    x_36557;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_36566;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_36531, 32) == 0 && ltid_in_bounds_36564) {\n                    x_36562 = ((volatile __local\n                                int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                                    (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_36531)];\n                    if ((local_tid_36531 - squot32(local_tid_36531, 32) * 32) ==\n                        0) {\n                        x_36561 = x_36562;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_36566 = 1;\n                while (slt32(skip_threads_36566, 32)) {\n                    if (sle32(skip_threads_36566, local_tid_36531 -\n                              squot32(local_tid_36531, 32) * 32) &&\n                        (squot32(local_tid_36531, 32) == 0 &&\n                         ltid_in_bounds_36564)) {\n                        // read operands\n                        {\n                            x_36561 = ((volatile __local\n                                        int64_t *) local_mem_36539)[squot64(byte_offsets_36535,",
            "\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_36531) -\n                                                                     sext_i32_i64(skip_threads_36566))];\n                        }\n                        // perform operation\n                        {\n                            int64_t defunc_1_op_res_36563 = add64(x_36561,\n                                                                  x_36562);\n                            \n                            x_36561 = defunc_1_op_res_36563;\n                        }\n                    }\n                    if (sle32(wave_sizze_36533, skip_threads_36566)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_36566, local_tid_36531 -\n                              squot32(local_tid_36531, 32) * 32) &&\n                        (squot32(local_tid_36531, 32) == 0 &&\n                         ltid_in_bounds_36564)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_36531)] =\n                                x_36561;\n                            x_36562 = x_36561;\n                        }\n                    }\n                    if (sle32(wave_sizze_36533, skip_threads_36566)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_36566 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_36531, 32) == 0 || !ltid_in_bounds_36564)) ",
            "{\n                // read operands\n                {\n                    x_36558 = x_36557;\n                    x_36557 = ((__local\n                                int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_36531,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    int64_t defunc_1_op_res_36559 = add64(x_36557, x_36558);\n                    \n                    x_36557 = defunc_1_op_res_36559;\n                }\n                // write final result\n                {\n                    ((__local\n                      int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36531)] =\n                        x_36557;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_36531, 32) == 0) {\n                ((__local\n                  int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_36531)] =\n                    x_36558;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_36531 == 0) {\n            acc_36560 = ((__local\n                          int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                              (int64_t) 8) +\n                                       ",
            "               (segscan_group_sizze_31586 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_36560 = ((__local\n                          int64_t *) local_mem_36539)[squot64(byte_offsets_36535,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_36531) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    int64_t prefix_36567;\n    \n    prefix_36567 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_36547 == (int64_t) 0 && local_tid_36531 == 0) {\n            ((volatile __global\n              int64_t *) incprefixes_mem_36528)[dynamic_id_36547] = acc_36560;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_36524)[dynamic_id_36547] = (int8_t) 2;\n            acc_36560 = (int64_t) 0;\n        }\n        if (!(dynamic_id_36547 == (int64_t) 0) && slt32(local_tid_36531,\n                                                        wave_sizze_36533)) {\n            if (local_tid_36531 == 0) {\n                ((volatile __global\n                  int64_t *) aggregates_mem_36526)[dynamic_id_36547] =\n                    acc_36560;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36524)[dynamic_id_36547] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_36539)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_36524)[dynamic_id_36547 -\n                                                                                                        (int64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_36568;\n            \n            status_36568 = ((__local int8_t *) local_mem_36539)[(i",
            "nt64_t) 0];\n            if (status_36568 == (int8_t) 2) {\n                if (local_tid_36531 == 0) {\n                    prefix_36567 = ((volatile __global\n                                     int64_t *) incprefixes_mem_36528)[dynamic_id_36547 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_36569 = dynamic_id_36547 -\n                        sext_i32_i64(wave_sizze_36533);\n                \n                while (slt32(wave_sizze_36533 * -1, readOffset_36569)) {\n                    int32_t read_i_36570 = readOffset_36569 + local_tid_36531;\n                    int64_t aggr_36571 = (int64_t) 0;\n                    int8_t flag_36572 = (int8_t) 0;\n                    int8_t used_36573 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_36570)) {\n                        flag_36572 = ((volatile __global\n                                       int8_t *) status_flags_mem_36524)[sext_i32_i64(read_i_36570)];\n                        if (flag_36572 == (int8_t) 2) {\n                            aggr_36571 = ((volatile __global\n                                           int64_t *) incprefixes_mem_36528)[sext_i32_i64(read_i_36570)];\n                        } else {\n                            if (flag_36572 == (int8_t) 1) {\n                                aggr_36571 = ((volatile __global\n                                               int64_t *) aggregates_mem_36526)[sext_i32_i64(read_i_36570)];\n                                used_36573 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local\n                      int64_t *) local_mem_36539)[squot64(warp_byte_offset_36537,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36531)] =\n                        aggr_36571;\n                    \n    ",
            "                int8_t tmp_36574;\n                    \n                    tmp_36574 = flag_36572 | used_36573 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_36539)[sext_i32_i64(local_tid_36531)] =\n                        tmp_36574;\n                    mem_fence_local();\n                    flag_36572 = ((volatile __local\n                                   int8_t *) local_mem_36539)[sext_i32_i64(wave_sizze_36533) -\n                                                              (int64_t) 1];\n                    if (local_tid_36531 == 0) {\n                        if (!(flag_36572 == (int8_t) 2)) {\n                            int64_t x_36575 = (int64_t) 0;\n                            int64_t x_36576;\n                            int8_t flag1_36578;\n                            \n                            flag1_36578 = (int8_t) 0;\n                            \n                            int8_t flag2_36579;\n                            int8_t used1_36580;\n                            \n                            used1_36580 = (int8_t) 0;\n                            \n                            int8_t used2_36581;\n                            \n                            for (int32_t i_36582 = 0; i_36582 <\n                                 wave_sizze_36533; i_36582++) {\n                                flag2_36579 = ((__local\n                                                int8_t *) local_mem_36539)[sext_i32_i64(i_36582)];\n                                used2_36581 = lshr8(flag2_36579, (int8_t) 2);\n                                flag2_36579 = flag2_36579 & (int8_t) 3;\n                                x_36576 = ((__local\n                                            int64_t *) local_mem_36539)[squot64(warp_byte_offset_36537,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_36582)];\n                             ",
            "   if (!(flag2_36579 == (int8_t) 1)) {\n                                    flag1_36578 = flag2_36579;\n                                    used1_36580 = used2_36581;\n                                    x_36575 = x_36576;\n                                } else {\n                                    used1_36580 += used2_36581;\n                                    \n                                    int64_t defunc_1_op_res_36577;\n                                    \n                                    defunc_1_op_res_36577 = add64(x_36575,\n                                                                  x_36576);\n                                    x_36575 = defunc_1_op_res_36577;\n                                }\n                            }\n                            flag_36572 = flag1_36578;\n                            used_36573 = used1_36580;\n                            aggr_36571 = x_36575;\n                        } else {\n                            aggr_36571 = ((__local\n                                           int64_t *) local_mem_36539)[squot64(warp_byte_offset_36537,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_36533) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_36572 == (int8_t) 2) {\n                            readOffset_36569 = wave_sizze_36533 * -1;\n                        } else {\n                            readOffset_36569 -= zext_i8_i32(used_36573);\n                        }\n                        ((__local int32_t *) local_mem_36539)[(int64_t) 0] =\n                            readOffset_36569;\n                        \n                        int64_t x_36583;\n                        \n                        x_36583 = aggr_36571;\n                        \n                        int64_t x_36584;\n         ",
            "               \n                        x_36584 = prefix_36567;\n                        \n                        int64_t defunc_1_op_res_36585;\n                        \n                        defunc_1_op_res_36585 = add64(x_36583, x_36584);\n                        prefix_36567 = defunc_1_op_res_36585;\n                    }\n                    mem_fence_local();\n                    readOffset_36569 = ((__local\n                                         int32_t *) local_mem_36539)[(int64_t) 0];\n                }\n            }\n            if (local_tid_36531 == 0) {\n                int64_t x_36586 = prefix_36567;\n                int64_t x_36587 = acc_36560;\n                int64_t defunc_1_op_res_36588 = add64(x_36586, x_36587);\n                \n                ((volatile __global\n                  int64_t *) incprefixes_mem_36528)[dynamic_id_36547] =\n                    defunc_1_op_res_36588;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36524)[dynamic_id_36547] =\n                    (int8_t) 2;\n                ((__local\n                  int64_t *) local_mem_36539)[squot64(warp_byte_offset_36537,\n                                                      (int64_t) 8)] =\n                    prefix_36567;\n                acc_36560 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_36547 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_36567 = ((__local\n                             int64_t *) local_mem_36539)[squot64(warp_byte_offset_36537,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        int64_t x_36589;\n        int64_t x_36590;\n        int64_t x_36592;\n        \n        x_36592 = prefix_36567;\n        \n        int64_t x_36593;\n        \n        x_36593 = acc_36560;\n        \n        int64_t defunc_1_op_res_36594;\n        \n        defunc_",
            "1_op_res_36594 = add64(x_36592, x_36593);\n        x_36589 = defunc_1_op_res_36594;\n        for (int64_t i_36595 = 0; i_36595 < (int64_t) 9; i_36595++) {\n            x_36590 = private_mem_36549[i_36595];\n            \n            int64_t defunc_1_op_res_36591;\n            \n            defunc_1_op_res_36591 = add64(x_36589, x_36590);\n            private_mem_36549[i_36595] = defunc_1_op_res_36591;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36596 = 0; i_36596 < (int64_t) 9; i_36596++) {\n            int64_t sharedIdx_36597 = sext_i32_i64(local_tid_36531 * 9) +\n                    i_36596;\n            \n            ((__local int64_t *) local_mem_36539)[sharedIdx_36597] =\n                private_mem_36549[i_36596];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36598 = 0; i_36598 < (int64_t) 9; i_36598++) {\n            int32_t sharedIdx_36599 = local_tid_36531 +\n                    sext_i64_i32(segscan_group_sizze_31586 * i_36598);\n            \n            private_mem_36549[i_36598] = ((__local\n                                           int64_t *) local_mem_36539)[sext_i32_i64(sharedIdx_36599)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_36600 = 0; i_36600 < (int64_t) 9; i_36600++) {\n            int64_t gtid_31590 = blockOff_36548 + segscan_group_sizze_31586 *\n                    i_36600 + sext_i32_i64(local_tid_36531);\n            \n            if (slt64(gtid_31590, sizze_30080)) {\n                ((__global int64_t *) mem_32338)[gtid_31590] =\n                    private_mem_36549[i_36600];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (dynamic_id_36547 == sdiv_up64(sizze_30080,\n                                          segscan_group_sizze_31586 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n ",
            "             int32_t *) clusterPointsziid_counter_mem_36522)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31586\n}\n__kernel void clusterPointszisegscan_31624(__global int *global_failure,\n                                           uint local_mem_36799_backing_offset_0,\n                                           int64_t defunc_2_reduce_res_30210,\n                                           __global unsigned char *mem_32343,\n                                           __global unsigned char *mem_32347,\n                                           __global unsigned char *mem_32349,\n                                           __global\n                                           unsigned char *clusterPointsziid_counter_mem_36776,\n                                           __global\n                                           unsigned char *status_flags_mem_36778,\n                                           __global\n                                           unsigned char *aggregates_mem_36780,\n                                           __global\n                                           unsigned char *incprefixes_mem_36782,\n                                           __global\n                                           unsigned char *aggregates_mem_36784,\n                                           __global\n                                           unsigned char *incprefixes_mem_36786)\n{\n    #define segscan_group_sizze_31619 (clusterPointszisegscan_group_sizze_31618)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *local_mem_36799_backing_0 =\n                  &shared_mem[local_mem_36799_backing_offset_0];\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_36788;\n    int32_t local_tid_36789;\n    int64_t group_sizze_36792;\n    int32_t wave_sizze_36791;\n    int32_t group_tid_36790;\n    \n    global_tid_36788 = get_global_id(0);\n    local_tid_36789",
            " = get_local_id(0);\n    group_sizze_36792 = get_local_size(0);\n    wave_sizze_36791 = LOCKSTEP_WIDTH;\n    group_tid_36790 = get_group_id(0);\n    \n    int32_t phys_tid_31624;\n    \n    phys_tid_31624 = global_tid_36788;\n    \n    int64_t byte_offsets_36793;\n    \n    byte_offsets_36793 = (int64_t) 0;\n    \n    int64_t byte_offsets_36794;\n    \n    byte_offsets_36794 = segscan_group_sizze_31619;\n    \n    int64_t byte_offsets_36795;\n    \n    byte_offsets_36795 = sdiv_up64(segscan_group_sizze_31619, (int64_t) 8) *\n        (int64_t) 8 + segscan_group_sizze_31619 * (int64_t) 8;\n    \n    int64_t warp_byte_offset_36796;\n    \n    warp_byte_offset_36796 = (int64_t) 32;\n    \n    int64_t warp_byte_offset_36797;\n    \n    warp_byte_offset_36797 = (int64_t) 64;\n    \n    int64_t warp_byte_offset_36798;\n    \n    warp_byte_offset_36798 = (int64_t) 320;\n    // Allocate reused shared memeory\n    { }\n    \n    __local char *local_mem_36799;\n    \n    local_mem_36799 = (__local char *) local_mem_36799_backing_0;\n    \n    int64_t trans_arr_len_36800;\n    \n    trans_arr_len_36800 = (int64_t) 9 * segscan_group_sizze_31619;\n    \n    int32_t dynamic_id_36810;\n    \n    if (local_tid_36789 == 0) {\n        dynamic_id_36810 = atomic_add_i32_global(&((volatile __global\n                                                    int *) clusterPointsziid_counter_mem_36776)[(int64_t) 0],\n                                                 (int) 1);\n        ((__local int32_t *) local_mem_36799)[(int64_t) 0] = dynamic_id_36810;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    dynamic_id_36810 = ((__local int32_t *) local_mem_36799)[(int64_t) 0];\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int64_t blockOff_36811;\n    \n    blockOff_36811 = sext_i32_i64(dynamic_id_36810) * (int64_t) 9 *\n        segscan_group_sizze_31619;\n    \n    bool private_mem_36812[9];\n    int64_t private_mem_36814[9];\n    \n    // Load and map\n    {\n        for (int64_t i_36816 = 0; i_36816 < (int64_t) 9; i_36816++) {\n            int64_t gtid_31623 = blockOf",
            "f_36811 +\n                    sext_i32_i64(local_tid_36789) + i_36816 *\n                    segscan_group_sizze_31619;\n            \n            if (slt64(gtid_31623, defunc_2_reduce_res_30210)) {\n                int64_t x_30236 = ((__global int64_t *) mem_32343)[gtid_31623];\n                bool defunc_0_f_res_30237 = slt64((int64_t) 0, x_30236);\n                \n                private_mem_36812[i_36816] = defunc_0_f_res_30237;\n                private_mem_36814[i_36816] = x_30236;\n            } else {\n                private_mem_36812[i_36816] = 0;\n                private_mem_36814[i_36816] = (int64_t) 0;\n            }\n        }\n    }\n    // Transpose scan inputs\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36817 = 0; i_36817 < (int64_t) 9; i_36817++) {\n            int64_t sharedIdx_36818 = sext_i32_i64(local_tid_36789) + i_36817 *\n                    segscan_group_sizze_31619;\n            \n            ((__local bool *) local_mem_36799)[sharedIdx_36818] =\n                private_mem_36812[i_36817];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36819 = 0; i_36819 < 9; i_36819++) {\n            int32_t sharedIdx_36820 = local_tid_36789 * 9 + i_36819;\n            \n            private_mem_36812[sext_i32_i64(i_36819)] = ((__local\n                                                         bool *) local_mem_36799)[sext_i32_i64(sharedIdx_36820)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36821 = 0; i_36821 < (int64_t) 9; i_36821++) {\n            int64_t sharedIdx_36822 = sext_i32_i64(local_tid_36789) + i_36821 *\n                    segscan_group_sizze_31619;\n            \n            ((__local int64_t *) local_mem_36799)[sharedIdx_36822] =\n                private_mem_36814[i_36821];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int32_t i_36823 = 0; i_36823 < 9; i_36823++) {\n            int32_t sharedIdx_36824 = local_tid_36789 * 9 + i_36823;\n            \n            private_mem_36814[sex",
            "t_i32_i64(i_36823)] = ((__local\n                                                         int64_t *) local_mem_36799)[sext_i32_i64(sharedIdx_36824)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Per thread scan\n    {\n        for (int64_t i_36825 = 0; i_36825 < (int64_t) 8; i_36825++) {\n            bool x_30229;\n            bool x_30231;\n            \n            x_30229 = private_mem_36812[i_36825];\n            x_30231 = private_mem_36812[i_36825 + (int64_t) 1];\n            \n            int64_t x_30230;\n            int64_t x_30232;\n            \n            x_30230 = private_mem_36814[i_36825];\n            x_30232 = private_mem_36814[i_36825 + (int64_t) 1];\n            \n            bool defunc_1_op_res_30233;\n            \n            defunc_1_op_res_30233 = x_30229 || x_30231;\n            \n            int64_t defunc_1_op_res_30234;\n            \n            if (x_30231) {\n                defunc_1_op_res_30234 = x_30232;\n            } else {\n                int64_t defunc_1_op_res_30235 = add64(x_30230, x_30232);\n                \n                defunc_1_op_res_30234 = defunc_1_op_res_30235;\n            }\n            private_mem_36812[i_36825 + (int64_t) 1] = defunc_1_op_res_30233;\n            private_mem_36814[i_36825 + (int64_t) 1] = defunc_1_op_res_30234;\n        }\n    }\n    // Publish results in shared memory\n    {\n        ((__local bool *) local_mem_36799)[byte_offsets_36793 +\n                                           sext_i32_i64(local_tid_36789)] =\n            private_mem_36812[(int64_t) 8];\n        ((__local int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_36789)] =\n            private_mem_36814[(int64_t) 8];\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool acc_36833;\n    int64_t acc_36834;\n    \n    // Scan results (with warp scan)\n    {\n        bool x_36826;\n        int64_t x_36827;\n        boo",
            "l x_36828;\n        int64_t x_36829;\n        bool x_36835;\n        int64_t x_36836;\n        bool x_36837;\n        int64_t x_36838;\n        bool ltid_in_bounds_36842;\n        \n        ltid_in_bounds_36842 = slt64(sext_i32_i64(local_tid_36789),\n                                     segscan_group_sizze_31619);\n        \n        int32_t skip_threads_36843;\n        \n        // read input for in-block scan\n        {\n            if (ltid_in_bounds_36842) {\n                x_36828 = ((volatile __local\n                            bool *) local_mem_36799)[byte_offsets_36793 +\n                                                     sext_i32_i64(local_tid_36789)];\n                x_36829 = ((volatile __local\n                            int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                                (int64_t) 8) +\n                                                        sext_i32_i64(local_tid_36789)];\n                if ((local_tid_36789 - squot32(local_tid_36789, 32) * 32) ==\n                    0) {\n                    x_36826 = x_36828;\n                    x_36827 = x_36829;\n                }\n            }\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_36843 = 1;\n            while (slt32(skip_threads_36843, 32)) {\n                if (sle32(skip_threads_36843, local_tid_36789 -\n                          squot32(local_tid_36789, 32) * 32) &&\n                    ltid_in_bounds_36842) {\n                    // read operands\n                    {\n                        x_36826 = ((volatile __local\n                                    bool *) local_mem_36799)[byte_offsets_36793 +\n                                                             (sext_i32_i64(local_tid_36789) -\n                                                              sext_i32_i64(skip_threads_36843))];\n                        x_36827 = ((volatile __local\n                                    int64_t *) local_mem_36799",
            ")[squot64(byte_offsets_36794,\n                                                                        (int64_t) 8) +\n                                                                (sext_i32_i64(local_tid_36789) -\n                                                                 sext_i32_i64(skip_threads_36843))];\n                    }\n                    // perform operation\n                    {\n                        bool defunc_1_op_res_36830 = x_36826 || x_36828;\n                        int64_t defunc_1_op_res_36831;\n                        \n                        if (x_36828) {\n                            defunc_1_op_res_36831 = x_36829;\n                        } else {\n                            int64_t defunc_1_op_res_36832 = add64(x_36827,\n                                                                  x_36829);\n                            \n                            defunc_1_op_res_36831 = defunc_1_op_res_36832;\n                        }\n                        x_36826 = defunc_1_op_res_36830;\n                        x_36827 = defunc_1_op_res_36831;\n                    }\n                }\n                if (sle32(wave_sizze_36791, skip_threads_36843)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_36843, local_tid_36789 -\n                          squot32(local_tid_36789, 32) * 32) &&\n                    ltid_in_bounds_36842) {\n                    // write result\n                    {\n                        ((volatile __local\n                          bool *) local_mem_36799)[byte_offsets_36793 +\n                                                   sext_i32_i64(local_tid_36789)] =\n                            x_36826;\n                        x_36828 = x_36826;\n                        ((volatile __local\n                          int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                              (int64_t) 8) +\n                                 ",
            "                     sext_i32_i64(local_tid_36789)] =\n                            x_36827;\n                        x_36829 = x_36827;\n                    }\n                }\n                if (sle32(wave_sizze_36791, skip_threads_36843)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_36843 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if ((local_tid_36789 - squot32(local_tid_36789, 32) * 32) == 31 &&\n                ltid_in_bounds_36842) {\n                ((volatile __local bool *) local_mem_36799)[byte_offsets_36793 +\n                                                            sext_i32_i64(squot32(local_tid_36789,\n                                                                                 32))] =\n                    x_36826;\n                ((volatile __local\n                  int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(squot32(local_tid_36789,\n                                                                   32))] =\n                    x_36827;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for block 'i+1'\n        {\n            int32_t skip_threads_36844;\n            \n            // read input for in-block scan\n            {\n                if (squot32(local_tid_36789, 32) == 0 && ltid_in_bounds_36842) {\n                    x_36837 = ((volatile __local\n                                bool *) local_mem_36799)[byte_offsets_36793 +\n                                                         sext_i32_i64(local_tid_36789)];\n                    x_36838 = ((volatile __local\n                                int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                     ",
            "                                               (int64_t) 8) +\n                                                            sext_i32_i64(local_tid_36789)];\n                    if ((local_tid_36789 - squot32(local_tid_36789, 32) * 32) ==\n                        0) {\n                        x_36835 = x_36837;\n                        x_36836 = x_36838;\n                    }\n                }\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_36844 = 1;\n                while (slt32(skip_threads_36844, 32)) {\n                    if (sle32(skip_threads_36844, local_tid_36789 -\n                              squot32(local_tid_36789, 32) * 32) &&\n                        (squot32(local_tid_36789, 32) == 0 &&\n                         ltid_in_bounds_36842)) {\n                        // read operands\n                        {\n                            x_36835 = ((volatile __local\n                                        bool *) local_mem_36799)[byte_offsets_36793 +\n                                                                 (sext_i32_i64(local_tid_36789) -\n                                                                  sext_i32_i64(skip_threads_36844))];\n                            x_36836 = ((volatile __local\n                                        int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                                            (int64_t) 8) +\n                                                                    (sext_i32_i64(local_tid_36789) -\n                                                                     sext_i32_i64(skip_threads_36844))];\n                        }\n                        // perform operation\n                        {\n                            bool defunc_1_op_res_36839 = x_36835 || x_36837;\n                            int64_t defunc_1_op_res_36840;\n                            \n                            if (x_36837) {\n             ",
            "                   defunc_1_op_res_36840 = x_36838;\n                            } else {\n                                int64_t defunc_1_op_res_36841 = add64(x_36836,\n                                                                      x_36838);\n                                \n                                defunc_1_op_res_36840 = defunc_1_op_res_36841;\n                            }\n                            x_36835 = defunc_1_op_res_36839;\n                            x_36836 = defunc_1_op_res_36840;\n                        }\n                    }\n                    if (sle32(wave_sizze_36791, skip_threads_36844)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_36844, local_tid_36789 -\n                              squot32(local_tid_36789, 32) * 32) &&\n                        (squot32(local_tid_36789, 32) == 0 &&\n                         ltid_in_bounds_36842)) {\n                        // write result\n                        {\n                            ((volatile __local\n                              bool *) local_mem_36799)[byte_offsets_36793 +\n                                                       sext_i32_i64(local_tid_36789)] =\n                                x_36835;\n                            x_36837 = x_36835;\n                            ((volatile __local\n                              int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                                  (int64_t) 8) +\n                                                          sext_i32_i64(local_tid_36789)] =\n                                x_36836;\n                            x_36838 = x_36836;\n                        }\n                    }\n                    if (sle32(wave_sizze_36791, skip_threads_36844)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_36844 *= 2;\n                }\n            }\n        }\n     ",
            "   barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_36789, 32) == 0 || !ltid_in_bounds_36842)) {\n                // read operands\n                {\n                    x_36828 = x_36826;\n                    x_36829 = x_36827;\n                    x_36826 = ((__local\n                                bool *) local_mem_36799)[byte_offsets_36793 +\n                                                         (sext_i32_i64(squot32(local_tid_36789,\n                                                                               32)) -\n                                                          (int64_t) 1)];\n                    x_36827 = ((__local\n                                int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                                    (int64_t) 8) +\n                                                            (sext_i32_i64(squot32(local_tid_36789,\n                                                                                  32)) -\n                                                             (int64_t) 1)];\n                }\n                // perform operation\n                {\n                    bool defunc_1_op_res_36830 = x_36826 || x_36828;\n                    int64_t defunc_1_op_res_36831;\n                    \n                    if (x_36828) {\n                        defunc_1_op_res_36831 = x_36829;\n                    } else {\n                        int64_t defunc_1_op_res_36832 = add64(x_36827, x_36829);\n                        \n                        defunc_1_op_res_36831 = defunc_1_op_res_36832;\n                    }\n                    x_36826 = defunc_1_op_res_36830;\n                    x_36827 = defunc_1_op_res_36831;\n                }\n                // write final result\n                {\n                    ((__local bool *) local_mem_36799)[byte_offsets_36793 +\n                                                       s",
            "ext_i32_i64(local_tid_36789)] =\n                        x_36826;\n                    ((__local\n                      int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36789)] =\n                        x_36827;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_36789, 32) == 0) {\n                ((__local bool *) local_mem_36799)[byte_offsets_36793 +\n                                                   sext_i32_i64(local_tid_36789)] =\n                    x_36828;\n                ((__local\n                  int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                      (int64_t) 8) +\n                                              sext_i32_i64(local_tid_36789)] =\n                    x_36829;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        barrier(CLK_LOCAL_MEM_FENCE);\n        if (local_tid_36789 == 0) {\n            acc_36833 = ((__local bool *) local_mem_36799)[byte_offsets_36793 +\n                                                           (segscan_group_sizze_31619 -\n                                                            (int64_t) 1)];\n            acc_36834 = ((__local\n                          int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                              (int64_t) 8) +\n                                                      (segscan_group_sizze_31619 -\n                                                       (int64_t) 1)];\n        } else {\n            acc_36833 = ((__local bool *) local_mem_36799)[byte_offsets_36793 +\n                                                           (sext_i32_i64(local_tid_36789) -\n                                                            (int64_t)",
            " 1)];\n            acc_36834 = ((__local\n                          int64_t *) local_mem_36799)[squot64(byte_offsets_36794,\n                                                              (int64_t) 8) +\n                                                      (sext_i32_i64(local_tid_36789) -\n                                                       (int64_t) 1)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n    bool prefix_36845;\n    \n    prefix_36845 = 0;\n    \n    int64_t prefix_36846;\n    \n    prefix_36846 = (int64_t) 0;\n    // Perform lookback\n    {\n        if (dynamic_id_36810 == (int64_t) 0 && local_tid_36789 == 0) {\n            ((volatile __global\n              bool *) incprefixes_mem_36782)[dynamic_id_36810] = acc_36833;\n            ((volatile __global\n              int64_t *) incprefixes_mem_36786)[dynamic_id_36810] = acc_36834;\n            mem_fence_global();\n            ((volatile __global\n              int8_t *) status_flags_mem_36778)[dynamic_id_36810] = (int8_t) 2;\n            acc_36833 = 0;\n            acc_36834 = (int64_t) 0;\n        }\n        if (!(dynamic_id_36810 == (int64_t) 0) && slt32(local_tid_36789,\n                                                        wave_sizze_36791)) {\n            if (local_tid_36789 == 0) {\n                ((volatile __global\n                  bool *) aggregates_mem_36780)[dynamic_id_36810] = acc_36833;\n                ((volatile __global\n                  int64_t *) aggregates_mem_36784)[dynamic_id_36810] =\n                    acc_36834;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36778)[dynamic_id_36810] =\n                    (int8_t) 1;\n                ((__local int8_t *) local_mem_36799)[(int64_t) 0] = ((__global\n                                                                      int8_t *) status_flags_mem_36778)[dynamic_id_36810 -\n                                                                                                        (int",
            "64_t) 1];\n            }\n            mem_fence_local();\n            \n            int8_t status_36847;\n            \n            status_36847 = ((__local int8_t *) local_mem_36799)[(int64_t) 0];\n            if (status_36847 == (int8_t) 2) {\n                if (local_tid_36789 == 0) {\n                    prefix_36845 = ((volatile __global\n                                     bool *) incprefixes_mem_36782)[dynamic_id_36810 -\n                                                                    (int64_t) 1];\n                    prefix_36846 = ((volatile __global\n                                     int64_t *) incprefixes_mem_36786)[dynamic_id_36810 -\n                                                                       (int64_t) 1];\n                }\n            } else {\n                int32_t readOffset_36848 = dynamic_id_36810 -\n                        sext_i32_i64(wave_sizze_36791);\n                \n                while (slt32(wave_sizze_36791 * -1, readOffset_36848)) {\n                    int32_t read_i_36849 = readOffset_36848 + local_tid_36789;\n                    bool aggr_36850 = 0;\n                    int64_t aggr_36851 = (int64_t) 0;\n                    int8_t flag_36852 = (int8_t) 0;\n                    int8_t used_36853 = (int8_t) 0;\n                    \n                    if (sle32(0, read_i_36849)) {\n                        flag_36852 = ((volatile __global\n                                       int8_t *) status_flags_mem_36778)[sext_i32_i64(read_i_36849)];\n                        if (flag_36852 == (int8_t) 2) {\n                            aggr_36850 = ((volatile __global\n                                           bool *) incprefixes_mem_36782)[sext_i32_i64(read_i_36849)];\n                            aggr_36851 = ((volatile __global\n                                           int64_t *) incprefixes_mem_36786)[sext_i32_i64(read_i_36849)];\n                        } else {\n                            if (flag_36852 == (int8_t) 1) {\n                             ",
            "   aggr_36850 = ((volatile __global\n                                               bool *) aggregates_mem_36780)[sext_i32_i64(read_i_36849)];\n                                aggr_36851 = ((volatile __global\n                                               int64_t *) aggregates_mem_36784)[sext_i32_i64(read_i_36849)];\n                                used_36853 = (int8_t) 1;\n                            }\n                        }\n                    }\n                    ((__local bool *) local_mem_36799)[warp_byte_offset_36796 +\n                                                       sext_i32_i64(local_tid_36789)] =\n                        aggr_36850;\n                    ((__local\n                      int64_t *) local_mem_36799)[squot64(warp_byte_offset_36797,\n                                                          (int64_t) 8) +\n                                                  sext_i32_i64(local_tid_36789)] =\n                        aggr_36851;\n                    \n                    int8_t tmp_36854;\n                    \n                    tmp_36854 = flag_36852 | used_36853 << (int8_t) 2;\n                    ((__local\n                      int8_t *) local_mem_36799)[sext_i32_i64(local_tid_36789)] =\n                        tmp_36854;\n                    mem_fence_local();\n                    flag_36852 = ((volatile __local\n                                   int8_t *) local_mem_36799)[sext_i32_i64(wave_sizze_36791) -\n                                                              (int64_t) 1];\n                    if (local_tid_36789 == 0) {\n                        if (!(flag_36852 == (int8_t) 2)) {\n                            bool x_36855 = 0;\n                            int64_t x_36856 = (int64_t) 0;\n                            bool x_36857;\n                            int64_t x_36858;\n                            int8_t flag1_36862;\n                            \n                            flag1_36862 = (int8_t) 0;\n                            \n                      ",
            "      int8_t flag2_36863;\n                            int8_t used1_36864;\n                            \n                            used1_36864 = (int8_t) 0;\n                            \n                            int8_t used2_36865;\n                            \n                            for (int32_t i_36866 = 0; i_36866 <\n                                 wave_sizze_36791; i_36866++) {\n                                flag2_36863 = ((__local\n                                                int8_t *) local_mem_36799)[sext_i32_i64(i_36866)];\n                                used2_36865 = lshr8(flag2_36863, (int8_t) 2);\n                                flag2_36863 = flag2_36863 & (int8_t) 3;\n                                x_36857 = ((__local\n                                            bool *) local_mem_36799)[warp_byte_offset_36796 +\n                                                                     sext_i32_i64(i_36866)];\n                                x_36858 = ((__local\n                                            int64_t *) local_mem_36799)[squot64(warp_byte_offset_36797,\n                                                                                (int64_t) 8) +\n                                                                        sext_i32_i64(i_36866)];\n                                if (!(flag2_36863 == (int8_t) 1)) {\n                                    flag1_36862 = flag2_36863;\n                                    used1_36864 = used2_36865;\n                                    x_36855 = x_36857;\n                                    x_36856 = x_36858;\n                                } else {\n                                    used1_36864 += used2_36865;\n                                    \n                                    bool defunc_1_op_res_36859;\n                                    \n                                    defunc_1_op_res_36859 = x_36855 || x_36857;\n                                    \n                                    int64_t defunc_1_o",
            "p_res_36860;\n                                    \n                                    if (x_36857) {\n                                        defunc_1_op_res_36860 = x_36858;\n                                    } else {\n                                        int64_t defunc_1_op_res_36861 =\n                                                add64(x_36856, x_36858);\n                                        \n                                        defunc_1_op_res_36860 =\n                                            defunc_1_op_res_36861;\n                                    }\n                                    x_36855 = defunc_1_op_res_36859;\n                                    x_36856 = defunc_1_op_res_36860;\n                                }\n                            }\n                            flag_36852 = flag1_36862;\n                            used_36853 = used1_36864;\n                            aggr_36850 = x_36855;\n                            aggr_36851 = x_36856;\n                        } else {\n                            aggr_36850 = ((__local\n                                           bool *) local_mem_36799)[warp_byte_offset_36796 +\n                                                                    (sext_i32_i64(wave_sizze_36791) -\n                                                                     (int64_t) 1)];\n                            aggr_36851 = ((__local\n                                           int64_t *) local_mem_36799)[squot64(warp_byte_offset_36797,\n                                                                               (int64_t) 8) +\n                                                                       (sext_i32_i64(wave_sizze_36791) -\n                                                                        (int64_t) 1)];\n                        }\n                        if (flag_36852 == (int8_t) 2) {\n                            readOffset_36848 = wave_sizze_36791 * -1;\n                        } else {\n                            ",
            "readOffset_36848 -= zext_i8_i32(used_36853);\n                        }\n                        ((__local int32_t *) local_mem_36799)[(int64_t) 0] =\n                            readOffset_36848;\n                        \n                        bool x_36867;\n                        \n                        x_36867 = aggr_36850;\n                        \n                        int64_t x_36868;\n                        \n                        x_36868 = aggr_36851;\n                        \n                        bool x_36869;\n                        \n                        x_36869 = prefix_36845;\n                        \n                        int64_t x_36870;\n                        \n                        x_36870 = prefix_36846;\n                        \n                        bool defunc_1_op_res_36871;\n                        \n                        defunc_1_op_res_36871 = x_36867 || x_36869;\n                        \n                        int64_t defunc_1_op_res_36872;\n                        \n                        if (x_36869) {\n                            defunc_1_op_res_36872 = x_36870;\n                        } else {\n                            int64_t defunc_1_op_res_36873 = add64(x_36868,\n                                                                  x_36870);\n                            \n                            defunc_1_op_res_36872 = defunc_1_op_res_36873;\n                        }\n                        prefix_36845 = defunc_1_op_res_36871;\n                        prefix_36846 = defunc_1_op_res_36872;\n                    }\n                    mem_fence_local();\n                    readOffset_36848 = ((__local\n                                         int32_t *) local_mem_36799)[(int64_t) 0];\n                }\n            }\n            if (local_tid_36789 == 0) {\n                bool x_36874 = prefix_36845;\n                int64_t x_36875 = prefix_36846;\n                bool x_36876 = acc_36833;\n                int64_t x_36877 = acc_36834;\n  ",
            "              bool defunc_1_op_res_36878 = x_36874 || x_36876;\n                int64_t defunc_1_op_res_36879;\n                \n                if (x_36876) {\n                    defunc_1_op_res_36879 = x_36877;\n                } else {\n                    int64_t defunc_1_op_res_36880 = add64(x_36875, x_36877);\n                    \n                    defunc_1_op_res_36879 = defunc_1_op_res_36880;\n                }\n                ((volatile __global\n                  bool *) incprefixes_mem_36782)[dynamic_id_36810] =\n                    defunc_1_op_res_36878;\n                ((volatile __global\n                  int64_t *) incprefixes_mem_36786)[dynamic_id_36810] =\n                    defunc_1_op_res_36879;\n                mem_fence_global();\n                ((volatile __global\n                  int8_t *) status_flags_mem_36778)[dynamic_id_36810] =\n                    (int8_t) 2;\n                ((__local bool *) local_mem_36799)[warp_byte_offset_36796] =\n                    prefix_36845;\n                ((__local\n                  int64_t *) local_mem_36799)[squot64(warp_byte_offset_36797,\n                                                      (int64_t) 8)] =\n                    prefix_36846;\n                acc_36833 = 0;\n                acc_36834 = (int64_t) 0;\n            }\n        }\n        if (!(dynamic_id_36810 == (int64_t) 0)) {\n            barrier(CLK_LOCAL_MEM_FENCE);\n            prefix_36845 = ((__local\n                             bool *) local_mem_36799)[warp_byte_offset_36796];\n            prefix_36846 = ((__local\n                             int64_t *) local_mem_36799)[squot64(warp_byte_offset_36797,\n                                                                 (int64_t) 8)];\n            barrier(CLK_LOCAL_MEM_FENCE);\n        }\n    }\n    // Distribute results\n    {\n        bool x_36881;\n        bool x_36883;\n        bool x_36888;\n        \n        x_36888 = prefix_36845;\n        \n        bool x_36890;\n        \n        x_36890 = acc_36833;\n        \n  ",
            "      int64_t x_36882;\n        int64_t x_36884;\n        int64_t x_36889;\n        \n        x_36889 = prefix_36846;\n        \n        int64_t x_36891;\n        \n        x_36891 = acc_36834;\n        \n        bool defunc_1_op_res_36892;\n        \n        defunc_1_op_res_36892 = x_36888 || x_36890;\n        \n        int64_t defunc_1_op_res_36893;\n        \n        if (x_36890) {\n            defunc_1_op_res_36893 = x_36891;\n        } else {\n            int64_t defunc_1_op_res_36894 = add64(x_36889, x_36891);\n            \n            defunc_1_op_res_36893 = defunc_1_op_res_36894;\n        }\n        x_36881 = defunc_1_op_res_36892;\n        x_36882 = defunc_1_op_res_36893;\n        for (int64_t i_36895 = 0; i_36895 < (int64_t) 9; i_36895++) {\n            x_36883 = private_mem_36812[i_36895];\n            x_36884 = private_mem_36814[i_36895];\n            \n            bool defunc_1_op_res_36885;\n            \n            defunc_1_op_res_36885 = x_36881 || x_36883;\n            \n            int64_t defunc_1_op_res_36886;\n            \n            if (x_36883) {\n                defunc_1_op_res_36886 = x_36884;\n            } else {\n                int64_t defunc_1_op_res_36887 = add64(x_36882, x_36884);\n                \n                defunc_1_op_res_36886 = defunc_1_op_res_36887;\n            }\n            private_mem_36812[i_36895] = defunc_1_op_res_36885;\n            private_mem_36814[i_36895] = defunc_1_op_res_36886;\n        }\n    }\n    // Transpose scan output\n    {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36896 = 0; i_36896 < (int64_t) 9; i_36896++) {\n            int64_t sharedIdx_36897 = sext_i32_i64(local_tid_36789 * 9) +\n                    i_36896;\n            \n            ((__local bool *) local_mem_36799)[sharedIdx_36897] =\n                private_mem_36812[i_36896];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36898 = 0; i_36898 < (int64_t) 9; i_36898++) {\n            int32_t sharedIdx_36899 = local_tid_36789 +\n                    s",
            "ext_i64_i32(segscan_group_sizze_31619 * i_36898);\n            \n            private_mem_36812[i_36898] = ((__local\n                                           bool *) local_mem_36799)[sext_i32_i64(sharedIdx_36899)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36900 = 0; i_36900 < (int64_t) 9; i_36900++) {\n            int64_t sharedIdx_36901 = sext_i32_i64(local_tid_36789 * 9) +\n                    i_36900;\n            \n            ((__local int64_t *) local_mem_36799)[sharedIdx_36901] =\n                private_mem_36814[i_36900];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        for (int64_t i_36902 = 0; i_36902 < (int64_t) 9; i_36902++) {\n            int32_t sharedIdx_36903 = local_tid_36789 +\n                    sext_i64_i32(segscan_group_sizze_31619 * i_36902);\n            \n            private_mem_36814[i_36902] = ((__local\n                                           int64_t *) local_mem_36799)[sext_i32_i64(sharedIdx_36903)];\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    // Write block scan results to global memory\n    {\n        for (int64_t i_36904 = 0; i_36904 < (int64_t) 9; i_36904++) {\n            int64_t gtid_31623 = blockOff_36811 + segscan_group_sizze_31619 *\n                    i_36904 + sext_i32_i64(local_tid_36789);\n            \n            if (slt64(gtid_31623, defunc_2_reduce_res_30210)) {\n                ((__global bool *) mem_32347)[gtid_31623] =\n                    private_mem_36812[i_36904];\n            }\n        }\n        for (int64_t i_36905 = 0; i_36905 < (int64_t) 9; i_36905++) {\n            int64_t gtid_31623 = blockOff_36811 + segscan_group_sizze_31619 *\n                    i_36905 + sext_i32_i64(local_tid_36789);\n            \n            if (slt64(gtid_31623, defunc_2_reduce_res_30210)) {\n                ((__global int64_t *) mem_32349)[gtid_31623] =\n                    private_mem_36814[i_36905];\n            }\n        }\n    }\n    // If this is the last block, reset the dynamicId\n    {\n        if (d",
            "ynamic_id_36810 == sdiv_up64(defunc_2_reduce_res_30210,\n                                          segscan_group_sizze_31619 *\n                                          (int64_t) 9) - (int64_t) 1) {\n            ((__global\n              int32_t *) clusterPointsziid_counter_mem_36776)[(int64_t) 0] = 0;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_31619\n}\n__kernel void gpu_map_transpose_i32(const int block_dim0, const int block_dim1,\n                                    const int block_dim2,\n                                    uint block_9_backing_offset_0,\n                                    int32_t destoffset_1, int32_t srcoffset_3,\n                                    int32_t num_arrays_4, int32_t x_elems_5,\n                                    int32_t y_elems_6, int32_t mulx_7,\n                                    int32_t muly_8, __global\n                                    unsigned char *destmem_0, __global\n                                    unsigned char *srcmem_2)\n{\n    volatile char *block_9_backing_0 = &shared_mem[block_9_backing_offset_0];\n    __local char *block_9;\n    \n    block_9 = (__local char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_global_id_0_37;\n    int32_t y_index_32 = get_group_id_1_41 * 32 + ge",
            "t_local_id_1_39;\n    \n    if (slt32(x_index_31, x_elems_5)) {\n        for (int32_t j_43 = 0; j_43 < 4; j_43++) {\n            int32_t index_in_35 = (y_index_32 + j_43 * 8) * x_elems_5 +\n                    x_index_31;\n            \n            if (slt32(y_index_32 + j_43 * 8, y_elems_6)) {\n                ((__local int32_t *) block_9)[sext_i32_i64((get_local_id_1_39 +\n                                                            j_43 * 8) * 33 +\n                                              get_local_id_0_38)] = ((__global\n                                                                      int32_t *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                                                                           index_in_35)];\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 32 + get_local_id_0_38;\n    y_index_32 = get_group_id_0_40 * 32 + get_local_id_1_39;\n    if (slt32(x_index_31, y_elems_6)) {\n        for (int32_t j_43 = 0; j_43 < 4; j_43++) {\n            int32_t index_out_36 = (y_index_32 + j_43 * 8) * y_elems_6 +\n                    x_index_31;\n            \n            if (slt32(y_index_32 + j_43 * 8, x_elems_5)) {\n                ((__global int32_t *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                                 index_out_36)] = ((__local\n                                                                    int32_t *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                                                                        33 +\n                                                                                        get_local_id_1_39 +\n                                                                                        j_43 *\n                                                                                        8)];\n            }\n        }\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_i32_low_height(const int block_dim0",
            ", const\n                                               int block_dim1, const\n                                               int block_dim2,\n                                               uint block_9_backing_offset_0,\n                                               int32_t destoffset_1,\n                                               int32_t srcoffset_3,\n                                               int32_t num_arrays_4,\n                                               int32_t x_elems_5,\n                                               int32_t y_elems_6,\n                                               int32_t mulx_7, int32_t muly_8,\n                                               __global\n                                               unsigned char *destmem_0,\n                                               __global unsigned char *srcmem_2)\n{\n    volatile char *block_9_backing_0 = &shared_mem[block_9_backing_offset_0];\n    __local char *block_9;\n    \n    block_9 = (__local char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_group_id_0_40 * 16 * mulx_7 + get_local_id_0_38 +\n            srem32(get_local_id_1_39, mulx_7) * 16;\n    int32_t y_index_32 = get_group_id_1_41 * 16 + squot32(get_local_id_1_39,\n                                                     ",
            "     mulx_7);\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    \n    if (slt32(x_index_31, x_elems_5) && slt32(y_index_32, y_elems_6)) {\n        ((__local int32_t *) block_9)[sext_i32_i64(get_local_id_1_39 * 17 +\n                                      get_local_id_0_38)] = ((__global\n                                                              int32_t *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                                                                   index_in_35)];\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 16 + squot32(get_local_id_0_38, mulx_7);\n    y_index_32 = get_group_id_0_40 * 16 * mulx_7 + get_local_id_1_39 +\n        srem32(get_local_id_0_38, mulx_7) * 16;\n    \n    int32_t index_out_36 = y_index_32 * y_elems_6 + x_index_31;\n    \n    if (slt32(x_index_31, y_elems_6) && slt32(y_index_32, x_elems_5)) {\n        ((__global int32_t *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                         index_out_36)] = ((__local\n                                                            int32_t *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                                                                17 +\n                                                                                get_local_id_1_39)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_i32_low_width(const int block_dim0, const\n                                              int block_dim1, const\n                                              int block_dim2,\n                                              uint block_9_backing_offset_0,\n                                              int32_t destoffset_1,\n                                              int32_t srcoffset_3,\n                                              int32_t num_arrays_4,\n                                              int32_t x_elems_5,\n                                              int32_t y_elems_6, int32_t mulx_7,",
            "\n                                              int32_t muly_8, __global\n                                              unsigned char *destmem_0, __global\n                                              unsigned char *srcmem_2)\n{\n    volatile char *block_9_backing_0 = &shared_mem[block_9_backing_offset_0];\n    __local char *block_9;\n    \n    block_9 = (__local char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = get_group_id_2_42 * x_elems_5 * y_elems_6;\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t x_index_31 = get_group_id_0_40 * 16 + squot32(get_local_id_0_38,\n                                                          muly_8);\n    int32_t y_index_32 = get_group_id_1_41 * 16 * muly_8 + get_local_id_1_39 +\n            srem32(get_local_id_0_38, muly_8) * 16;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    \n    if (slt32(x_index_31, x_elems_5) && slt32(y_index_32, y_elems_6)) {\n        ((__local int32_t *) block_9)[sext_i32_i64(get_local_id_1_39 * 17 +\n                                      get_local_id_0_38)] = ((__global\n                                                              int32_t *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                                                                   index_in_35)];\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    x_index_31 = get_group_id_1_41 * 16 * muly_8 + get_local_id_0_38",
            " +\n        srem32(get_local_id_1_39, muly_8) * 16;\n    y_index_32 = get_group_id_0_40 * 16 + squot32(get_local_id_1_39, muly_8);\n    \n    int32_t index_out_36 = y_index_32 * y_elems_6 + x_index_31;\n    \n    if (slt32(x_index_31, y_elems_6) && slt32(y_index_32, x_elems_5)) {\n        ((__global int32_t *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                         index_out_36)] = ((__local\n                                                            int32_t *) block_9)[sext_i32_i64(get_local_id_0_38 *\n                                                                                17 +\n                                                                                get_local_id_1_39)];\n    }\n    \n  error_0:\n    return;\n}\n__kernel void gpu_map_transpose_i32_small(uint block_9_backing_offset_0,\n                                          int32_t destoffset_1,\n                                          int32_t srcoffset_3,\n                                          int32_t num_arrays_4,\n                                          int32_t x_elems_5, int32_t y_elems_6,\n                                          int32_t mulx_7, int32_t muly_8,\n                                          __global unsigned char *destmem_0,\n                                          __global unsigned char *srcmem_2)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    volatile char *block_9_backing_0 = &shared_mem[block_9_backing_offset_0];\n    __local char *block_9;\n    \n    block_9 = (__local char *) block_9_backing_0;\n    \n    int32_t get_global_id_0_37;\n    \n    get_global_id_0_37 = get_global_id(0);\n    \n    int32_t get_local_id_0_38;\n    \n    get_local_id_0_38 = get_local_id(0);\n    \n    int32_t get_local_id_1_39;\n    \n    get_local_id_1_39 = get_local_id(1);\n    \n    int32_t get_group_id_0_40;\n    \n    get_group_id_0_40 = get_group_id(0);\n    \n    int32_t get_group_id_1_41;\n    \n    get_group_id_1_41 = get_group_id(1);\n    \n    int32",
            "_t get_group_id_2_42;\n    \n    get_group_id_2_42 = get_group_id(2);\n    \n    int32_t our_array_offset_30 = squot32(get_global_id_0_37, y_elems_6 *\n                                          x_elems_5) * (y_elems_6 * x_elems_5);\n    int32_t x_index_31 = squot32(srem32(get_global_id_0_37, y_elems_6 *\n                                        x_elems_5), y_elems_6);\n    int32_t y_index_32 = srem32(get_global_id_0_37, y_elems_6);\n    int32_t odata_offset_33 = squot32(destoffset_1, 4) + our_array_offset_30;\n    int32_t idata_offset_34 = squot32(srcoffset_3, 4) + our_array_offset_30;\n    int32_t index_in_35 = y_index_32 * x_elems_5 + x_index_31;\n    int32_t index_out_36 = x_index_31 * y_elems_6 + y_index_32;\n    \n    if (slt32(get_global_id_0_37, x_elems_5 * y_elems_6 * num_arrays_4)) {\n        ((__global int32_t *) destmem_0)[sext_i32_i64(odata_offset_33 +\n                                         index_out_36)] = ((__global\n                                                            int32_t *) srcmem_2)[sext_i32_i64(idata_offset_34 +\n                                                                                 index_in_35)];\n    }\n    \n  error_0:\n    return;\n}\n",
            NULL};
static const char *size_names[] = {"builtin#iota_i64.group_size_32480",
                                   "builtin#replicate_i32.group_size_34189",
                                   "builtin#replicate_i64.group_size_32961",
                                   "builtin#replicate_i8.group_size_32531",
                                   "clusterPoints.L2_size_33248",
                                   "clusterPoints.L2_size_34478",
                                   "clusterPoints.L2_size_36075",
                                   "clusterPoints.L2_size_36692",
                                   "clusterPoints.group_size_33053",
                                   "clusterPoints.group_size_34175",
                                   "clusterPoints.group_size_35368",
                                   "clusterPoints.group_size_35685",
                                   "clusterPoints.group_size_36379",
                                   "clusterPoints.seghist_group_size_30737",
                                   "clusterPoints.seghist_group_size_31081",
                                   "clusterPoints.seghist_group_size_31472",
                                   "clusterPoints.seghist_group_size_31603",
                                   "clusterPoints.seghist_num_groups_30739",
                                   "clusterPoints.seghist_num_groups_31083",
                                   "clusterPoints.seghist_num_groups_31474",
                                   "clusterPoints.seghist_num_groups_31605",
                                   "clusterPoints.segmap_group_size_30256",
                                   "clusterPoints.segmap_group_size_30280",
                                   "clusterPoints.segmap_group_size_30301",
                                   "clusterPoints.segmap_group_size_30356",
                                   "clusterPoints.segmap_group_size_30362",
                                   "clusterPoints.segmap_group_size_30392",
                                   "clusterPoints.segmap_group_size_30426",
                                   "clusterPoints.segmap_group_size_30440",
                                   "clusterPoints.segmap_group_size_30538",
                                   "clusterPoints.segmap_group_size_30566",
                                   "clusterPoints.segmap_group_size_30625",
                                   "clusterPoints.segmap_group_size_30762",
                                   "clusterPoints.segmap_group_size_30804",
                                   "clusterPoints.segmap_group_size_30948",
                                   "clusterPoints.segmap_group_size_30966",
                                   "clusterPoints.segmap_group_size_30980",
                                   "clusterPoints.segmap_group_size_31014",
                                   "clusterPoints.segmap_group_size_31028",
                                   "clusterPoints.segmap_group_size_31114",
                                   "clusterPoints.segmap_group_size_31232",
                                   "clusterPoints.segmap_group_size_31238",
                                   "clusterPoints.segmap_group_size_31272",
                                   "clusterPoints.segmap_group_size_31306",
                                   "clusterPoints.segmap_group_size_31320",
                                   "clusterPoints.segmap_group_size_31348",
                                   "clusterPoints.segmap_group_size_31382",
                                   "clusterPoints.segmap_group_size_31396",
                                   "clusterPoints.segmap_group_size_31450",
                                   "clusterPoints.segmap_group_size_31497",
                                   "clusterPoints.segmap_group_size_31531",
                                   "clusterPoints.segmap_group_size_31628",
                                   "clusterPoints.segmap_group_size_31642",
                                   "clusterPoints.segred_group_size_30727",
                                   "clusterPoints.segred_group_size_30952",
                                   "clusterPoints.segred_group_size_31032",
                                   "clusterPoints.segred_group_size_31043",
                                   "clusterPoints.segred_group_size_31053",
                                   "clusterPoints.segred_group_size_31071",
                                   "clusterPoints.segred_group_size_31400",
                                   "clusterPoints.segred_group_size_31410",
                                   "clusterPoints.segred_group_size_31420",
                                   "clusterPoints.segred_group_size_31430",
                                   "clusterPoints.segred_group_size_31462",
                                   "clusterPoints.segred_group_size_31593",
                                   "clusterPoints.segred_num_groups_30729",
                                   "clusterPoints.segred_num_groups_30954",
                                   "clusterPoints.segred_num_groups_31034",
                                   "clusterPoints.segred_num_groups_31045",
                                   "clusterPoints.segred_num_groups_31055",
                                   "clusterPoints.segred_num_groups_31073",
                                   "clusterPoints.segred_num_groups_31402",
                                   "clusterPoints.segred_num_groups_31412",
                                   "clusterPoints.segred_num_groups_31422",
                                   "clusterPoints.segred_num_groups_31432",
                                   "clusterPoints.segred_num_groups_31464",
                                   "clusterPoints.segred_num_groups_31595",
                                   "clusterPoints.segscan_group_size_30346",
                                   "clusterPoints.segscan_group_size_30408",
                                   "clusterPoints.segscan_group_size_30416",
                                   "clusterPoints.segscan_group_size_30430",
                                   "clusterPoints.segscan_group_size_30719",
                                   "clusterPoints.segscan_group_size_30752",
                                   "clusterPoints.segscan_group_size_30778",
                                   "clusterPoints.segscan_group_size_30938",
                                   "clusterPoints.segscan_group_size_30996",
                                   "clusterPoints.segscan_group_size_31004",
                                   "clusterPoints.segscan_group_size_31018",
                                   "clusterPoints.segscan_group_size_31063",
                                   "clusterPoints.segscan_group_size_31096",
                                   "clusterPoints.segscan_group_size_31104",
                                   "clusterPoints.segscan_group_size_31222",
                                   "clusterPoints.segscan_group_size_31288",
                                   "clusterPoints.segscan_group_size_31296",
                                   "clusterPoints.segscan_group_size_31310",
                                   "clusterPoints.segscan_group_size_31364",
                                   "clusterPoints.segscan_group_size_31372",
                                   "clusterPoints.segscan_group_size_31386",
                                   "clusterPoints.segscan_group_size_31440",
                                   "clusterPoints.segscan_group_size_31454",
                                   "clusterPoints.segscan_group_size_31487",
                                   "clusterPoints.segscan_group_size_31513",
                                   "clusterPoints.segscan_group_size_31521",
                                   "clusterPoints.segscan_group_size_31585",
                                   "clusterPoints.segscan_group_size_31618",
                                   "clusterPoints.segscan_num_groups_30348",
                                   "clusterPoints.segscan_num_groups_30410",
                                   "clusterPoints.segscan_num_groups_30418",
                                   "clusterPoints.segscan_num_groups_30432",
                                   "clusterPoints.segscan_num_groups_30721",
                                   "clusterPoints.segscan_num_groups_30754",
                                   "clusterPoints.segscan_num_groups_30780",
                                   "clusterPoints.segscan_num_groups_30940",
                                   "clusterPoints.segscan_num_groups_30998",
                                   "clusterPoints.segscan_num_groups_31006",
                                   "clusterPoints.segscan_num_groups_31020",
                                   "clusterPoints.segscan_num_groups_31065",
                                   "clusterPoints.segscan_num_groups_31098",
                                   "clusterPoints.segscan_num_groups_31106",
                                   "clusterPoints.segscan_num_groups_31224",
                                   "clusterPoints.segscan_num_groups_31290",
                                   "clusterPoints.segscan_num_groups_31298",
                                   "clusterPoints.segscan_num_groups_31312",
                                   "clusterPoints.segscan_num_groups_31366",
                                   "clusterPoints.segscan_num_groups_31374",
                                   "clusterPoints.segscan_num_groups_31388",
                                   "clusterPoints.segscan_num_groups_31442",
                                   "clusterPoints.segscan_num_groups_31456",
                                   "clusterPoints.segscan_num_groups_31489",
                                   "clusterPoints.segscan_num_groups_31515",
                                   "clusterPoints.segscan_num_groups_31523",
                                   "clusterPoints.segscan_num_groups_31587",
                                   "clusterPoints.segscan_num_groups_31620"};
static const char *size_vars[] = {"builtinzhiota_i64zigroup_sizze_32480",
                                  "builtinzhreplicate_i32zigroup_sizze_34189",
                                  "builtinzhreplicate_i64zigroup_sizze_32961",
                                  "builtinzhreplicate_i8zigroup_sizze_32531",
                                  "clusterPointsziL2_sizze_33248",
                                  "clusterPointsziL2_sizze_34478",
                                  "clusterPointsziL2_sizze_36075",
                                  "clusterPointsziL2_sizze_36692",
                                  "clusterPointszigroup_sizze_33053",
                                  "clusterPointszigroup_sizze_34175",
                                  "clusterPointszigroup_sizze_35368",
                                  "clusterPointszigroup_sizze_35685",
                                  "clusterPointszigroup_sizze_36379",
                                  "clusterPointsziseghist_group_sizze_30737",
                                  "clusterPointsziseghist_group_sizze_31081",
                                  "clusterPointsziseghist_group_sizze_31472",
                                  "clusterPointsziseghist_group_sizze_31603",
                                  "clusterPointsziseghist_num_groups_30739",
                                  "clusterPointsziseghist_num_groups_31083",
                                  "clusterPointsziseghist_num_groups_31474",
                                  "clusterPointsziseghist_num_groups_31605",
                                  "clusterPointszisegmap_group_sizze_30256",
                                  "clusterPointszisegmap_group_sizze_30280",
                                  "clusterPointszisegmap_group_sizze_30301",
                                  "clusterPointszisegmap_group_sizze_30356",
                                  "clusterPointszisegmap_group_sizze_30362",
                                  "clusterPointszisegmap_group_sizze_30392",
                                  "clusterPointszisegmap_group_sizze_30426",
                                  "clusterPointszisegmap_group_sizze_30440",
                                  "clusterPointszisegmap_group_sizze_30538",
                                  "clusterPointszisegmap_group_sizze_30566",
                                  "clusterPointszisegmap_group_sizze_30625",
                                  "clusterPointszisegmap_group_sizze_30762",
                                  "clusterPointszisegmap_group_sizze_30804",
                                  "clusterPointszisegmap_group_sizze_30948",
                                  "clusterPointszisegmap_group_sizze_30966",
                                  "clusterPointszisegmap_group_sizze_30980",
                                  "clusterPointszisegmap_group_sizze_31014",
                                  "clusterPointszisegmap_group_sizze_31028",
                                  "clusterPointszisegmap_group_sizze_31114",
                                  "clusterPointszisegmap_group_sizze_31232",
                                  "clusterPointszisegmap_group_sizze_31238",
                                  "clusterPointszisegmap_group_sizze_31272",
                                  "clusterPointszisegmap_group_sizze_31306",
                                  "clusterPointszisegmap_group_sizze_31320",
                                  "clusterPointszisegmap_group_sizze_31348",
                                  "clusterPointszisegmap_group_sizze_31382",
                                  "clusterPointszisegmap_group_sizze_31396",
                                  "clusterPointszisegmap_group_sizze_31450",
                                  "clusterPointszisegmap_group_sizze_31497",
                                  "clusterPointszisegmap_group_sizze_31531",
                                  "clusterPointszisegmap_group_sizze_31628",
                                  "clusterPointszisegmap_group_sizze_31642",
                                  "clusterPointszisegred_group_sizze_30727",
                                  "clusterPointszisegred_group_sizze_30952",
                                  "clusterPointszisegred_group_sizze_31032",
                                  "clusterPointszisegred_group_sizze_31043",
                                  "clusterPointszisegred_group_sizze_31053",
                                  "clusterPointszisegred_group_sizze_31071",
                                  "clusterPointszisegred_group_sizze_31400",
                                  "clusterPointszisegred_group_sizze_31410",
                                  "clusterPointszisegred_group_sizze_31420",
                                  "clusterPointszisegred_group_sizze_31430",
                                  "clusterPointszisegred_group_sizze_31462",
                                  "clusterPointszisegred_group_sizze_31593",
                                  "clusterPointszisegred_num_groups_30729",
                                  "clusterPointszisegred_num_groups_30954",
                                  "clusterPointszisegred_num_groups_31034",
                                  "clusterPointszisegred_num_groups_31045",
                                  "clusterPointszisegred_num_groups_31055",
                                  "clusterPointszisegred_num_groups_31073",
                                  "clusterPointszisegred_num_groups_31402",
                                  "clusterPointszisegred_num_groups_31412",
                                  "clusterPointszisegred_num_groups_31422",
                                  "clusterPointszisegred_num_groups_31432",
                                  "clusterPointszisegred_num_groups_31464",
                                  "clusterPointszisegred_num_groups_31595",
                                  "clusterPointszisegscan_group_sizze_30346",
                                  "clusterPointszisegscan_group_sizze_30408",
                                  "clusterPointszisegscan_group_sizze_30416",
                                  "clusterPointszisegscan_group_sizze_30430",
                                  "clusterPointszisegscan_group_sizze_30719",
                                  "clusterPointszisegscan_group_sizze_30752",
                                  "clusterPointszisegscan_group_sizze_30778",
                                  "clusterPointszisegscan_group_sizze_30938",
                                  "clusterPointszisegscan_group_sizze_30996",
                                  "clusterPointszisegscan_group_sizze_31004",
                                  "clusterPointszisegscan_group_sizze_31018",
                                  "clusterPointszisegscan_group_sizze_31063",
                                  "clusterPointszisegscan_group_sizze_31096",
                                  "clusterPointszisegscan_group_sizze_31104",
                                  "clusterPointszisegscan_group_sizze_31222",
                                  "clusterPointszisegscan_group_sizze_31288",
                                  "clusterPointszisegscan_group_sizze_31296",
                                  "clusterPointszisegscan_group_sizze_31310",
                                  "clusterPointszisegscan_group_sizze_31364",
                                  "clusterPointszisegscan_group_sizze_31372",
                                  "clusterPointszisegscan_group_sizze_31386",
                                  "clusterPointszisegscan_group_sizze_31440",
                                  "clusterPointszisegscan_group_sizze_31454",
                                  "clusterPointszisegscan_group_sizze_31487",
                                  "clusterPointszisegscan_group_sizze_31513",
                                  "clusterPointszisegscan_group_sizze_31521",
                                  "clusterPointszisegscan_group_sizze_31585",
                                  "clusterPointszisegscan_group_sizze_31618",
                                  "clusterPointszisegscan_num_groups_30348",
                                  "clusterPointszisegscan_num_groups_30410",
                                  "clusterPointszisegscan_num_groups_30418",
                                  "clusterPointszisegscan_num_groups_30432",
                                  "clusterPointszisegscan_num_groups_30721",
                                  "clusterPointszisegscan_num_groups_30754",
                                  "clusterPointszisegscan_num_groups_30780",
                                  "clusterPointszisegscan_num_groups_30940",
                                  "clusterPointszisegscan_num_groups_30998",
                                  "clusterPointszisegscan_num_groups_31006",
                                  "clusterPointszisegscan_num_groups_31020",
                                  "clusterPointszisegscan_num_groups_31065",
                                  "clusterPointszisegscan_num_groups_31098",
                                  "clusterPointszisegscan_num_groups_31106",
                                  "clusterPointszisegscan_num_groups_31224",
                                  "clusterPointszisegscan_num_groups_31290",
                                  "clusterPointszisegscan_num_groups_31298",
                                  "clusterPointszisegscan_num_groups_31312",
                                  "clusterPointszisegscan_num_groups_31366",
                                  "clusterPointszisegscan_num_groups_31374",
                                  "clusterPointszisegscan_num_groups_31388",
                                  "clusterPointszisegscan_num_groups_31442",
                                  "clusterPointszisegscan_num_groups_31456",
                                  "clusterPointszisegscan_num_groups_31489",
                                  "clusterPointszisegscan_num_groups_31515",
                                  "clusterPointszisegscan_num_groups_31523",
                                  "clusterPointszisegscan_num_groups_31587",
                                  "clusterPointszisegscan_num_groups_31620"};
static const char *size_classes[] = {"group_size", "group_size", "group_size",
                                     "group_size",
                                     "bespoke(L2_for_histogram, 4194304)",
                                     "bespoke(L2_for_histogram, 4194304)",
                                     "bespoke(L2_for_histogram, 4194304)",
                                     "bespoke(L2_for_histogram, 4194304)",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups", "num_groups",
                                     "num_groups", "num_groups"};
struct sizes {
    int64_t builtinzhiota_i64zigroup_sizze_32480;
    int64_t builtinzhreplicate_i32zigroup_sizze_34189;
    int64_t builtinzhreplicate_i64zigroup_sizze_32961;
    int64_t builtinzhreplicate_i8zigroup_sizze_32531;
    int64_t clusterPointsziL2_sizze_33248;
    int64_t clusterPointsziL2_sizze_34478;
    int64_t clusterPointsziL2_sizze_36075;
    int64_t clusterPointsziL2_sizze_36692;
    int64_t clusterPointszigroup_sizze_33053;
    int64_t clusterPointszigroup_sizze_34175;
    int64_t clusterPointszigroup_sizze_35368;
    int64_t clusterPointszigroup_sizze_35685;
    int64_t clusterPointszigroup_sizze_36379;
    int64_t clusterPointsziseghist_group_sizze_30737;
    int64_t clusterPointsziseghist_group_sizze_31081;
    int64_t clusterPointsziseghist_group_sizze_31472;
    int64_t clusterPointsziseghist_group_sizze_31603;
    int64_t clusterPointsziseghist_num_groups_30739;
    int64_t clusterPointsziseghist_num_groups_31083;
    int64_t clusterPointsziseghist_num_groups_31474;
    int64_t clusterPointsziseghist_num_groups_31605;
    int64_t clusterPointszisegmap_group_sizze_30256;
    int64_t clusterPointszisegmap_group_sizze_30280;
    int64_t clusterPointszisegmap_group_sizze_30301;
    int64_t clusterPointszisegmap_group_sizze_30356;
    int64_t clusterPointszisegmap_group_sizze_30362;
    int64_t clusterPointszisegmap_group_sizze_30392;
    int64_t clusterPointszisegmap_group_sizze_30426;
    int64_t clusterPointszisegmap_group_sizze_30440;
    int64_t clusterPointszisegmap_group_sizze_30538;
    int64_t clusterPointszisegmap_group_sizze_30566;
    int64_t clusterPointszisegmap_group_sizze_30625;
    int64_t clusterPointszisegmap_group_sizze_30762;
    int64_t clusterPointszisegmap_group_sizze_30804;
    int64_t clusterPointszisegmap_group_sizze_30948;
    int64_t clusterPointszisegmap_group_sizze_30966;
    int64_t clusterPointszisegmap_group_sizze_30980;
    int64_t clusterPointszisegmap_group_sizze_31014;
    int64_t clusterPointszisegmap_group_sizze_31028;
    int64_t clusterPointszisegmap_group_sizze_31114;
    int64_t clusterPointszisegmap_group_sizze_31232;
    int64_t clusterPointszisegmap_group_sizze_31238;
    int64_t clusterPointszisegmap_group_sizze_31272;
    int64_t clusterPointszisegmap_group_sizze_31306;
    int64_t clusterPointszisegmap_group_sizze_31320;
    int64_t clusterPointszisegmap_group_sizze_31348;
    int64_t clusterPointszisegmap_group_sizze_31382;
    int64_t clusterPointszisegmap_group_sizze_31396;
    int64_t clusterPointszisegmap_group_sizze_31450;
    int64_t clusterPointszisegmap_group_sizze_31497;
    int64_t clusterPointszisegmap_group_sizze_31531;
    int64_t clusterPointszisegmap_group_sizze_31628;
    int64_t clusterPointszisegmap_group_sizze_31642;
    int64_t clusterPointszisegred_group_sizze_30727;
    int64_t clusterPointszisegred_group_sizze_30952;
    int64_t clusterPointszisegred_group_sizze_31032;
    int64_t clusterPointszisegred_group_sizze_31043;
    int64_t clusterPointszisegred_group_sizze_31053;
    int64_t clusterPointszisegred_group_sizze_31071;
    int64_t clusterPointszisegred_group_sizze_31400;
    int64_t clusterPointszisegred_group_sizze_31410;
    int64_t clusterPointszisegred_group_sizze_31420;
    int64_t clusterPointszisegred_group_sizze_31430;
    int64_t clusterPointszisegred_group_sizze_31462;
    int64_t clusterPointszisegred_group_sizze_31593;
    int64_t clusterPointszisegred_num_groups_30729;
    int64_t clusterPointszisegred_num_groups_30954;
    int64_t clusterPointszisegred_num_groups_31034;
    int64_t clusterPointszisegred_num_groups_31045;
    int64_t clusterPointszisegred_num_groups_31055;
    int64_t clusterPointszisegred_num_groups_31073;
    int64_t clusterPointszisegred_num_groups_31402;
    int64_t clusterPointszisegred_num_groups_31412;
    int64_t clusterPointszisegred_num_groups_31422;
    int64_t clusterPointszisegred_num_groups_31432;
    int64_t clusterPointszisegred_num_groups_31464;
    int64_t clusterPointszisegred_num_groups_31595;
    int64_t clusterPointszisegscan_group_sizze_30346;
    int64_t clusterPointszisegscan_group_sizze_30408;
    int64_t clusterPointszisegscan_group_sizze_30416;
    int64_t clusterPointszisegscan_group_sizze_30430;
    int64_t clusterPointszisegscan_group_sizze_30719;
    int64_t clusterPointszisegscan_group_sizze_30752;
    int64_t clusterPointszisegscan_group_sizze_30778;
    int64_t clusterPointszisegscan_group_sizze_30938;
    int64_t clusterPointszisegscan_group_sizze_30996;
    int64_t clusterPointszisegscan_group_sizze_31004;
    int64_t clusterPointszisegscan_group_sizze_31018;
    int64_t clusterPointszisegscan_group_sizze_31063;
    int64_t clusterPointszisegscan_group_sizze_31096;
    int64_t clusterPointszisegscan_group_sizze_31104;
    int64_t clusterPointszisegscan_group_sizze_31222;
    int64_t clusterPointszisegscan_group_sizze_31288;
    int64_t clusterPointszisegscan_group_sizze_31296;
    int64_t clusterPointszisegscan_group_sizze_31310;
    int64_t clusterPointszisegscan_group_sizze_31364;
    int64_t clusterPointszisegscan_group_sizze_31372;
    int64_t clusterPointszisegscan_group_sizze_31386;
    int64_t clusterPointszisegscan_group_sizze_31440;
    int64_t clusterPointszisegscan_group_sizze_31454;
    int64_t clusterPointszisegscan_group_sizze_31487;
    int64_t clusterPointszisegscan_group_sizze_31513;
    int64_t clusterPointszisegscan_group_sizze_31521;
    int64_t clusterPointszisegscan_group_sizze_31585;
    int64_t clusterPointszisegscan_group_sizze_31618;
    int64_t clusterPointszisegscan_num_groups_30348;
    int64_t clusterPointszisegscan_num_groups_30410;
    int64_t clusterPointszisegscan_num_groups_30418;
    int64_t clusterPointszisegscan_num_groups_30432;
    int64_t clusterPointszisegscan_num_groups_30721;
    int64_t clusterPointszisegscan_num_groups_30754;
    int64_t clusterPointszisegscan_num_groups_30780;
    int64_t clusterPointszisegscan_num_groups_30940;
    int64_t clusterPointszisegscan_num_groups_30998;
    int64_t clusterPointszisegscan_num_groups_31006;
    int64_t clusterPointszisegscan_num_groups_31020;
    int64_t clusterPointszisegscan_num_groups_31065;
    int64_t clusterPointszisegscan_num_groups_31098;
    int64_t clusterPointszisegscan_num_groups_31106;
    int64_t clusterPointszisegscan_num_groups_31224;
    int64_t clusterPointszisegscan_num_groups_31290;
    int64_t clusterPointszisegscan_num_groups_31298;
    int64_t clusterPointszisegscan_num_groups_31312;
    int64_t clusterPointszisegscan_num_groups_31366;
    int64_t clusterPointszisegscan_num_groups_31374;
    int64_t clusterPointszisegscan_num_groups_31388;
    int64_t clusterPointszisegscan_num_groups_31442;
    int64_t clusterPointszisegscan_num_groups_31456;
    int64_t clusterPointszisegscan_num_groups_31489;
    int64_t clusterPointszisegscan_num_groups_31515;
    int64_t clusterPointszisegscan_num_groups_31523;
    int64_t clusterPointszisegscan_num_groups_31587;
    int64_t clusterPointszisegscan_num_groups_31620;
} ;
struct futhark_context_config {
    struct cuda_config cu_cfg;
    int profiling;
    int64_t sizes[133];
    int num_nvrtc_opts;
    const char **nvrtc_opts;
} ;
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->profiling = 0;
    cfg->num_nvrtc_opts = 0;
    cfg->nvrtc_opts = (const char **) malloc(sizeof(const char *));
    cfg->nvrtc_opts[0] = NULL;
    cfg->sizes[0] = 0;
    cfg->sizes[1] = 0;
    cfg->sizes[2] = 0;
    cfg->sizes[3] = 0;
    cfg->sizes[4] = 4194304;
    cfg->sizes[5] = 4194304;
    cfg->sizes[6] = 4194304;
    cfg->sizes[7] = 4194304;
    cfg->sizes[8] = 0;
    cfg->sizes[9] = 0;
    cfg->sizes[10] = 0;
    cfg->sizes[11] = 0;
    cfg->sizes[12] = 0;
    cfg->sizes[13] = 0;
    cfg->sizes[14] = 0;
    cfg->sizes[15] = 0;
    cfg->sizes[16] = 0;
    cfg->sizes[17] = 0;
    cfg->sizes[18] = 0;
    cfg->sizes[19] = 0;
    cfg->sizes[20] = 0;
    cfg->sizes[21] = 0;
    cfg->sizes[22] = 0;
    cfg->sizes[23] = 0;
    cfg->sizes[24] = 0;
    cfg->sizes[25] = 0;
    cfg->sizes[26] = 0;
    cfg->sizes[27] = 0;
    cfg->sizes[28] = 0;
    cfg->sizes[29] = 0;
    cfg->sizes[30] = 0;
    cfg->sizes[31] = 0;
    cfg->sizes[32] = 0;
    cfg->sizes[33] = 0;
    cfg->sizes[34] = 0;
    cfg->sizes[35] = 0;
    cfg->sizes[36] = 0;
    cfg->sizes[37] = 0;
    cfg->sizes[38] = 0;
    cfg->sizes[39] = 0;
    cfg->sizes[40] = 0;
    cfg->sizes[41] = 0;
    cfg->sizes[42] = 0;
    cfg->sizes[43] = 0;
    cfg->sizes[44] = 0;
    cfg->sizes[45] = 0;
    cfg->sizes[46] = 0;
    cfg->sizes[47] = 0;
    cfg->sizes[48] = 0;
    cfg->sizes[49] = 0;
    cfg->sizes[50] = 0;
    cfg->sizes[51] = 0;
    cfg->sizes[52] = 0;
    cfg->sizes[53] = 0;
    cfg->sizes[54] = 0;
    cfg->sizes[55] = 0;
    cfg->sizes[56] = 0;
    cfg->sizes[57] = 0;
    cfg->sizes[58] = 0;
    cfg->sizes[59] = 0;
    cfg->sizes[60] = 0;
    cfg->sizes[61] = 0;
    cfg->sizes[62] = 0;
    cfg->sizes[63] = 0;
    cfg->sizes[64] = 0;
    cfg->sizes[65] = 0;
    cfg->sizes[66] = 0;
    cfg->sizes[67] = 0;
    cfg->sizes[68] = 0;
    cfg->sizes[69] = 0;
    cfg->sizes[70] = 0;
    cfg->sizes[71] = 0;
    cfg->sizes[72] = 0;
    cfg->sizes[73] = 0;
    cfg->sizes[74] = 0;
    cfg->sizes[75] = 0;
    cfg->sizes[76] = 0;
    cfg->sizes[77] = 0;
    cfg->sizes[78] = 0;
    cfg->sizes[79] = 0;
    cfg->sizes[80] = 0;
    cfg->sizes[81] = 0;
    cfg->sizes[82] = 0;
    cfg->sizes[83] = 0;
    cfg->sizes[84] = 0;
    cfg->sizes[85] = 0;
    cfg->sizes[86] = 0;
    cfg->sizes[87] = 0;
    cfg->sizes[88] = 0;
    cfg->sizes[89] = 0;
    cfg->sizes[90] = 0;
    cfg->sizes[91] = 0;
    cfg->sizes[92] = 0;
    cfg->sizes[93] = 0;
    cfg->sizes[94] = 0;
    cfg->sizes[95] = 0;
    cfg->sizes[96] = 0;
    cfg->sizes[97] = 0;
    cfg->sizes[98] = 0;
    cfg->sizes[99] = 0;
    cfg->sizes[100] = 0;
    cfg->sizes[101] = 0;
    cfg->sizes[102] = 0;
    cfg->sizes[103] = 0;
    cfg->sizes[104] = 0;
    cfg->sizes[105] = 0;
    cfg->sizes[106] = 0;
    cfg->sizes[107] = 0;
    cfg->sizes[108] = 0;
    cfg->sizes[109] = 0;
    cfg->sizes[110] = 0;
    cfg->sizes[111] = 0;
    cfg->sizes[112] = 0;
    cfg->sizes[113] = 0;
    cfg->sizes[114] = 0;
    cfg->sizes[115] = 0;
    cfg->sizes[116] = 0;
    cfg->sizes[117] = 0;
    cfg->sizes[118] = 0;
    cfg->sizes[119] = 0;
    cfg->sizes[120] = 0;
    cfg->sizes[121] = 0;
    cfg->sizes[122] = 0;
    cfg->sizes[123] = 0;
    cfg->sizes[124] = 0;
    cfg->sizes[125] = 0;
    cfg->sizes[126] = 0;
    cfg->sizes[127] = 0;
    cfg->sizes[128] = 0;
    cfg->sizes[129] = 0;
    cfg->sizes[130] = 0;
    cfg->sizes[131] = 0;
    cfg->sizes[132] = 0;
    cuda_config_init(&cfg->cu_cfg, 133, size_names, size_vars, cfg->sizes,
                     size_classes);
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg->nvrtc_opts);
    free(cfg);
}
void futhark_context_config_add_nvrtc_option(struct futhark_context_config *cfg,
                                             const char *opt)
{
    cfg->nvrtc_opts[cfg->num_nvrtc_opts] = opt;
    cfg->num_nvrtc_opts++;
    cfg->nvrtc_opts = (const char **) realloc(cfg->nvrtc_opts,
                                              (cfg->num_nvrtc_opts + 1) *
                                              sizeof(const char *));
    cfg->nvrtc_opts[cfg->num_nvrtc_opts] = NULL;
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->cu_cfg.logging = cfg->cu_cfg.debugging = flag;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag)
{
    cfg->cu_cfg.logging = flag;
}
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s)
{
    set_preferred_device(&cfg->cu_cfg, s);
}
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path)
{
    cfg->cu_cfg.dump_program_to = path;
}
void futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                              const char *path)
{
    cfg->cu_cfg.load_program_from = path;
}
void futhark_context_config_dump_ptx_to(struct futhark_context_config *cfg,
                                        const char *path)
{
    cfg->cu_cfg.dump_ptx_to = path;
}
void futhark_context_config_load_ptx_from(struct futhark_context_config *cfg,
                                          const char *path)
{
    cfg->cu_cfg.load_ptx_from = path;
}
void futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                                   int size)
{
    cfg->cu_cfg.default_block_size = size;
    cfg->cu_cfg.default_block_size_changed = 1;
}
void futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                                   int num)
{
    cfg->cu_cfg.default_grid_size = num;
    cfg->cu_cfg.default_grid_size_changed = 1;
}
void futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->cu_cfg.default_tile_size = size;
    cfg->cu_cfg.default_tile_size_changed = 1;
}
void futhark_context_config_set_default_reg_tile_size(struct futhark_context_config *cfg,
                                                      int size)
{
    cfg->cu_cfg.default_reg_tile_size = size;
}
void futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->cu_cfg.default_threshold = size;
}
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    for (int i = 0; i < 133; i++) {
        if (strcmp(size_name, size_names[i]) == 0) {
            cfg->sizes[i] = size_value;
            return 0;
        }
    }
    if (strcmp(size_name, "default_group_size") == 0) {
        cfg->cu_cfg.default_block_size = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_num_groups") == 0) {
        cfg->cu_cfg.default_grid_size = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_threshold") == 0) {
        cfg->cu_cfg.default_threshold = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_tile_size") == 0) {
        cfg->cu_cfg.default_tile_size = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_reg_tile_size") == 0) {
        cfg->cu_cfg.default_reg_tile_size = size_value;
        return 0;
    }
    return 1;
}
struct futhark_context {
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int64_t peak_mem_usage_device;
    int64_t cur_mem_usage_device;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    struct memblock_device clusterPointsziid_counter_mem_32504;
    struct memblock_device clusterPointsziid_counter_mem_32742;
    struct memblock_device clusterPointsziid_counter_mem_32875;
    struct memblock_device clusterPointsziid_counter_mem_32971;
    struct memblock_device clusterPointsziid_counter_mem_33078;
    struct memblock_device clusterPointszicounter_mem_33158;
    struct memblock_device clusterPointszicounter_mem_33297;
    struct memblock_device clusterPointsziid_counter_mem_33332;
    struct memblock_device clusterPointsziid_counter_mem_33470;
    struct memblock_device clusterPointsziid_counter_mem_33613;
    struct memblock_device clusterPointszicounter_mem_33830;
    struct memblock_device clusterPointsziid_counter_mem_33873;
    struct memblock_device clusterPointsziid_counter_mem_34006;
    struct memblock_device clusterPointsziid_counter_mem_34093;
    struct memblock_device clusterPointszicounter_mem_34192;
    struct memblock_device clusterPointszicounter_mem_34240;
    struct memblock_device clusterPointszicounter_mem_34271;
    struct memblock_device clusterPointsziid_counter_mem_34310;
    struct memblock_device clusterPointszicounter_mem_34389;
    struct memblock_device clusterPointszicounter_mem_34527;
    struct memblock_device clusterPointsziid_counter_mem_34562;
    struct memblock_device clusterPointsziid_counter_mem_34695;
    struct memblock_device clusterPointsziid_counter_mem_34837;
    struct memblock_device clusterPointsziid_counter_mem_35066;
    struct memblock_device clusterPointsziid_counter_mem_35199;
    struct memblock_device clusterPointsziid_counter_mem_35286;
    struct memblock_device clusterPointsziid_counter_mem_35383;
    struct memblock_device clusterPointsziid_counter_mem_35516;
    struct memblock_device clusterPointsziid_counter_mem_35603;
    struct memblock_device clusterPointszicounter_mem_35693;
    struct memblock_device clusterPointszicounter_mem_35724;
    struct memblock_device clusterPointszicounter_mem_35755;
    struct memblock_device clusterPointszicounter_mem_35785;
    struct memblock_device clusterPointsziid_counter_mem_35818;
    struct memblock_device clusterPointsziid_counter_mem_35906;
    struct memblock_device clusterPointszicounter_mem_35985;
    struct memblock_device clusterPointszicounter_mem_36124;
    struct memblock_device clusterPointsziid_counter_mem_36159;
    struct memblock_device clusterPointsziid_counter_mem_36297;
    struct memblock_device clusterPointsziid_counter_mem_36384;
    struct memblock_device clusterPointsziid_counter_mem_36522;
    struct memblock_device clusterPointszicounter_mem_36602;
    struct memblock_device clusterPointszicounter_mem_36741;
    struct memblock_device clusterPointsziid_counter_mem_36776;
    CUfunction builtinzhiota_i64ziiota_i64_32477;
    int64_t builtinzhiota_i64ziiota_i64_32477_total_runtime;
    int builtinzhiota_i64ziiota_i64_32477_runs;
    CUfunction builtinzhreplicate_i32zireplicate_34186;
    int64_t builtinzhreplicate_i32zireplicate_34186_total_runtime;
    int builtinzhreplicate_i32zireplicate_34186_runs;
    CUfunction builtinzhreplicate_i64zireplicate_32958;
    int64_t builtinzhreplicate_i64zireplicate_32958_total_runtime;
    int builtinzhreplicate_i64zireplicate_32958_runs;
    CUfunction builtinzhreplicate_i8zireplicate_32528;
    int64_t builtinzhreplicate_i8zireplicate_32528_total_runtime;
    int builtinzhreplicate_i8zireplicate_32528_runs;
    CUfunction clusterPointszicopy_33050;
    int64_t clusterPointszicopy_33050_total_runtime;
    int clusterPointszicopy_33050_runs;
    CUfunction clusterPointszicopy_34172;
    int64_t clusterPointszicopy_34172_total_runtime;
    int clusterPointszicopy_34172_runs;
    CUfunction clusterPointszicopy_35365;
    int64_t clusterPointszicopy_35365_total_runtime;
    int clusterPointszicopy_35365_runs;
    CUfunction clusterPointszicopy_35682;
    int64_t clusterPointszicopy_35682_total_runtime;
    int clusterPointszicopy_35682_runs;
    CUfunction clusterPointszicopy_36376;
    int64_t clusterPointszicopy_36376_total_runtime;
    int clusterPointszicopy_36376_runs;
    CUfunction clusterPointsziseghist_global_30743;
    int64_t clusterPointsziseghist_global_30743_total_runtime;
    int clusterPointsziseghist_global_30743_runs;
    CUfunction clusterPointsziseghist_global_31087;
    int64_t clusterPointsziseghist_global_31087_total_runtime;
    int clusterPointsziseghist_global_31087_runs;
    CUfunction clusterPointsziseghist_global_31478;
    int64_t clusterPointsziseghist_global_31478_total_runtime;
    int clusterPointsziseghist_global_31478_runs;
    CUfunction clusterPointsziseghist_global_31609;
    int64_t clusterPointsziseghist_global_31609_total_runtime;
    int clusterPointsziseghist_global_31609_runs;
    CUfunction clusterPointsziseghist_local_30743;
    int64_t clusterPointsziseghist_local_30743_total_runtime;
    int clusterPointsziseghist_local_30743_runs;
    CUfunction clusterPointsziseghist_local_31087;
    int64_t clusterPointsziseghist_local_31087_total_runtime;
    int clusterPointsziseghist_local_31087_runs;
    CUfunction clusterPointsziseghist_local_31478;
    int64_t clusterPointsziseghist_local_31478_total_runtime;
    int clusterPointsziseghist_local_31478_runs;
    CUfunction clusterPointsziseghist_local_31609;
    int64_t clusterPointsziseghist_local_31609_total_runtime;
    int clusterPointsziseghist_local_31609_runs;
    CUfunction clusterPointszisegmap_30254;
    int64_t clusterPointszisegmap_30254_total_runtime;
    int clusterPointszisegmap_30254_runs;
    CUfunction clusterPointszisegmap_30277;
    int64_t clusterPointszisegmap_30277_total_runtime;
    int clusterPointszisegmap_30277_runs;
    CUfunction clusterPointszisegmap_30299;
    int64_t clusterPointszisegmap_30299_total_runtime;
    int clusterPointszisegmap_30299_runs;
    CUfunction clusterPointszisegmap_30354;
    int64_t clusterPointszisegmap_30354_total_runtime;
    int clusterPointszisegmap_30354_runs;
    CUfunction clusterPointszisegmap_30360;
    int64_t clusterPointszisegmap_30360_total_runtime;
    int clusterPointszisegmap_30360_runs;
    CUfunction clusterPointszisegmap_30390;
    int64_t clusterPointszisegmap_30390_total_runtime;
    int clusterPointszisegmap_30390_runs;
    CUfunction clusterPointszisegmap_30424;
    int64_t clusterPointszisegmap_30424_total_runtime;
    int clusterPointszisegmap_30424_runs;
    CUfunction clusterPointszisegmap_30438;
    int64_t clusterPointszisegmap_30438_total_runtime;
    int clusterPointszisegmap_30438_runs;
    CUfunction clusterPointszisegmap_30535;
    int64_t clusterPointszisegmap_30535_total_runtime;
    int clusterPointszisegmap_30535_runs;
    CUfunction clusterPointszisegmap_30562;
    int64_t clusterPointszisegmap_30562_total_runtime;
    int clusterPointszisegmap_30562_runs;
    CUfunction clusterPointszisegmap_30622;
    int64_t clusterPointszisegmap_30622_total_runtime;
    int clusterPointszisegmap_30622_runs;
    CUfunction clusterPointszisegmap_30760;
    int64_t clusterPointszisegmap_30760_total_runtime;
    int clusterPointszisegmap_30760_runs;
    CUfunction clusterPointszisegmap_30802;
    int64_t clusterPointszisegmap_30802_total_runtime;
    int clusterPointszisegmap_30802_runs;
    CUfunction clusterPointszisegmap_30946;
    int64_t clusterPointszisegmap_30946_total_runtime;
    int clusterPointszisegmap_30946_runs;
    CUfunction clusterPointszisegmap_30964;
    int64_t clusterPointszisegmap_30964_total_runtime;
    int clusterPointszisegmap_30964_runs;
    CUfunction clusterPointszisegmap_30978;
    int64_t clusterPointszisegmap_30978_total_runtime;
    int clusterPointszisegmap_30978_runs;
    CUfunction clusterPointszisegmap_31012;
    int64_t clusterPointszisegmap_31012_total_runtime;
    int clusterPointszisegmap_31012_runs;
    CUfunction clusterPointszisegmap_31026;
    int64_t clusterPointszisegmap_31026_total_runtime;
    int clusterPointszisegmap_31026_runs;
    CUfunction clusterPointszisegmap_31112;
    int64_t clusterPointszisegmap_31112_total_runtime;
    int clusterPointszisegmap_31112_runs;
    CUfunction clusterPointszisegmap_31230;
    int64_t clusterPointszisegmap_31230_total_runtime;
    int clusterPointszisegmap_31230_runs;
    CUfunction clusterPointszisegmap_31236;
    int64_t clusterPointszisegmap_31236_total_runtime;
    int clusterPointszisegmap_31236_runs;
    CUfunction clusterPointszisegmap_31270;
    int64_t clusterPointszisegmap_31270_total_runtime;
    int clusterPointszisegmap_31270_runs;
    CUfunction clusterPointszisegmap_31304;
    int64_t clusterPointszisegmap_31304_total_runtime;
    int clusterPointszisegmap_31304_runs;
    CUfunction clusterPointszisegmap_31318;
    int64_t clusterPointszisegmap_31318_total_runtime;
    int clusterPointszisegmap_31318_runs;
    CUfunction clusterPointszisegmap_31346;
    int64_t clusterPointszisegmap_31346_total_runtime;
    int clusterPointszisegmap_31346_runs;
    CUfunction clusterPointszisegmap_31380;
    int64_t clusterPointszisegmap_31380_total_runtime;
    int clusterPointszisegmap_31380_runs;
    CUfunction clusterPointszisegmap_31394;
    int64_t clusterPointszisegmap_31394_total_runtime;
    int clusterPointszisegmap_31394_runs;
    CUfunction clusterPointszisegmap_31448;
    int64_t clusterPointszisegmap_31448_total_runtime;
    int clusterPointszisegmap_31448_runs;
    CUfunction clusterPointszisegmap_31495;
    int64_t clusterPointszisegmap_31495_total_runtime;
    int clusterPointszisegmap_31495_runs;
    CUfunction clusterPointszisegmap_31529;
    int64_t clusterPointszisegmap_31529_total_runtime;
    int clusterPointszisegmap_31529_runs;
    CUfunction clusterPointszisegmap_31626;
    int64_t clusterPointszisegmap_31626_total_runtime;
    int clusterPointszisegmap_31626_runs;
    CUfunction clusterPointszisegmap_31640;
    int64_t clusterPointszisegmap_31640_total_runtime;
    int clusterPointszisegmap_31640_runs;
    CUfunction clusterPointszisegred_large_33268;
    int64_t clusterPointszisegred_large_33268_total_runtime;
    int clusterPointszisegred_large_33268_runs;
    CUfunction clusterPointszisegred_large_34498;
    int64_t clusterPointszisegred_large_34498_total_runtime;
    int clusterPointszisegred_large_34498_runs;
    CUfunction clusterPointszisegred_large_36095;
    int64_t clusterPointszisegred_large_36095_total_runtime;
    int clusterPointszisegred_large_36095_runs;
    CUfunction clusterPointszisegred_large_36712;
    int64_t clusterPointszisegred_large_36712_total_runtime;
    int clusterPointszisegred_large_36712_runs;
    CUfunction clusterPointszisegred_nonseg_30735;
    int64_t clusterPointszisegred_nonseg_30735_total_runtime;
    int clusterPointszisegred_nonseg_30735_runs;
    CUfunction clusterPointszisegred_nonseg_30962;
    int64_t clusterPointszisegred_nonseg_30962_total_runtime;
    int clusterPointszisegred_nonseg_30962_runs;
    CUfunction clusterPointszisegred_nonseg_31041;
    int64_t clusterPointszisegred_nonseg_31041_total_runtime;
    int clusterPointszisegred_nonseg_31041_runs;
    CUfunction clusterPointszisegred_nonseg_31051;
    int64_t clusterPointszisegred_nonseg_31051_total_runtime;
    int clusterPointszisegred_nonseg_31051_runs;
    CUfunction clusterPointszisegred_nonseg_31061;
    int64_t clusterPointszisegred_nonseg_31061_total_runtime;
    int clusterPointszisegred_nonseg_31061_runs;
    CUfunction clusterPointszisegred_nonseg_31079;
    int64_t clusterPointszisegred_nonseg_31079_total_runtime;
    int clusterPointszisegred_nonseg_31079_runs;
    CUfunction clusterPointszisegred_nonseg_31408;
    int64_t clusterPointszisegred_nonseg_31408_total_runtime;
    int clusterPointszisegred_nonseg_31408_runs;
    CUfunction clusterPointszisegred_nonseg_31418;
    int64_t clusterPointszisegred_nonseg_31418_total_runtime;
    int clusterPointszisegred_nonseg_31418_runs;
    CUfunction clusterPointszisegred_nonseg_31428;
    int64_t clusterPointszisegred_nonseg_31428_total_runtime;
    int clusterPointszisegred_nonseg_31428_runs;
    CUfunction clusterPointszisegred_nonseg_31438;
    int64_t clusterPointszisegred_nonseg_31438_total_runtime;
    int clusterPointszisegred_nonseg_31438_runs;
    CUfunction clusterPointszisegred_nonseg_31470;
    int64_t clusterPointszisegred_nonseg_31470_total_runtime;
    int clusterPointszisegred_nonseg_31470_runs;
    CUfunction clusterPointszisegred_nonseg_31601;
    int64_t clusterPointszisegred_nonseg_31601_total_runtime;
    int clusterPointszisegred_nonseg_31601_runs;
    CUfunction clusterPointszisegred_small_33268;
    int64_t clusterPointszisegred_small_33268_total_runtime;
    int clusterPointszisegred_small_33268_runs;
    CUfunction clusterPointszisegred_small_34498;
    int64_t clusterPointszisegred_small_34498_total_runtime;
    int clusterPointszisegred_small_34498_runs;
    CUfunction clusterPointszisegred_small_36095;
    int64_t clusterPointszisegred_small_36095_total_runtime;
    int clusterPointszisegred_small_36095_runs;
    CUfunction clusterPointszisegred_small_36712;
    int64_t clusterPointszisegred_small_36712_total_runtime;
    int clusterPointszisegred_small_36712_runs;
    CUfunction clusterPointszisegscan_30352;
    int64_t clusterPointszisegscan_30352_total_runtime;
    int clusterPointszisegscan_30352_runs;
    CUfunction clusterPointszisegscan_30414;
    int64_t clusterPointszisegscan_30414_total_runtime;
    int clusterPointszisegscan_30414_runs;
    CUfunction clusterPointszisegscan_30422;
    int64_t clusterPointszisegscan_30422_total_runtime;
    int clusterPointszisegscan_30422_runs;
    CUfunction clusterPointszisegscan_30436;
    int64_t clusterPointszisegscan_30436_total_runtime;
    int clusterPointszisegscan_30436_runs;
    CUfunction clusterPointszisegscan_30725;
    int64_t clusterPointszisegscan_30725_total_runtime;
    int clusterPointszisegscan_30725_runs;
    CUfunction clusterPointszisegscan_30758;
    int64_t clusterPointszisegscan_30758_total_runtime;
    int clusterPointszisegscan_30758_runs;
    CUfunction clusterPointszisegscan_30784;
    int64_t clusterPointszisegscan_30784_total_runtime;
    int clusterPointszisegscan_30784_runs;
    CUfunction clusterPointszisegscan_30944;
    int64_t clusterPointszisegscan_30944_total_runtime;
    int clusterPointszisegscan_30944_runs;
    CUfunction clusterPointszisegscan_31002;
    int64_t clusterPointszisegscan_31002_total_runtime;
    int clusterPointszisegscan_31002_runs;
    CUfunction clusterPointszisegscan_31010;
    int64_t clusterPointszisegscan_31010_total_runtime;
    int clusterPointszisegscan_31010_runs;
    CUfunction clusterPointszisegscan_31024;
    int64_t clusterPointszisegscan_31024_total_runtime;
    int clusterPointszisegscan_31024_runs;
    CUfunction clusterPointszisegscan_31069;
    int64_t clusterPointszisegscan_31069_total_runtime;
    int clusterPointszisegscan_31069_runs;
    CUfunction clusterPointszisegscan_31102;
    int64_t clusterPointszisegscan_31102_total_runtime;
    int clusterPointszisegscan_31102_runs;
    CUfunction clusterPointszisegscan_31110;
    int64_t clusterPointszisegscan_31110_total_runtime;
    int clusterPointszisegscan_31110_runs;
    CUfunction clusterPointszisegscan_31228;
    int64_t clusterPointszisegscan_31228_total_runtime;
    int clusterPointszisegscan_31228_runs;
    CUfunction clusterPointszisegscan_31294;
    int64_t clusterPointszisegscan_31294_total_runtime;
    int clusterPointszisegscan_31294_runs;
    CUfunction clusterPointszisegscan_31302;
    int64_t clusterPointszisegscan_31302_total_runtime;
    int clusterPointszisegscan_31302_runs;
    CUfunction clusterPointszisegscan_31316;
    int64_t clusterPointszisegscan_31316_total_runtime;
    int clusterPointszisegscan_31316_runs;
    CUfunction clusterPointszisegscan_31370;
    int64_t clusterPointszisegscan_31370_total_runtime;
    int clusterPointszisegscan_31370_runs;
    CUfunction clusterPointszisegscan_31378;
    int64_t clusterPointszisegscan_31378_total_runtime;
    int clusterPointszisegscan_31378_runs;
    CUfunction clusterPointszisegscan_31392;
    int64_t clusterPointszisegscan_31392_total_runtime;
    int clusterPointszisegscan_31392_runs;
    CUfunction clusterPointszisegscan_31446;
    int64_t clusterPointszisegscan_31446_total_runtime;
    int clusterPointszisegscan_31446_runs;
    CUfunction clusterPointszisegscan_31460;
    int64_t clusterPointszisegscan_31460_total_runtime;
    int clusterPointszisegscan_31460_runs;
    CUfunction clusterPointszisegscan_31493;
    int64_t clusterPointszisegscan_31493_total_runtime;
    int clusterPointszisegscan_31493_runs;
    CUfunction clusterPointszisegscan_31519;
    int64_t clusterPointszisegscan_31519_total_runtime;
    int clusterPointszisegscan_31519_runs;
    CUfunction clusterPointszisegscan_31527;
    int64_t clusterPointszisegscan_31527_total_runtime;
    int clusterPointszisegscan_31527_runs;
    CUfunction clusterPointszisegscan_31591;
    int64_t clusterPointszisegscan_31591_total_runtime;
    int clusterPointszisegscan_31591_runs;
    CUfunction clusterPointszisegscan_31624;
    int64_t clusterPointszisegscan_31624_total_runtime;
    int clusterPointszisegscan_31624_runs;
    CUfunction gpu_map_transpose_i32;
    int64_t gpu_map_transpose_i32_total_runtime;
    int gpu_map_transpose_i32_runs;
    CUfunction gpu_map_transpose_i32_low_height;
    int64_t gpu_map_transpose_i32_low_height_total_runtime;
    int gpu_map_transpose_i32_low_height_runs;
    CUfunction gpu_map_transpose_i32_low_width;
    int64_t gpu_map_transpose_i32_low_width_total_runtime;
    int gpu_map_transpose_i32_low_width_runs;
    CUfunction gpu_map_transpose_i32_small;
    int64_t gpu_map_transpose_i32_small_total_runtime;
    int gpu_map_transpose_i32_small_runs;
    int64_t copy_dev_to_dev_total_runtime;
    int copy_dev_to_dev_runs;
    int64_t copy_dev_to_host_total_runtime;
    int copy_dev_to_host_runs;
    int64_t copy_host_to_dev_total_runtime;
    int copy_host_to_dev_runs;
    int64_t copy_scalar_to_dev_total_runtime;
    int copy_scalar_to_dev_runs;
    int64_t copy_scalar_from_dev_total_runtime;
    int copy_scalar_from_dev_runs;
    CUdeviceptr global_failure;
    CUdeviceptr global_failure_args;
    struct cuda_context cuda;
    struct sizes sizes;
    int32_t failure_is_an_option;
    int total_runs;
    long total_runtime;
} ;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    ctx->debugging = ctx->detail_memory = cfg->cu_cfg.debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = cfg->cu_cfg.logging;
    ctx->error = NULL;
    ctx->log = stderr;
    ctx->cuda.profiling_records_capacity = 200;
    ctx->cuda.profiling_records_used = 0;
    ctx->cuda.profiling_records = malloc(ctx->cuda.profiling_records_capacity *
        sizeof(struct profiling_record));
    ctx->cuda.cfg = cfg->cu_cfg;
    create_lock(&ctx->lock);
    ctx->failure_is_an_option = 0;
    ctx->total_runs = 0;
    ctx->total_runtime = 0;
    ctx->peak_mem_usage_device = 0;
    ctx->cur_mem_usage_device = 0;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    cuda_setup(&ctx->cuda, cuda_program, cfg->nvrtc_opts);
    
    int32_t no_error = -1;
    
    CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->global_failure, sizeof(no_error)));
    CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->global_failure, &no_error,
                                    sizeof(no_error)));
    // The +1 is to avoid zero-byte allocations.
    CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->global_failure_args, sizeof(int64_t) *
                                  (2 + 1)));
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->builtinzhiota_i64ziiota_i64_32477,
                                           ctx->cuda.module,
                                           "builtinzhiota_i64ziiota_i64_32477"));
    ctx->builtinzhiota_i64ziiota_i64_32477_total_runtime = 0;
    ctx->builtinzhiota_i64ziiota_i64_32477_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->builtinzhreplicate_i32zireplicate_34186,
                                           ctx->cuda.module,
                                           "builtinzhreplicate_i32zireplicate_34186"));
    ctx->builtinzhreplicate_i32zireplicate_34186_total_runtime = 0;
    ctx->builtinzhreplicate_i32zireplicate_34186_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->builtinzhreplicate_i64zireplicate_32958,
                                           ctx->cuda.module,
                                           "builtinzhreplicate_i64zireplicate_32958"));
    ctx->builtinzhreplicate_i64zireplicate_32958_total_runtime = 0;
    ctx->builtinzhreplicate_i64zireplicate_32958_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->builtinzhreplicate_i8zireplicate_32528,
                                           ctx->cuda.module,
                                           "builtinzhreplicate_i8zireplicate_32528"));
    ctx->builtinzhreplicate_i8zireplicate_32528_total_runtime = 0;
    ctx->builtinzhreplicate_i8zireplicate_32528_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszicopy_33050,
                                           ctx->cuda.module,
                                           "clusterPointszicopy_33050"));
    ctx->clusterPointszicopy_33050_total_runtime = 0;
    ctx->clusterPointszicopy_33050_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszicopy_34172,
                                           ctx->cuda.module,
                                           "clusterPointszicopy_34172"));
    ctx->clusterPointszicopy_34172_total_runtime = 0;
    ctx->clusterPointszicopy_34172_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszicopy_35365,
                                           ctx->cuda.module,
                                           "clusterPointszicopy_35365"));
    ctx->clusterPointszicopy_35365_total_runtime = 0;
    ctx->clusterPointszicopy_35365_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszicopy_35682,
                                           ctx->cuda.module,
                                           "clusterPointszicopy_35682"));
    ctx->clusterPointszicopy_35682_total_runtime = 0;
    ctx->clusterPointszicopy_35682_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszicopy_36376,
                                           ctx->cuda.module,
                                           "clusterPointszicopy_36376"));
    ctx->clusterPointszicopy_36376_total_runtime = 0;
    ctx->clusterPointszicopy_36376_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointsziseghist_global_30743,
                                           ctx->cuda.module,
                                           "clusterPointsziseghist_global_30743"));
    ctx->clusterPointsziseghist_global_30743_total_runtime = 0;
    ctx->clusterPointsziseghist_global_30743_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointsziseghist_global_31087,
                                           ctx->cuda.module,
                                           "clusterPointsziseghist_global_31087"));
    ctx->clusterPointsziseghist_global_31087_total_runtime = 0;
    ctx->clusterPointsziseghist_global_31087_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointsziseghist_global_31478,
                                           ctx->cuda.module,
                                           "clusterPointsziseghist_global_31478"));
    ctx->clusterPointsziseghist_global_31478_total_runtime = 0;
    ctx->clusterPointsziseghist_global_31478_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointsziseghist_global_31609,
                                           ctx->cuda.module,
                                           "clusterPointsziseghist_global_31609"));
    ctx->clusterPointsziseghist_global_31609_total_runtime = 0;
    ctx->clusterPointsziseghist_global_31609_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointsziseghist_local_30743,
                                           ctx->cuda.module,
                                           "clusterPointsziseghist_local_30743"));
    ctx->clusterPointsziseghist_local_30743_total_runtime = 0;
    ctx->clusterPointsziseghist_local_30743_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointsziseghist_local_31087,
                                           ctx->cuda.module,
                                           "clusterPointsziseghist_local_31087"));
    ctx->clusterPointsziseghist_local_31087_total_runtime = 0;
    ctx->clusterPointsziseghist_local_31087_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointsziseghist_local_31478,
                                           ctx->cuda.module,
                                           "clusterPointsziseghist_local_31478"));
    ctx->clusterPointsziseghist_local_31478_total_runtime = 0;
    ctx->clusterPointsziseghist_local_31478_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointsziseghist_local_31609,
                                           ctx->cuda.module,
                                           "clusterPointsziseghist_local_31609"));
    ctx->clusterPointsziseghist_local_31609_total_runtime = 0;
    ctx->clusterPointsziseghist_local_31609_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30254,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30254"));
    ctx->clusterPointszisegmap_30254_total_runtime = 0;
    ctx->clusterPointszisegmap_30254_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30277,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30277"));
    ctx->clusterPointszisegmap_30277_total_runtime = 0;
    ctx->clusterPointszisegmap_30277_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30299,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30299"));
    ctx->clusterPointszisegmap_30299_total_runtime = 0;
    ctx->clusterPointszisegmap_30299_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30354,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30354"));
    ctx->clusterPointszisegmap_30354_total_runtime = 0;
    ctx->clusterPointszisegmap_30354_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30360,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30360"));
    ctx->clusterPointszisegmap_30360_total_runtime = 0;
    ctx->clusterPointszisegmap_30360_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30390,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30390"));
    ctx->clusterPointszisegmap_30390_total_runtime = 0;
    ctx->clusterPointszisegmap_30390_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30424,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30424"));
    ctx->clusterPointszisegmap_30424_total_runtime = 0;
    ctx->clusterPointszisegmap_30424_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30438,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30438"));
    ctx->clusterPointszisegmap_30438_total_runtime = 0;
    ctx->clusterPointszisegmap_30438_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30535,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30535"));
    ctx->clusterPointszisegmap_30535_total_runtime = 0;
    ctx->clusterPointszisegmap_30535_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30562,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30562"));
    ctx->clusterPointszisegmap_30562_total_runtime = 0;
    ctx->clusterPointszisegmap_30562_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30622,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30622"));
    ctx->clusterPointszisegmap_30622_total_runtime = 0;
    ctx->clusterPointszisegmap_30622_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30760,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30760"));
    ctx->clusterPointszisegmap_30760_total_runtime = 0;
    ctx->clusterPointszisegmap_30760_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30802,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30802"));
    ctx->clusterPointszisegmap_30802_total_runtime = 0;
    ctx->clusterPointszisegmap_30802_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30946,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30946"));
    ctx->clusterPointszisegmap_30946_total_runtime = 0;
    ctx->clusterPointszisegmap_30946_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30964,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30964"));
    ctx->clusterPointszisegmap_30964_total_runtime = 0;
    ctx->clusterPointszisegmap_30964_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_30978,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_30978"));
    ctx->clusterPointszisegmap_30978_total_runtime = 0;
    ctx->clusterPointszisegmap_30978_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31012,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31012"));
    ctx->clusterPointszisegmap_31012_total_runtime = 0;
    ctx->clusterPointszisegmap_31012_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31026,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31026"));
    ctx->clusterPointszisegmap_31026_total_runtime = 0;
    ctx->clusterPointszisegmap_31026_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31112,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31112"));
    ctx->clusterPointszisegmap_31112_total_runtime = 0;
    ctx->clusterPointszisegmap_31112_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31230,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31230"));
    ctx->clusterPointszisegmap_31230_total_runtime = 0;
    ctx->clusterPointszisegmap_31230_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31236,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31236"));
    ctx->clusterPointszisegmap_31236_total_runtime = 0;
    ctx->clusterPointszisegmap_31236_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31270,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31270"));
    ctx->clusterPointszisegmap_31270_total_runtime = 0;
    ctx->clusterPointszisegmap_31270_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31304,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31304"));
    ctx->clusterPointszisegmap_31304_total_runtime = 0;
    ctx->clusterPointszisegmap_31304_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31318,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31318"));
    ctx->clusterPointszisegmap_31318_total_runtime = 0;
    ctx->clusterPointszisegmap_31318_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31346,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31346"));
    ctx->clusterPointszisegmap_31346_total_runtime = 0;
    ctx->clusterPointszisegmap_31346_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31380,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31380"));
    ctx->clusterPointszisegmap_31380_total_runtime = 0;
    ctx->clusterPointszisegmap_31380_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31394,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31394"));
    ctx->clusterPointszisegmap_31394_total_runtime = 0;
    ctx->clusterPointszisegmap_31394_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31448,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31448"));
    ctx->clusterPointszisegmap_31448_total_runtime = 0;
    ctx->clusterPointszisegmap_31448_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31495,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31495"));
    ctx->clusterPointszisegmap_31495_total_runtime = 0;
    ctx->clusterPointszisegmap_31495_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31529,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31529"));
    ctx->clusterPointszisegmap_31529_total_runtime = 0;
    ctx->clusterPointszisegmap_31529_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31626,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31626"));
    ctx->clusterPointszisegmap_31626_total_runtime = 0;
    ctx->clusterPointszisegmap_31626_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegmap_31640,
                                           ctx->cuda.module,
                                           "clusterPointszisegmap_31640"));
    ctx->clusterPointszisegmap_31640_total_runtime = 0;
    ctx->clusterPointszisegmap_31640_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_large_33268,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_large_33268"));
    ctx->clusterPointszisegred_large_33268_total_runtime = 0;
    ctx->clusterPointszisegred_large_33268_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_large_34498,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_large_34498"));
    ctx->clusterPointszisegred_large_34498_total_runtime = 0;
    ctx->clusterPointszisegred_large_34498_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_large_36095,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_large_36095"));
    ctx->clusterPointszisegred_large_36095_total_runtime = 0;
    ctx->clusterPointszisegred_large_36095_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_large_36712,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_large_36712"));
    ctx->clusterPointszisegred_large_36712_total_runtime = 0;
    ctx->clusterPointszisegred_large_36712_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_30735,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_30735"));
    ctx->clusterPointszisegred_nonseg_30735_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_30735_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_30962,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_30962"));
    ctx->clusterPointszisegred_nonseg_30962_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_30962_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31041,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31041"));
    ctx->clusterPointszisegred_nonseg_31041_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31041_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31051,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31051"));
    ctx->clusterPointszisegred_nonseg_31051_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31051_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31061,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31061"));
    ctx->clusterPointszisegred_nonseg_31061_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31061_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31079,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31079"));
    ctx->clusterPointszisegred_nonseg_31079_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31079_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31408,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31408"));
    ctx->clusterPointszisegred_nonseg_31408_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31408_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31418,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31418"));
    ctx->clusterPointszisegred_nonseg_31418_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31418_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31428,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31428"));
    ctx->clusterPointszisegred_nonseg_31428_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31428_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31438,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31438"));
    ctx->clusterPointszisegred_nonseg_31438_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31438_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31470,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31470"));
    ctx->clusterPointszisegred_nonseg_31470_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31470_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_nonseg_31601,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_nonseg_31601"));
    ctx->clusterPointszisegred_nonseg_31601_total_runtime = 0;
    ctx->clusterPointszisegred_nonseg_31601_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_small_33268,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_small_33268"));
    ctx->clusterPointszisegred_small_33268_total_runtime = 0;
    ctx->clusterPointszisegred_small_33268_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_small_34498,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_small_34498"));
    ctx->clusterPointszisegred_small_34498_total_runtime = 0;
    ctx->clusterPointszisegred_small_34498_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_small_36095,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_small_36095"));
    ctx->clusterPointszisegred_small_36095_total_runtime = 0;
    ctx->clusterPointszisegred_small_36095_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegred_small_36712,
                                           ctx->cuda.module,
                                           "clusterPointszisegred_small_36712"));
    ctx->clusterPointszisegred_small_36712_total_runtime = 0;
    ctx->clusterPointszisegred_small_36712_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_30352,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_30352"));
    ctx->clusterPointszisegscan_30352_total_runtime = 0;
    ctx->clusterPointszisegscan_30352_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_30414,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_30414"));
    ctx->clusterPointszisegscan_30414_total_runtime = 0;
    ctx->clusterPointszisegscan_30414_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_30422,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_30422"));
    ctx->clusterPointszisegscan_30422_total_runtime = 0;
    ctx->clusterPointszisegscan_30422_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_30436,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_30436"));
    ctx->clusterPointszisegscan_30436_total_runtime = 0;
    ctx->clusterPointszisegscan_30436_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_30725,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_30725"));
    ctx->clusterPointszisegscan_30725_total_runtime = 0;
    ctx->clusterPointszisegscan_30725_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_30758,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_30758"));
    ctx->clusterPointszisegscan_30758_total_runtime = 0;
    ctx->clusterPointszisegscan_30758_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_30784,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_30784"));
    ctx->clusterPointszisegscan_30784_total_runtime = 0;
    ctx->clusterPointszisegscan_30784_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_30944,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_30944"));
    ctx->clusterPointszisegscan_30944_total_runtime = 0;
    ctx->clusterPointszisegscan_30944_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31002,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31002"));
    ctx->clusterPointszisegscan_31002_total_runtime = 0;
    ctx->clusterPointszisegscan_31002_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31010,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31010"));
    ctx->clusterPointszisegscan_31010_total_runtime = 0;
    ctx->clusterPointszisegscan_31010_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31024,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31024"));
    ctx->clusterPointszisegscan_31024_total_runtime = 0;
    ctx->clusterPointszisegscan_31024_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31069,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31069"));
    ctx->clusterPointszisegscan_31069_total_runtime = 0;
    ctx->clusterPointszisegscan_31069_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31102,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31102"));
    ctx->clusterPointszisegscan_31102_total_runtime = 0;
    ctx->clusterPointszisegscan_31102_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31110,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31110"));
    ctx->clusterPointszisegscan_31110_total_runtime = 0;
    ctx->clusterPointszisegscan_31110_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31228,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31228"));
    ctx->clusterPointszisegscan_31228_total_runtime = 0;
    ctx->clusterPointszisegscan_31228_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31294,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31294"));
    ctx->clusterPointszisegscan_31294_total_runtime = 0;
    ctx->clusterPointszisegscan_31294_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31302,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31302"));
    ctx->clusterPointszisegscan_31302_total_runtime = 0;
    ctx->clusterPointszisegscan_31302_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31316,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31316"));
    ctx->clusterPointszisegscan_31316_total_runtime = 0;
    ctx->clusterPointszisegscan_31316_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31370,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31370"));
    ctx->clusterPointszisegscan_31370_total_runtime = 0;
    ctx->clusterPointszisegscan_31370_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31378,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31378"));
    ctx->clusterPointszisegscan_31378_total_runtime = 0;
    ctx->clusterPointszisegscan_31378_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31392,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31392"));
    ctx->clusterPointszisegscan_31392_total_runtime = 0;
    ctx->clusterPointszisegscan_31392_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31446,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31446"));
    ctx->clusterPointszisegscan_31446_total_runtime = 0;
    ctx->clusterPointszisegscan_31446_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31460,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31460"));
    ctx->clusterPointszisegscan_31460_total_runtime = 0;
    ctx->clusterPointszisegscan_31460_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31493,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31493"));
    ctx->clusterPointszisegscan_31493_total_runtime = 0;
    ctx->clusterPointszisegscan_31493_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31519,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31519"));
    ctx->clusterPointszisegscan_31519_total_runtime = 0;
    ctx->clusterPointszisegscan_31519_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31527,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31527"));
    ctx->clusterPointszisegscan_31527_total_runtime = 0;
    ctx->clusterPointszisegscan_31527_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31591,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31591"));
    ctx->clusterPointszisegscan_31591_total_runtime = 0;
    ctx->clusterPointszisegscan_31591_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->clusterPointszisegscan_31624,
                                           ctx->cuda.module,
                                           "clusterPointszisegscan_31624"));
    ctx->clusterPointszisegscan_31624_total_runtime = 0;
    ctx->clusterPointszisegscan_31624_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_i32,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_i32"));
    ctx->gpu_map_transpose_i32_total_runtime = 0;
    ctx->gpu_map_transpose_i32_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_i32_low_height,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_i32_low_height"));
    ctx->gpu_map_transpose_i32_low_height_total_runtime = 0;
    ctx->gpu_map_transpose_i32_low_height_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_i32_low_width,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_i32_low_width"));
    ctx->gpu_map_transpose_i32_low_width_total_runtime = 0;
    ctx->gpu_map_transpose_i32_low_width_runs = 0;
    CUDA_SUCCEED_FATAL(cuModuleGetFunction(&ctx->gpu_map_transpose_i32_small,
                                           ctx->cuda.module,
                                           "gpu_map_transpose_i32_small"));
    ctx->gpu_map_transpose_i32_small_total_runtime = 0;
    ctx->gpu_map_transpose_i32_small_runs = 0;
    ctx->copy_dev_to_dev_total_runtime = 0;
    ctx->copy_dev_to_dev_runs = 0;
    ctx->copy_dev_to_host_total_runtime = 0;
    ctx->copy_dev_to_host_runs = 0;
    ctx->copy_host_to_dev_total_runtime = 0;
    ctx->copy_host_to_dev_runs = 0;
    ctx->copy_scalar_to_dev_total_runtime = 0;
    ctx->copy_scalar_to_dev_runs = 0;
    ctx->copy_scalar_from_dev_total_runtime = 0;
    ctx->copy_scalar_from_dev_runs = 0;
    {
        ctx->clusterPointsziid_counter_mem_32504.references = NULL;
        ctx->clusterPointsziid_counter_mem_32504.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_32504.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_32504.mem,
                                            clusterPointsziid_counter_mem_realtype_36980,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_32742.references = NULL;
        ctx->clusterPointsziid_counter_mem_32742.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_32742.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_32742.mem,
                                            clusterPointsziid_counter_mem_realtype_37031,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_32875.references = NULL;
        ctx->clusterPointsziid_counter_mem_32875.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_32875.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_32875.mem,
                                            clusterPointsziid_counter_mem_realtype_37046,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_32971.references = NULL;
        ctx->clusterPointsziid_counter_mem_32971.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_32971.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_32971.mem,
                                            clusterPointsziid_counter_mem_realtype_37066,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_33078.references = NULL;
        ctx->clusterPointsziid_counter_mem_33078.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_33078.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_33078.mem,
                                            clusterPointsziid_counter_mem_realtype_37107,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_33158.references = NULL;
        ctx->clusterPointszicounter_mem_33158.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_33158.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_33158.mem,
                                            clusterPointszicounter_mem_realtype_37121,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_33297.references = NULL;
        ctx->clusterPointszicounter_mem_33297.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_33297.mem,
                                      (10240 > 0 ? 10240 : 1) *
                                      sizeof(int32_t)));
        if (10240 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_33297.mem,
                                            clusterPointszicounter_mem_realtype_37153,
                                            10240 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_33332.references = NULL;
        ctx->clusterPointsziid_counter_mem_33332.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_33332.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_33332.mem,
                                            clusterPointsziid_counter_mem_realtype_37165,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_33470.references = NULL;
        ctx->clusterPointsziid_counter_mem_33470.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_33470.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_33470.mem,
                                            clusterPointsziid_counter_mem_realtype_37186,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_33613.references = NULL;
        ctx->clusterPointsziid_counter_mem_33613.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_33613.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_33613.mem,
                                            clusterPointsziid_counter_mem_realtype_37214,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_33830.references = NULL;
        ctx->clusterPointszicounter_mem_33830.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_33830.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_33830.mem,
                                            clusterPointszicounter_mem_realtype_37251,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_33873.references = NULL;
        ctx->clusterPointsziid_counter_mem_33873.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_33873.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_33873.mem,
                                            clusterPointsziid_counter_mem_realtype_37279,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_34006.references = NULL;
        ctx->clusterPointsziid_counter_mem_34006.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_34006.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_34006.mem,
                                            clusterPointsziid_counter_mem_realtype_37294,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_34093.references = NULL;
        ctx->clusterPointsziid_counter_mem_34093.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_34093.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_34093.mem,
                                            clusterPointsziid_counter_mem_realtype_37314,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_34192.references = NULL;
        ctx->clusterPointszicounter_mem_34192.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_34192.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_34192.mem,
                                            clusterPointszicounter_mem_realtype_37340,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_34240.references = NULL;
        ctx->clusterPointszicounter_mem_34240.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_34240.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_34240.mem,
                                            clusterPointszicounter_mem_realtype_37354,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_34271.references = NULL;
        ctx->clusterPointszicounter_mem_34271.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_34271.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_34271.mem,
                                            clusterPointszicounter_mem_realtype_37367,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_34310.references = NULL;
        ctx->clusterPointsziid_counter_mem_34310.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_34310.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_34310.mem,
                                            clusterPointsziid_counter_mem_realtype_37380,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_34389.references = NULL;
        ctx->clusterPointszicounter_mem_34389.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_34389.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_34389.mem,
                                            clusterPointszicounter_mem_realtype_37397,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_34527.references = NULL;
        ctx->clusterPointszicounter_mem_34527.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_34527.mem,
                                      (10240 > 0 ? 10240 : 1) *
                                      sizeof(int32_t)));
        if (10240 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_34527.mem,
                                            clusterPointszicounter_mem_realtype_37429,
                                            10240 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_34562.references = NULL;
        ctx->clusterPointsziid_counter_mem_34562.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_34562.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_34562.mem,
                                            clusterPointsziid_counter_mem_realtype_37441,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_34695.references = NULL;
        ctx->clusterPointsziid_counter_mem_34695.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_34695.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_34695.mem,
                                            clusterPointsziid_counter_mem_realtype_37456,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_34837.references = NULL;
        ctx->clusterPointsziid_counter_mem_34837.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_34837.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_34837.mem,
                                            clusterPointsziid_counter_mem_realtype_37482,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_35066.references = NULL;
        ctx->clusterPointsziid_counter_mem_35066.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_35066.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_35066.mem,
                                            clusterPointsziid_counter_mem_realtype_37534,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_35199.references = NULL;
        ctx->clusterPointsziid_counter_mem_35199.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_35199.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_35199.mem,
                                            clusterPointsziid_counter_mem_realtype_37549,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_35286.references = NULL;
        ctx->clusterPointsziid_counter_mem_35286.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_35286.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_35286.mem,
                                            clusterPointsziid_counter_mem_realtype_37569,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_35383.references = NULL;
        ctx->clusterPointsziid_counter_mem_35383.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_35383.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_35383.mem,
                                            clusterPointsziid_counter_mem_realtype_37602,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_35516.references = NULL;
        ctx->clusterPointsziid_counter_mem_35516.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_35516.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_35516.mem,
                                            clusterPointsziid_counter_mem_realtype_37617,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_35603.references = NULL;
        ctx->clusterPointsziid_counter_mem_35603.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_35603.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_35603.mem,
                                            clusterPointsziid_counter_mem_realtype_37637,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_35693.references = NULL;
        ctx->clusterPointszicounter_mem_35693.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_35693.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_35693.mem,
                                            clusterPointszicounter_mem_realtype_37663,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_35724.references = NULL;
        ctx->clusterPointszicounter_mem_35724.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_35724.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_35724.mem,
                                            clusterPointszicounter_mem_realtype_37677,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_35755.references = NULL;
        ctx->clusterPointszicounter_mem_35755.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_35755.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_35755.mem,
                                            clusterPointszicounter_mem_realtype_37691,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_35785.references = NULL;
        ctx->clusterPointszicounter_mem_35785.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_35785.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_35785.mem,
                                            clusterPointszicounter_mem_realtype_37704,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_35818.references = NULL;
        ctx->clusterPointsziid_counter_mem_35818.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_35818.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_35818.mem,
                                            clusterPointsziid_counter_mem_realtype_37717,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_35906.references = NULL;
        ctx->clusterPointsziid_counter_mem_35906.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_35906.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_35906.mem,
                                            clusterPointsziid_counter_mem_realtype_37738,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_35985.references = NULL;
        ctx->clusterPointszicounter_mem_35985.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_35985.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_35985.mem,
                                            clusterPointszicounter_mem_realtype_37752,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_36124.references = NULL;
        ctx->clusterPointszicounter_mem_36124.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_36124.mem,
                                      (10240 > 0 ? 10240 : 1) *
                                      sizeof(int32_t)));
        if (10240 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_36124.mem,
                                            clusterPointszicounter_mem_realtype_37784,
                                            10240 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_36159.references = NULL;
        ctx->clusterPointsziid_counter_mem_36159.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_36159.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_36159.mem,
                                            clusterPointsziid_counter_mem_realtype_37796,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_36297.references = NULL;
        ctx->clusterPointsziid_counter_mem_36297.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_36297.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_36297.mem,
                                            clusterPointsziid_counter_mem_realtype_37817,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_36384.references = NULL;
        ctx->clusterPointsziid_counter_mem_36384.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_36384.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_36384.mem,
                                            clusterPointsziid_counter_mem_realtype_37835,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_36522.references = NULL;
        ctx->clusterPointsziid_counter_mem_36522.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_36522.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_36522.mem,
                                            clusterPointsziid_counter_mem_realtype_37859,
                                            1 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_36602.references = NULL;
        ctx->clusterPointszicounter_mem_36602.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_36602.mem,
                                      (10 > 0 ? 10 : 1) * sizeof(int32_t)));
        if (10 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_36602.mem,
                                            clusterPointszicounter_mem_realtype_37871,
                                            10 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointszicounter_mem_36741.references = NULL;
        ctx->clusterPointszicounter_mem_36741.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointszicounter_mem_36741.mem,
                                      (10240 > 0 ? 10240 : 1) *
                                      sizeof(int32_t)));
        if (10240 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointszicounter_mem_36741.mem,
                                            clusterPointszicounter_mem_realtype_37903,
                                            10240 * sizeof(int32_t)));
    }
    {
        ctx->clusterPointsziid_counter_mem_36776.references = NULL;
        ctx->clusterPointsziid_counter_mem_36776.size = 0;
        CUDA_SUCCEED_FATAL(cuMemAlloc(&ctx->clusterPointsziid_counter_mem_36776.mem,
                                      (1 > 0 ? 1 : 1) * sizeof(int32_t)));
        if (1 > 0)
            CUDA_SUCCEED_FATAL(cuMemcpyHtoD(ctx->clusterPointsziid_counter_mem_36776.mem,
                                            clusterPointsziid_counter_mem_realtype_37915,
                                            1 * sizeof(int32_t)));
    }
    ctx->sizes.builtinzhiota_i64zigroup_sizze_32480 = cfg->sizes[0];
    ctx->sizes.builtinzhreplicate_i32zigroup_sizze_34189 = cfg->sizes[1];
    ctx->sizes.builtinzhreplicate_i64zigroup_sizze_32961 = cfg->sizes[2];
    ctx->sizes.builtinzhreplicate_i8zigroup_sizze_32531 = cfg->sizes[3];
    ctx->sizes.clusterPointsziL2_sizze_33248 = cfg->sizes[4];
    ctx->sizes.clusterPointsziL2_sizze_34478 = cfg->sizes[5];
    ctx->sizes.clusterPointsziL2_sizze_36075 = cfg->sizes[6];
    ctx->sizes.clusterPointsziL2_sizze_36692 = cfg->sizes[7];
    ctx->sizes.clusterPointszigroup_sizze_33053 = cfg->sizes[8];
    ctx->sizes.clusterPointszigroup_sizze_34175 = cfg->sizes[9];
    ctx->sizes.clusterPointszigroup_sizze_35368 = cfg->sizes[10];
    ctx->sizes.clusterPointszigroup_sizze_35685 = cfg->sizes[11];
    ctx->sizes.clusterPointszigroup_sizze_36379 = cfg->sizes[12];
    ctx->sizes.clusterPointsziseghist_group_sizze_30737 = cfg->sizes[13];
    ctx->sizes.clusterPointsziseghist_group_sizze_31081 = cfg->sizes[14];
    ctx->sizes.clusterPointsziseghist_group_sizze_31472 = cfg->sizes[15];
    ctx->sizes.clusterPointsziseghist_group_sizze_31603 = cfg->sizes[16];
    ctx->sizes.clusterPointsziseghist_num_groups_30739 = cfg->sizes[17];
    ctx->sizes.clusterPointsziseghist_num_groups_31083 = cfg->sizes[18];
    ctx->sizes.clusterPointsziseghist_num_groups_31474 = cfg->sizes[19];
    ctx->sizes.clusterPointsziseghist_num_groups_31605 = cfg->sizes[20];
    ctx->sizes.clusterPointszisegmap_group_sizze_30256 = cfg->sizes[21];
    ctx->sizes.clusterPointszisegmap_group_sizze_30280 = cfg->sizes[22];
    ctx->sizes.clusterPointszisegmap_group_sizze_30301 = cfg->sizes[23];
    ctx->sizes.clusterPointszisegmap_group_sizze_30356 = cfg->sizes[24];
    ctx->sizes.clusterPointszisegmap_group_sizze_30362 = cfg->sizes[25];
    ctx->sizes.clusterPointszisegmap_group_sizze_30392 = cfg->sizes[26];
    ctx->sizes.clusterPointszisegmap_group_sizze_30426 = cfg->sizes[27];
    ctx->sizes.clusterPointszisegmap_group_sizze_30440 = cfg->sizes[28];
    ctx->sizes.clusterPointszisegmap_group_sizze_30538 = cfg->sizes[29];
    ctx->sizes.clusterPointszisegmap_group_sizze_30566 = cfg->sizes[30];
    ctx->sizes.clusterPointszisegmap_group_sizze_30625 = cfg->sizes[31];
    ctx->sizes.clusterPointszisegmap_group_sizze_30762 = cfg->sizes[32];
    ctx->sizes.clusterPointszisegmap_group_sizze_30804 = cfg->sizes[33];
    ctx->sizes.clusterPointszisegmap_group_sizze_30948 = cfg->sizes[34];
    ctx->sizes.clusterPointszisegmap_group_sizze_30966 = cfg->sizes[35];
    ctx->sizes.clusterPointszisegmap_group_sizze_30980 = cfg->sizes[36];
    ctx->sizes.clusterPointszisegmap_group_sizze_31014 = cfg->sizes[37];
    ctx->sizes.clusterPointszisegmap_group_sizze_31028 = cfg->sizes[38];
    ctx->sizes.clusterPointszisegmap_group_sizze_31114 = cfg->sizes[39];
    ctx->sizes.clusterPointszisegmap_group_sizze_31232 = cfg->sizes[40];
    ctx->sizes.clusterPointszisegmap_group_sizze_31238 = cfg->sizes[41];
    ctx->sizes.clusterPointszisegmap_group_sizze_31272 = cfg->sizes[42];
    ctx->sizes.clusterPointszisegmap_group_sizze_31306 = cfg->sizes[43];
    ctx->sizes.clusterPointszisegmap_group_sizze_31320 = cfg->sizes[44];
    ctx->sizes.clusterPointszisegmap_group_sizze_31348 = cfg->sizes[45];
    ctx->sizes.clusterPointszisegmap_group_sizze_31382 = cfg->sizes[46];
    ctx->sizes.clusterPointszisegmap_group_sizze_31396 = cfg->sizes[47];
    ctx->sizes.clusterPointszisegmap_group_sizze_31450 = cfg->sizes[48];
    ctx->sizes.clusterPointszisegmap_group_sizze_31497 = cfg->sizes[49];
    ctx->sizes.clusterPointszisegmap_group_sizze_31531 = cfg->sizes[50];
    ctx->sizes.clusterPointszisegmap_group_sizze_31628 = cfg->sizes[51];
    ctx->sizes.clusterPointszisegmap_group_sizze_31642 = cfg->sizes[52];
    ctx->sizes.clusterPointszisegred_group_sizze_30727 = cfg->sizes[53];
    ctx->sizes.clusterPointszisegred_group_sizze_30952 = cfg->sizes[54];
    ctx->sizes.clusterPointszisegred_group_sizze_31032 = cfg->sizes[55];
    ctx->sizes.clusterPointszisegred_group_sizze_31043 = cfg->sizes[56];
    ctx->sizes.clusterPointszisegred_group_sizze_31053 = cfg->sizes[57];
    ctx->sizes.clusterPointszisegred_group_sizze_31071 = cfg->sizes[58];
    ctx->sizes.clusterPointszisegred_group_sizze_31400 = cfg->sizes[59];
    ctx->sizes.clusterPointszisegred_group_sizze_31410 = cfg->sizes[60];
    ctx->sizes.clusterPointszisegred_group_sizze_31420 = cfg->sizes[61];
    ctx->sizes.clusterPointszisegred_group_sizze_31430 = cfg->sizes[62];
    ctx->sizes.clusterPointszisegred_group_sizze_31462 = cfg->sizes[63];
    ctx->sizes.clusterPointszisegred_group_sizze_31593 = cfg->sizes[64];
    ctx->sizes.clusterPointszisegred_num_groups_30729 = cfg->sizes[65];
    ctx->sizes.clusterPointszisegred_num_groups_30954 = cfg->sizes[66];
    ctx->sizes.clusterPointszisegred_num_groups_31034 = cfg->sizes[67];
    ctx->sizes.clusterPointszisegred_num_groups_31045 = cfg->sizes[68];
    ctx->sizes.clusterPointszisegred_num_groups_31055 = cfg->sizes[69];
    ctx->sizes.clusterPointszisegred_num_groups_31073 = cfg->sizes[70];
    ctx->sizes.clusterPointszisegred_num_groups_31402 = cfg->sizes[71];
    ctx->sizes.clusterPointszisegred_num_groups_31412 = cfg->sizes[72];
    ctx->sizes.clusterPointszisegred_num_groups_31422 = cfg->sizes[73];
    ctx->sizes.clusterPointszisegred_num_groups_31432 = cfg->sizes[74];
    ctx->sizes.clusterPointszisegred_num_groups_31464 = cfg->sizes[75];
    ctx->sizes.clusterPointszisegred_num_groups_31595 = cfg->sizes[76];
    ctx->sizes.clusterPointszisegscan_group_sizze_30346 = cfg->sizes[77];
    ctx->sizes.clusterPointszisegscan_group_sizze_30408 = cfg->sizes[78];
    ctx->sizes.clusterPointszisegscan_group_sizze_30416 = cfg->sizes[79];
    ctx->sizes.clusterPointszisegscan_group_sizze_30430 = cfg->sizes[80];
    ctx->sizes.clusterPointszisegscan_group_sizze_30719 = cfg->sizes[81];
    ctx->sizes.clusterPointszisegscan_group_sizze_30752 = cfg->sizes[82];
    ctx->sizes.clusterPointszisegscan_group_sizze_30778 = cfg->sizes[83];
    ctx->sizes.clusterPointszisegscan_group_sizze_30938 = cfg->sizes[84];
    ctx->sizes.clusterPointszisegscan_group_sizze_30996 = cfg->sizes[85];
    ctx->sizes.clusterPointszisegscan_group_sizze_31004 = cfg->sizes[86];
    ctx->sizes.clusterPointszisegscan_group_sizze_31018 = cfg->sizes[87];
    ctx->sizes.clusterPointszisegscan_group_sizze_31063 = cfg->sizes[88];
    ctx->sizes.clusterPointszisegscan_group_sizze_31096 = cfg->sizes[89];
    ctx->sizes.clusterPointszisegscan_group_sizze_31104 = cfg->sizes[90];
    ctx->sizes.clusterPointszisegscan_group_sizze_31222 = cfg->sizes[91];
    ctx->sizes.clusterPointszisegscan_group_sizze_31288 = cfg->sizes[92];
    ctx->sizes.clusterPointszisegscan_group_sizze_31296 = cfg->sizes[93];
    ctx->sizes.clusterPointszisegscan_group_sizze_31310 = cfg->sizes[94];
    ctx->sizes.clusterPointszisegscan_group_sizze_31364 = cfg->sizes[95];
    ctx->sizes.clusterPointszisegscan_group_sizze_31372 = cfg->sizes[96];
    ctx->sizes.clusterPointszisegscan_group_sizze_31386 = cfg->sizes[97];
    ctx->sizes.clusterPointszisegscan_group_sizze_31440 = cfg->sizes[98];
    ctx->sizes.clusterPointszisegscan_group_sizze_31454 = cfg->sizes[99];
    ctx->sizes.clusterPointszisegscan_group_sizze_31487 = cfg->sizes[100];
    ctx->sizes.clusterPointszisegscan_group_sizze_31513 = cfg->sizes[101];
    ctx->sizes.clusterPointszisegscan_group_sizze_31521 = cfg->sizes[102];
    ctx->sizes.clusterPointszisegscan_group_sizze_31585 = cfg->sizes[103];
    ctx->sizes.clusterPointszisegscan_group_sizze_31618 = cfg->sizes[104];
    ctx->sizes.clusterPointszisegscan_num_groups_30348 = cfg->sizes[105];
    ctx->sizes.clusterPointszisegscan_num_groups_30410 = cfg->sizes[106];
    ctx->sizes.clusterPointszisegscan_num_groups_30418 = cfg->sizes[107];
    ctx->sizes.clusterPointszisegscan_num_groups_30432 = cfg->sizes[108];
    ctx->sizes.clusterPointszisegscan_num_groups_30721 = cfg->sizes[109];
    ctx->sizes.clusterPointszisegscan_num_groups_30754 = cfg->sizes[110];
    ctx->sizes.clusterPointszisegscan_num_groups_30780 = cfg->sizes[111];
    ctx->sizes.clusterPointszisegscan_num_groups_30940 = cfg->sizes[112];
    ctx->sizes.clusterPointszisegscan_num_groups_30998 = cfg->sizes[113];
    ctx->sizes.clusterPointszisegscan_num_groups_31006 = cfg->sizes[114];
    ctx->sizes.clusterPointszisegscan_num_groups_31020 = cfg->sizes[115];
    ctx->sizes.clusterPointszisegscan_num_groups_31065 = cfg->sizes[116];
    ctx->sizes.clusterPointszisegscan_num_groups_31098 = cfg->sizes[117];
    ctx->sizes.clusterPointszisegscan_num_groups_31106 = cfg->sizes[118];
    ctx->sizes.clusterPointszisegscan_num_groups_31224 = cfg->sizes[119];
    ctx->sizes.clusterPointszisegscan_num_groups_31290 = cfg->sizes[120];
    ctx->sizes.clusterPointszisegscan_num_groups_31298 = cfg->sizes[121];
    ctx->sizes.clusterPointszisegscan_num_groups_31312 = cfg->sizes[122];
    ctx->sizes.clusterPointszisegscan_num_groups_31366 = cfg->sizes[123];
    ctx->sizes.clusterPointszisegscan_num_groups_31374 = cfg->sizes[124];
    ctx->sizes.clusterPointszisegscan_num_groups_31388 = cfg->sizes[125];
    ctx->sizes.clusterPointszisegscan_num_groups_31442 = cfg->sizes[126];
    ctx->sizes.clusterPointszisegscan_num_groups_31456 = cfg->sizes[127];
    ctx->sizes.clusterPointszisegscan_num_groups_31489 = cfg->sizes[128];
    ctx->sizes.clusterPointszisegscan_num_groups_31515 = cfg->sizes[129];
    ctx->sizes.clusterPointszisegscan_num_groups_31523 = cfg->sizes[130];
    ctx->sizes.clusterPointszisegscan_num_groups_31587 = cfg->sizes[131];
    ctx->sizes.clusterPointszisegscan_num_groups_31620 = cfg->sizes[132];
    init_constants(ctx);
    // Clear the free list of any deallocations that occurred while initialising constants.
    CUDA_SUCCEED_FATAL(cuda_free_all(&ctx->cuda));
    futhark_context_sync(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    cuda_cleanup(&ctx->cuda);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    CUDA_SUCCEED_OR_RETURN(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    CUDA_SUCCEED_OR_RETURN(cuCtxSynchronize());
    if (ctx->failure_is_an_option) {
        int32_t failure_idx;
        
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&failure_idx, ctx->global_failure,
                                            sizeof(int32_t)));
        ctx->failure_is_an_option = 0;
        if (failure_idx >= 0) {
            int32_t no_failure = -1;
            
            CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(ctx->global_failure,
                                                &no_failure, sizeof(int32_t)));
            
            int64_t args[2 + 1];
            
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&args, ctx->global_failure_args,
                                                sizeof(args)));
            switch (failure_idx) {
                
              case 0:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:62:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:59:3-62:33\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:68:3-51\n   #4  /prelude/functional.fut:9:42-44\n   #5  src/cluster.fut:100:16-71\n   #6  src/cluster.fut:194:13-76\n   #7  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 1:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:63:37-43\n   #1  src/cluster.fut:63:18-52\n   #2  src/cluster.fut:101:19-56\n   #3  src/cluster.fut:194:13-76\n   #4  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 2:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:108:43-62\n   #1  src/cluster.fut:50:13-22\n   #2  src/cluster.fut:108:19-120\n   #3  src/cluster.fut:194:13-76\n   #4  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 3:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:55:32-37\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  src/cluster.fut:55:14-51\n   #4  src/cluster.fut:108:19-120\n   #5  src/cluster.fut:194:13-76\n   #6  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 4:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:71:12-25\n   #1  src/cluster.fut:108:84-105\n   #2  src/cluster.fut:55:28-39\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  src/cluster.fut:55:14-51\n   #6  src/cluster.fut:108:19-120\n   #7  src/cluster.fut:194:13-76\n   #8  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 5:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:71:3-30\n   #1  src/cluster.fut:108:84-105\n   #2  src/cluster.fut:55:28-39\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  src/cluster.fut:55:14-51\n   #6  src/cluster.fut:108:19-120\n   #7  src/cluster.fut:194:13-76\n   #8  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 6:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:91:32-38\n   #1  src/cluster.fut:123:13-26\n   #2  src/cluster.fut:126:28-39\n   #3  /prelude/functional.fut:9:42-44\n   #4  src/cluster.fut:125:21-126:41\n   #5  src/cluster.fut:194:13-76\n   #6  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 7:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:91:25-30\n   #1  src/cluster.fut:123:13-26\n   #2  src/cluster.fut:126:28-39\n   #3  /prelude/functional.fut:9:42-44\n   #4  src/cluster.fut:125:21-126:41\n   #5  src/cluster.fut:194:13-76\n   #6  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 8:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:62:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:59:3-62:33\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:68:3-51\n   #4  /prelude/functional.fut:9:42-44\n   #5  src/cluster.fut:125:21-127:59\n   #6  src/cluster.fut:194:13-76\n   #7  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 9:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:63:37-43\n   #1  src/cluster.fut:63:18-52\n   #2  src/cluster.fut:129:15-68\n   #3  src/cluster.fut:194:13-76\n   #4  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 10:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:146:29-38\n   #1  src/cluster.fut:146:18-50\n   #2  src/cluster.fut:170:14-27\n   #3  src/cluster.fut:176:27-76\n   #4  src/cluster.fut:195:18-38\n   #5  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 11:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:149:15-28\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:71:13-22\n   #2  /prelude/functional.fut:9:42-44\n   #3  src/cluster.fut:148:23-152:51\n   #4  src/cluster.fut:170:14-27\n   #5  src/cluster.fut:176:27-76\n   #6  src/cluster.fut:195:18-38\n   #7  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 12:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  lib/github.com/diku-dk/segmented/segmented.fut:74:24-29\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:74:6-43\n   #4  /prelude/functional.fut:9:42-44\n   #5  src/cluster.fut:148:23-152:51\n   #6  src/cluster.fut:170:14-27\n   #7  src/cluster.fut:176:27-76\n   #8  src/cluster.fut:195:18-38\n   #9  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 13:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:151:15-23\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:74:20-31\n   #2  /prelude/soacs.fut:67:19-23\n   #3  /prelude/soacs.fut:67:3-37\n   #4  lib/github.com/diku-dk/segmented/segmented.fut:74:6-43\n   #5  /prelude/functional.fut:9:42-44\n   #6  src/cluster.fut:148:23-152:51\n   #7  src/cluster.fut:170:14-27\n   #8  src/cluster.fut:176:27-76\n   #9  src/cluster.fut:195:18-38\n   #10 src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 14:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:71:12-25\n   #1  src/cluster.fut:151:26-48\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:74:20-31\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  lib/github.com/diku-dk/segmented/segmented.fut:74:6-43\n   #6  /prelude/functional.fut:9:42-44\n   #7  src/cluster.fut:148:23-152:51\n   #8  src/cluster.fut:170:14-27\n   #9  src/cluster.fut:176:27-76\n   #10 src/cluster.fut:195:18-38\n   #11 src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 15:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:71:3-30\n   #1  src/cluster.fut:151:26-48\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:74:20-31\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  lib/github.com/diku-dk/segmented/segmented.fut:74:6-43\n   #6  /prelude/functional.fut:9:42-44\n   #7  src/cluster.fut:148:23-152:51\n   #8  src/cluster.fut:170:14-27\n   #9  src/cluster.fut:176:27-76\n   #10 src/cluster.fut:195:18-38\n   #11 src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 16:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:71:12-25\n   #1  src/cluster.fut:152:15-37\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:74:20-31\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  lib/github.com/diku-dk/segmented/segmented.fut:74:6-43\n   #6  /prelude/functional.fut:9:42-44\n   #7  src/cluster.fut:148:23-152:51\n   #8  src/cluster.fut:170:14-27\n   #9  src/cluster.fut:176:27-76\n   #10 src/cluster.fut:195:18-38\n   #11 src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 17:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:71:3-30\n   #1  src/cluster.fut:152:15-37\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:74:20-31\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  lib/github.com/diku-dk/segmented/segmented.fut:74:6-43\n   #6  /prelude/functional.fut:9:42-44\n   #7  src/cluster.fut:148:23-152:51\n   #8  src/cluster.fut:170:14-27\n   #9  src/cluster.fut:176:27-76\n   #10 src/cluster.fut:195:18-38\n   #11 src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 18:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:152:40-48\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:74:20-31\n   #2  /prelude/soacs.fut:67:19-23\n   #3  /prelude/soacs.fut:67:3-37\n   #4  lib/github.com/diku-dk/segmented/segmented.fut:74:6-43\n   #5  /prelude/functional.fut:9:42-44\n   #6  src/cluster.fut:148:23-152:51\n   #7  src/cluster.fut:170:14-27\n   #8  src/cluster.fut:176:27-76\n   #9  src/cluster.fut:195:18-38\n   #10 src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 19:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  lib/github.com/diku-dk/sorts/radix_sort.fut:62:28-32\n   #1  /prelude/functional.fut:9:42-44\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:59:3-62:33\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:68:3-51\n   #4  /prelude/functional.fut:9:42-44\n   #5  src/cluster.fut:154:23-155:69\n   #6  src/cluster.fut:170:14-27\n   #7  src/cluster.fut:176:27-76\n   #8  src/cluster.fut:195:18-38\n   #9  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 20:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:30:17-22\n   #1  src/cluster.fut:30:6-28\n   #2  /prelude/functional.fut:9:42-44\n   #3  src/cluster.fut:154:23-156:40\n   #4  src/cluster.fut:170:14-27\n   #5  src/cluster.fut:176:27-76\n   #6  src/cluster.fut:195:18-38\n   #7  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 21:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:63:37-43\n   #1  src/cluster.fut:63:18-52\n   #2  src/cluster.fut:158:8-43\n   #3  src/cluster.fut:170:14-27\n   #4  src/cluster.fut:176:27-76\n   #5  src/cluster.fut:195:18-38\n   #6  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 22:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:184:28-46\n   #1  src/cluster.fut:50:13-22\n   #2  src/cluster.fut:184:10-74\n   #3  src/cluster.fut:195:18-38\n   #4  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 23:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:55:32-37\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  src/cluster.fut:55:14-51\n   #4  src/cluster.fut:184:10-74\n   #5  src/cluster.fut:195:18-38\n   #6  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 24:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:71:12-25\n   #1  src/cluster.fut:55:28-39\n   #2  /prelude/soacs.fut:67:19-23\n   #3  /prelude/soacs.fut:67:3-37\n   #4  src/cluster.fut:55:14-51\n   #5  src/cluster.fut:184:10-74\n   #6  src/cluster.fut:195:18-38\n   #7  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
                
              case 25:
                {
                    ctx->error =
                        msgprintf("Index [%lld] out of bounds for array of shape [%lld].\n-> #0  src/cluster.fut:71:3-30\n   #1  src/cluster.fut:55:28-39\n   #2  /prelude/soacs.fut:67:19-23\n   #3  /prelude/soacs.fut:67:3-37\n   #4  src/cluster.fut:55:14-51\n   #5  src/cluster.fut:184:10-74\n   #6  src/cluster.fut:195:18-38\n   #7  src/cluster.fut:190:1-200:50\n",
                                  args[0], args[1]);
                    break;
                }
            }
            return 1;
        }
    }
    CUDA_SUCCEED_OR_RETURN(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    return 0;
}
static int memblock_unref_device(struct futhark_context *ctx,
                                 struct memblock_device *block, const
                                 char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "space 'device'", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_device -= block->size;
            CUDA_SUCCEED_OR_RETURN(cuda_free(&ctx->cuda, block->mem, desc));
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_device);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc_device(struct futhark_context *ctx,
                                 struct memblock_device *block, int64_t size,
                                 const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "space 'device'",
                      ctx->cur_mem_usage_device);
    
    int ret = memblock_unref_device(ctx, block, desc);
    
    ctx->cur_mem_usage_device += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "space 'device'",
                (long long) ctx->cur_mem_usage_device);
    if (ctx->cur_mem_usage_device > ctx->peak_mem_usage_device) {
        ctx->peak_mem_usage_device = ctx->cur_mem_usage_device;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    CUDA_SUCCEED_OR_RETURN(cuda_alloc(&ctx->cuda, size, desc, &block->mem));
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set_device(struct futhark_context *ctx,
                               struct memblock_device *lhs,
                               struct memblock_device *rhs, const
                               char *lhs_desc)
{
    int ret = memblock_unref_device(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        str_builder(&builder,
                    "Peak memory usage for space 'device': %lld bytes.\n",
                    (long long) ctx->peak_mem_usage_device);
        { }
    }
    if (ctx->profiling) {
        CUDA_SUCCEED_FATAL(cuda_tally_profiling_records(&ctx->cuda));
        str_builder(&builder,
                    "copy_dev_to_dev                       ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_dev_to_dev_runs,
                    (long) ctx->copy_dev_to_dev_total_runtime /
                    (ctx->copy_dev_to_dev_runs !=
                     0 ? ctx->copy_dev_to_dev_runs : 1),
                    (long) ctx->copy_dev_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_dev_runs;
        str_builder(&builder,
                    "copy_dev_to_host                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_dev_to_host_runs,
                    (long) ctx->copy_dev_to_host_total_runtime /
                    (ctx->copy_dev_to_host_runs !=
                     0 ? ctx->copy_dev_to_host_runs : 1),
                    (long) ctx->copy_dev_to_host_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_host_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_host_runs;
        str_builder(&builder,
                    "copy_host_to_dev                      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_host_to_dev_runs,
                    (long) ctx->copy_host_to_dev_total_runtime /
                    (ctx->copy_host_to_dev_runs !=
                     0 ? ctx->copy_host_to_dev_runs : 1),
                    (long) ctx->copy_host_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_host_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_host_to_dev_runs;
        str_builder(&builder,
                    "copy_scalar_to_dev                    ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_scalar_to_dev_runs,
                    (long) ctx->copy_scalar_to_dev_total_runtime /
                    (ctx->copy_scalar_to_dev_runs !=
                     0 ? ctx->copy_scalar_to_dev_runs : 1),
                    (long) ctx->copy_scalar_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_to_dev_runs;
        str_builder(&builder,
                    "copy_scalar_from_dev                  ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->copy_scalar_from_dev_runs,
                    (long) ctx->copy_scalar_from_dev_total_runtime /
                    (ctx->copy_scalar_from_dev_runs !=
                     0 ? ctx->copy_scalar_from_dev_runs : 1),
                    (long) ctx->copy_scalar_from_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_from_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_from_dev_runs;
        str_builder(&builder,
                    "builtin#iota_i64.iota_i64_32477       ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->builtinzhiota_i64ziiota_i64_32477_runs,
                    (long) ctx->builtinzhiota_i64ziiota_i64_32477_total_runtime /
                    (ctx->builtinzhiota_i64ziiota_i64_32477_runs !=
                     0 ? ctx->builtinzhiota_i64ziiota_i64_32477_runs : 1),
                    (long) ctx->builtinzhiota_i64ziiota_i64_32477_total_runtime);
        ctx->total_runtime +=
            ctx->builtinzhiota_i64ziiota_i64_32477_total_runtime;
        ctx->total_runs += ctx->builtinzhiota_i64ziiota_i64_32477_runs;
        str_builder(&builder,
                    "builtin#replicate_i32.replicate_34186 ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->builtinzhreplicate_i32zireplicate_34186_runs,
                    (long) ctx->builtinzhreplicate_i32zireplicate_34186_total_runtime /
                    (ctx->builtinzhreplicate_i32zireplicate_34186_runs !=
                     0 ? ctx->builtinzhreplicate_i32zireplicate_34186_runs : 1),
                    (long) ctx->builtinzhreplicate_i32zireplicate_34186_total_runtime);
        ctx->total_runtime +=
            ctx->builtinzhreplicate_i32zireplicate_34186_total_runtime;
        ctx->total_runs += ctx->builtinzhreplicate_i32zireplicate_34186_runs;
        str_builder(&builder,
                    "builtin#replicate_i64.replicate_32958 ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->builtinzhreplicate_i64zireplicate_32958_runs,
                    (long) ctx->builtinzhreplicate_i64zireplicate_32958_total_runtime /
                    (ctx->builtinzhreplicate_i64zireplicate_32958_runs !=
                     0 ? ctx->builtinzhreplicate_i64zireplicate_32958_runs : 1),
                    (long) ctx->builtinzhreplicate_i64zireplicate_32958_total_runtime);
        ctx->total_runtime +=
            ctx->builtinzhreplicate_i64zireplicate_32958_total_runtime;
        ctx->total_runs += ctx->builtinzhreplicate_i64zireplicate_32958_runs;
        str_builder(&builder,
                    "builtin#replicate_i8.replicate_32528  ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->builtinzhreplicate_i8zireplicate_32528_runs,
                    (long) ctx->builtinzhreplicate_i8zireplicate_32528_total_runtime /
                    (ctx->builtinzhreplicate_i8zireplicate_32528_runs !=
                     0 ? ctx->builtinzhreplicate_i8zireplicate_32528_runs : 1),
                    (long) ctx->builtinzhreplicate_i8zireplicate_32528_total_runtime);
        ctx->total_runtime +=
            ctx->builtinzhreplicate_i8zireplicate_32528_total_runtime;
        ctx->total_runs += ctx->builtinzhreplicate_i8zireplicate_32528_runs;
        str_builder(&builder,
                    "clusterPoints.copy_33050              ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszicopy_33050_runs,
                    (long) ctx->clusterPointszicopy_33050_total_runtime /
                    (ctx->clusterPointszicopy_33050_runs !=
                     0 ? ctx->clusterPointszicopy_33050_runs : 1),
                    (long) ctx->clusterPointszicopy_33050_total_runtime);
        ctx->total_runtime += ctx->clusterPointszicopy_33050_total_runtime;
        ctx->total_runs += ctx->clusterPointszicopy_33050_runs;
        str_builder(&builder,
                    "clusterPoints.copy_34172              ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszicopy_34172_runs,
                    (long) ctx->clusterPointszicopy_34172_total_runtime /
                    (ctx->clusterPointszicopy_34172_runs !=
                     0 ? ctx->clusterPointszicopy_34172_runs : 1),
                    (long) ctx->clusterPointszicopy_34172_total_runtime);
        ctx->total_runtime += ctx->clusterPointszicopy_34172_total_runtime;
        ctx->total_runs += ctx->clusterPointszicopy_34172_runs;
        str_builder(&builder,
                    "clusterPoints.copy_35365              ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszicopy_35365_runs,
                    (long) ctx->clusterPointszicopy_35365_total_runtime /
                    (ctx->clusterPointszicopy_35365_runs !=
                     0 ? ctx->clusterPointszicopy_35365_runs : 1),
                    (long) ctx->clusterPointszicopy_35365_total_runtime);
        ctx->total_runtime += ctx->clusterPointszicopy_35365_total_runtime;
        ctx->total_runs += ctx->clusterPointszicopy_35365_runs;
        str_builder(&builder,
                    "clusterPoints.copy_35682              ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszicopy_35682_runs,
                    (long) ctx->clusterPointszicopy_35682_total_runtime /
                    (ctx->clusterPointszicopy_35682_runs !=
                     0 ? ctx->clusterPointszicopy_35682_runs : 1),
                    (long) ctx->clusterPointszicopy_35682_total_runtime);
        ctx->total_runtime += ctx->clusterPointszicopy_35682_total_runtime;
        ctx->total_runs += ctx->clusterPointszicopy_35682_runs;
        str_builder(&builder,
                    "clusterPoints.copy_36376              ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszicopy_36376_runs,
                    (long) ctx->clusterPointszicopy_36376_total_runtime /
                    (ctx->clusterPointszicopy_36376_runs !=
                     0 ? ctx->clusterPointszicopy_36376_runs : 1),
                    (long) ctx->clusterPointszicopy_36376_total_runtime);
        ctx->total_runtime += ctx->clusterPointszicopy_36376_total_runtime;
        ctx->total_runs += ctx->clusterPointszicopy_36376_runs;
        str_builder(&builder,
                    "clusterPoints.seghist_global_30743    ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointsziseghist_global_30743_runs,
                    (long) ctx->clusterPointsziseghist_global_30743_total_runtime /
                    (ctx->clusterPointsziseghist_global_30743_runs !=
                     0 ? ctx->clusterPointsziseghist_global_30743_runs : 1),
                    (long) ctx->clusterPointsziseghist_global_30743_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointsziseghist_global_30743_total_runtime;
        ctx->total_runs += ctx->clusterPointsziseghist_global_30743_runs;
        str_builder(&builder,
                    "clusterPoints.seghist_global_31087    ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointsziseghist_global_31087_runs,
                    (long) ctx->clusterPointsziseghist_global_31087_total_runtime /
                    (ctx->clusterPointsziseghist_global_31087_runs !=
                     0 ? ctx->clusterPointsziseghist_global_31087_runs : 1),
                    (long) ctx->clusterPointsziseghist_global_31087_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointsziseghist_global_31087_total_runtime;
        ctx->total_runs += ctx->clusterPointsziseghist_global_31087_runs;
        str_builder(&builder,
                    "clusterPoints.seghist_global_31478    ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointsziseghist_global_31478_runs,
                    (long) ctx->clusterPointsziseghist_global_31478_total_runtime /
                    (ctx->clusterPointsziseghist_global_31478_runs !=
                     0 ? ctx->clusterPointsziseghist_global_31478_runs : 1),
                    (long) ctx->clusterPointsziseghist_global_31478_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointsziseghist_global_31478_total_runtime;
        ctx->total_runs += ctx->clusterPointsziseghist_global_31478_runs;
        str_builder(&builder,
                    "clusterPoints.seghist_global_31609    ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointsziseghist_global_31609_runs,
                    (long) ctx->clusterPointsziseghist_global_31609_total_runtime /
                    (ctx->clusterPointsziseghist_global_31609_runs !=
                     0 ? ctx->clusterPointsziseghist_global_31609_runs : 1),
                    (long) ctx->clusterPointsziseghist_global_31609_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointsziseghist_global_31609_total_runtime;
        ctx->total_runs += ctx->clusterPointsziseghist_global_31609_runs;
        str_builder(&builder,
                    "clusterPoints.seghist_local_30743     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointsziseghist_local_30743_runs,
                    (long) ctx->clusterPointsziseghist_local_30743_total_runtime /
                    (ctx->clusterPointsziseghist_local_30743_runs !=
                     0 ? ctx->clusterPointsziseghist_local_30743_runs : 1),
                    (long) ctx->clusterPointsziseghist_local_30743_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointsziseghist_local_30743_total_runtime;
        ctx->total_runs += ctx->clusterPointsziseghist_local_30743_runs;
        str_builder(&builder,
                    "clusterPoints.seghist_local_31087     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointsziseghist_local_31087_runs,
                    (long) ctx->clusterPointsziseghist_local_31087_total_runtime /
                    (ctx->clusterPointsziseghist_local_31087_runs !=
                     0 ? ctx->clusterPointsziseghist_local_31087_runs : 1),
                    (long) ctx->clusterPointsziseghist_local_31087_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointsziseghist_local_31087_total_runtime;
        ctx->total_runs += ctx->clusterPointsziseghist_local_31087_runs;
        str_builder(&builder,
                    "clusterPoints.seghist_local_31478     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointsziseghist_local_31478_runs,
                    (long) ctx->clusterPointsziseghist_local_31478_total_runtime /
                    (ctx->clusterPointsziseghist_local_31478_runs !=
                     0 ? ctx->clusterPointsziseghist_local_31478_runs : 1),
                    (long) ctx->clusterPointsziseghist_local_31478_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointsziseghist_local_31478_total_runtime;
        ctx->total_runs += ctx->clusterPointsziseghist_local_31478_runs;
        str_builder(&builder,
                    "clusterPoints.seghist_local_31609     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointsziseghist_local_31609_runs,
                    (long) ctx->clusterPointsziseghist_local_31609_total_runtime /
                    (ctx->clusterPointsziseghist_local_31609_runs !=
                     0 ? ctx->clusterPointsziseghist_local_31609_runs : 1),
                    (long) ctx->clusterPointsziseghist_local_31609_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointsziseghist_local_31609_total_runtime;
        ctx->total_runs += ctx->clusterPointsziseghist_local_31609_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30254            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30254_runs,
                    (long) ctx->clusterPointszisegmap_30254_total_runtime /
                    (ctx->clusterPointszisegmap_30254_runs !=
                     0 ? ctx->clusterPointszisegmap_30254_runs : 1),
                    (long) ctx->clusterPointszisegmap_30254_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30254_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30254_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30277            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30277_runs,
                    (long) ctx->clusterPointszisegmap_30277_total_runtime /
                    (ctx->clusterPointszisegmap_30277_runs !=
                     0 ? ctx->clusterPointszisegmap_30277_runs : 1),
                    (long) ctx->clusterPointszisegmap_30277_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30277_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30277_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30299            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30299_runs,
                    (long) ctx->clusterPointszisegmap_30299_total_runtime /
                    (ctx->clusterPointszisegmap_30299_runs !=
                     0 ? ctx->clusterPointszisegmap_30299_runs : 1),
                    (long) ctx->clusterPointszisegmap_30299_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30299_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30299_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30354            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30354_runs,
                    (long) ctx->clusterPointszisegmap_30354_total_runtime /
                    (ctx->clusterPointszisegmap_30354_runs !=
                     0 ? ctx->clusterPointszisegmap_30354_runs : 1),
                    (long) ctx->clusterPointszisegmap_30354_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30354_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30354_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30360            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30360_runs,
                    (long) ctx->clusterPointszisegmap_30360_total_runtime /
                    (ctx->clusterPointszisegmap_30360_runs !=
                     0 ? ctx->clusterPointszisegmap_30360_runs : 1),
                    (long) ctx->clusterPointszisegmap_30360_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30360_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30360_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30390            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30390_runs,
                    (long) ctx->clusterPointszisegmap_30390_total_runtime /
                    (ctx->clusterPointszisegmap_30390_runs !=
                     0 ? ctx->clusterPointszisegmap_30390_runs : 1),
                    (long) ctx->clusterPointszisegmap_30390_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30390_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30390_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30424            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30424_runs,
                    (long) ctx->clusterPointszisegmap_30424_total_runtime /
                    (ctx->clusterPointszisegmap_30424_runs !=
                     0 ? ctx->clusterPointszisegmap_30424_runs : 1),
                    (long) ctx->clusterPointszisegmap_30424_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30424_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30424_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30438            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30438_runs,
                    (long) ctx->clusterPointszisegmap_30438_total_runtime /
                    (ctx->clusterPointszisegmap_30438_runs !=
                     0 ? ctx->clusterPointszisegmap_30438_runs : 1),
                    (long) ctx->clusterPointszisegmap_30438_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30438_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30438_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30535            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30535_runs,
                    (long) ctx->clusterPointszisegmap_30535_total_runtime /
                    (ctx->clusterPointszisegmap_30535_runs !=
                     0 ? ctx->clusterPointszisegmap_30535_runs : 1),
                    (long) ctx->clusterPointszisegmap_30535_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30535_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30535_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30562            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30562_runs,
                    (long) ctx->clusterPointszisegmap_30562_total_runtime /
                    (ctx->clusterPointszisegmap_30562_runs !=
                     0 ? ctx->clusterPointszisegmap_30562_runs : 1),
                    (long) ctx->clusterPointszisegmap_30562_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30562_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30562_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30622            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30622_runs,
                    (long) ctx->clusterPointszisegmap_30622_total_runtime /
                    (ctx->clusterPointszisegmap_30622_runs !=
                     0 ? ctx->clusterPointszisegmap_30622_runs : 1),
                    (long) ctx->clusterPointszisegmap_30622_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30622_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30622_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30760            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30760_runs,
                    (long) ctx->clusterPointszisegmap_30760_total_runtime /
                    (ctx->clusterPointszisegmap_30760_runs !=
                     0 ? ctx->clusterPointszisegmap_30760_runs : 1),
                    (long) ctx->clusterPointszisegmap_30760_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30760_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30760_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30802            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30802_runs,
                    (long) ctx->clusterPointszisegmap_30802_total_runtime /
                    (ctx->clusterPointszisegmap_30802_runs !=
                     0 ? ctx->clusterPointszisegmap_30802_runs : 1),
                    (long) ctx->clusterPointszisegmap_30802_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30802_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30802_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30946            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30946_runs,
                    (long) ctx->clusterPointszisegmap_30946_total_runtime /
                    (ctx->clusterPointszisegmap_30946_runs !=
                     0 ? ctx->clusterPointszisegmap_30946_runs : 1),
                    (long) ctx->clusterPointszisegmap_30946_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30946_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30946_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30964            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30964_runs,
                    (long) ctx->clusterPointszisegmap_30964_total_runtime /
                    (ctx->clusterPointszisegmap_30964_runs !=
                     0 ? ctx->clusterPointszisegmap_30964_runs : 1),
                    (long) ctx->clusterPointszisegmap_30964_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30964_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30964_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_30978            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_30978_runs,
                    (long) ctx->clusterPointszisegmap_30978_total_runtime /
                    (ctx->clusterPointszisegmap_30978_runs !=
                     0 ? ctx->clusterPointszisegmap_30978_runs : 1),
                    (long) ctx->clusterPointszisegmap_30978_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_30978_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_30978_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31012            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31012_runs,
                    (long) ctx->clusterPointszisegmap_31012_total_runtime /
                    (ctx->clusterPointszisegmap_31012_runs !=
                     0 ? ctx->clusterPointszisegmap_31012_runs : 1),
                    (long) ctx->clusterPointszisegmap_31012_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31012_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31012_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31026            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31026_runs,
                    (long) ctx->clusterPointszisegmap_31026_total_runtime /
                    (ctx->clusterPointszisegmap_31026_runs !=
                     0 ? ctx->clusterPointszisegmap_31026_runs : 1),
                    (long) ctx->clusterPointszisegmap_31026_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31026_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31026_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31112            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31112_runs,
                    (long) ctx->clusterPointszisegmap_31112_total_runtime /
                    (ctx->clusterPointszisegmap_31112_runs !=
                     0 ? ctx->clusterPointszisegmap_31112_runs : 1),
                    (long) ctx->clusterPointszisegmap_31112_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31112_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31112_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31230            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31230_runs,
                    (long) ctx->clusterPointszisegmap_31230_total_runtime /
                    (ctx->clusterPointszisegmap_31230_runs !=
                     0 ? ctx->clusterPointszisegmap_31230_runs : 1),
                    (long) ctx->clusterPointszisegmap_31230_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31230_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31230_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31236            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31236_runs,
                    (long) ctx->clusterPointszisegmap_31236_total_runtime /
                    (ctx->clusterPointszisegmap_31236_runs !=
                     0 ? ctx->clusterPointszisegmap_31236_runs : 1),
                    (long) ctx->clusterPointszisegmap_31236_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31236_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31236_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31270            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31270_runs,
                    (long) ctx->clusterPointszisegmap_31270_total_runtime /
                    (ctx->clusterPointszisegmap_31270_runs !=
                     0 ? ctx->clusterPointszisegmap_31270_runs : 1),
                    (long) ctx->clusterPointszisegmap_31270_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31270_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31270_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31304            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31304_runs,
                    (long) ctx->clusterPointszisegmap_31304_total_runtime /
                    (ctx->clusterPointszisegmap_31304_runs !=
                     0 ? ctx->clusterPointszisegmap_31304_runs : 1),
                    (long) ctx->clusterPointszisegmap_31304_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31304_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31304_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31318            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31318_runs,
                    (long) ctx->clusterPointszisegmap_31318_total_runtime /
                    (ctx->clusterPointszisegmap_31318_runs !=
                     0 ? ctx->clusterPointszisegmap_31318_runs : 1),
                    (long) ctx->clusterPointszisegmap_31318_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31318_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31318_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31346            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31346_runs,
                    (long) ctx->clusterPointszisegmap_31346_total_runtime /
                    (ctx->clusterPointszisegmap_31346_runs !=
                     0 ? ctx->clusterPointszisegmap_31346_runs : 1),
                    (long) ctx->clusterPointszisegmap_31346_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31346_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31346_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31380            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31380_runs,
                    (long) ctx->clusterPointszisegmap_31380_total_runtime /
                    (ctx->clusterPointszisegmap_31380_runs !=
                     0 ? ctx->clusterPointszisegmap_31380_runs : 1),
                    (long) ctx->clusterPointszisegmap_31380_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31380_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31380_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31394            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31394_runs,
                    (long) ctx->clusterPointszisegmap_31394_total_runtime /
                    (ctx->clusterPointszisegmap_31394_runs !=
                     0 ? ctx->clusterPointszisegmap_31394_runs : 1),
                    (long) ctx->clusterPointszisegmap_31394_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31394_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31394_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31448            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31448_runs,
                    (long) ctx->clusterPointszisegmap_31448_total_runtime /
                    (ctx->clusterPointszisegmap_31448_runs !=
                     0 ? ctx->clusterPointszisegmap_31448_runs : 1),
                    (long) ctx->clusterPointszisegmap_31448_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31448_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31448_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31495            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31495_runs,
                    (long) ctx->clusterPointszisegmap_31495_total_runtime /
                    (ctx->clusterPointszisegmap_31495_runs !=
                     0 ? ctx->clusterPointszisegmap_31495_runs : 1),
                    (long) ctx->clusterPointszisegmap_31495_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31495_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31495_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31529            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31529_runs,
                    (long) ctx->clusterPointszisegmap_31529_total_runtime /
                    (ctx->clusterPointszisegmap_31529_runs !=
                     0 ? ctx->clusterPointszisegmap_31529_runs : 1),
                    (long) ctx->clusterPointszisegmap_31529_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31529_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31529_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31626            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31626_runs,
                    (long) ctx->clusterPointszisegmap_31626_total_runtime /
                    (ctx->clusterPointszisegmap_31626_runs !=
                     0 ? ctx->clusterPointszisegmap_31626_runs : 1),
                    (long) ctx->clusterPointszisegmap_31626_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31626_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31626_runs;
        str_builder(&builder,
                    "clusterPoints.segmap_31640            ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegmap_31640_runs,
                    (long) ctx->clusterPointszisegmap_31640_total_runtime /
                    (ctx->clusterPointszisegmap_31640_runs !=
                     0 ? ctx->clusterPointszisegmap_31640_runs : 1),
                    (long) ctx->clusterPointszisegmap_31640_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegmap_31640_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegmap_31640_runs;
        str_builder(&builder,
                    "clusterPoints.segred_large_33268      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_large_33268_runs,
                    (long) ctx->clusterPointszisegred_large_33268_total_runtime /
                    (ctx->clusterPointszisegred_large_33268_runs !=
                     0 ? ctx->clusterPointszisegred_large_33268_runs : 1),
                    (long) ctx->clusterPointszisegred_large_33268_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_large_33268_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_large_33268_runs;
        str_builder(&builder,
                    "clusterPoints.segred_large_34498      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_large_34498_runs,
                    (long) ctx->clusterPointszisegred_large_34498_total_runtime /
                    (ctx->clusterPointszisegred_large_34498_runs !=
                     0 ? ctx->clusterPointszisegred_large_34498_runs : 1),
                    (long) ctx->clusterPointszisegred_large_34498_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_large_34498_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_large_34498_runs;
        str_builder(&builder,
                    "clusterPoints.segred_large_36095      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_large_36095_runs,
                    (long) ctx->clusterPointszisegred_large_36095_total_runtime /
                    (ctx->clusterPointszisegred_large_36095_runs !=
                     0 ? ctx->clusterPointszisegred_large_36095_runs : 1),
                    (long) ctx->clusterPointszisegred_large_36095_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_large_36095_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_large_36095_runs;
        str_builder(&builder,
                    "clusterPoints.segred_large_36712      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_large_36712_runs,
                    (long) ctx->clusterPointszisegred_large_36712_total_runtime /
                    (ctx->clusterPointszisegred_large_36712_runs !=
                     0 ? ctx->clusterPointszisegred_large_36712_runs : 1),
                    (long) ctx->clusterPointszisegred_large_36712_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_large_36712_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_large_36712_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_30735     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_30735_runs,
                    (long) ctx->clusterPointszisegred_nonseg_30735_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_30735_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_30735_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_30735_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_30735_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_30735_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_30962     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_30962_runs,
                    (long) ctx->clusterPointszisegred_nonseg_30962_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_30962_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_30962_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_30962_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_30962_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_30962_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31041     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31041_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31041_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31041_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31041_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31041_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31041_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31041_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31051     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31051_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31051_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31051_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31051_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31051_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31051_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31051_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31061     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31061_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31061_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31061_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31061_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31061_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31061_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31061_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31079     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31079_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31079_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31079_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31079_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31079_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31079_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31079_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31408     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31408_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31408_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31408_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31408_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31408_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31408_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31408_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31418     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31418_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31418_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31418_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31418_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31418_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31418_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31418_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31428     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31428_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31428_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31428_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31428_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31428_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31428_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31428_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31438     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31438_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31438_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31438_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31438_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31438_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31438_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31438_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31470     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31470_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31470_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31470_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31470_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31470_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31470_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31470_runs;
        str_builder(&builder,
                    "clusterPoints.segred_nonseg_31601     ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_nonseg_31601_runs,
                    (long) ctx->clusterPointszisegred_nonseg_31601_total_runtime /
                    (ctx->clusterPointszisegred_nonseg_31601_runs !=
                     0 ? ctx->clusterPointszisegred_nonseg_31601_runs : 1),
                    (long) ctx->clusterPointszisegred_nonseg_31601_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_nonseg_31601_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_nonseg_31601_runs;
        str_builder(&builder,
                    "clusterPoints.segred_small_33268      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_small_33268_runs,
                    (long) ctx->clusterPointszisegred_small_33268_total_runtime /
                    (ctx->clusterPointszisegred_small_33268_runs !=
                     0 ? ctx->clusterPointszisegred_small_33268_runs : 1),
                    (long) ctx->clusterPointszisegred_small_33268_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_small_33268_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_small_33268_runs;
        str_builder(&builder,
                    "clusterPoints.segred_small_34498      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_small_34498_runs,
                    (long) ctx->clusterPointszisegred_small_34498_total_runtime /
                    (ctx->clusterPointszisegred_small_34498_runs !=
                     0 ? ctx->clusterPointszisegred_small_34498_runs : 1),
                    (long) ctx->clusterPointszisegred_small_34498_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_small_34498_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_small_34498_runs;
        str_builder(&builder,
                    "clusterPoints.segred_small_36095      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_small_36095_runs,
                    (long) ctx->clusterPointszisegred_small_36095_total_runtime /
                    (ctx->clusterPointszisegred_small_36095_runs !=
                     0 ? ctx->clusterPointszisegred_small_36095_runs : 1),
                    (long) ctx->clusterPointszisegred_small_36095_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_small_36095_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_small_36095_runs;
        str_builder(&builder,
                    "clusterPoints.segred_small_36712      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegred_small_36712_runs,
                    (long) ctx->clusterPointszisegred_small_36712_total_runtime /
                    (ctx->clusterPointszisegred_small_36712_runs !=
                     0 ? ctx->clusterPointszisegred_small_36712_runs : 1),
                    (long) ctx->clusterPointszisegred_small_36712_total_runtime);
        ctx->total_runtime +=
            ctx->clusterPointszisegred_small_36712_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegred_small_36712_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_30352           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_30352_runs,
                    (long) ctx->clusterPointszisegscan_30352_total_runtime /
                    (ctx->clusterPointszisegscan_30352_runs !=
                     0 ? ctx->clusterPointszisegscan_30352_runs : 1),
                    (long) ctx->clusterPointszisegscan_30352_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_30352_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_30352_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_30414           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_30414_runs,
                    (long) ctx->clusterPointszisegscan_30414_total_runtime /
                    (ctx->clusterPointszisegscan_30414_runs !=
                     0 ? ctx->clusterPointszisegscan_30414_runs : 1),
                    (long) ctx->clusterPointszisegscan_30414_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_30414_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_30414_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_30422           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_30422_runs,
                    (long) ctx->clusterPointszisegscan_30422_total_runtime /
                    (ctx->clusterPointszisegscan_30422_runs !=
                     0 ? ctx->clusterPointszisegscan_30422_runs : 1),
                    (long) ctx->clusterPointszisegscan_30422_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_30422_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_30422_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_30436           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_30436_runs,
                    (long) ctx->clusterPointszisegscan_30436_total_runtime /
                    (ctx->clusterPointszisegscan_30436_runs !=
                     0 ? ctx->clusterPointszisegscan_30436_runs : 1),
                    (long) ctx->clusterPointszisegscan_30436_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_30436_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_30436_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_30725           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_30725_runs,
                    (long) ctx->clusterPointszisegscan_30725_total_runtime /
                    (ctx->clusterPointszisegscan_30725_runs !=
                     0 ? ctx->clusterPointszisegscan_30725_runs : 1),
                    (long) ctx->clusterPointszisegscan_30725_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_30725_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_30725_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_30758           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_30758_runs,
                    (long) ctx->clusterPointszisegscan_30758_total_runtime /
                    (ctx->clusterPointszisegscan_30758_runs !=
                     0 ? ctx->clusterPointszisegscan_30758_runs : 1),
                    (long) ctx->clusterPointszisegscan_30758_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_30758_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_30758_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_30784           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_30784_runs,
                    (long) ctx->clusterPointszisegscan_30784_total_runtime /
                    (ctx->clusterPointszisegscan_30784_runs !=
                     0 ? ctx->clusterPointszisegscan_30784_runs : 1),
                    (long) ctx->clusterPointszisegscan_30784_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_30784_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_30784_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_30944           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_30944_runs,
                    (long) ctx->clusterPointszisegscan_30944_total_runtime /
                    (ctx->clusterPointszisegscan_30944_runs !=
                     0 ? ctx->clusterPointszisegscan_30944_runs : 1),
                    (long) ctx->clusterPointszisegscan_30944_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_30944_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_30944_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31002           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31002_runs,
                    (long) ctx->clusterPointszisegscan_31002_total_runtime /
                    (ctx->clusterPointszisegscan_31002_runs !=
                     0 ? ctx->clusterPointszisegscan_31002_runs : 1),
                    (long) ctx->clusterPointszisegscan_31002_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31002_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31002_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31010           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31010_runs,
                    (long) ctx->clusterPointszisegscan_31010_total_runtime /
                    (ctx->clusterPointszisegscan_31010_runs !=
                     0 ? ctx->clusterPointszisegscan_31010_runs : 1),
                    (long) ctx->clusterPointszisegscan_31010_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31010_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31010_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31024           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31024_runs,
                    (long) ctx->clusterPointszisegscan_31024_total_runtime /
                    (ctx->clusterPointszisegscan_31024_runs !=
                     0 ? ctx->clusterPointszisegscan_31024_runs : 1),
                    (long) ctx->clusterPointszisegscan_31024_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31024_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31024_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31069           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31069_runs,
                    (long) ctx->clusterPointszisegscan_31069_total_runtime /
                    (ctx->clusterPointszisegscan_31069_runs !=
                     0 ? ctx->clusterPointszisegscan_31069_runs : 1),
                    (long) ctx->clusterPointszisegscan_31069_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31069_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31069_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31102           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31102_runs,
                    (long) ctx->clusterPointszisegscan_31102_total_runtime /
                    (ctx->clusterPointszisegscan_31102_runs !=
                     0 ? ctx->clusterPointszisegscan_31102_runs : 1),
                    (long) ctx->clusterPointszisegscan_31102_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31102_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31102_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31110           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31110_runs,
                    (long) ctx->clusterPointszisegscan_31110_total_runtime /
                    (ctx->clusterPointszisegscan_31110_runs !=
                     0 ? ctx->clusterPointszisegscan_31110_runs : 1),
                    (long) ctx->clusterPointszisegscan_31110_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31110_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31110_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31228           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31228_runs,
                    (long) ctx->clusterPointszisegscan_31228_total_runtime /
                    (ctx->clusterPointszisegscan_31228_runs !=
                     0 ? ctx->clusterPointszisegscan_31228_runs : 1),
                    (long) ctx->clusterPointszisegscan_31228_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31228_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31228_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31294           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31294_runs,
                    (long) ctx->clusterPointszisegscan_31294_total_runtime /
                    (ctx->clusterPointszisegscan_31294_runs !=
                     0 ? ctx->clusterPointszisegscan_31294_runs : 1),
                    (long) ctx->clusterPointszisegscan_31294_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31294_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31294_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31302           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31302_runs,
                    (long) ctx->clusterPointszisegscan_31302_total_runtime /
                    (ctx->clusterPointszisegscan_31302_runs !=
                     0 ? ctx->clusterPointszisegscan_31302_runs : 1),
                    (long) ctx->clusterPointszisegscan_31302_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31302_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31302_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31316           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31316_runs,
                    (long) ctx->clusterPointszisegscan_31316_total_runtime /
                    (ctx->clusterPointszisegscan_31316_runs !=
                     0 ? ctx->clusterPointszisegscan_31316_runs : 1),
                    (long) ctx->clusterPointszisegscan_31316_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31316_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31316_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31370           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31370_runs,
                    (long) ctx->clusterPointszisegscan_31370_total_runtime /
                    (ctx->clusterPointszisegscan_31370_runs !=
                     0 ? ctx->clusterPointszisegscan_31370_runs : 1),
                    (long) ctx->clusterPointszisegscan_31370_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31370_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31370_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31378           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31378_runs,
                    (long) ctx->clusterPointszisegscan_31378_total_runtime /
                    (ctx->clusterPointszisegscan_31378_runs !=
                     0 ? ctx->clusterPointszisegscan_31378_runs : 1),
                    (long) ctx->clusterPointszisegscan_31378_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31378_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31378_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31392           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31392_runs,
                    (long) ctx->clusterPointszisegscan_31392_total_runtime /
                    (ctx->clusterPointszisegscan_31392_runs !=
                     0 ? ctx->clusterPointszisegscan_31392_runs : 1),
                    (long) ctx->clusterPointszisegscan_31392_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31392_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31392_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31446           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31446_runs,
                    (long) ctx->clusterPointszisegscan_31446_total_runtime /
                    (ctx->clusterPointszisegscan_31446_runs !=
                     0 ? ctx->clusterPointszisegscan_31446_runs : 1),
                    (long) ctx->clusterPointszisegscan_31446_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31446_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31446_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31460           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31460_runs,
                    (long) ctx->clusterPointszisegscan_31460_total_runtime /
                    (ctx->clusterPointszisegscan_31460_runs !=
                     0 ? ctx->clusterPointszisegscan_31460_runs : 1),
                    (long) ctx->clusterPointszisegscan_31460_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31460_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31460_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31493           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31493_runs,
                    (long) ctx->clusterPointszisegscan_31493_total_runtime /
                    (ctx->clusterPointszisegscan_31493_runs !=
                     0 ? ctx->clusterPointszisegscan_31493_runs : 1),
                    (long) ctx->clusterPointszisegscan_31493_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31493_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31493_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31519           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31519_runs,
                    (long) ctx->clusterPointszisegscan_31519_total_runtime /
                    (ctx->clusterPointszisegscan_31519_runs !=
                     0 ? ctx->clusterPointszisegscan_31519_runs : 1),
                    (long) ctx->clusterPointszisegscan_31519_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31519_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31519_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31527           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31527_runs,
                    (long) ctx->clusterPointszisegscan_31527_total_runtime /
                    (ctx->clusterPointszisegscan_31527_runs !=
                     0 ? ctx->clusterPointszisegscan_31527_runs : 1),
                    (long) ctx->clusterPointszisegscan_31527_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31527_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31527_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31591           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31591_runs,
                    (long) ctx->clusterPointszisegscan_31591_total_runtime /
                    (ctx->clusterPointszisegscan_31591_runs !=
                     0 ? ctx->clusterPointszisegscan_31591_runs : 1),
                    (long) ctx->clusterPointszisegscan_31591_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31591_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31591_runs;
        str_builder(&builder,
                    "clusterPoints.segscan_31624           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->clusterPointszisegscan_31624_runs,
                    (long) ctx->clusterPointszisegscan_31624_total_runtime /
                    (ctx->clusterPointszisegscan_31624_runs !=
                     0 ? ctx->clusterPointszisegscan_31624_runs : 1),
                    (long) ctx->clusterPointszisegscan_31624_total_runtime);
        ctx->total_runtime += ctx->clusterPointszisegscan_31624_total_runtime;
        ctx->total_runs += ctx->clusterPointszisegscan_31624_runs;
        str_builder(&builder,
                    "gpu_map_transpose_i32                 ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_i32_runs,
                    (long) ctx->gpu_map_transpose_i32_total_runtime /
                    (ctx->gpu_map_transpose_i32_runs !=
                     0 ? ctx->gpu_map_transpose_i32_runs : 1),
                    (long) ctx->gpu_map_transpose_i32_total_runtime);
        ctx->total_runtime += ctx->gpu_map_transpose_i32_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_i32_runs;
        str_builder(&builder,
                    "gpu_map_transpose_i32_low_height      ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_i32_low_height_runs,
                    (long) ctx->gpu_map_transpose_i32_low_height_total_runtime /
                    (ctx->gpu_map_transpose_i32_low_height_runs !=
                     0 ? ctx->gpu_map_transpose_i32_low_height_runs : 1),
                    (long) ctx->gpu_map_transpose_i32_low_height_total_runtime);
        ctx->total_runtime +=
            ctx->gpu_map_transpose_i32_low_height_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_i32_low_height_runs;
        str_builder(&builder,
                    "gpu_map_transpose_i32_low_width       ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_i32_low_width_runs,
                    (long) ctx->gpu_map_transpose_i32_low_width_total_runtime /
                    (ctx->gpu_map_transpose_i32_low_width_runs !=
                     0 ? ctx->gpu_map_transpose_i32_low_width_runs : 1),
                    (long) ctx->gpu_map_transpose_i32_low_width_total_runtime);
        ctx->total_runtime +=
            ctx->gpu_map_transpose_i32_low_width_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_i32_low_width_runs;
        str_builder(&builder,
                    "gpu_map_transpose_i32_small           ran %5d times; avg: %8ldus; total: %8ldus\n",
                    ctx->gpu_map_transpose_i32_small_runs,
                    (long) ctx->gpu_map_transpose_i32_small_total_runtime /
                    (ctx->gpu_map_transpose_i32_small_runs !=
                     0 ? ctx->gpu_map_transpose_i32_small_runs : 1),
                    (long) ctx->gpu_map_transpose_i32_small_total_runtime);
        ctx->total_runtime += ctx->gpu_map_transpose_i32_small_total_runtime;
        ctx->total_runs += ctx->gpu_map_transpose_i32_small_runs;
        str_builder(&builder, "%d operations with cumulative runtime: %6ldus\n",
                    ctx->total_runs, ctx->total_runtime);
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    ctx->peak_mem_usage_device = 0;
    ctx->peak_mem_usage_default = 0;
    if (ctx->error == NULL)
        CUDA_SUCCEED_NONFATAL(cuda_free_all(&ctx->cuda));
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_builtinzhgpu_map_transpose_i32(struct futhark_context *ctx,
                                                 struct memblock_device destmem_0,
                                                 int32_t destoffset_1,
                                                 struct memblock_device srcmem_2,
                                                 int32_t srcoffset_3,
                                                 int32_t num_arrays_4,
                                                 int32_t x_elems_5,
                                                 int32_t y_elems_6);
static int futrts_builtinzhiota_i64(struct futhark_context *ctx,
                                    struct memblock_device mem_32472,
                                    int32_t n_32473, int64_t x_32474,
                                    int64_t s_32475);
static int futrts_builtinzhreplicate_i32(struct futhark_context *ctx,
                                         struct memblock_device mem_34182,
                                         int32_t num_elems_34183,
                                         int32_t val_34184);
static int futrts_builtinzhreplicate_i64(struct futhark_context *ctx,
                                         struct memblock_device mem_32954,
                                         int32_t num_elems_32955,
                                         int64_t val_32956);
static int futrts_builtinzhreplicate_i8(struct futhark_context *ctx,
                                        struct memblock_device mem_32524,
                                        int32_t num_elems_32525,
                                        int8_t val_32526);
static int futrts_entry_clusterPoints(struct futhark_context *ctx,
                                      struct memblock_device *out_mem_p_36960,
                                      int64_t *out_out_arrsizze_36961,
                                      struct memblock_device *out_mem_p_36962,
                                      int64_t *out_out_arrsizze_36963,
                                      struct memblock_device batches_mem_31826,
                                      struct memblock_device pos_mem_31827,
                                      struct memblock_device labels_mem_31828,
                                      int64_t n_28846, int32_t nHashBit_28847,
                                      float radius_28848, int32_t thres_28849);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static int futrts_builtinzhgpu_map_transpose_i32(struct futhark_context *ctx,
                                                 struct memblock_device destmem_0,
                                                 int32_t destoffset_1,
                                                 struct memblock_device srcmem_2,
                                                 int32_t srcoffset_3,
                                                 int32_t num_arrays_4,
                                                 int32_t x_elems_5,
                                                 int32_t y_elems_6)
{
    (void) ctx;
    
    int err = 0;
    
    if (!(num_arrays_4 == 0 || (x_elems_5 == 0 || y_elems_6 == 0))) {
        int32_t muly_8 = squot32(16, x_elems_5);
        int32_t mulx_7 = squot32(16, y_elems_6);
        
        if (num_arrays_4 == 1 && (x_elems_5 == 1 || y_elems_6 == 1)) {
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_dev_to_dev_runs,
                                              &ctx->copy_dev_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpy(destmem_0.mem +
                                                sext_i32_i64(destoffset_1),
                                                srcmem_2.mem +
                                                sext_i32_i64(srcoffset_3),
                                                sext_i32_i64(x_elems_5 *
                                                y_elems_6 * 4)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
        } else {
            if (sle32(x_elems_5, 8) && slt32(16, y_elems_6)) {
                unsigned int shared_sizze_36919 = (int64_t) 1088;
                CUdeviceptr kernel_arg_36921 = destmem_0.mem;
                CUdeviceptr kernel_arg_36922 = srcmem_2.mem;
                unsigned int shared_offset_36920 = 0;
                
                if ((((((1 && sdiv_up32(x_elems_5, 16) != 0) &&
                        sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16) != 0) &&
                       num_arrays_4 != 0) && 16 != 0) && 16 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16) >= 1 <<
                        16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (num_arrays_4 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up32(x_elems_5, 16);
                    grid[perm[1]] = sdiv_up32(sdiv_up32(y_elems_6, muly_8), 16);
                    grid[perm[2]] = num_arrays_4;
                    
                    void *kernel_args_36916[] = {&perm[0], &perm[1], &perm[2],
                                                 &shared_offset_36920,
                                                 &destoffset_1, &srcoffset_3,
                                                 &num_arrays_4, &x_elems_5,
                                                 &y_elems_6, &mulx_7, &muly_8,
                                                 &kernel_arg_36921,
                                                 &kernel_arg_36922};
                    int64_t time_start_36917 = 0, time_end_36918 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "gpu_map_transpose_i32_low_width");
                        fprintf(ctx->log, "%ld", (long) sdiv_up32(x_elems_5,
                                                                  16));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld",
                                (long) sdiv_up32(sdiv_up32(y_elems_6, muly_8),
                                                 16));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) num_arrays_4);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld", (long) 16);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 16);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_36917 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->gpu_map_transpose_i32_low_width_runs,
                                                  &ctx->gpu_map_transpose_i32_low_width_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_i32_low_width,
                                                          grid[0], grid[1],
                                                          grid[2], 16, 16, 1,
                                                          0 +
                                                          (shared_sizze_36919 +
                                                           (8 -
                                                            shared_sizze_36919 %
                                                            8) % 8), NULL,
                                                          kernel_args_36916,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_36918 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "gpu_map_transpose_i32_low_width",
                                time_end_36918 - time_start_36917);
                    }
                }
            } else {
                if (sle32(y_elems_6, 8) && slt32(16, x_elems_5)) {
                    unsigned int shared_sizze_36926 = (int64_t) 1088;
                    CUdeviceptr kernel_arg_36928 = destmem_0.mem;
                    CUdeviceptr kernel_arg_36929 = srcmem_2.mem;
                    unsigned int shared_offset_36927 = 0;
                    
                    if ((((((1 && sdiv_up32(sdiv_up32(x_elems_5, mulx_7), 16) !=
                             0) && sdiv_up32(y_elems_6, 16) != 0) &&
                           num_arrays_4 != 0) && 16 != 0) && 16 != 0) && 1 !=
                        0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (sdiv_up32(y_elems_6, 16) >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (num_arrays_4 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = sdiv_up32(sdiv_up32(x_elems_5, mulx_7),
                                                  16);
                        grid[perm[1]] = sdiv_up32(y_elems_6, 16);
                        grid[perm[2]] = num_arrays_4;
                        
                        void *kernel_args_36923[] = {&perm[0], &perm[1],
                                                     &perm[2],
                                                     &shared_offset_36927,
                                                     &destoffset_1,
                                                     &srcoffset_3,
                                                     &num_arrays_4, &x_elems_5,
                                                     &y_elems_6, &mulx_7,
                                                     &muly_8, &kernel_arg_36928,
                                                     &kernel_arg_36929};
                        int64_t time_start_36924 = 0, time_end_36925 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log, "Launching %s with grid size (",
                                    "gpu_map_transpose_i32_low_height");
                            fprintf(ctx->log, "%ld",
                                    (long) sdiv_up32(sdiv_up32(x_elems_5,
                                                               mulx_7), 16));
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) sdiv_up32(y_elems_6,
                                                                      16));
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) num_arrays_4);
                            fprintf(ctx->log, ") and block size (");
                            fprintf(ctx->log, "%ld", (long) 16);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 16);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ").\n");
                            time_start_36924 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->gpu_map_transpose_i32_low_height_runs,
                                                      &ctx->gpu_map_transpose_i32_low_height_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_i32_low_height,
                                                              grid[0], grid[1],
                                                              grid[2], 16, 16,
                                                              1, 0 +
                                                              (shared_sizze_36926 +
                                                               (8 -
                                                                shared_sizze_36926 %
                                                                8) % 8), NULL,
                                                              kernel_args_36923,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_36925 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "gpu_map_transpose_i32_low_height",
                                    time_end_36925 - time_start_36924);
                        }
                    }
                } else {
                    if (sle32(x_elems_5, 8) && sle32(y_elems_6, 8)) {
                        unsigned int shared_sizze_36933 = (int64_t) 1;
                        CUdeviceptr kernel_arg_36935 = destmem_0.mem;
                        CUdeviceptr kernel_arg_36936 = srcmem_2.mem;
                        unsigned int shared_offset_36934 = 0;
                        
                        if ((((((1 && sdiv_up32(num_arrays_4 * x_elems_5 *
                                                y_elems_6, 256) != 0) && 1 !=
                                0) && 1 != 0) && 256 != 0) && 1 != 0) && 1 !=
                            0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up32(num_arrays_4 * x_elems_5 *
                                                      y_elems_6, 256);
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_36930[] = {&shared_offset_36934,
                                                         &destoffset_1,
                                                         &srcoffset_3,
                                                         &num_arrays_4,
                                                         &x_elems_5, &y_elems_6,
                                                         &mulx_7, &muly_8,
                                                         &kernel_arg_36935,
                                                         &kernel_arg_36936};
                            int64_t time_start_36931 = 0, time_end_36932 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size (",
                                        "gpu_map_transpose_i32_small");
                                fprintf(ctx->log, "%ld",
                                        (long) sdiv_up32(num_arrays_4 *
                                                         x_elems_5 * y_elems_6,
                                                         256));
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ") and block size (");
                                fprintf(ctx->log, "%ld", (long) 256);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ").\n");
                                time_start_36931 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->gpu_map_transpose_i32_small_runs,
                                                          &ctx->gpu_map_transpose_i32_small_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_i32_small,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2], 256,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_36933 +
                                                                   (8 -
                                                                    shared_sizze_36933 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_36930,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_36932 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "gpu_map_transpose_i32_small",
                                        time_end_36932 - time_start_36931);
                            }
                        }
                    } else {
                        unsigned int shared_sizze_36940 = (int64_t) 4224;
                        CUdeviceptr kernel_arg_36942 = destmem_0.mem;
                        CUdeviceptr kernel_arg_36943 = srcmem_2.mem;
                        unsigned int shared_offset_36941 = 0;
                        
                        if ((((((1 && sdiv_up32(x_elems_5, 32) != 0) &&
                                sdiv_up32(y_elems_6, 32) != 0) &&
                               num_arrays_4 != 0) && 32 != 0) && 8 != 0) && 1 !=
                            0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (sdiv_up32(y_elems_6, 32) >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (num_arrays_4 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = sdiv_up32(x_elems_5, 32);
                            grid[perm[1]] = sdiv_up32(y_elems_6, 32);
                            grid[perm[2]] = num_arrays_4;
                            
                            void *kernel_args_36937[] = {&perm[0], &perm[1],
                                                         &perm[2],
                                                         &shared_offset_36941,
                                                         &destoffset_1,
                                                         &srcoffset_3,
                                                         &num_arrays_4,
                                                         &x_elems_5, &y_elems_6,
                                                         &mulx_7, &muly_8,
                                                         &kernel_arg_36942,
                                                         &kernel_arg_36943};
                            int64_t time_start_36938 = 0, time_end_36939 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size (",
                                        "gpu_map_transpose_i32");
                                fprintf(ctx->log, "%ld",
                                        (long) sdiv_up32(x_elems_5, 32));
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld",
                                        (long) sdiv_up32(y_elems_6, 32));
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) num_arrays_4);
                                fprintf(ctx->log, ") and block size (");
                                fprintf(ctx->log, "%ld", (long) 32);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 8);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ").\n");
                                time_start_36938 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->gpu_map_transpose_i32_runs,
                                                          &ctx->gpu_map_transpose_i32_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->gpu_map_transpose_i32,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2], 32,
                                                                  8, 1, 0 +
                                                                  (shared_sizze_36940 +
                                                                   (8 -
                                                                    shared_sizze_36940 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_36937,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_36939 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "gpu_map_transpose_i32",
                                        time_end_36939 - time_start_36938);
                            }
                        }
                    }
                }
            }
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_builtinzhiota_i64(struct futhark_context *ctx,
                                    struct memblock_device mem_32472,
                                    int32_t n_32473, int64_t x_32474,
                                    int64_t s_32475)
{
    (void) ctx;
    
    int err = 0;
    int64_t group_sizze_32480;
    
    group_sizze_32480 = ctx->sizes.builtinzhiota_i64zigroup_sizze_32480;
    
    int64_t num_groups_32481;
    
    num_groups_32481 = sdiv_up64(n_32473, group_sizze_32480);
    
    CUdeviceptr kernel_arg_36947 = mem_32472.mem;
    
    if ((((((1 && num_groups_32481 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_32480 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_32481;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_36944[] = {&n_32473, &x_32474, &s_32475,
                                     &kernel_arg_36947};
        int64_t time_start_36945 = 0, time_end_36946 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "builtin#iota_i64.iota_i64_32477");
            fprintf(ctx->log, "%ld", (long) num_groups_32481);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) group_sizze_32480);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_36945 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->builtinzhiota_i64ziiota_i64_32477_runs,
                                      &ctx->builtinzhiota_i64ziiota_i64_32477_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->builtinzhiota_i64ziiota_i64_32477,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_32480, 1, 1, 0, NULL,
                                              kernel_args_36944, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_36946 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "builtin#iota_i64.iota_i64_32477", time_end_36946 -
                    time_start_36945);
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_builtinzhreplicate_i32(struct futhark_context *ctx,
                                         struct memblock_device mem_34182,
                                         int32_t num_elems_34183,
                                         int32_t val_34184)
{
    (void) ctx;
    
    int err = 0;
    int64_t group_sizze_34189;
    
    group_sizze_34189 = ctx->sizes.builtinzhreplicate_i32zigroup_sizze_34189;
    
    int64_t num_groups_34190;
    
    num_groups_34190 = sdiv_up64(num_elems_34183, group_sizze_34189);
    
    CUdeviceptr kernel_arg_36951 = mem_34182.mem;
    
    if ((((((1 && num_groups_34190 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_34189 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_34190;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_36948[] = {&num_elems_34183, &val_34184,
                                     &kernel_arg_36951};
        int64_t time_start_36949 = 0, time_end_36950 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "builtin#replicate_i32.replicate_34186");
            fprintf(ctx->log, "%ld", (long) num_groups_34190);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) group_sizze_34189);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_36949 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->builtinzhreplicate_i32zireplicate_34186_runs,
                                      &ctx->builtinzhreplicate_i32zireplicate_34186_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->builtinzhreplicate_i32zireplicate_34186,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_34189, 1, 1, 0, NULL,
                                              kernel_args_36948, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_36950 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "builtin#replicate_i32.replicate_34186", time_end_36950 -
                    time_start_36949);
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_builtinzhreplicate_i64(struct futhark_context *ctx,
                                         struct memblock_device mem_32954,
                                         int32_t num_elems_32955,
                                         int64_t val_32956)
{
    (void) ctx;
    
    int err = 0;
    int64_t group_sizze_32961;
    
    group_sizze_32961 = ctx->sizes.builtinzhreplicate_i64zigroup_sizze_32961;
    
    int64_t num_groups_32962;
    
    num_groups_32962 = sdiv_up64(num_elems_32955, group_sizze_32961);
    
    CUdeviceptr kernel_arg_36955 = mem_32954.mem;
    
    if ((((((1 && num_groups_32962 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_32961 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_32962;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_36952[] = {&num_elems_32955, &val_32956,
                                     &kernel_arg_36955};
        int64_t time_start_36953 = 0, time_end_36954 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "builtin#replicate_i64.replicate_32958");
            fprintf(ctx->log, "%ld", (long) num_groups_32962);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) group_sizze_32961);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_36953 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->builtinzhreplicate_i64zireplicate_32958_runs,
                                      &ctx->builtinzhreplicate_i64zireplicate_32958_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->builtinzhreplicate_i64zireplicate_32958,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_32961, 1, 1, 0, NULL,
                                              kernel_args_36952, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_36954 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "builtin#replicate_i64.replicate_32958", time_end_36954 -
                    time_start_36953);
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_builtinzhreplicate_i8(struct futhark_context *ctx,
                                        struct memblock_device mem_32524,
                                        int32_t num_elems_32525,
                                        int8_t val_32526)
{
    (void) ctx;
    
    int err = 0;
    int64_t group_sizze_32531;
    
    group_sizze_32531 = ctx->sizes.builtinzhreplicate_i8zigroup_sizze_32531;
    
    int64_t num_groups_32532;
    
    num_groups_32532 = sdiv_up64(num_elems_32525, group_sizze_32531);
    
    CUdeviceptr kernel_arg_36959 = mem_32524.mem;
    
    if ((((((1 && num_groups_32532 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_32531 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_32532;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_36956[] = {&num_elems_32525, &val_32526,
                                     &kernel_arg_36959};
        int64_t time_start_36957 = 0, time_end_36958 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "builtin#replicate_i8.replicate_32528");
            fprintf(ctx->log, "%ld", (long) num_groups_32532);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) group_sizze_32531);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_36957 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->builtinzhreplicate_i8zireplicate_32528_runs,
                                      &ctx->builtinzhreplicate_i8zireplicate_32528_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->builtinzhreplicate_i8zireplicate_32528,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_32531, 1, 1, 0, NULL,
                                              kernel_args_36956, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_36958 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "builtin#replicate_i8.replicate_32528", time_end_36958 -
                    time_start_36957);
        }
    }
    
  cleanup:
    { }
    return err;
}
static int futrts_entry_clusterPoints(struct futhark_context *ctx,
                                      struct memblock_device *out_mem_p_36960,
                                      int64_t *out_out_arrsizze_36961,
                                      struct memblock_device *out_mem_p_36962,
                                      int64_t *out_out_arrsizze_36963,
                                      struct memblock_device batches_mem_31826,
                                      struct memblock_device pos_mem_31827,
                                      struct memblock_device labels_mem_31828,
                                      int64_t n_28846, int32_t nHashBit_28847,
                                      float radius_28848, int32_t thres_28849)
{
    (void) ctx;
    
    int err = 0;
    struct memblock_device out_mem_32468;
    
    out_mem_32468.references = NULL;
    
    int64_t out_arrsizze_32469;
    struct memblock_device out_mem_32470;
    
    out_mem_32470.references = NULL;
    
    int64_t out_arrsizze_32471;
    int32_t y_28853 = mul32(3, nHashBit_28847);
    int32_t binop_p_28854 = 1 << y_28853;
    int64_t defunc_0_f_res_28855 = sext_i32_i64(binop_p_28854);
    int32_t x_28856 = 1 << nHashBit_28847;
    int32_t hashMask_28857 = sub32(x_28856, 1);
    int64_t bytes_31829 = (int64_t) 8 * n_28846;
    struct memblock_device mem_31830;
    
    mem_31830.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31830, bytes_31829, "mem_31830")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhiota_i64(ctx, mem_31830, n_28846, (int64_t) 0,
                                 (int64_t) 1) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t segmap_group_sizze_30310;
    
    segmap_group_sizze_30310 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30301;
    
    int64_t segmap_usable_groups_30311 = sdiv_up64(n_28846,
                                                   segmap_group_sizze_30310);
    int64_t bytes_31832 = (int64_t) 4 * n_28846;
    struct memblock_device mem_31833;
    
    mem_31833.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31833, bytes_31832, "mem_31833")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_36967 = batches_mem_31826.mem;
    CUdeviceptr kernel_arg_36968 = labels_mem_31828.mem;
    CUdeviceptr kernel_arg_36969 = mem_31833.mem;
    
    if ((((((1 && segmap_usable_groups_30311 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30310 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30311;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_36964[] = {&ctx->global_failure, &n_28846,
                                     &kernel_arg_36967, &kernel_arg_36968,
                                     &kernel_arg_36969};
        int64_t time_start_36965 = 0, time_end_36966 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30299");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30311);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30310);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_36965 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30299_runs,
                                      &ctx->clusterPointszisegmap_30299_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30299,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30310, 1, 1, 0,
                                              NULL, kernel_args_36964, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_36966 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30299", time_end_36966 -
                    time_start_36965);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    
    int64_t nest_sizze_30323 = (int64_t) 3 * n_28846;
    int64_t segmap_group_sizze_30324;
    
    segmap_group_sizze_30324 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30280;
    
    int64_t segmap_usable_groups_30325 = sdiv_up64(nest_sizze_30323,
                                                   segmap_group_sizze_30324);
    int64_t bytes_31835 = (int64_t) 4 * nest_sizze_30323;
    struct memblock_device mem_31837;
    
    mem_31837.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31837, bytes_31835, "mem_31837")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_36973 = pos_mem_31827.mem;
    CUdeviceptr kernel_arg_36974 = mem_31837.mem;
    
    if ((((((1 && segmap_usable_groups_30325 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30324 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30325;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_36970[] = {&ctx->global_failure, &n_28846,
                                     &radius_28848, &hashMask_28857,
                                     &kernel_arg_36973, &kernel_arg_36974};
        int64_t time_start_36971 = 0, time_end_36972 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30277");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30325);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30324);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_36971 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30277_runs,
                                      &ctx->clusterPointszisegmap_30277_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30277,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30324, 1, 1, 0,
                                              NULL, kernel_args_36970, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_36972 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30277", time_end_36972 -
                    time_start_36971);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    
    int64_t segmap_group_sizze_30334;
    
    segmap_group_sizze_30334 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30256;
    
    int64_t segmap_usable_groups_30335 = sdiv_up64(n_28846,
                                                   segmap_group_sizze_30334);
    struct memblock_device mem_31840;
    
    mem_31840.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31840, bytes_31832, "mem_31840")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_36978 = mem_31837.mem;
    CUdeviceptr kernel_arg_36979 = mem_31840.mem;
    
    if ((((((1 && segmap_usable_groups_30335 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30334 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30335;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_36975[] = {&ctx->global_failure, &n_28846,
                                     &nHashBit_28847, &kernel_arg_36978,
                                     &kernel_arg_36979};
        int64_t time_start_36976 = 0, time_end_36977 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30254");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30335);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30334);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_36976 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30254_runs,
                                      &ctx->clusterPointszisegmap_30254_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30254,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30334, 1, 1, 0,
                                              NULL, kernel_args_36975, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_36977 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30254", time_end_36977 -
                    time_start_36976);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
        return 1;
    
    bool cond_28880 = n_28846 == (int64_t) 0;
    int32_t iters_28881;
    
    if (cond_28880) {
        iters_28881 = 0;
    } else {
        int32_t x_28882 = add32(2, y_28853);
        int32_t x_28883 = sub32(x_28882, 1);
        int32_t iters_f_res_28884 = sdiv32(x_28883, 2);
        
        iters_28881 = iters_f_res_28884;
    }
    
    bool loop_nonempty_28885 = slt32(0, iters_28881);
    int64_t i_28886 = sub64(n_28846, (int64_t) 1);
    bool x_28887 = sle64((int64_t) 0, i_28886);
    bool y_28888 = slt64(i_28886, n_28846);
    bool bounds_check_28889 = x_28887 && y_28888;
    bool loop_not_taken_28890 = !loop_nonempty_28885;
    bool protect_assert_disj_28891 = bounds_check_28889 || loop_not_taken_28890;
    bool index_certs_28892;
    
    if (!protect_assert_disj_28891) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", i_28886,
                               "] out of bounds for array of shape [", n_28846,
                               "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:25:24-35\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:53:31-62\n   #3  /prelude/functional.fut:9:42-44\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:59:3-61:47\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:68:3-51\n   #6  /prelude/functional.fut:9:42-44\n   #7  src/cluster.fut:100:16-71\n   #8  src/cluster.fut:194:13-76\n   #9  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t segscan_group_sizze_30347;
    
    segscan_group_sizze_30347 =
        ctx->sizes.clusterPointszisegscan_group_sizze_30346;
    
    int64_t num_groups_30349;
    int32_t max_num_groups_32497;
    
    max_num_groups_32497 = ctx->sizes.clusterPointszisegscan_num_groups_30348;
    num_groups_30349 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            segscan_group_sizze_30347),
                                                  sext_i32_i64(max_num_groups_32497))));
    
    int64_t segmap_group_sizze_30357;
    
    segmap_group_sizze_30357 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30356;
    
    int64_t segmap_usable_groups_30358 = sdiv_up_safe64(n_28846,
                                                        segmap_group_sizze_30357);
    struct memblock_device mem_31857;
    
    mem_31857.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31857, bytes_31829, "mem_31857")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31859;
    
    mem_31859.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31859, bytes_31829, "mem_31859")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31861;
    
    mem_31861.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31861, bytes_31829, "mem_31861")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31863;
    
    mem_31863.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31863, bytes_31829, "mem_31863")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31865;
    
    mem_31865.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31865, bytes_31832, "mem_31865")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device defunc_0_f_res_mem_31879;
    
    defunc_0_f_res_mem_31879.references = NULL;
    
    struct memblock_device defunc_0_f_res_mem_31884;
    
    defunc_0_f_res_mem_31884.references = NULL;
    
    struct memblock_device mem_param_31845;
    
    mem_param_31845.references = NULL;
    
    struct memblock_device mem_param_31850;
    
    mem_param_31850.references = NULL;
    if (memblock_set_device(ctx, &mem_param_31845, &mem_31840, "mem_31840") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &mem_param_31850, &mem_31830, "mem_31830") !=
        0)
        return 1;
    for (int32_t i_28895 = 0; i_28895 < iters_28881; i_28895++) {
        int32_t defunc_2_radix_sort_step_arg_28898 = mul32(2, i_28895);
        int32_t defunc_0_get_bit_arg_28899 = add32(1,
                                                   defunc_2_radix_sort_step_arg_28898);
        
        if (slt64((int64_t) 0, n_28846)) {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegScan");
            
            int64_t numThreads_32502;
            
            numThreads_32502 = sdiv_up64(n_28846, segscan_group_sizze_30347 *
                                         (int64_t) 9) *
                segscan_group_sizze_30347;
            
            int64_t numGroups_32503;
            
            numGroups_32503 = sdiv_up64(n_28846, segscan_group_sizze_30347 *
                                        (int64_t) 9);
            
            struct memblock_device clusterPointsziid_counter_mem_32504 =
                                   ctx->clusterPointsziid_counter_mem_32504;
            struct memblock_device status_flags_mem_32506;
            
            status_flags_mem_32506.references = NULL;
            if (memblock_alloc_device(ctx, &status_flags_mem_32506,
                                      numGroups_32503,
                                      "status_flags_mem_32506")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_32508;
            
            aggregates_mem_32508.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_32508, (int64_t) 8 *
                                      numGroups_32503,
                                      "aggregates_mem_32508")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_32510;
            
            incprefixes_mem_32510.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_32510, (int64_t) 8 *
                                      numGroups_32503,
                                      "incprefixes_mem_32510")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_32512;
            
            aggregates_mem_32512.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_32512, (int64_t) 8 *
                                      numGroups_32503,
                                      "aggregates_mem_32512")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_32514;
            
            incprefixes_mem_32514.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_32514, (int64_t) 8 *
                                      numGroups_32503,
                                      "incprefixes_mem_32514")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_32516;
            
            aggregates_mem_32516.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_32516, (int64_t) 8 *
                                      numGroups_32503,
                                      "aggregates_mem_32516")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_32518;
            
            incprefixes_mem_32518.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_32518, (int64_t) 8 *
                                      numGroups_32503,
                                      "incprefixes_mem_32518")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_32520;
            
            aggregates_mem_32520.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_32520, (int64_t) 8 *
                                      numGroups_32503,
                                      "aggregates_mem_32520")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_32522;
            
            incprefixes_mem_32522.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_32522, (int64_t) 8 *
                                      numGroups_32503,
                                      "incprefixes_mem_32522")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_32506,
                                             numGroups_32503, (int8_t) 0) !=
                0) {
                err = 1;
                goto cleanup;
            }
            
            unsigned int shared_sizze_36984 = smax64(smax64((int64_t) 1056,
                                                            sdiv_up64(sdiv_up64(sdiv_up64((int64_t) 8 *
                                                                                          segscan_group_sizze_30347,
                                                                                          (int64_t) 8) *
                                                                                (int64_t) 8 +
                                                                                (int64_t) 8 *
                                                                                segscan_group_sizze_30347,
                                                                                (int64_t) 8) *
                                                                      (int64_t) 8 +
                                                                      (int64_t) 8 *
                                                                      segscan_group_sizze_30347,
                                                                      (int64_t) 8) *
                                                            (int64_t) 8 +
                                                            (int64_t) 8 *
                                                            segscan_group_sizze_30347),
                                                     smax64(smax64(smax64((int64_t) 9 *
                                                                          segscan_group_sizze_30347 *
                                                                          (int64_t) 8,
                                                                          (int64_t) 9 *
                                                                          segscan_group_sizze_30347 *
                                                                          (int64_t) 8),
                                                                   (int64_t) 9 *
                                                                   segscan_group_sizze_30347 *
                                                                   (int64_t) 8),
                                                            (int64_t) 9 *
                                                            segscan_group_sizze_30347 *
                                                            (int64_t) 8));
            CUdeviceptr kernel_arg_36986 = mem_param_31845.mem;
            CUdeviceptr kernel_arg_36987 = mem_31857.mem;
            CUdeviceptr kernel_arg_36988 = mem_31859.mem;
            CUdeviceptr kernel_arg_36989 = mem_31861.mem;
            CUdeviceptr kernel_arg_36990 = mem_31863.mem;
            CUdeviceptr kernel_arg_36991 = mem_31865.mem;
            CUdeviceptr kernel_arg_36992 =
                        clusterPointsziid_counter_mem_32504.mem;
            CUdeviceptr kernel_arg_36993 = status_flags_mem_32506.mem;
            CUdeviceptr kernel_arg_36994 = aggregates_mem_32508.mem;
            CUdeviceptr kernel_arg_36995 = incprefixes_mem_32510.mem;
            CUdeviceptr kernel_arg_36996 = aggregates_mem_32512.mem;
            CUdeviceptr kernel_arg_36997 = incprefixes_mem_32514.mem;
            CUdeviceptr kernel_arg_36998 = aggregates_mem_32516.mem;
            CUdeviceptr kernel_arg_36999 = incprefixes_mem_32518.mem;
            CUdeviceptr kernel_arg_37000 = aggregates_mem_32520.mem;
            CUdeviceptr kernel_arg_37001 = incprefixes_mem_32522.mem;
            unsigned int shared_offset_36985 = 0;
            
            if ((((((1 && sdiv_up64(n_28846, segscan_group_sizze_30347 *
                                    (int64_t) 9) != 0) && 1 != 0) && 1 != 0) &&
                  segscan_group_sizze_30347 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = sdiv_up64(n_28846, segscan_group_sizze_30347 *
                                          (int64_t) 9);
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_36981[] = {&ctx->global_failure,
                                             &shared_offset_36985, &n_28846,
                                             &defunc_2_radix_sort_step_arg_28898,
                                             &defunc_0_get_bit_arg_28899,
                                             &kernel_arg_36986,
                                             &kernel_arg_36987,
                                             &kernel_arg_36988,
                                             &kernel_arg_36989,
                                             &kernel_arg_36990,
                                             &kernel_arg_36991,
                                             &kernel_arg_36992,
                                             &kernel_arg_36993,
                                             &kernel_arg_36994,
                                             &kernel_arg_36995,
                                             &kernel_arg_36996,
                                             &kernel_arg_36997,
                                             &kernel_arg_36998,
                                             &kernel_arg_36999,
                                             &kernel_arg_37000,
                                             &kernel_arg_37001};
                int64_t time_start_36982 = 0, time_end_36983 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segscan_30352");
                    fprintf(ctx->log, "%ld", (long) sdiv_up64(n_28846,
                                                              segscan_group_sizze_30347 *
                                                              (int64_t) 9));
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segscan_group_sizze_30347);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_36982 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegscan_30352_runs,
                                              &ctx->clusterPointszisegscan_30352_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_30352,
                                                      grid[0], grid[1], grid[2],
                                                      segscan_group_sizze_30347,
                                                      1, 1, 0 +
                                                      (shared_sizze_36984 + (8 -
                                                                             shared_sizze_36984 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_36981, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_36983 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segscan_30352", time_end_36983 -
                            time_start_36982);
                }
            }
            if (memblock_unref_device(ctx, &incprefixes_mem_32522,
                                      "incprefixes_mem_32522") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_32520,
                                      "aggregates_mem_32520") != 0)
                return 1;
            if (memblock_unref_device(ctx, &incprefixes_mem_32518,
                                      "incprefixes_mem_32518") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_32516,
                                      "aggregates_mem_32516") != 0)
                return 1;
            if (memblock_unref_device(ctx, &incprefixes_mem_32514,
                                      "incprefixes_mem_32514") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_32512,
                                      "aggregates_mem_32512") != 0)
                return 1;
            if (memblock_unref_device(ctx, &incprefixes_mem_32510,
                                      "incprefixes_mem_32510") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_32508,
                                      "aggregates_mem_32508") != 0)
                return 1;
            if (memblock_unref_device(ctx, &status_flags_mem_32506,
                                      "status_flags_mem_32506") != 0)
                return 1;
        }
        
        int64_t read_res_37002;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37002, mem_31857.mem +
                                                i_28886 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t last_res_28950 = read_res_37002;
        int64_t read_res_37003;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37003, mem_31859.mem +
                                                i_28886 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t last_res_28951 = read_res_37003;
        int64_t read_res_37004;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37004, mem_31861.mem +
                                                i_28886 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t last_res_28952 = read_res_37004;
        struct memblock_device mem_31867;
        
        mem_31867.references = NULL;
        if (memblock_alloc_device(ctx, &mem_31867, bytes_31832, "mem_31867")) {
            err = 1;
            goto cleanup;
        }
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_dev_to_dev_runs,
                                          &ctx->copy_dev_to_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_31867.mem + (int64_t) 0,
                                            mem_param_31845.mem + (int64_t) 0,
                                            n_28846 * (int64_t) 4));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        
        struct memblock_device mem_31869;
        
        mem_31869.references = NULL;
        if (memblock_alloc_device(ctx, &mem_31869, bytes_31829, "mem_31869")) {
            err = 1;
            goto cleanup;
        }
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_dev_to_dev_runs,
                                          &ctx->copy_dev_to_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_31869.mem + (int64_t) 0,
                                            mem_param_31850.mem + (int64_t) 0,
                                            n_28846 * (int64_t) 8));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        CUdeviceptr kernel_arg_37008 = mem_param_31845.mem;
        CUdeviceptr kernel_arg_37009 = mem_param_31850.mem;
        CUdeviceptr kernel_arg_37010 = mem_31857.mem;
        CUdeviceptr kernel_arg_37011 = mem_31859.mem;
        CUdeviceptr kernel_arg_37012 = mem_31861.mem;
        CUdeviceptr kernel_arg_37013 = mem_31863.mem;
        CUdeviceptr kernel_arg_37014 = mem_31865.mem;
        CUdeviceptr kernel_arg_37015 = mem_31867.mem;
        CUdeviceptr kernel_arg_37016 = mem_31869.mem;
        
        if ((((((1 && segmap_usable_groups_30358 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_30357 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = segmap_usable_groups_30358;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37005[] = {&ctx->global_failure, &n_28846,
                                         &last_res_28950, &last_res_28951,
                                         &last_res_28952, &kernel_arg_37008,
                                         &kernel_arg_37009, &kernel_arg_37010,
                                         &kernel_arg_37011, &kernel_arg_37012,
                                         &kernel_arg_37013, &kernel_arg_37014,
                                         &kernel_arg_37015, &kernel_arg_37016};
            int64_t time_start_37006 = 0, time_end_37007 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segmap_30354");
                fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30358);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30357);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37006 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegmap_30354_runs,
                                          &ctx->clusterPointszisegmap_30354_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30354,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_30357, 1,
                                                  1, 0, NULL, kernel_args_37005,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37007 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segmap_30354", time_end_37007 -
                        time_start_37006);
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        
        struct memblock_device mem_param_tmp_32498;
        
        mem_param_tmp_32498.references = NULL;
        if (memblock_set_device(ctx, &mem_param_tmp_32498, &mem_31867,
                                "mem_31867") != 0)
            return 1;
        
        struct memblock_device mem_param_tmp_32499;
        
        mem_param_tmp_32499.references = NULL;
        if (memblock_set_device(ctx, &mem_param_tmp_32499, &mem_31869,
                                "mem_31869") != 0)
            return 1;
        if (memblock_set_device(ctx, &mem_param_31845, &mem_param_tmp_32498,
                                "mem_param_tmp_32498") != 0)
            return 1;
        if (memblock_set_device(ctx, &mem_param_31850, &mem_param_tmp_32499,
                                "mem_param_tmp_32499") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_32499,
                                  "mem_param_tmp_32499") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_32498,
                                  "mem_param_tmp_32498") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31869, "mem_31869") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31867, "mem_31867") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &defunc_0_f_res_mem_31879, &mem_param_31845,
                            "mem_param_31845") != 0)
        return 1;
    if (memblock_set_device(ctx, &defunc_0_f_res_mem_31884, &mem_param_31850,
                            "mem_param_31850") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
        return 1;
    
    int64_t segmap_group_sizze_30375;
    
    segmap_group_sizze_30375 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30362;
    
    int64_t segmap_usable_groups_30376 = sdiv_up64(n_28846,
                                                   segmap_group_sizze_30375);
    struct memblock_device mem_31887;
    
    mem_31887.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31887, bytes_31829, "mem_31887")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31889;
    
    mem_31889.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31889, bytes_31832, "mem_31889")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31891;
    
    mem_31891.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31891, bytes_31832, "mem_31891")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37020 = mem_31840.mem;
    CUdeviceptr kernel_arg_37021 = defunc_0_f_res_mem_31884.mem;
    CUdeviceptr kernel_arg_37022 = mem_31887.mem;
    CUdeviceptr kernel_arg_37023 = mem_31889.mem;
    CUdeviceptr kernel_arg_37024 = mem_31891.mem;
    
    if ((((((1 && segmap_usable_groups_30376 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30375 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30376;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37017[] = {&ctx->global_failure,
                                     &ctx->failure_is_an_option,
                                     &ctx->global_failure_args, &n_28846,
                                     &kernel_arg_37020, &kernel_arg_37021,
                                     &kernel_arg_37022, &kernel_arg_37023,
                                     &kernel_arg_37024};
        int64_t time_start_37018 = 0, time_end_37019 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30360");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30376);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30375);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37018 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30360_runs,
                                      &ctx->clusterPointszisegmap_30360_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30360,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30375, 1, 1, 0,
                                              NULL, kernel_args_37017, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37019 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30360", time_end_37019 -
                    time_start_37018);
        }
    }
    ctx->failure_is_an_option = 1;
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
        return 1;
    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                              "defunc_0_f_res_mem_31884") != 0)
        return 1;
    
    int64_t segmap_group_sizze_30400;
    
    segmap_group_sizze_30400 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30392;
    
    int64_t segmap_usable_groups_30401 = sdiv_up64(n_28846,
                                                   segmap_group_sizze_30400);
    struct memblock_device mem_31894;
    
    mem_31894.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31894, n_28846, "mem_31894")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37028 = mem_31887.mem;
    CUdeviceptr kernel_arg_37029 = mem_31894.mem;
    
    if ((((((1 && segmap_usable_groups_30401 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30400 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30401;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37025[] = {&ctx->global_failure, &n_28846,
                                     &kernel_arg_37028, &kernel_arg_37029};
        int64_t time_start_37026 = 0, time_end_37027 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30390");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30401);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30400);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37026 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30390_runs,
                                      &ctx->clusterPointszisegmap_30390_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30390,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30400, 1, 1, 0,
                                              NULL, kernel_args_37025, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37027 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30390", time_end_37027 -
                    time_start_37026);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
        return 1;
    
    bool y_28998 = slt64((int64_t) 0, n_28846);
    bool index_certs_28999;
    
    if (!y_28998) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (int64_t) 0,
                               "] out of bounds for array of shape [", n_28846,
                               "].",
                               "-> #0  src/cluster.fut:14:3-49\n   #1  src/cluster.fut:60:15-41\n   #2  src/cluster.fut:101:19-56\n   #3  src/cluster.fut:194:13-76\n   #4  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    {
        bool write_tmp_37030 = 1;
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_scalar_to_dev_runs,
                                      &ctx->copy_scalar_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_31894.mem + (int64_t) 0 *
                                            sizeof(bool), &write_tmp_37030,
                                            sizeof(bool)));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    
    int64_t segscan_group_sizze_30409;
    
    segscan_group_sizze_30409 =
        ctx->sizes.clusterPointszisegscan_group_sizze_30408;
    
    int64_t num_groups_30411;
    int32_t max_num_groups_32739;
    
    max_num_groups_32739 = ctx->sizes.clusterPointszisegscan_num_groups_30410;
    num_groups_30411 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            segscan_group_sizze_30409),
                                                  sext_i32_i64(max_num_groups_32739))));
    
    struct memblock_device mem_31897;
    
    mem_31897.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31897, n_28846, "mem_31897")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31899;
    
    mem_31899.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31899, bytes_31829, "mem_31899")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, n_28846)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_32740;
        
        numThreads_32740 = sdiv_up64(n_28846, segscan_group_sizze_30409 *
                                     (int64_t) 9) * segscan_group_sizze_30409;
        
        int64_t numGroups_32741;
        
        numGroups_32741 = sdiv_up64(n_28846, segscan_group_sizze_30409 *
                                    (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_32742 =
                               ctx->clusterPointsziid_counter_mem_32742;
        struct memblock_device status_flags_mem_32744;
        
        status_flags_mem_32744.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_32744, numGroups_32741,
                                  "status_flags_mem_32744")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_32746;
        
        aggregates_mem_32746.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_32746, numGroups_32741,
                                  "aggregates_mem_32746")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_32748;
        
        incprefixes_mem_32748.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_32748, numGroups_32741,
                                  "incprefixes_mem_32748")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_32750;
        
        aggregates_mem_32750.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_32750, (int64_t) 8 *
                                  numGroups_32741, "aggregates_mem_32750")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_32752;
        
        incprefixes_mem_32752.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_32752, (int64_t) 8 *
                                  numGroups_32741, "incprefixes_mem_32752")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_32744,
                                         numGroups_32741, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37035 = smax64(smax64((int64_t) 320,
                                                        sdiv_up64(segscan_group_sizze_30409,
                                                                  (int64_t) 8) *
                                                        (int64_t) 8 +
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_30409),
                                                 smax64((int64_t) 9 *
                                                        segscan_group_sizze_30409,
                                                        (int64_t) 9 *
                                                        segscan_group_sizze_30409 *
                                                        (int64_t) 8));
        CUdeviceptr kernel_arg_37037 = mem_31894.mem;
        CUdeviceptr kernel_arg_37038 = mem_31897.mem;
        CUdeviceptr kernel_arg_37039 = mem_31899.mem;
        CUdeviceptr kernel_arg_37040 = clusterPointsziid_counter_mem_32742.mem;
        CUdeviceptr kernel_arg_37041 = status_flags_mem_32744.mem;
        CUdeviceptr kernel_arg_37042 = aggregates_mem_32746.mem;
        CUdeviceptr kernel_arg_37043 = incprefixes_mem_32748.mem;
        CUdeviceptr kernel_arg_37044 = aggregates_mem_32750.mem;
        CUdeviceptr kernel_arg_37045 = incprefixes_mem_32752.mem;
        unsigned int shared_offset_37036 = 0;
        
        if ((((((1 && sdiv_up64(n_28846, segscan_group_sizze_30409 *
                                (int64_t) 9) != 0) && 1 != 0) && 1 != 0) &&
              segscan_group_sizze_30409 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(n_28846, segscan_group_sizze_30409 *
                                      (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37032[] = {&ctx->global_failure,
                                         &shared_offset_37036, &n_28846,
                                         &kernel_arg_37037, &kernel_arg_37038,
                                         &kernel_arg_37039, &kernel_arg_37040,
                                         &kernel_arg_37041, &kernel_arg_37042,
                                         &kernel_arg_37043, &kernel_arg_37044,
                                         &kernel_arg_37045};
            int64_t time_start_37033 = 0, time_end_37034 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_30414");
                fprintf(ctx->log, "%ld", (long) sdiv_up64(n_28846,
                                                          segscan_group_sizze_30409 *
                                                          (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_30409);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37033 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_30414_runs,
                                          &ctx->clusterPointszisegscan_30414_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_30414,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_30409, 1,
                                                  1, 0 + (shared_sizze_37035 +
                                                          (8 -
                                                           shared_sizze_37035 %
                                                           8) % 8), NULL,
                                                  kernel_args_37032, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37034 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_30414", time_end_37034 -
                        time_start_37033);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_32752,
                                  "incprefixes_mem_32752") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_32750,
                                  "aggregates_mem_32750") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_32748,
                                  "incprefixes_mem_32748") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_32746,
                                  "aggregates_mem_32746") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_32744,
                                  "status_flags_mem_32744") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
        return 1;
    
    int64_t segscan_group_sizze_30417;
    
    segscan_group_sizze_30417 =
        ctx->sizes.clusterPointszisegscan_group_sizze_30416;
    
    int64_t num_groups_30419;
    int32_t max_num_groups_32872;
    
    max_num_groups_32872 = ctx->sizes.clusterPointszisegscan_num_groups_30418;
    num_groups_30419 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            segscan_group_sizze_30417),
                                                  sext_i32_i64(max_num_groups_32872))));
    
    struct memblock_device mem_31902;
    
    mem_31902.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31902, bytes_31829, "mem_31902")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, n_28846)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_32873;
        
        numThreads_32873 = sdiv_up64(n_28846, segscan_group_sizze_30417 *
                                     (int64_t) 9) * segscan_group_sizze_30417;
        
        int64_t numGroups_32874;
        
        numGroups_32874 = sdiv_up64(n_28846, segscan_group_sizze_30417 *
                                    (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_32875 =
                               ctx->clusterPointsziid_counter_mem_32875;
        struct memblock_device status_flags_mem_32877;
        
        status_flags_mem_32877.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_32877, numGroups_32874,
                                  "status_flags_mem_32877")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_32879;
        
        aggregates_mem_32879.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_32879, (int64_t) 8 *
                                  numGroups_32874, "aggregates_mem_32879")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_32881;
        
        incprefixes_mem_32881.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_32881, (int64_t) 8 *
                                  numGroups_32874, "incprefixes_mem_32881")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_32877,
                                         numGroups_32874, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37050 = smax64(smax64((int64_t) 288,
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_30417),
                                                 (int64_t) 9 *
                                                 segscan_group_sizze_30417 *
                                                 (int64_t) 8);
        CUdeviceptr kernel_arg_37052 = mem_31894.mem;
        CUdeviceptr kernel_arg_37053 = mem_31902.mem;
        CUdeviceptr kernel_arg_37054 = clusterPointsziid_counter_mem_32875.mem;
        CUdeviceptr kernel_arg_37055 = status_flags_mem_32877.mem;
        CUdeviceptr kernel_arg_37056 = aggregates_mem_32879.mem;
        CUdeviceptr kernel_arg_37057 = incprefixes_mem_32881.mem;
        unsigned int shared_offset_37051 = 0;
        
        if ((((((1 && sdiv_up64(n_28846, segscan_group_sizze_30417 *
                                (int64_t) 9) != 0) && 1 != 0) && 1 != 0) &&
              segscan_group_sizze_30417 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(n_28846, segscan_group_sizze_30417 *
                                      (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37047[] = {&ctx->global_failure,
                                         &shared_offset_37051, &n_28846,
                                         &kernel_arg_37052, &kernel_arg_37053,
                                         &kernel_arg_37054, &kernel_arg_37055,
                                         &kernel_arg_37056, &kernel_arg_37057};
            int64_t time_start_37048 = 0, time_end_37049 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_30422");
                fprintf(ctx->log, "%ld", (long) sdiv_up64(n_28846,
                                                          segscan_group_sizze_30417 *
                                                          (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_30417);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37048 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_30422_runs,
                                          &ctx->clusterPointszisegscan_30422_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_30422,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_30417, 1,
                                                  1, 0 + (shared_sizze_37050 +
                                                          (8 -
                                                           shared_sizze_37050 %
                                                           8) % 8), NULL,
                                                  kernel_args_37047, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37049 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_30422", time_end_37049 -
                        time_start_37048);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_32881,
                                  "incprefixes_mem_32881") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_32879,
                                  "aggregates_mem_32879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_32877,
                                  "status_flags_mem_32877") != 0)
            return 1;
    }
    
    int64_t num_segments_29020;
    
    if (y_28998) {
        bool index_certs_29021;
        
        if (!bounds_check_28889) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", i_28886,
                                   "] out of bounds for array of shape [",
                                   n_28846, "].",
                                   "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:29:36-59\n   #2  src/cluster.fut:18:3-46\n   #3  src/cluster.fut:61:18-34\n   #4  src/cluster.fut:101:19-56\n   #5  src/cluster.fut:194:13-76\n   #6  src/cluster.fut:190:1-200:50\n");
            if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31850,
                                      "mem_param_31850") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31845,
                                      "mem_param_31845") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                      "defunc_0_f_res_mem_31884") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                      "defunc_0_f_res_mem_31879") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") !=
                0)
                return 1;
            return 1;
        }
        
        int64_t read_res_37058;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37058, mem_31902.mem +
                                                i_28886 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t last_res_29022 = read_res_37058;
        
        num_segments_29020 = last_res_29022;
    } else {
        num_segments_29020 = (int64_t) 0;
    }
    
    bool bounds_invalid_upwards_29023 = slt64(num_segments_29020, (int64_t) 0);
    bool valid_29024 = !bounds_invalid_upwards_29023;
    bool range_valid_c_29025;
    
    if (!valid_29024) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                               num_segments_29020, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:33:17-41\n   #3  src/cluster.fut:18:3-46\n   #4  src/cluster.fut:61:18-34\n   #5  src/cluster.fut:101:19-56\n   #6  src/cluster.fut:194:13-76\n   #7  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t bytes_31903 = (int64_t) 8 * num_segments_29020;
    struct memblock_device mem_31904;
    
    mem_31904.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31904, bytes_31903, "mem_31904")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i64(ctx, mem_31904, num_segments_29020,
                                      (int64_t) 0) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t segmap_group_sizze_30427;
    
    segmap_group_sizze_30427 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30426;
    
    int64_t segmap_usable_groups_30428 = sdiv_up64(n_28846,
                                                   segmap_group_sizze_30427);
    
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37062 = mem_31894.mem;
    CUdeviceptr kernel_arg_37063 = mem_31899.mem;
    CUdeviceptr kernel_arg_37064 = mem_31902.mem;
    CUdeviceptr kernel_arg_37065 = mem_31904.mem;
    
    if ((((((1 && segmap_usable_groups_30428 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30427 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30428;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37059[] = {&ctx->global_failure, &n_28846,
                                     &num_segments_29020, &kernel_arg_37062,
                                     &kernel_arg_37063, &kernel_arg_37064,
                                     &kernel_arg_37065};
        int64_t time_start_37060 = 0, time_end_37061 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30424");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30428);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30427);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37060 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30424_runs,
                                      &ctx->clusterPointszisegmap_30424_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30424,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30427, 1, 1, 0,
                                              NULL, kernel_args_37059, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37061 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30424", time_end_37061 -
                    time_start_37060);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
        return 1;
    
    int64_t segscan_group_sizze_30431;
    
    segscan_group_sizze_30431 =
        ctx->sizes.clusterPointszisegscan_group_sizze_30430;
    
    int64_t num_groups_30433;
    int32_t max_num_groups_32968;
    
    max_num_groups_32968 = ctx->sizes.clusterPointszisegscan_num_groups_30432;
    num_groups_30433 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(num_segments_29020,
                                                            segscan_group_sizze_30431),
                                                  sext_i32_i64(max_num_groups_32968))));
    
    struct memblock_device mem_31908;
    
    mem_31908.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31908, bytes_31903, "mem_31908")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, num_segments_29020)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_32969;
        
        numThreads_32969 = sdiv_up64(num_segments_29020,
                                     segscan_group_sizze_30431 * (int64_t) 9) *
            segscan_group_sizze_30431;
        
        int64_t numGroups_32970;
        
        numGroups_32970 = sdiv_up64(num_segments_29020,
                                    segscan_group_sizze_30431 * (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_32971 =
                               ctx->clusterPointsziid_counter_mem_32971;
        struct memblock_device status_flags_mem_32973;
        
        status_flags_mem_32973.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_32973, numGroups_32970,
                                  "status_flags_mem_32973")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_32975;
        
        aggregates_mem_32975.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_32975, (int64_t) 8 *
                                  numGroups_32970, "aggregates_mem_32975")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_32977;
        
        incprefixes_mem_32977.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_32977, (int64_t) 8 *
                                  numGroups_32970, "incprefixes_mem_32977")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_32973,
                                         numGroups_32970, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37070 = smax64(smax64((int64_t) 288,
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_30431),
                                                 (int64_t) 9 *
                                                 segscan_group_sizze_30431 *
                                                 (int64_t) 8);
        CUdeviceptr kernel_arg_37072 = mem_31904.mem;
        CUdeviceptr kernel_arg_37073 = mem_31908.mem;
        CUdeviceptr kernel_arg_37074 = clusterPointsziid_counter_mem_32971.mem;
        CUdeviceptr kernel_arg_37075 = status_flags_mem_32973.mem;
        CUdeviceptr kernel_arg_37076 = aggregates_mem_32975.mem;
        CUdeviceptr kernel_arg_37077 = incprefixes_mem_32977.mem;
        unsigned int shared_offset_37071 = 0;
        
        if ((((((1 && sdiv_up64(num_segments_29020, segscan_group_sizze_30431 *
                                (int64_t) 9) != 0) && 1 != 0) && 1 != 0) &&
              segscan_group_sizze_30431 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(num_segments_29020,
                                      segscan_group_sizze_30431 * (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37067[] = {&ctx->global_failure,
                                         &shared_offset_37071,
                                         &num_segments_29020, &kernel_arg_37072,
                                         &kernel_arg_37073, &kernel_arg_37074,
                                         &kernel_arg_37075, &kernel_arg_37076,
                                         &kernel_arg_37077};
            int64_t time_start_37068 = 0, time_end_37069 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_30436");
                fprintf(ctx->log, "%ld", (long) sdiv_up64(num_segments_29020,
                                                          segscan_group_sizze_30431 *
                                                          (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_30431);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37068 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_30436_runs,
                                          &ctx->clusterPointszisegscan_30436_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_30436,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_30431, 1,
                                                  1, 0 + (shared_sizze_37070 +
                                                          (8 -
                                                           shared_sizze_37070 %
                                                           8) % 8), NULL,
                                                  kernel_args_37067, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37069 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_30436", time_end_37069 -
                        time_start_37068);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_32977,
                                  "incprefixes_mem_32977") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_32975,
                                  "aggregates_mem_32975") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_32973,
                                  "status_flags_mem_32973") != 0)
            return 1;
    }
    
    struct memblock_device mem_31910;
    
    mem_31910.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31910, bytes_31903, "mem_31910")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t group_sizze_33053;
    
    group_sizze_33053 = ctx->sizes.clusterPointszigroup_sizze_33053;
    
    int64_t num_groups_33054;
    
    num_groups_33054 = sdiv_up64(num_segments_29020, group_sizze_33053);
    
    CUdeviceptr kernel_arg_37081 = mem_31908.mem;
    CUdeviceptr kernel_arg_37082 = mem_31910.mem;
    
    if ((((((1 && num_groups_33054 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_33053 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_33054;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37078[] = {&num_segments_29020, &kernel_arg_37081,
                                     &kernel_arg_37082};
        int64_t time_start_37079 = 0, time_end_37080 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.copy_33050");
            fprintf(ctx->log, "%ld", (long) num_groups_33054);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) group_sizze_33053);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37079 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszicopy_33050_runs,
                                      &ctx->clusterPointszicopy_33050_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszicopy_33050,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_33053, 1, 1, 0, NULL,
                                              kernel_args_37078, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37080 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.copy_33050", time_end_37080 -
                    time_start_37079);
        }
    }
    if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
        return 1;
    
    bool y_29040 = slt64((int64_t) 0, num_segments_29020);
    bool index_certs_29041;
    
    if (!y_29040) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (int64_t) 0,
                               "] out of bounds for array of shape [",
                               num_segments_29020, "].",
                               "-> #0  src/cluster.fut:23:6-27\n   #1  src/cluster.fut:62:17-38\n   #2  src/cluster.fut:101:19-56\n   #3  src/cluster.fut:194:13-76\n   #4  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    {
        int64_t write_tmp_37083 = (int64_t) 0;
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_scalar_to_dev_runs,
                                      &ctx->copy_scalar_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_31910.mem + (int64_t) 0 *
                                            sizeof(int64_t), &write_tmp_37083,
                                            sizeof(int64_t)));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    
    bool bounds_invalid_upwards_29043 = slt64(defunc_0_f_res_28855,
                                              (int64_t) 0);
    bool valid_29044 = !bounds_invalid_upwards_29043;
    bool range_valid_c_29045;
    
    if (!valid_29044) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                               defunc_0_f_res_28855, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  src/cluster.fut:65:14-36\n   #3  src/cluster.fut:101:19-56\n   #4  src/cluster.fut:194:13-76\n   #5  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t bytes_31911 = (int64_t) 8 * defunc_0_f_res_28855;
    struct memblock_device mem_31912;
    
    mem_31912.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31912, bytes_31911, "mem_31912")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i64(ctx, mem_31912, defunc_0_f_res_28855,
                                      (int64_t) 0) != 0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31914;
    
    mem_31914.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31914, bytes_31911, "mem_31914")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i64(ctx, mem_31914, defunc_0_f_res_28855,
                                      (int64_t) 0) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t segmap_group_sizze_30441;
    
    segmap_group_sizze_30441 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30440;
    
    int64_t segmap_usable_groups_30442 = sdiv_up64(num_segments_29020,
                                                   segmap_group_sizze_30441);
    
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37087 = mem_31889.mem;
    CUdeviceptr kernel_arg_37088 = mem_31904.mem;
    CUdeviceptr kernel_arg_37089 = mem_31910.mem;
    CUdeviceptr kernel_arg_37090 = mem_31912.mem;
    CUdeviceptr kernel_arg_37091 = mem_31914.mem;
    
    if ((((((1 && segmap_usable_groups_30442 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30441 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30442;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37084[] = {&ctx->global_failure,
                                     &ctx->failure_is_an_option,
                                     &ctx->global_failure_args, &n_28846,
                                     &defunc_0_f_res_28855, &num_segments_29020,
                                     &kernel_arg_37087, &kernel_arg_37088,
                                     &kernel_arg_37089, &kernel_arg_37090,
                                     &kernel_arg_37091};
        int64_t time_start_37085 = 0, time_end_37086 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30438");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30442);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30441);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37085 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30438_runs,
                                      &ctx->clusterPointszisegmap_30438_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30438,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30441, 1, 1, 0,
                                              NULL, kernel_args_37084, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37086 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30438", time_end_37086 -
                    time_start_37085);
        }
    }
    ctx->failure_is_an_option = 1;
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
        return 1;
    
    int64_t segmap_group_sizze_30663;
    
    segmap_group_sizze_30663 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30625;
    
    int64_t segmap_usable_groups_30664 = sdiv_up64(nest_sizze_30323,
                                                   segmap_group_sizze_30663);
    struct memblock_device mem_31919;
    
    mem_31919.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31919, bytes_31835, "mem_31919")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37095 = pos_mem_31827.mem;
    CUdeviceptr kernel_arg_37096 = mem_31919.mem;
    
    if ((((((1 && segmap_usable_groups_30664 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30663 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30664;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37092[] = {&ctx->global_failure, &n_28846,
                                     &radius_28848, &kernel_arg_37095,
                                     &kernel_arg_37096};
        int64_t time_start_37093 = 0, time_end_37094 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30622");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30664);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30663);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37093 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30622_runs,
                                      &ctx->clusterPointszisegmap_30622_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30622,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30663, 1, 1, 0,
                                              NULL, kernel_args_37092, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37094 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30622", time_end_37094 -
                    time_start_37093);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    
    int64_t nest_sizze_30683 = (int64_t) 24 * n_28846;
    int64_t segmap_group_sizze_30684;
    
    segmap_group_sizze_30684 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30566;
    
    int64_t segmap_usable_groups_30685 = sdiv_up64(nest_sizze_30683,
                                                   segmap_group_sizze_30684);
    int64_t binop_x_31923 = (int64_t) 3 * bytes_31829;
    int64_t bytes_31921 = (int64_t) 4 * binop_x_31923;
    struct memblock_device mem_31924;
    
    mem_31924.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31924, bytes_31921, "mem_31924")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37100 = mem_31919.mem;
    CUdeviceptr kernel_arg_37101 = mem_31924.mem;
    
    if ((((((1 && segmap_usable_groups_30685 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30684 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30685;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37097[] = {&ctx->global_failure, &n_28846,
                                     &hashMask_28857, &kernel_arg_37100,
                                     &kernel_arg_37101};
        int64_t time_start_37098 = 0, time_end_37099 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30562");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30685);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30684);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37098 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30562_runs,
                                      &ctx->clusterPointszisegmap_30562_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30562,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30684, 1, 1, 0,
                                              NULL, kernel_args_37097, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37099 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30562", time_end_37099 -
                    time_start_37098);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
        return 1;
    
    int64_t segmap_group_sizze_30694;
    
    segmap_group_sizze_30694 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30538;
    
    int64_t segmap_usable_groups_30695 = sdiv_up64(bytes_31829,
                                                   segmap_group_sizze_30694);
    int64_t bytes_31926 = (int64_t) 4 * bytes_31829;
    struct memblock_device mem_31928;
    
    mem_31928.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31928, bytes_31926, "mem_31928")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37105 = mem_31924.mem;
    CUdeviceptr kernel_arg_37106 = mem_31928.mem;
    
    if ((((((1 && segmap_usable_groups_30695 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30694 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30695;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37102[] = {&ctx->global_failure, &n_28846,
                                     &nHashBit_28847, &kernel_arg_37105,
                                     &kernel_arg_37106};
        int64_t time_start_37103 = 0, time_end_37104 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30535");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30695);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30694);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37103 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30535_runs,
                                      &ctx->clusterPointszisegmap_30535_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30535,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30694, 1, 1, 0,
                                              NULL, kernel_args_37102, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37104 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30535", time_end_37104 -
                    time_start_37103);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
        return 1;
    
    int64_t segscan_group_sizze_30720;
    
    segscan_group_sizze_30720 =
        ctx->sizes.clusterPointszisegscan_group_sizze_30719;
    
    int64_t num_groups_30722;
    int32_t max_num_groups_33075;
    
    max_num_groups_33075 = ctx->sizes.clusterPointszisegscan_num_groups_30721;
    num_groups_30722 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(bytes_31829,
                                                            segscan_group_sizze_30720),
                                                  sext_i32_i64(max_num_groups_33075))));
    
    int64_t bytes_31930 = (int64_t) 8 * bytes_31829;
    struct memblock_device mem_31931;
    
    mem_31931.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31931, bytes_31930, "mem_31931")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31933;
    
    mem_31933.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31933, bytes_31930, "mem_31933")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, bytes_31829)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_33076;
        
        numThreads_33076 = sdiv_up64(bytes_31829, segscan_group_sizze_30720 *
                                     (int64_t) 9) * segscan_group_sizze_30720;
        
        int64_t numGroups_33077;
        
        numGroups_33077 = sdiv_up64(bytes_31829, segscan_group_sizze_30720 *
                                    (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_33078 =
                               ctx->clusterPointsziid_counter_mem_33078;
        struct memblock_device status_flags_mem_33080;
        
        status_flags_mem_33080.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_33080, numGroups_33077,
                                  "status_flags_mem_33080")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_33082;
        
        aggregates_mem_33082.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_33082, (int64_t) 8 *
                                  numGroups_33077, "aggregates_mem_33082")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_33084;
        
        incprefixes_mem_33084.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_33084, (int64_t) 8 *
                                  numGroups_33077, "incprefixes_mem_33084")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_33080,
                                         numGroups_33077, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37111 = smax64(smax64((int64_t) 288,
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_30720),
                                                 (int64_t) 9 *
                                                 segscan_group_sizze_30720 *
                                                 (int64_t) 8);
        CUdeviceptr kernel_arg_37113 = mem_31912.mem;
        CUdeviceptr kernel_arg_37114 = mem_31928.mem;
        CUdeviceptr kernel_arg_37115 = mem_31931.mem;
        CUdeviceptr kernel_arg_37116 = mem_31933.mem;
        CUdeviceptr kernel_arg_37117 = clusterPointsziid_counter_mem_33078.mem;
        CUdeviceptr kernel_arg_37118 = status_flags_mem_33080.mem;
        CUdeviceptr kernel_arg_37119 = aggregates_mem_33082.mem;
        CUdeviceptr kernel_arg_37120 = incprefixes_mem_33084.mem;
        unsigned int shared_offset_37112 = 0;
        
        if ((((((1 && sdiv_up64(bytes_31829, segscan_group_sizze_30720 *
                                (int64_t) 9) != 0) && 1 != 0) && 1 != 0) &&
              segscan_group_sizze_30720 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(bytes_31829, segscan_group_sizze_30720 *
                                      (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37108[] = {&ctx->global_failure,
                                         &ctx->failure_is_an_option,
                                         &ctx->global_failure_args,
                                         &shared_offset_37112,
                                         &defunc_0_f_res_28855, &bytes_31829,
                                         &kernel_arg_37113, &kernel_arg_37114,
                                         &kernel_arg_37115, &kernel_arg_37116,
                                         &kernel_arg_37117, &kernel_arg_37118,
                                         &kernel_arg_37119, &kernel_arg_37120};
            int64_t time_start_37109 = 0, time_end_37110 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_30725");
                fprintf(ctx->log, "%ld", (long) sdiv_up64(bytes_31829,
                                                          segscan_group_sizze_30720 *
                                                          (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_30720);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37109 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_30725_runs,
                                          &ctx->clusterPointszisegscan_30725_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_30725,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_30720, 1,
                                                  1, 0 + (shared_sizze_37111 +
                                                          (8 -
                                                           shared_sizze_37111 %
                                                           8) % 8), NULL,
                                                  kernel_args_37108, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37110 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_30725", time_end_37110 -
                        time_start_37109);
            }
        }
        ctx->failure_is_an_option = 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_33084,
                                  "incprefixes_mem_33084") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_33082,
                                  "aggregates_mem_33082") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_33080,
                                  "status_flags_mem_33080") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
        return 1;
    
    int64_t segred_group_sizze_30728;
    
    segred_group_sizze_30728 =
        ctx->sizes.clusterPointszisegred_group_sizze_30727;
    
    int64_t num_groups_30730;
    int32_t max_num_groups_33157;
    
    max_num_groups_33157 = ctx->sizes.clusterPointszisegred_num_groups_30729;
    num_groups_30730 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(bytes_31829,
                                                            segred_group_sizze_30728),
                                                  sext_i32_i64(max_num_groups_33157))));
    
    struct memblock_device mem_31936;
    
    mem_31936.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31936, (int64_t) 8, "mem_31936")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device clusterPointszicounter_mem_33158 =
                           ctx->clusterPointszicounter_mem_33158;
    struct memblock_device group_res_arr_mem_33160;
    
    group_res_arr_mem_33160.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_33160, (int64_t) 8 *
                              (segred_group_sizze_30728 * num_groups_30730),
                              "group_res_arr_mem_33160")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t num_threads_33162;
    
    num_threads_33162 = num_groups_30730 * segred_group_sizze_30728;
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegRed");
    
    unsigned int shared_sizze_37125 = (int64_t) 8 * segred_group_sizze_30728;
    unsigned int shared_sizze_37127 = 1;
    CUdeviceptr kernel_arg_37129 = mem_31933.mem;
    CUdeviceptr kernel_arg_37130 = mem_31936.mem;
    CUdeviceptr kernel_arg_37131 = clusterPointszicounter_mem_33158.mem;
    CUdeviceptr kernel_arg_37132 = group_res_arr_mem_33160.mem;
    unsigned int shared_offset_37126 = 0;
    unsigned int shared_offset_37128 = 0 + (shared_sizze_37125 + (8 -
                                                                  shared_sizze_37125 %
                                                                  8) % 8);
    
    if ((((((1 && num_groups_30730 != 0) && 1 != 0) && 1 != 0) &&
          segred_group_sizze_30728 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_30730;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37122[] = {&ctx->global_failure, &shared_offset_37126,
                                     &shared_offset_37128, &num_groups_30730,
                                     &bytes_31829, &num_threads_33162,
                                     &kernel_arg_37129, &kernel_arg_37130,
                                     &kernel_arg_37131, &kernel_arg_37132};
        int64_t time_start_37123 = 0, time_end_37124 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segred_nonseg_30735");
            fprintf(ctx->log, "%ld", (long) num_groups_30730);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segred_group_sizze_30728);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37123 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegred_nonseg_30735_runs,
                                      &ctx->clusterPointszisegred_nonseg_30735_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_30735,
                                              grid[0], grid[1], grid[2],
                                              segred_group_sizze_30728, 1, 1,
                                              0 + (shared_sizze_37125 + (8 -
                                                                         shared_sizze_37125 %
                                                                         8) %
                                                   8) + (shared_sizze_37127 +
                                                         (8 -
                                                          shared_sizze_37127 %
                                                          8) % 8), NULL,
                                              kernel_args_37122, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37124 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segred_nonseg_30735", time_end_37124 -
                    time_start_37123);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
        return 1;
    
    int64_t read_res_37133;
    
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->copy_scalar_from_dev_runs,
                                      &ctx->copy_scalar_from_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37133, mem_31936.mem +
                                            (int64_t) 0 * sizeof(int64_t),
                                            sizeof(int64_t)));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    if (futhark_context_sync(ctx) != 0)
        return 1;
    
    int64_t defunc_2_reduce_res_29111 = read_res_37133;
    
    if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
        return 1;
    
    bool bounds_invalid_upwards_29116 = slt64(defunc_2_reduce_res_29111,
                                              (int64_t) 0);
    bool valid_29117 = !bounds_invalid_upwards_29116;
    bool range_valid_c_29118;
    
    if (!valid_29117) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                               defunc_2_reduce_res_29111, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:48:30-60\n   #3  src/cluster.fut:51:14-32\n   #4  src/cluster.fut:108:19-120\n   #5  src/cluster.fut:194:13-76\n   #6  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t bytes_31937 = (int64_t) 8 * defunc_2_reduce_res_29111;
    struct memblock_device mem_31938;
    
    mem_31938.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31938, bytes_31937, "mem_31938")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i64(ctx, mem_31938, defunc_2_reduce_res_29111,
                                      (int64_t) 0) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t seghist_group_sizze_30738;
    
    seghist_group_sizze_30738 =
        ctx->sizes.clusterPointsziseghist_group_sizze_30737;
    
    int64_t num_groups_30740;
    int32_t max_num_groups_33188;
    
    max_num_groups_33188 = ctx->sizes.clusterPointsziseghist_num_groups_30739;
    num_groups_30740 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(bytes_31829,
                                                            seghist_group_sizze_30738),
                                                  sext_i32_i64(max_num_groups_33188))));
    
    int32_t num_subhistos_33189;
    struct memblock_device defunc_1_map_res_subhistos_mem_33190;
    
    defunc_1_map_res_subhistos_mem_33190.references = NULL;
    
    int64_t h_33192;
    
    h_33192 = (int64_t) 8 * defunc_2_reduce_res_29111;
    
    int64_t seg_h_33193;
    
    seg_h_33193 = (int64_t) 8 * defunc_2_reduce_res_29111;
    if (!(seg_h_33193 == (int64_t) 0)) {
        int64_t hist_H_33194 = defunc_2_reduce_res_29111;
        int64_t hist_el_sizze_33195 = sdiv_up64(h_33192, hist_H_33194);
        int64_t hist_N_33196 = bytes_31829;
        int32_t hist_RF_33197 = 1;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegHist");
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Number of threads (T)",
                    (long long) sext_i64_i32(num_groups_30740 *
                    seghist_group_sizze_30738), '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Desired group size (B)",
                    (long long) seghist_group_sizze_30738, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Histogram size (H)",
                    (long long) hist_H_33194, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Input elements per histogram (N)",
                    (long long) hist_N_33196, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Number of segments",
                    (long long) (int64_t) 1, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Histogram element size (el_size)",
                    (long long) hist_el_sizze_33195, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Race factor (RF)",
                    (long long) hist_RF_33197, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c",
                    "Memory per set of subhistograms per segment",
                    (long long) h_33192, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c",
                    "Memory per set of subhistograms times segments",
                    (long long) seg_h_33193, '\n');
        
        int32_t hist_L_33198;
        
        hist_L_33198 = ctx->cuda.max_shared_memory;
        
        int32_t max_group_sizze_33199;
        
        max_group_sizze_33199 = ctx->cuda.max_block_size;
        
        int64_t num_groups_33200;
        
        num_groups_33200 =
            sdiv_up64(sext_i32_i64(sext_i64_i32(num_groups_30740 *
                      seghist_group_sizze_30738)), max_group_sizze_33199);
        
        double hist_m_prime_33201;
        
        hist_m_prime_33201 =
            sitofp_i64_f64(smin64(sext_i32_i64(squot32(hist_L_33198,
                                                       hist_el_sizze_33195)),
                                  sdiv_up64(hist_N_33196, num_groups_33200))) /
            sitofp_i64_f64(hist_H_33194);
        
        int64_t hist_M0_33202;
        
        hist_M0_33202 = smax64((int64_t) 1,
                               smin64(fptosi_f64_i64(hist_m_prime_33201),
                                      max_group_sizze_33199));
        
        int64_t hist_Nout_33203;
        
        hist_Nout_33203 = (int64_t) 1;
        
        int64_t hist_Nin_33204;
        
        hist_Nin_33204 = bytes_31829;
        
        int64_t work_asymp_M_max_33205;
        
        work_asymp_M_max_33205 = squot64(hist_Nout_33203 * hist_N_33196,
                                         (int64_t) 2 * num_groups_33200 *
                                         hist_H_33194);
        
        int32_t hist_M_33206;
        
        hist_M_33206 = sext_i64_i32(smin64(hist_M0_33202,
                                           work_asymp_M_max_33205));
        
        int64_t hist_C_33207;
        
        hist_C_33207 = sdiv_up64(max_group_sizze_33199, sext_i32_i64(smax32(1,
                                                                            hist_M_33206)));
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local hist_M0",
                    (long long) hist_M0_33202, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local work asymp M max",
                    (long long) work_asymp_M_max_33205, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local C", (long long) hist_C_33207,
                    '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local B",
                    (long long) max_group_sizze_33199, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local M", (long long) hist_M_33206,
                    '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local memory needed",
                    (long long) (hist_H_33194 * hist_el_sizze_33195 *
                                 sext_i32_i64(hist_M_33206)), '\n');
        
        int64_t local_mem_needed_33208;
        
        local_mem_needed_33208 = hist_el_sizze_33195 *
            sext_i32_i64(hist_M_33206);
        
        int32_t hist_S_33209;
        
        hist_S_33209 = sext_i64_i32(sdiv_up64(hist_H_33194 *
                                              local_mem_needed_33208,
                                              hist_L_33198));
        if (sle64(hist_H_33194, hist_Nin_33204) &&
            (sle64(local_mem_needed_33208, hist_L_33198) && (sle32(hist_S_33209,
                                                                   3) &&
                                                             (sle64(hist_C_33207,
                                                                    max_group_sizze_33199) &&
                                                              slt32(0,
                                                                    hist_M_33206))))) {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "## Using local memory");
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Histogram size (H)",
                        (long long) hist_H_33194, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Multiplication degree (M)",
                        (long long) hist_M_33206, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Cooperation level (C)",
                        (long long) hist_C_33207, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Number of chunks (S)",
                        (long long) hist_S_33209, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c",
                        "Number of local subhistograms per group",
                        (long long) hist_M_33206, '\n');
            
            int64_t num_segments_33210;
            
            num_segments_33210 = (int64_t) 1;
            num_subhistos_33189 = num_groups_33200 * num_segments_33210;
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c",
                        "Number of subhistograms in global memory",
                        (long long) num_subhistos_33189, '\n');
            if (num_subhistos_33189 == (int64_t) 1) {
                if (memblock_set_device(ctx,
                                        &defunc_1_map_res_subhistos_mem_33190,
                                        &mem_31938, "mem_31938") != 0)
                    return 1;
            } else {
                if (memblock_alloc_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          sext_i32_i64(num_subhistos_33189) *
                                          defunc_2_reduce_res_29111 *
                                          (int64_t) 8,
                                          "defunc_1_map_res_subhistos_mem_33190")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i64(ctx,
                                                  defunc_1_map_res_subhistos_mem_33190,
                                                  num_subhistos_33189 *
                                                  defunc_2_reduce_res_29111,
                                                  (int64_t) 0) != 0) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(defunc_1_map_res_subhistos_mem_33190.mem +
                                                    (int64_t) 0, mem_31938.mem +
                                                    (int64_t) 0,
                                                    defunc_2_reduce_res_29111 *
                                                    (int64_t) 8));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
            }
            for (int32_t chk_i_33211 = 0; chk_i_33211 < hist_S_33209;
                 chk_i_33211++) {
                int64_t num_segments_33212 = (int64_t) 1;
                int64_t hist_H_chk_33213 = sdiv_up64(defunc_2_reduce_res_29111,
                                                     sext_i32_i64(hist_S_33209));
                int64_t histo_sizze_33214 = hist_H_chk_33213;
                int32_t init_per_thread_33215 =
                        sext_i64_i32(sdiv_up64(sext_i32_i64(hist_M_33206) *
                                               histo_sizze_33214,
                                               max_group_sizze_33199));
                unsigned int shared_sizze_37137 = (int64_t) 8 * (hist_M_33206 *
                                                                 hist_H_chk_33213);
                CUdeviceptr kernel_arg_37139 = mem_31931.mem;
                CUdeviceptr kernel_arg_37140 =
                            defunc_1_map_res_subhistos_mem_33190.mem;
                unsigned int shared_offset_37138 = 0;
                
                if ((((((1 && num_groups_33200 != 0) && 1 != 0) && 1 != 0) &&
                      max_group_sizze_33199 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_33200;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37134[] = {&ctx->global_failure,
                                                 &shared_offset_37138,
                                                 &defunc_2_reduce_res_29111,
                                                 &bytes_31829,
                                                 &max_group_sizze_33199,
                                                 &num_groups_33200,
                                                 &hist_M_33206, &chk_i_33211,
                                                 &num_segments_33212,
                                                 &hist_H_chk_33213,
                                                 &histo_sizze_33214,
                                                 &init_per_thread_33215,
                                                 &kernel_arg_37139,
                                                 &kernel_arg_37140};
                    int64_t time_start_37135 = 0, time_end_37136 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.seghist_local_30743");
                        fprintf(ctx->log, "%ld", (long) num_groups_33200);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld", (long) max_group_sizze_33199);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37135 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointsziseghist_local_30743_runs,
                                                  &ctx->clusterPointsziseghist_local_30743_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointsziseghist_local_30743,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          max_group_sizze_33199,
                                                          1, 1, 0 +
                                                          (shared_sizze_37137 +
                                                           (8 -
                                                            shared_sizze_37137 %
                                                            8) % 8), NULL,
                                                          kernel_args_37134,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37136 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.seghist_local_30743",
                                time_end_37136 - time_start_37135);
                    }
                }
            }
        } else {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "## Using global memory");
            
            int64_t hist_H_33243;
            
            hist_H_33243 = defunc_2_reduce_res_29111;
            
            double hist_RF_33244;
            
            hist_RF_33244 = (0.0 + sitofp_i32_f64((int64_t) 1)) / 1.0;
            
            int32_t hist_el_sizze_33245;
            
            hist_el_sizze_33245 = 8;
            
            double hist_C_max_33246;
            
            hist_C_max_33246 =
                fmin64(sitofp_i32_f64(sext_i64_i32(num_groups_30740 *
                       seghist_group_sizze_30738)),
                       sitofp_i32_f64(hist_H_33243) / 2.0);
            
            int32_t hist_M_min_33247;
            
            hist_M_min_33247 = smax32(1,
                                      sext_i64_i32(fptosi_f64_i64(sitofp_i32_f64(sext_i64_i32(num_groups_30740 *
                                      seghist_group_sizze_30738)) /
                                      hist_C_max_33246)));
            
            int32_t L2_sizze_33248;
            
            L2_sizze_33248 = ctx->sizes.clusterPointsziL2_sizze_33248;
            
            double hist_RACE_exp_33249;
            
            hist_RACE_exp_33249 = fmax64(1.0, 0.75 * hist_RF_33244 / (64.0 /
                                                                      sitofp_i32_f64(hist_el_sizze_33245)));
            
            int32_t hist_S_33250;
            
            if (slt64(bytes_31829, hist_H_33243)) {
                hist_S_33250 = 1;
            } else {
                hist_S_33250 =
                    sext_i64_i32(sdiv_up64(sext_i32_i64(hist_M_min_33247) *
                                           hist_H_33243 *
                                           sext_i32_i64(hist_el_sizze_33245),
                                           fptosi_f64_i64(0.4 *
                                           sitofp_i32_f64(L2_sizze_33248) *
                                           hist_RACE_exp_33249)));
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %f%c",
                        "Race expansion factor (RACE^exp)",
                        (double) hist_RACE_exp_33249, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Number of chunks (S)",
                        (long long) hist_S_33250, '\n');
            
            int64_t hist_H_chk_33251;
            
            hist_H_chk_33251 = sdiv_up64(defunc_2_reduce_res_29111,
                                         sext_i32_i64(hist_S_33250));
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Chunk size (H_chk)",
                        (long long) hist_H_chk_33251, '\n');
            
            double hist_k_max_33252;
            
            hist_k_max_33252 = fmin64(0.4 * (sitofp_i32_f64(L2_sizze_33248) /
                                             sitofp_i32_f64(8)) *
                                      hist_RACE_exp_33249,
                                      sitofp_i32_f64(bytes_31829)) /
                sitofp_i32_f64(sext_i64_i32(num_groups_30740 *
                seghist_group_sizze_30738));
            
            int64_t hist_u_33253;
            
            hist_u_33253 = (int64_t) 2;
            
            double hist_C_33254;
            
            hist_C_33254 = fmin64(sitofp_i32_f64(sext_i64_i32(num_groups_30740 *
                                  seghist_group_sizze_30738)),
                                  sitofp_i32_f64(hist_u_33253 *
                                  hist_H_chk_33251) / hist_k_max_33252);
            
            int32_t hist_M_33255;
            
            hist_M_33255 = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %f%c",
                        "Elements/thread in L2 cache (k_max)",
                        (double) hist_k_max_33252, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Multiplication degree (M)",
                        (long long) hist_M_33255, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %f%c", "Cooperation level (C)",
                        (double) hist_C_33254, '\n');
            num_subhistos_33189 = sext_i32_i64(hist_M_33255);
            if (hist_M_33255 == 1) {
                if (memblock_set_device(ctx,
                                        &defunc_1_map_res_subhistos_mem_33190,
                                        &mem_31938, "mem_31938") != 0)
                    return 1;
            } else {
                if (num_subhistos_33189 == (int64_t) 1) {
                    if (memblock_set_device(ctx,
                                            &defunc_1_map_res_subhistos_mem_33190,
                                            &mem_31938, "mem_31938") != 0)
                        return 1;
                } else {
                    if (memblock_alloc_device(ctx,
                                              &defunc_1_map_res_subhistos_mem_33190,
                                              sext_i32_i64(num_subhistos_33189) *
                                              defunc_2_reduce_res_29111 *
                                              (int64_t) 8,
                                              "defunc_1_map_res_subhistos_mem_33190")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (futrts_builtinzhreplicate_i64(ctx,
                                                      defunc_1_map_res_subhistos_mem_33190,
                                                      num_subhistos_33189 *
                                                      defunc_2_reduce_res_29111,
                                                      (int64_t) 0) != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    {
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->copy_dev_to_dev_runs,
                                                      &ctx->copy_dev_to_dev_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuMemcpy(defunc_1_map_res_subhistos_mem_33190.mem +
                                                        (int64_t) 0,
                                                        mem_31938.mem +
                                                        (int64_t) 0,
                                                        defunc_2_reduce_res_29111 *
                                                        (int64_t) 8));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    }
                }
            }
            for (int32_t chk_i_33256 = 0; chk_i_33256 < hist_S_33250;
                 chk_i_33256++) {
                int64_t hist_H_chk_33257 = sdiv_up64(defunc_2_reduce_res_29111,
                                                     sext_i32_i64(hist_S_33250));
                CUdeviceptr kernel_arg_37144 = mem_31931.mem;
                CUdeviceptr kernel_arg_37145 =
                            defunc_1_map_res_subhistos_mem_33190.mem;
                
                if ((((((1 && num_groups_30740 != 0) && 1 != 0) && 1 != 0) &&
                      seghist_group_sizze_30738 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_30740;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37141[] = {&ctx->global_failure,
                                                 &defunc_2_reduce_res_29111,
                                                 &num_groups_30740,
                                                 &bytes_31829,
                                                 &num_subhistos_33189,
                                                 &chk_i_33256,
                                                 &hist_H_chk_33257,
                                                 &kernel_arg_37144,
                                                 &kernel_arg_37145};
                    int64_t time_start_37142 = 0, time_end_37143 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.seghist_global_30743");
                        fprintf(ctx->log, "%ld", (long) num_groups_30740);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) seghist_group_sizze_30738);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37142 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointsziseghist_global_30743_runs,
                                                  &ctx->clusterPointsziseghist_global_30743_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointsziseghist_global_30743,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          seghist_group_sizze_30738,
                                                          1, 1, 0, NULL,
                                                          kernel_args_37141,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37143 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.seghist_global_30743",
                                time_end_37143 - time_start_37142);
                    }
                }
            }
        }
        if (num_subhistos_33189 == (int64_t) 1) {
            if (memblock_set_device(ctx, &mem_31938,
                                    &defunc_1_map_res_subhistos_mem_33190,
                                    "defunc_1_map_res_subhistos_mem_33190") !=
                0)
                return 1;
        } else {
            if (slt64(num_subhistos_33189 * (int64_t) 2,
                      seghist_group_sizze_30738)) {
                int64_t segment_sizze_nonzzero_33269 = smax64((int64_t) 1,
                                                              num_subhistos_33189);
                int64_t num_threads_33270 = num_groups_30740 *
                        seghist_group_sizze_30738;
                
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed-small");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_segments",
                            (long long) defunc_2_reduce_res_29111, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segment_size",
                            (long long) num_subhistos_33189, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segments_per_group",
                            (long long) squot64(seghist_group_sizze_30738,
                                                segment_sizze_nonzzero_33269),
                            '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "required_groups",
                            (long long) sext_i64_i32(sdiv_up64(defunc_2_reduce_res_29111,
                                                               squot64(seghist_group_sizze_30738,
                                                                       segment_sizze_nonzzero_33269))),
                            '\n');
                
                unsigned int shared_sizze_37149 = (int64_t) 8 *
                             seghist_group_sizze_30738;
                CUdeviceptr kernel_arg_37151 = mem_31938.mem;
                CUdeviceptr kernel_arg_37152 =
                            defunc_1_map_res_subhistos_mem_33190.mem;
                unsigned int shared_offset_37150 = 0;
                
                if ((((((1 && num_groups_30740 != 0) && 1 != 0) && 1 != 0) &&
                      seghist_group_sizze_30738 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_30740;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37146[] = {&ctx->global_failure,
                                                 &shared_offset_37150,
                                                 &defunc_2_reduce_res_29111,
                                                 &num_groups_30740,
                                                 &num_subhistos_33189,
                                                 &segment_sizze_nonzzero_33269,
                                                 &kernel_arg_37151,
                                                 &kernel_arg_37152};
                    int64_t time_start_37147 = 0, time_end_37148 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segred_small_33268");
                        fprintf(ctx->log, "%ld", (long) num_groups_30740);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) seghist_group_sizze_30738);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37147 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegred_small_33268_runs,
                                                  &ctx->clusterPointszisegred_small_33268_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_small_33268,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          seghist_group_sizze_30738,
                                                          1, 1, 0 +
                                                          (shared_sizze_37149 +
                                                           (8 -
                                                            shared_sizze_37149 %
                                                            8) % 8), NULL,
                                                          kernel_args_37146,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37148 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segred_small_33268",
                                time_end_37148 - time_start_37147);
                    }
                }
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
            } else {
                int64_t groups_per_segment_33290 = sdiv_up64(num_groups_30740,
                                                             smax64((int64_t) 1,
                                                                    defunc_2_reduce_res_29111));
                int64_t elements_per_thread_33291 =
                        sdiv_up64(num_subhistos_33189,
                                  seghist_group_sizze_30738 *
                                  groups_per_segment_33290);
                int64_t virt_num_groups_33292 = groups_per_segment_33290 *
                        defunc_2_reduce_res_29111;
                int64_t num_threads_33293 = num_groups_30740 *
                        seghist_group_sizze_30738;
                int64_t threads_per_segment_33294 = groups_per_segment_33290 *
                        seghist_group_sizze_30738;
                
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed-large");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_segments",
                            (long long) defunc_2_reduce_res_29111, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segment_size",
                            (long long) num_subhistos_33189, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "virt_num_groups",
                            (long long) virt_num_groups_33292, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_groups",
                            (long long) num_groups_30740, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "group_size",
                            (long long) seghist_group_sizze_30738, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "elems_per_thread",
                            (long long) elements_per_thread_33291, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "groups_per_segment",
                            (long long) groups_per_segment_33290, '\n');
                
                struct memblock_device group_res_arr_mem_33295;
                
                group_res_arr_mem_33295.references = NULL;
                if (memblock_alloc_device(ctx, &group_res_arr_mem_33295,
                                          (int64_t) 8 *
                                          (seghist_group_sizze_30738 *
                                           virt_num_groups_33292),
                                          "group_res_arr_mem_33295")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device clusterPointszicounter_mem_33297 =
                                       ctx->clusterPointszicounter_mem_33297;
                unsigned int shared_sizze_37157 = 1;
                unsigned int shared_sizze_37159 = (int64_t) 8 *
                             seghist_group_sizze_30738;
                CUdeviceptr kernel_arg_37161 = mem_31938.mem;
                CUdeviceptr kernel_arg_37162 =
                            defunc_1_map_res_subhistos_mem_33190.mem;
                CUdeviceptr kernel_arg_37163 = group_res_arr_mem_33295.mem;
                CUdeviceptr kernel_arg_37164 =
                            clusterPointszicounter_mem_33297.mem;
                unsigned int shared_offset_37158 = 0;
                unsigned int shared_offset_37160 = 0 + (shared_sizze_37157 +
                                                        (8 -
                                                         shared_sizze_37157 %
                                                         8) % 8);
                
                if ((((((1 && num_groups_30740 != 0) && 1 != 0) && 1 != 0) &&
                      seghist_group_sizze_30738 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_30740;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37154[] = {&ctx->global_failure,
                                                 &shared_offset_37158,
                                                 &shared_offset_37160,
                                                 &defunc_2_reduce_res_29111,
                                                 &num_groups_30740,
                                                 &num_subhistos_33189,
                                                 &groups_per_segment_33290,
                                                 &elements_per_thread_33291,
                                                 &virt_num_groups_33292,
                                                 &threads_per_segment_33294,
                                                 &kernel_arg_37161,
                                                 &kernel_arg_37162,
                                                 &kernel_arg_37163,
                                                 &kernel_arg_37164};
                    int64_t time_start_37155 = 0, time_end_37156 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segred_large_33268");
                        fprintf(ctx->log, "%ld", (long) num_groups_30740);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) seghist_group_sizze_30738);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37155 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegred_large_33268_runs,
                                                  &ctx->clusterPointszisegred_large_33268_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_large_33268,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          seghist_group_sizze_30738,
                                                          1, 1, 0 +
                                                          (shared_sizze_37157 +
                                                           (8 -
                                                            shared_sizze_37157 %
                                                            8) % 8) +
                                                          (shared_sizze_37159 +
                                                           (8 -
                                                            shared_sizze_37159 %
                                                            8) % 8), NULL,
                                                          kernel_args_37154,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37156 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segred_large_33268",
                                time_end_37156 - time_start_37155);
                    }
                }
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
                if (memblock_unref_device(ctx, &group_res_arr_mem_33295,
                                          "group_res_arr_mem_33295") != 0)
                    return 1;
            }
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
        return 1;
    
    int64_t segscan_group_sizze_30753;
    
    segscan_group_sizze_30753 =
        ctx->sizes.clusterPointszisegscan_group_sizze_30752;
    
    int64_t num_groups_30755;
    int32_t max_num_groups_33329;
    
    max_num_groups_33329 = ctx->sizes.clusterPointszisegscan_num_groups_30754;
    num_groups_30755 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(defunc_2_reduce_res_29111,
                                                            segscan_group_sizze_30753),
                                                  sext_i32_i64(max_num_groups_33329))));
    
    struct memblock_device mem_31942;
    
    mem_31942.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31942, defunc_2_reduce_res_29111,
                              "mem_31942")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31944;
    
    mem_31944.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31944, bytes_31937, "mem_31944")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, defunc_2_reduce_res_29111)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_33330;
        
        numThreads_33330 = sdiv_up64(defunc_2_reduce_res_29111,
                                     segscan_group_sizze_30753 * (int64_t) 9) *
            segscan_group_sizze_30753;
        
        int64_t numGroups_33331;
        
        numGroups_33331 = sdiv_up64(defunc_2_reduce_res_29111,
                                    segscan_group_sizze_30753 * (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_33332 =
                               ctx->clusterPointsziid_counter_mem_33332;
        struct memblock_device status_flags_mem_33334;
        
        status_flags_mem_33334.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_33334, numGroups_33331,
                                  "status_flags_mem_33334")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_33336;
        
        aggregates_mem_33336.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_33336, numGroups_33331,
                                  "aggregates_mem_33336")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_33338;
        
        incprefixes_mem_33338.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_33338, numGroups_33331,
                                  "incprefixes_mem_33338")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_33340;
        
        aggregates_mem_33340.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_33340, (int64_t) 8 *
                                  numGroups_33331, "aggregates_mem_33340")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_33342;
        
        incprefixes_mem_33342.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_33342, (int64_t) 8 *
                                  numGroups_33331, "incprefixes_mem_33342")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_33334,
                                         numGroups_33331, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37169 = smax64(smax64((int64_t) 320,
                                                        sdiv_up64(segscan_group_sizze_30753,
                                                                  (int64_t) 8) *
                                                        (int64_t) 8 +
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_30753),
                                                 smax64((int64_t) 9 *
                                                        segscan_group_sizze_30753,
                                                        (int64_t) 9 *
                                                        segscan_group_sizze_30753 *
                                                        (int64_t) 8));
        CUdeviceptr kernel_arg_37171 = mem_31938.mem;
        CUdeviceptr kernel_arg_37172 = mem_31942.mem;
        CUdeviceptr kernel_arg_37173 = mem_31944.mem;
        CUdeviceptr kernel_arg_37174 = clusterPointsziid_counter_mem_33332.mem;
        CUdeviceptr kernel_arg_37175 = status_flags_mem_33334.mem;
        CUdeviceptr kernel_arg_37176 = aggregates_mem_33336.mem;
        CUdeviceptr kernel_arg_37177 = incprefixes_mem_33338.mem;
        CUdeviceptr kernel_arg_37178 = aggregates_mem_33340.mem;
        CUdeviceptr kernel_arg_37179 = incprefixes_mem_33342.mem;
        unsigned int shared_offset_37170 = 0;
        
        if ((((((1 && sdiv_up64(defunc_2_reduce_res_29111,
                                segscan_group_sizze_30753 * (int64_t) 9) !=
                 0) && 1 != 0) && 1 != 0) && segscan_group_sizze_30753 != 0) &&
             1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_29111,
                                      segscan_group_sizze_30753 * (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37166[] = {&ctx->global_failure,
                                         &shared_offset_37170,
                                         &defunc_2_reduce_res_29111,
                                         &kernel_arg_37171, &kernel_arg_37172,
                                         &kernel_arg_37173, &kernel_arg_37174,
                                         &kernel_arg_37175, &kernel_arg_37176,
                                         &kernel_arg_37177, &kernel_arg_37178,
                                         &kernel_arg_37179};
            int64_t time_start_37167 = 0, time_end_37168 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_30758");
                fprintf(ctx->log, "%ld",
                        (long) sdiv_up64(defunc_2_reduce_res_29111,
                                         segscan_group_sizze_30753 *
                                         (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_30753);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37167 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_30758_runs,
                                          &ctx->clusterPointszisegscan_30758_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_30758,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_30753, 1,
                                                  1, 0 + (shared_sizze_37169 +
                                                          (8 -
                                                           shared_sizze_37169 %
                                                           8) % 8), NULL,
                                                  kernel_args_37166, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37168 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_30758", time_end_37168 -
                        time_start_37167);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_33342,
                                  "incprefixes_mem_33342") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_33340,
                                  "aggregates_mem_33340") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_33338,
                                  "incprefixes_mem_33338") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_33336,
                                  "aggregates_mem_33336") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_33334,
                                  "status_flags_mem_33334") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
        return 1;
    
    int64_t segmap_group_sizze_30770;
    
    segmap_group_sizze_30770 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30762;
    
    int64_t segmap_usable_groups_30771 = sdiv_up64(defunc_2_reduce_res_29111,
                                                   segmap_group_sizze_30770);
    struct memblock_device mem_31947;
    
    mem_31947.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31947, defunc_2_reduce_res_29111,
                              "mem_31947")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37183 = mem_31944.mem;
    CUdeviceptr kernel_arg_37184 = mem_31947.mem;
    
    if ((((((1 && segmap_usable_groups_30771 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30770 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30771;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37180[] = {&ctx->global_failure,
                                     &defunc_2_reduce_res_29111,
                                     &kernel_arg_37183, &kernel_arg_37184};
        int64_t time_start_37181 = 0, time_end_37182 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30760");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30771);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30770);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37181 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30760_runs,
                                      &ctx->clusterPointszisegmap_30760_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30760,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30770, 1, 1, 0,
                                              NULL, kernel_args_37180, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37182 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30760", time_end_37182 -
                    time_start_37181);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    
    bool y_29145 = slt64((int64_t) 0, defunc_2_reduce_res_29111);
    bool index_certs_29146;
    
    if (!y_29145) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (int64_t) 0,
                               "] out of bounds for array of shape [",
                               defunc_2_reduce_res_29111, "].",
                               "-> #0  src/cluster.fut:14:3-49\n   #1  src/cluster.fut:52:15-27\n   #2  src/cluster.fut:108:19-120\n   #3  src/cluster.fut:194:13-76\n   #4  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    {
        bool write_tmp_37185 = 1;
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_scalar_to_dev_runs,
                                      &ctx->copy_scalar_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_31947.mem + (int64_t) 0 *
                                            sizeof(bool), &write_tmp_37185,
                                            sizeof(bool)));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    
    int64_t segscan_group_sizze_30779;
    
    segscan_group_sizze_30779 =
        ctx->sizes.clusterPointszisegscan_group_sizze_30778;
    
    int64_t num_groups_30781;
    int32_t max_num_groups_33467;
    
    max_num_groups_33467 = ctx->sizes.clusterPointszisegscan_num_groups_30780;
    num_groups_30781 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(defunc_2_reduce_res_29111,
                                                            segscan_group_sizze_30779),
                                                  sext_i32_i64(max_num_groups_33467))));
    
    struct memblock_device mem_31950;
    
    mem_31950.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31950, defunc_2_reduce_res_29111,
                              "mem_31950")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31952;
    
    mem_31952.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31952, bytes_31937, "mem_31952")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, defunc_2_reduce_res_29111)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_33468;
        
        numThreads_33468 = sdiv_up64(defunc_2_reduce_res_29111,
                                     segscan_group_sizze_30779 * (int64_t) 9) *
            segscan_group_sizze_30779;
        
        int64_t numGroups_33469;
        
        numGroups_33469 = sdiv_up64(defunc_2_reduce_res_29111,
                                    segscan_group_sizze_30779 * (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_33470 =
                               ctx->clusterPointsziid_counter_mem_33470;
        struct memblock_device status_flags_mem_33472;
        
        status_flags_mem_33472.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_33472, numGroups_33469,
                                  "status_flags_mem_33472")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_33474;
        
        aggregates_mem_33474.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_33474, numGroups_33469,
                                  "aggregates_mem_33474")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_33476;
        
        incprefixes_mem_33476.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_33476, numGroups_33469,
                                  "incprefixes_mem_33476")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_33478;
        
        aggregates_mem_33478.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_33478, (int64_t) 8 *
                                  numGroups_33469, "aggregates_mem_33478")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_33480;
        
        incprefixes_mem_33480.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_33480, (int64_t) 8 *
                                  numGroups_33469, "incprefixes_mem_33480")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_33472,
                                         numGroups_33469, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37190 = smax64(smax64((int64_t) 320,
                                                        sdiv_up64(segscan_group_sizze_30779,
                                                                  (int64_t) 8) *
                                                        (int64_t) 8 +
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_30779),
                                                 smax64((int64_t) 9 *
                                                        segscan_group_sizze_30779,
                                                        (int64_t) 9 *
                                                        segscan_group_sizze_30779 *
                                                        (int64_t) 8));
        CUdeviceptr kernel_arg_37192 = mem_31947.mem;
        CUdeviceptr kernel_arg_37193 = mem_31950.mem;
        CUdeviceptr kernel_arg_37194 = mem_31952.mem;
        CUdeviceptr kernel_arg_37195 = clusterPointsziid_counter_mem_33470.mem;
        CUdeviceptr kernel_arg_37196 = status_flags_mem_33472.mem;
        CUdeviceptr kernel_arg_37197 = aggregates_mem_33474.mem;
        CUdeviceptr kernel_arg_37198 = incprefixes_mem_33476.mem;
        CUdeviceptr kernel_arg_37199 = aggregates_mem_33478.mem;
        CUdeviceptr kernel_arg_37200 = incprefixes_mem_33480.mem;
        unsigned int shared_offset_37191 = 0;
        
        if ((((((1 && sdiv_up64(defunc_2_reduce_res_29111,
                                segscan_group_sizze_30779 * (int64_t) 9) !=
                 0) && 1 != 0) && 1 != 0) && segscan_group_sizze_30779 != 0) &&
             1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_29111,
                                      segscan_group_sizze_30779 * (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37187[] = {&ctx->global_failure,
                                         &shared_offset_37191,
                                         &defunc_2_reduce_res_29111,
                                         &kernel_arg_37192, &kernel_arg_37193,
                                         &kernel_arg_37194, &kernel_arg_37195,
                                         &kernel_arg_37196, &kernel_arg_37197,
                                         &kernel_arg_37198, &kernel_arg_37199,
                                         &kernel_arg_37200};
            int64_t time_start_37188 = 0, time_end_37189 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_30784");
                fprintf(ctx->log, "%ld",
                        (long) sdiv_up64(defunc_2_reduce_res_29111,
                                         segscan_group_sizze_30779 *
                                         (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_30779);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37188 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_30784_runs,
                                          &ctx->clusterPointszisegscan_30784_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_30784,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_30779, 1,
                                                  1, 0 + (shared_sizze_37190 +
                                                          (8 -
                                                           shared_sizze_37190 %
                                                           8) % 8), NULL,
                                                  kernel_args_37187, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37189 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_30784", time_end_37189 -
                        time_start_37188);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_33480,
                                  "incprefixes_mem_33480") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_33478,
                                  "aggregates_mem_33478") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_33476,
                                  "incprefixes_mem_33476") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_33474,
                                  "aggregates_mem_33474") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_33472,
                                  "status_flags_mem_33472") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
        return 1;
    
    int64_t segmap_group_sizze_30870;
    
    segmap_group_sizze_30870 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30804;
    
    int64_t segmap_usable_groups_30871 = sdiv_up64(defunc_2_reduce_res_29111,
                                                   segmap_group_sizze_30870);
    struct memblock_device mem_31955;
    
    mem_31955.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31955, bytes_31937, "mem_31955")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t bytes_31956 = (int64_t) 4 * defunc_2_reduce_res_29111;
    struct memblock_device mem_31957;
    
    mem_31957.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31957, bytes_31956, "mem_31957")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31959;
    
    mem_31959.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31959, bytes_31956, "mem_31959")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37204 = pos_mem_31827.mem;
    CUdeviceptr kernel_arg_37205 = mem_31833.mem;
    CUdeviceptr kernel_arg_37206 = mem_31891.mem;
    CUdeviceptr kernel_arg_37207 = mem_31914.mem;
    CUdeviceptr kernel_arg_37208 = mem_31928.mem;
    CUdeviceptr kernel_arg_37209 = mem_31944.mem;
    CUdeviceptr kernel_arg_37210 = mem_31952.mem;
    CUdeviceptr kernel_arg_37211 = mem_31955.mem;
    CUdeviceptr kernel_arg_37212 = mem_31957.mem;
    CUdeviceptr kernel_arg_37213 = mem_31959.mem;
    
    if ((((((1 && segmap_usable_groups_30871 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30870 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30871;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37201[] = {&ctx->global_failure,
                                     &ctx->failure_is_an_option,
                                     &ctx->global_failure_args, &n_28846,
                                     &radius_28848, &defunc_0_f_res_28855,
                                     &defunc_2_reduce_res_29111, &bytes_31829,
                                     &kernel_arg_37204, &kernel_arg_37205,
                                     &kernel_arg_37206, &kernel_arg_37207,
                                     &kernel_arg_37208, &kernel_arg_37209,
                                     &kernel_arg_37210, &kernel_arg_37211,
                                     &kernel_arg_37212, &kernel_arg_37213};
        int64_t time_start_37202 = 0, time_end_37203 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30802");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30871);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30870);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37202 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30802_runs,
                                      &ctx->clusterPointszisegmap_30802_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30802,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30870, 1, 1, 0,
                                              NULL, kernel_args_37201, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37203 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30802", time_end_37203 -
                    time_start_37202);
        }
    }
    ctx->failure_is_an_option = 1;
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
        return 1;
    
    struct memblock_device mem_31961;
    
    mem_31961.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31961, bytes_31937, "mem_31961")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhiota_i64(ctx, mem_31961, defunc_2_reduce_res_29111,
                                 (int64_t) 0, (int64_t) 1) != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool cond_29342 = defunc_2_reduce_res_29111 == (int64_t) 0;
    int32_t iters_29343;
    
    if (cond_29342) {
        iters_29343 = 0;
    } else {
        iters_29343 = 32;
    }
    
    bool loop_nonempty_29344 = slt32(0, iters_29343);
    int64_t i_29345 = sub64(defunc_2_reduce_res_29111, (int64_t) 1);
    bool x_29346 = sle64((int64_t) 0, i_29345);
    bool y_29347 = slt64(i_29345, defunc_2_reduce_res_29111);
    bool bounds_check_29348 = x_29346 && y_29347;
    bool loop_not_taken_29349 = !loop_nonempty_29344;
    bool protect_assert_disj_29350 = bounds_check_29348 || loop_not_taken_29349;
    bool index_certs_29351;
    
    if (!protect_assert_disj_29350) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", i_29345,
                               "] out of bounds for array of shape [",
                               defunc_2_reduce_res_29111, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:25:24-35\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:53:31-62\n   #3  /prelude/functional.fut:9:42-44\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:59:3-61:47\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:68:3-51\n   #6  /prelude/functional.fut:9:42-44\n   #7  src/cluster.fut:125:21-127:59\n   #8  src/cluster.fut:194:13-76\n   #9  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t segscan_group_sizze_30939;
    
    segscan_group_sizze_30939 =
        ctx->sizes.clusterPointszisegscan_group_sizze_30938;
    
    int64_t num_groups_30941;
    int32_t max_num_groups_33606;
    
    max_num_groups_33606 = ctx->sizes.clusterPointszisegscan_num_groups_30940;
    num_groups_30941 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(defunc_2_reduce_res_29111,
                                                            segscan_group_sizze_30939),
                                                  sext_i32_i64(max_num_groups_33606))));
    
    int64_t segmap_group_sizze_30949;
    
    segmap_group_sizze_30949 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30948;
    
    int64_t segmap_usable_groups_30950 =
            sdiv_up_safe64(defunc_2_reduce_res_29111, segmap_group_sizze_30949);
    struct memblock_device mem_31978;
    
    mem_31978.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31978, bytes_31937, "mem_31978")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31980;
    
    mem_31980.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31980, bytes_31937, "mem_31980")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31982;
    
    mem_31982.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31982, bytes_31937, "mem_31982")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31984;
    
    mem_31984.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31984, bytes_31937, "mem_31984")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_31986;
    
    mem_31986.references = NULL;
    if (memblock_alloc_device(ctx, &mem_31986, bytes_31956, "mem_31986")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device defunc_0_f_res_mem_32000;
    
    defunc_0_f_res_mem_32000.references = NULL;
    
    struct memblock_device defunc_0_f_res_mem_32005;
    
    defunc_0_f_res_mem_32005.references = NULL;
    
    struct memblock_device mem_param_31966;
    
    mem_param_31966.references = NULL;
    
    struct memblock_device mem_param_31971;
    
    mem_param_31971.references = NULL;
    if (memblock_set_device(ctx, &mem_param_31966, &mem_31955, "mem_31955") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &mem_param_31971, &mem_31961, "mem_31961") !=
        0)
        return 1;
    for (int32_t i_29354 = 0; i_29354 < iters_29343; i_29354++) {
        int32_t defunc_2_radix_sort_step_arg_29357 = mul32(2, i_29354);
        int32_t defunc_0_get_bit_arg_29358 = add32(1,
                                                   defunc_2_radix_sort_step_arg_29357);
        int64_t i32_res_29359 = sext_i32_i64(defunc_0_get_bit_arg_29358);
        int64_t i32_res_29360 =
                sext_i32_i64(defunc_2_radix_sort_step_arg_29357);
        
        if (slt64((int64_t) 0, defunc_2_reduce_res_29111)) {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegScan");
            
            int64_t numThreads_33611;
            
            numThreads_33611 = sdiv_up64(defunc_2_reduce_res_29111,
                                         segscan_group_sizze_30939 *
                                         (int64_t) 9) *
                segscan_group_sizze_30939;
            
            int64_t numGroups_33612;
            
            numGroups_33612 = sdiv_up64(defunc_2_reduce_res_29111,
                                        segscan_group_sizze_30939 *
                                        (int64_t) 9);
            
            struct memblock_device clusterPointsziid_counter_mem_33613 =
                                   ctx->clusterPointsziid_counter_mem_33613;
            struct memblock_device status_flags_mem_33615;
            
            status_flags_mem_33615.references = NULL;
            if (memblock_alloc_device(ctx, &status_flags_mem_33615,
                                      numGroups_33612,
                                      "status_flags_mem_33615")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_33617;
            
            aggregates_mem_33617.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_33617, (int64_t) 8 *
                                      numGroups_33612,
                                      "aggregates_mem_33617")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_33619;
            
            incprefixes_mem_33619.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_33619, (int64_t) 8 *
                                      numGroups_33612,
                                      "incprefixes_mem_33619")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_33621;
            
            aggregates_mem_33621.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_33621, (int64_t) 8 *
                                      numGroups_33612,
                                      "aggregates_mem_33621")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_33623;
            
            incprefixes_mem_33623.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_33623, (int64_t) 8 *
                                      numGroups_33612,
                                      "incprefixes_mem_33623")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_33625;
            
            aggregates_mem_33625.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_33625, (int64_t) 8 *
                                      numGroups_33612,
                                      "aggregates_mem_33625")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_33627;
            
            incprefixes_mem_33627.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_33627, (int64_t) 8 *
                                      numGroups_33612,
                                      "incprefixes_mem_33627")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_33629;
            
            aggregates_mem_33629.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_33629, (int64_t) 8 *
                                      numGroups_33612,
                                      "aggregates_mem_33629")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_33631;
            
            incprefixes_mem_33631.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_33631, (int64_t) 8 *
                                      numGroups_33612,
                                      "incprefixes_mem_33631")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_33615,
                                             numGroups_33612, (int8_t) 0) !=
                0) {
                err = 1;
                goto cleanup;
            }
            
            unsigned int shared_sizze_37218 = smax64(smax64((int64_t) 1056,
                                                            sdiv_up64(sdiv_up64(sdiv_up64((int64_t) 8 *
                                                                                          segscan_group_sizze_30939,
                                                                                          (int64_t) 8) *
                                                                                (int64_t) 8 +
                                                                                (int64_t) 8 *
                                                                                segscan_group_sizze_30939,
                                                                                (int64_t) 8) *
                                                                      (int64_t) 8 +
                                                                      (int64_t) 8 *
                                                                      segscan_group_sizze_30939,
                                                                      (int64_t) 8) *
                                                            (int64_t) 8 +
                                                            (int64_t) 8 *
                                                            segscan_group_sizze_30939),
                                                     smax64(smax64(smax64((int64_t) 9 *
                                                                          segscan_group_sizze_30939 *
                                                                          (int64_t) 8,
                                                                          (int64_t) 9 *
                                                                          segscan_group_sizze_30939 *
                                                                          (int64_t) 8),
                                                                   (int64_t) 9 *
                                                                   segscan_group_sizze_30939 *
                                                                   (int64_t) 8),
                                                            (int64_t) 9 *
                                                            segscan_group_sizze_30939 *
                                                            (int64_t) 8));
            CUdeviceptr kernel_arg_37220 = mem_param_31966.mem;
            CUdeviceptr kernel_arg_37221 = mem_31978.mem;
            CUdeviceptr kernel_arg_37222 = mem_31980.mem;
            CUdeviceptr kernel_arg_37223 = mem_31982.mem;
            CUdeviceptr kernel_arg_37224 = mem_31984.mem;
            CUdeviceptr kernel_arg_37225 = mem_31986.mem;
            CUdeviceptr kernel_arg_37226 =
                        clusterPointsziid_counter_mem_33613.mem;
            CUdeviceptr kernel_arg_37227 = status_flags_mem_33615.mem;
            CUdeviceptr kernel_arg_37228 = aggregates_mem_33617.mem;
            CUdeviceptr kernel_arg_37229 = incprefixes_mem_33619.mem;
            CUdeviceptr kernel_arg_37230 = aggregates_mem_33621.mem;
            CUdeviceptr kernel_arg_37231 = incprefixes_mem_33623.mem;
            CUdeviceptr kernel_arg_37232 = aggregates_mem_33625.mem;
            CUdeviceptr kernel_arg_37233 = incprefixes_mem_33627.mem;
            CUdeviceptr kernel_arg_37234 = aggregates_mem_33629.mem;
            CUdeviceptr kernel_arg_37235 = incprefixes_mem_33631.mem;
            unsigned int shared_offset_37219 = 0;
            
            if ((((((1 && sdiv_up64(defunc_2_reduce_res_29111,
                                    segscan_group_sizze_30939 * (int64_t) 9) !=
                     0) && 1 != 0) && 1 != 0) && segscan_group_sizze_30939 !=
                  0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_29111,
                                          segscan_group_sizze_30939 *
                                          (int64_t) 9);
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37215[] = {&ctx->global_failure,
                                             &shared_offset_37219,
                                             &defunc_2_reduce_res_29111,
                                             &i32_res_29359, &i32_res_29360,
                                             &kernel_arg_37220,
                                             &kernel_arg_37221,
                                             &kernel_arg_37222,
                                             &kernel_arg_37223,
                                             &kernel_arg_37224,
                                             &kernel_arg_37225,
                                             &kernel_arg_37226,
                                             &kernel_arg_37227,
                                             &kernel_arg_37228,
                                             &kernel_arg_37229,
                                             &kernel_arg_37230,
                                             &kernel_arg_37231,
                                             &kernel_arg_37232,
                                             &kernel_arg_37233,
                                             &kernel_arg_37234,
                                             &kernel_arg_37235};
                int64_t time_start_37216 = 0, time_end_37217 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segscan_30944");
                    fprintf(ctx->log, "%ld",
                            (long) sdiv_up64(defunc_2_reduce_res_29111,
                                             segscan_group_sizze_30939 *
                                             (int64_t) 9));
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segscan_group_sizze_30939);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37216 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegscan_30944_runs,
                                              &ctx->clusterPointszisegscan_30944_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_30944,
                                                      grid[0], grid[1], grid[2],
                                                      segscan_group_sizze_30939,
                                                      1, 1, 0 +
                                                      (shared_sizze_37218 + (8 -
                                                                             shared_sizze_37218 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_37215, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37217 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segscan_30944", time_end_37217 -
                            time_start_37216);
                }
            }
            if (memblock_unref_device(ctx, &incprefixes_mem_33631,
                                      "incprefixes_mem_33631") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_33629,
                                      "aggregates_mem_33629") != 0)
                return 1;
            if (memblock_unref_device(ctx, &incprefixes_mem_33627,
                                      "incprefixes_mem_33627") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_33625,
                                      "aggregates_mem_33625") != 0)
                return 1;
            if (memblock_unref_device(ctx, &incprefixes_mem_33623,
                                      "incprefixes_mem_33623") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_33621,
                                      "aggregates_mem_33621") != 0)
                return 1;
            if (memblock_unref_device(ctx, &incprefixes_mem_33619,
                                      "incprefixes_mem_33619") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_33617,
                                      "aggregates_mem_33617") != 0)
                return 1;
            if (memblock_unref_device(ctx, &status_flags_mem_33615,
                                      "status_flags_mem_33615") != 0)
                return 1;
        }
        
        int64_t read_res_37236;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37236, mem_31978.mem +
                                                i_29345 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t last_res_29415 = read_res_37236;
        int64_t read_res_37237;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37237, mem_31980.mem +
                                                i_29345 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t last_res_29416 = read_res_37237;
        int64_t read_res_37238;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37238, mem_31982.mem +
                                                i_29345 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t last_res_29417 = read_res_37238;
        struct memblock_device mem_31988;
        
        mem_31988.references = NULL;
        if (memblock_alloc_device(ctx, &mem_31988, bytes_31937, "mem_31988")) {
            err = 1;
            goto cleanup;
        }
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_dev_to_dev_runs,
                                          &ctx->copy_dev_to_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_31988.mem + (int64_t) 0,
                                            mem_param_31966.mem + (int64_t) 0,
                                            defunc_2_reduce_res_29111 *
                                            (int64_t) 8));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        
        struct memblock_device mem_31990;
        
        mem_31990.references = NULL;
        if (memblock_alloc_device(ctx, &mem_31990, bytes_31937, "mem_31990")) {
            err = 1;
            goto cleanup;
        }
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_dev_to_dev_runs,
                                          &ctx->copy_dev_to_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_31990.mem + (int64_t) 0,
                                            mem_param_31971.mem + (int64_t) 0,
                                            defunc_2_reduce_res_29111 *
                                            (int64_t) 8));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        CUdeviceptr kernel_arg_37242 = mem_param_31966.mem;
        CUdeviceptr kernel_arg_37243 = mem_param_31971.mem;
        CUdeviceptr kernel_arg_37244 = mem_31978.mem;
        CUdeviceptr kernel_arg_37245 = mem_31980.mem;
        CUdeviceptr kernel_arg_37246 = mem_31982.mem;
        CUdeviceptr kernel_arg_37247 = mem_31984.mem;
        CUdeviceptr kernel_arg_37248 = mem_31986.mem;
        CUdeviceptr kernel_arg_37249 = mem_31988.mem;
        CUdeviceptr kernel_arg_37250 = mem_31990.mem;
        
        if ((((((1 && segmap_usable_groups_30950 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_30949 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = segmap_usable_groups_30950;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37239[] = {&ctx->global_failure,
                                         &defunc_2_reduce_res_29111,
                                         &last_res_29415, &last_res_29416,
                                         &last_res_29417, &kernel_arg_37242,
                                         &kernel_arg_37243, &kernel_arg_37244,
                                         &kernel_arg_37245, &kernel_arg_37246,
                                         &kernel_arg_37247, &kernel_arg_37248,
                                         &kernel_arg_37249, &kernel_arg_37250};
            int64_t time_start_37240 = 0, time_end_37241 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segmap_30946");
                fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30950);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30949);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37240 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegmap_30946_runs,
                                          &ctx->clusterPointszisegmap_30946_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30946,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_30949, 1,
                                                  1, 0, NULL, kernel_args_37239,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37241 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segmap_30946", time_end_37241 -
                        time_start_37240);
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        
        struct memblock_device mem_param_tmp_33607;
        
        mem_param_tmp_33607.references = NULL;
        if (memblock_set_device(ctx, &mem_param_tmp_33607, &mem_31988,
                                "mem_31988") != 0)
            return 1;
        
        struct memblock_device mem_param_tmp_33608;
        
        mem_param_tmp_33608.references = NULL;
        if (memblock_set_device(ctx, &mem_param_tmp_33608, &mem_31990,
                                "mem_31990") != 0)
            return 1;
        if (memblock_set_device(ctx, &mem_param_31966, &mem_param_tmp_33607,
                                "mem_param_tmp_33607") != 0)
            return 1;
        if (memblock_set_device(ctx, &mem_param_31971, &mem_param_tmp_33608,
                                "mem_param_tmp_33608") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_33608,
                                  "mem_param_tmp_33608") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_33607,
                                  "mem_param_tmp_33607") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31990, "mem_31990") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31988, "mem_31988") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &defunc_0_f_res_mem_32000, &mem_param_31966,
                            "mem_param_31966") != 0)
        return 1;
    if (memblock_set_device(ctx, &defunc_0_f_res_mem_32005, &mem_param_31971,
                            "mem_param_31971") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
        return 1;
    
    int64_t segred_group_sizze_30953;
    
    segred_group_sizze_30953 =
        ctx->sizes.clusterPointszisegred_group_sizze_30952;
    
    int64_t num_groups_30955;
    int32_t max_num_groups_33829;
    
    max_num_groups_33829 = ctx->sizes.clusterPointszisegred_num_groups_30954;
    num_groups_30955 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(defunc_2_reduce_res_29111,
                                                            segred_group_sizze_30953),
                                                  sext_i32_i64(max_num_groups_33829))));
    
    struct memblock_device mem_32008;
    
    mem_32008.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32008, (int64_t) 4, "mem_32008")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32010;
    
    mem_32010.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32010, bytes_31956, "mem_32010")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32012;
    
    mem_32012.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32012, bytes_31956, "mem_32012")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device clusterPointszicounter_mem_33830 =
                           ctx->clusterPointszicounter_mem_33830;
    struct memblock_device group_res_arr_mem_33832;
    
    group_res_arr_mem_33832.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_33832, (int64_t) 4 *
                              (segred_group_sizze_30953 * num_groups_30955),
                              "group_res_arr_mem_33832")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t num_threads_33834;
    
    num_threads_33834 = num_groups_30955 * segred_group_sizze_30953;
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegRed");
    
    unsigned int shared_sizze_37255 = (int64_t) 4 * segred_group_sizze_30953;
    unsigned int shared_sizze_37257 = 1;
    CUdeviceptr kernel_arg_37259 = mem_31957.mem;
    CUdeviceptr kernel_arg_37260 = mem_31959.mem;
    CUdeviceptr kernel_arg_37261 = defunc_0_f_res_mem_32005.mem;
    CUdeviceptr kernel_arg_37262 = mem_32008.mem;
    CUdeviceptr kernel_arg_37263 = mem_32010.mem;
    CUdeviceptr kernel_arg_37264 = mem_32012.mem;
    CUdeviceptr kernel_arg_37265 = clusterPointszicounter_mem_33830.mem;
    CUdeviceptr kernel_arg_37266 = group_res_arr_mem_33832.mem;
    unsigned int shared_offset_37256 = 0;
    unsigned int shared_offset_37258 = 0 + (shared_sizze_37255 + (8 -
                                                                  shared_sizze_37255 %
                                                                  8) % 8);
    
    if ((((((1 && num_groups_30955 != 0) && 1 != 0) && 1 != 0) &&
          segred_group_sizze_30953 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_30955;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37252[] = {&ctx->global_failure,
                                     &ctx->failure_is_an_option,
                                     &ctx->global_failure_args,
                                     &shared_offset_37256, &shared_offset_37258,
                                     &defunc_2_reduce_res_29111,
                                     &num_groups_30955, &num_threads_33834,
                                     &kernel_arg_37259, &kernel_arg_37260,
                                     &kernel_arg_37261, &kernel_arg_37262,
                                     &kernel_arg_37263, &kernel_arg_37264,
                                     &kernel_arg_37265, &kernel_arg_37266};
        int64_t time_start_37253 = 0, time_end_37254 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segred_nonseg_30962");
            fprintf(ctx->log, "%ld", (long) num_groups_30955);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segred_group_sizze_30953);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37253 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegred_nonseg_30962_runs,
                                      &ctx->clusterPointszisegred_nonseg_30962_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_30962,
                                              grid[0], grid[1], grid[2],
                                              segred_group_sizze_30953, 1, 1,
                                              0 + (shared_sizze_37255 + (8 -
                                                                         shared_sizze_37255 %
                                                                         8) %
                                                   8) + (shared_sizze_37257 +
                                                         (8 -
                                                          shared_sizze_37257 %
                                                          8) % 8), NULL,
                                              kernel_args_37252, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37254 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segred_nonseg_30962", time_end_37254 -
                    time_start_37253);
        }
    }
    ctx->failure_is_an_option = 1;
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
        return 1;
    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                              "defunc_0_f_res_mem_32005") != 0)
        return 1;
    
    int32_t read_res_37267;
    
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->copy_scalar_from_dev_runs,
                                      &ctx->copy_scalar_from_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37267, mem_32008.mem +
                                            (int64_t) 0 * sizeof(int32_t),
                                            sizeof(int32_t)));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    if (futhark_context_sync(ctx) != 0)
        return 1;
    
    int32_t defunc_0_f_res_29454 = read_res_37267;
    
    if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
        return 1;
    
    int64_t defunc_0_f_res_29473 = sext_i32_i64(defunc_0_f_res_29454);
    bool empty_slice_29474 = defunc_0_f_res_29473 == (int64_t) 0;
    int64_t m_29475 = sub64(defunc_0_f_res_29473, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_29476 = sle64((int64_t) 0, m_29475);
    bool i_p_m_t_s_leq_w_29477 = slt64(m_29475, defunc_2_reduce_res_29111);
    bool i_lte_j_29478 = sle64((int64_t) 0, defunc_0_f_res_29473);
    bool y_29479 = zzero_leq_i_p_m_t_s_29476 && i_p_m_t_s_leq_w_29477;
    bool y_29480 = i_lte_j_29478 && y_29479;
    bool ok_or_empty_29481 = empty_slice_29474 || y_29480;
    bool index_certs_29482;
    
    if (!ok_or_empty_29481) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (int64_t) 0, ":",
                               defunc_0_f_res_29473,
                               "] out of bounds for array of shape [",
                               defunc_2_reduce_res_29111, "].",
                               "-> #0  /prelude/array.fut:41:44-49\n   #1  src/cluster.fut:129:40-66\n   #2  src/cluster.fut:194:13-76\n   #3  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                  "group_res_arr_mem_33832") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31971, "mem_param_31971") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31966, "mem_param_31966") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                  "defunc_0_f_res_mem_32005") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                  "defunc_0_f_res_mem_32000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t segmap_group_sizze_30972;
    
    segmap_group_sizze_30972 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30966;
    
    int64_t segmap_usable_groups_30973 = sdiv_up64(defunc_0_f_res_29473,
                                                   segmap_group_sizze_30972);
    int64_t bytes_32014 = (int64_t) 8 * defunc_0_f_res_29473;
    struct memblock_device mem_32015;
    
    mem_32015.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32015, bytes_32014, "mem_32015")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37271 = mem_32010.mem;
    CUdeviceptr kernel_arg_37272 = mem_32015.mem;
    
    if ((((((1 && segmap_usable_groups_30973 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30972 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30973;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37268[] = {&ctx->global_failure,
                                     &defunc_0_f_res_29473, &kernel_arg_37271,
                                     &kernel_arg_37272};
        int64_t time_start_37269 = 0, time_end_37270 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30964");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30973);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30972);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37269 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30964_runs,
                                      &ctx->clusterPointszisegmap_30964_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30964,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30972, 1, 1, 0,
                                              NULL, kernel_args_37268, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37270 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30964", time_end_37270 -
                    time_start_37269);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    
    int64_t segmap_group_sizze_30988;
    
    segmap_group_sizze_30988 =
        ctx->sizes.clusterPointszisegmap_group_sizze_30980;
    
    int64_t segmap_usable_groups_30989 = sdiv_up64(defunc_0_f_res_29473,
                                                   segmap_group_sizze_30988);
    struct memblock_device mem_32018;
    
    mem_32018.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32018, defunc_0_f_res_29473,
                              "mem_32018")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37276 = mem_32015.mem;
    CUdeviceptr kernel_arg_37277 = mem_32018.mem;
    
    if ((((((1 && segmap_usable_groups_30989 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_30988 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_30989;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37273[] = {&ctx->global_failure,
                                     &defunc_0_f_res_29473, &kernel_arg_37276,
                                     &kernel_arg_37277};
        int64_t time_start_37274 = 0, time_end_37275 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_30978");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_30989);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_30988);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37274 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_30978_runs,
                                      &ctx->clusterPointszisegmap_30978_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_30978,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_30988, 1, 1, 0,
                                              NULL, kernel_args_37273, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37275 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_30978", time_end_37275 -
                    time_start_37274);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
        return 1;
    
    bool y_29494 = slt64((int64_t) 0, defunc_0_f_res_29473);
    bool index_certs_29495;
    
    if (!y_29494) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (int64_t) 0,
                               "] out of bounds for array of shape [",
                               defunc_0_f_res_29473, "].",
                               "-> #0  src/cluster.fut:14:3-49\n   #1  src/cluster.fut:60:15-41\n   #2  src/cluster.fut:129:15-68\n   #3  src/cluster.fut:194:13-76\n   #4  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                  "group_res_arr_mem_33832") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31971, "mem_param_31971") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31966, "mem_param_31966") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                  "defunc_0_f_res_mem_32005") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                  "defunc_0_f_res_mem_32000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    {
        bool write_tmp_37278 = 1;
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_scalar_to_dev_runs,
                                      &ctx->copy_scalar_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_32018.mem + (int64_t) 0 *
                                            sizeof(bool), &write_tmp_37278,
                                            sizeof(bool)));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    
    int64_t segscan_group_sizze_30997;
    
    segscan_group_sizze_30997 =
        ctx->sizes.clusterPointszisegscan_group_sizze_30996;
    
    int64_t num_groups_30999;
    int32_t max_num_groups_33870;
    
    max_num_groups_33870 = ctx->sizes.clusterPointszisegscan_num_groups_30998;
    num_groups_30999 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(defunc_0_f_res_29473,
                                                            segscan_group_sizze_30997),
                                                  sext_i32_i64(max_num_groups_33870))));
    
    struct memblock_device mem_32021;
    
    mem_32021.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32021, defunc_0_f_res_29473,
                              "mem_32021")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32023;
    
    mem_32023.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32023, bytes_32014, "mem_32023")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, defunc_0_f_res_29473)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_33871;
        
        numThreads_33871 = sdiv_up64(defunc_0_f_res_29473,
                                     segscan_group_sizze_30997 * (int64_t) 9) *
            segscan_group_sizze_30997;
        
        int64_t numGroups_33872;
        
        numGroups_33872 = sdiv_up64(defunc_0_f_res_29473,
                                    segscan_group_sizze_30997 * (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_33873 =
                               ctx->clusterPointsziid_counter_mem_33873;
        struct memblock_device status_flags_mem_33875;
        
        status_flags_mem_33875.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_33875, numGroups_33872,
                                  "status_flags_mem_33875")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_33877;
        
        aggregates_mem_33877.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_33877, numGroups_33872,
                                  "aggregates_mem_33877")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_33879;
        
        incprefixes_mem_33879.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_33879, numGroups_33872,
                                  "incprefixes_mem_33879")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_33881;
        
        aggregates_mem_33881.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_33881, (int64_t) 8 *
                                  numGroups_33872, "aggregates_mem_33881")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_33883;
        
        incprefixes_mem_33883.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_33883, (int64_t) 8 *
                                  numGroups_33872, "incprefixes_mem_33883")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_33875,
                                         numGroups_33872, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37283 = smax64(smax64((int64_t) 320,
                                                        sdiv_up64(segscan_group_sizze_30997,
                                                                  (int64_t) 8) *
                                                        (int64_t) 8 +
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_30997),
                                                 smax64((int64_t) 9 *
                                                        segscan_group_sizze_30997,
                                                        (int64_t) 9 *
                                                        segscan_group_sizze_30997 *
                                                        (int64_t) 8));
        CUdeviceptr kernel_arg_37285 = mem_32018.mem;
        CUdeviceptr kernel_arg_37286 = mem_32021.mem;
        CUdeviceptr kernel_arg_37287 = mem_32023.mem;
        CUdeviceptr kernel_arg_37288 = clusterPointsziid_counter_mem_33873.mem;
        CUdeviceptr kernel_arg_37289 = status_flags_mem_33875.mem;
        CUdeviceptr kernel_arg_37290 = aggregates_mem_33877.mem;
        CUdeviceptr kernel_arg_37291 = incprefixes_mem_33879.mem;
        CUdeviceptr kernel_arg_37292 = aggregates_mem_33881.mem;
        CUdeviceptr kernel_arg_37293 = incprefixes_mem_33883.mem;
        unsigned int shared_offset_37284 = 0;
        
        if ((((((1 && sdiv_up64(defunc_0_f_res_29473,
                                segscan_group_sizze_30997 * (int64_t) 9) !=
                 0) && 1 != 0) && 1 != 0) && segscan_group_sizze_30997 != 0) &&
             1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(defunc_0_f_res_29473,
                                      segscan_group_sizze_30997 * (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37280[] = {&ctx->global_failure,
                                         &shared_offset_37284,
                                         &defunc_0_f_res_29473,
                                         &kernel_arg_37285, &kernel_arg_37286,
                                         &kernel_arg_37287, &kernel_arg_37288,
                                         &kernel_arg_37289, &kernel_arg_37290,
                                         &kernel_arg_37291, &kernel_arg_37292,
                                         &kernel_arg_37293};
            int64_t time_start_37281 = 0, time_end_37282 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_31002");
                fprintf(ctx->log, "%ld", (long) sdiv_up64(defunc_0_f_res_29473,
                                                          segscan_group_sizze_30997 *
                                                          (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_30997);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37281 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_31002_runs,
                                          &ctx->clusterPointszisegscan_31002_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31002,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_30997, 1,
                                                  1, 0 + (shared_sizze_37283 +
                                                          (8 -
                                                           shared_sizze_37283 %
                                                           8) % 8), NULL,
                                                  kernel_args_37280, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37282 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_31002", time_end_37282 -
                        time_start_37281);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_33883,
                                  "incprefixes_mem_33883") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_33881,
                                  "aggregates_mem_33881") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_33879,
                                  "incprefixes_mem_33879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_33877,
                                  "aggregates_mem_33877") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_33875,
                                  "status_flags_mem_33875") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
        return 1;
    
    int64_t segscan_group_sizze_31005;
    
    segscan_group_sizze_31005 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31004;
    
    int64_t num_groups_31007;
    int32_t max_num_groups_34003;
    
    max_num_groups_34003 = ctx->sizes.clusterPointszisegscan_num_groups_31006;
    num_groups_31007 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(defunc_0_f_res_29473,
                                                            segscan_group_sizze_31005),
                                                  sext_i32_i64(max_num_groups_34003))));
    
    struct memblock_device mem_32026;
    
    mem_32026.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32026, bytes_32014, "mem_32026")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, defunc_0_f_res_29473)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_34004;
        
        numThreads_34004 = sdiv_up64(defunc_0_f_res_29473,
                                     segscan_group_sizze_31005 * (int64_t) 9) *
            segscan_group_sizze_31005;
        
        int64_t numGroups_34005;
        
        numGroups_34005 = sdiv_up64(defunc_0_f_res_29473,
                                    segscan_group_sizze_31005 * (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_34006 =
                               ctx->clusterPointsziid_counter_mem_34006;
        struct memblock_device status_flags_mem_34008;
        
        status_flags_mem_34008.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_34008, numGroups_34005,
                                  "status_flags_mem_34008")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_34010;
        
        aggregates_mem_34010.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_34010, (int64_t) 8 *
                                  numGroups_34005, "aggregates_mem_34010")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_34012;
        
        incprefixes_mem_34012.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_34012, (int64_t) 8 *
                                  numGroups_34005, "incprefixes_mem_34012")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_34008,
                                         numGroups_34005, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37298 = smax64(smax64((int64_t) 288,
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_31005),
                                                 (int64_t) 9 *
                                                 segscan_group_sizze_31005 *
                                                 (int64_t) 8);
        CUdeviceptr kernel_arg_37300 = mem_32018.mem;
        CUdeviceptr kernel_arg_37301 = mem_32026.mem;
        CUdeviceptr kernel_arg_37302 = clusterPointsziid_counter_mem_34006.mem;
        CUdeviceptr kernel_arg_37303 = status_flags_mem_34008.mem;
        CUdeviceptr kernel_arg_37304 = aggregates_mem_34010.mem;
        CUdeviceptr kernel_arg_37305 = incprefixes_mem_34012.mem;
        unsigned int shared_offset_37299 = 0;
        
        if ((((((1 && sdiv_up64(defunc_0_f_res_29473,
                                segscan_group_sizze_31005 * (int64_t) 9) !=
                 0) && 1 != 0) && 1 != 0) && segscan_group_sizze_31005 != 0) &&
             1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(defunc_0_f_res_29473,
                                      segscan_group_sizze_31005 * (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37295[] = {&ctx->global_failure,
                                         &shared_offset_37299,
                                         &defunc_0_f_res_29473,
                                         &kernel_arg_37300, &kernel_arg_37301,
                                         &kernel_arg_37302, &kernel_arg_37303,
                                         &kernel_arg_37304, &kernel_arg_37305};
            int64_t time_start_37296 = 0, time_end_37297 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_31010");
                fprintf(ctx->log, "%ld", (long) sdiv_up64(defunc_0_f_res_29473,
                                                          segscan_group_sizze_31005 *
                                                          (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_31005);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37296 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_31010_runs,
                                          &ctx->clusterPointszisegscan_31010_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31010,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_31005, 1,
                                                  1, 0 + (shared_sizze_37298 +
                                                          (8 -
                                                           shared_sizze_37298 %
                                                           8) % 8), NULL,
                                                  kernel_args_37295, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37297 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_31010", time_end_37297 -
                        time_start_37296);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_34012,
                                  "incprefixes_mem_34012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_34010,
                                  "aggregates_mem_34010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_34008,
                                  "status_flags_mem_34008") != 0)
            return 1;
    }
    
    int64_t num_segments_29516;
    
    if (y_29494) {
        bool y_29517 = slt64(m_29475, defunc_0_f_res_29473);
        bool bounds_check_29518 = zzero_leq_i_p_m_t_s_29476 && y_29517;
        bool index_certs_29519;
        
        if (!bounds_check_29518) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", m_29475,
                                   "] out of bounds for array of shape [",
                                   defunc_0_f_res_29473, "].",
                                   "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:29:36-59\n   #2  src/cluster.fut:18:3-46\n   #3  src/cluster.fut:61:18-34\n   #4  src/cluster.fut:129:15-68\n   #5  src/cluster.fut:194:13-76\n   #6  src/cluster.fut:190:1-200:50\n");
            if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                      "group_res_arr_mem_33832") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31971,
                                      "mem_param_31971") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31966,
                                      "mem_param_31966") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                      "defunc_0_f_res_mem_32005") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                      "defunc_0_f_res_mem_32000") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                return 1;
            if (memblock_unref_device(ctx,
                                      &defunc_1_map_res_subhistos_mem_33190,
                                      "defunc_1_map_res_subhistos_mem_33190") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                      "group_res_arr_mem_33160") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31850,
                                      "mem_param_31850") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31845,
                                      "mem_param_31845") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                      "defunc_0_f_res_mem_31884") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                      "defunc_0_f_res_mem_31879") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") !=
                0)
                return 1;
            return 1;
        }
        
        int64_t read_res_37306;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37306, mem_32026.mem +
                                                m_29475 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t last_res_29520 = read_res_37306;
        
        num_segments_29516 = last_res_29520;
    } else {
        num_segments_29516 = (int64_t) 0;
    }
    
    bool bounds_invalid_upwards_29521 = slt64(num_segments_29516, (int64_t) 0);
    bool valid_29522 = !bounds_invalid_upwards_29521;
    bool range_valid_c_29523;
    
    if (!valid_29522) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                               num_segments_29516, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:33:17-41\n   #3  src/cluster.fut:18:3-46\n   #4  src/cluster.fut:61:18-34\n   #5  src/cluster.fut:129:15-68\n   #6  src/cluster.fut:194:13-76\n   #7  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                  "group_res_arr_mem_33832") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31971, "mem_param_31971") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31966, "mem_param_31966") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                  "defunc_0_f_res_mem_32005") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                  "defunc_0_f_res_mem_32000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t bytes_32027 = (int64_t) 8 * num_segments_29516;
    struct memblock_device mem_32028;
    
    mem_32028.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32028, bytes_32027, "mem_32028")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i64(ctx, mem_32028, num_segments_29516,
                                      (int64_t) 0) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t segmap_group_sizze_31015;
    
    segmap_group_sizze_31015 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31014;
    
    int64_t segmap_usable_groups_31016 = sdiv_up64(defunc_0_f_res_29473,
                                                   segmap_group_sizze_31015);
    
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37310 = mem_32018.mem;
    CUdeviceptr kernel_arg_37311 = mem_32023.mem;
    CUdeviceptr kernel_arg_37312 = mem_32026.mem;
    CUdeviceptr kernel_arg_37313 = mem_32028.mem;
    
    if ((((((1 && segmap_usable_groups_31016 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_31015 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_31016;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37307[] = {&ctx->global_failure,
                                     &defunc_0_f_res_29473, &num_segments_29516,
                                     &kernel_arg_37310, &kernel_arg_37311,
                                     &kernel_arg_37312, &kernel_arg_37313};
        int64_t time_start_37308 = 0, time_end_37309 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_31012");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31016);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31015);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37308 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_31012_runs,
                                      &ctx->clusterPointszisegmap_31012_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31012,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_31015, 1, 1, 0,
                                              NULL, kernel_args_37307, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37309 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_31012", time_end_37309 -
                    time_start_37308);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
        return 1;
    
    int64_t segscan_group_sizze_31019;
    
    segscan_group_sizze_31019 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31018;
    
    int64_t num_groups_31021;
    int32_t max_num_groups_34090;
    
    max_num_groups_34090 = ctx->sizes.clusterPointszisegscan_num_groups_31020;
    num_groups_31021 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(num_segments_29516,
                                                            segscan_group_sizze_31019),
                                                  sext_i32_i64(max_num_groups_34090))));
    
    struct memblock_device mem_32032;
    
    mem_32032.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32032, bytes_32027, "mem_32032")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, num_segments_29516)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_34091;
        
        numThreads_34091 = sdiv_up64(num_segments_29516,
                                     segscan_group_sizze_31019 * (int64_t) 9) *
            segscan_group_sizze_31019;
        
        int64_t numGroups_34092;
        
        numGroups_34092 = sdiv_up64(num_segments_29516,
                                    segscan_group_sizze_31019 * (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_34093 =
                               ctx->clusterPointsziid_counter_mem_34093;
        struct memblock_device status_flags_mem_34095;
        
        status_flags_mem_34095.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_34095, numGroups_34092,
                                  "status_flags_mem_34095")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_34097;
        
        aggregates_mem_34097.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_34097, (int64_t) 8 *
                                  numGroups_34092, "aggregates_mem_34097")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_34099;
        
        incprefixes_mem_34099.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_34099, (int64_t) 8 *
                                  numGroups_34092, "incprefixes_mem_34099")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_34095,
                                         numGroups_34092, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37318 = smax64(smax64((int64_t) 288,
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_31019),
                                                 (int64_t) 9 *
                                                 segscan_group_sizze_31019 *
                                                 (int64_t) 8);
        CUdeviceptr kernel_arg_37320 = mem_32028.mem;
        CUdeviceptr kernel_arg_37321 = mem_32032.mem;
        CUdeviceptr kernel_arg_37322 = clusterPointsziid_counter_mem_34093.mem;
        CUdeviceptr kernel_arg_37323 = status_flags_mem_34095.mem;
        CUdeviceptr kernel_arg_37324 = aggregates_mem_34097.mem;
        CUdeviceptr kernel_arg_37325 = incprefixes_mem_34099.mem;
        unsigned int shared_offset_37319 = 0;
        
        if ((((((1 && sdiv_up64(num_segments_29516, segscan_group_sizze_31019 *
                                (int64_t) 9) != 0) && 1 != 0) && 1 != 0) &&
              segscan_group_sizze_31019 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(num_segments_29516,
                                      segscan_group_sizze_31019 * (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37315[] = {&ctx->global_failure,
                                         &shared_offset_37319,
                                         &num_segments_29516, &kernel_arg_37320,
                                         &kernel_arg_37321, &kernel_arg_37322,
                                         &kernel_arg_37323, &kernel_arg_37324,
                                         &kernel_arg_37325};
            int64_t time_start_37316 = 0, time_end_37317 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_31024");
                fprintf(ctx->log, "%ld", (long) sdiv_up64(num_segments_29516,
                                                          segscan_group_sizze_31019 *
                                                          (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_31019);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37316 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_31024_runs,
                                          &ctx->clusterPointszisegscan_31024_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31024,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_31019, 1,
                                                  1, 0 + (shared_sizze_37318 +
                                                          (8 -
                                                           shared_sizze_37318 %
                                                           8) % 8), NULL,
                                                  kernel_args_37315, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37317 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_31024", time_end_37317 -
                        time_start_37316);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_34099,
                                  "incprefixes_mem_34099") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_34097,
                                  "aggregates_mem_34097") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_34095,
                                  "status_flags_mem_34095") != 0)
            return 1;
    }
    
    struct memblock_device mem_32034;
    
    mem_32034.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32034, bytes_32027, "mem_32034")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t group_sizze_34175;
    
    group_sizze_34175 = ctx->sizes.clusterPointszigroup_sizze_34175;
    
    int64_t num_groups_34176;
    
    num_groups_34176 = sdiv_up64(num_segments_29516, group_sizze_34175);
    
    CUdeviceptr kernel_arg_37329 = mem_32032.mem;
    CUdeviceptr kernel_arg_37330 = mem_32034.mem;
    
    if ((((((1 && num_groups_34176 != 0) && 1 != 0) && 1 != 0) &&
          group_sizze_34175 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_34176;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37326[] = {&num_segments_29516, &kernel_arg_37329,
                                     &kernel_arg_37330};
        int64_t time_start_37327 = 0, time_end_37328 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.copy_34172");
            fprintf(ctx->log, "%ld", (long) num_groups_34176);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) group_sizze_34175);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37327 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszicopy_34172_runs,
                                      &ctx->clusterPointszicopy_34172_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszicopy_34172,
                                              grid[0], grid[1], grid[2],
                                              group_sizze_34175, 1, 1, 0, NULL,
                                              kernel_args_37326, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37328 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.copy_34172", time_end_37328 -
                    time_start_37327);
        }
    }
    if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
        return 1;
    
    bool y_29538 = slt64((int64_t) 0, num_segments_29516);
    bool index_certs_29539;
    
    if (!y_29538) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (int64_t) 0,
                               "] out of bounds for array of shape [",
                               num_segments_29516, "].",
                               "-> #0  src/cluster.fut:23:6-27\n   #1  src/cluster.fut:62:17-38\n   #2  src/cluster.fut:129:15-68\n   #3  src/cluster.fut:194:13-76\n   #4  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                  "group_res_arr_mem_33832") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31971, "mem_param_31971") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31966, "mem_param_31966") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                  "defunc_0_f_res_mem_32005") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                  "defunc_0_f_res_mem_32000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    {
        int64_t write_tmp_37331 = (int64_t) 0;
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_scalar_to_dev_runs,
                                      &ctx->copy_scalar_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_32034.mem + (int64_t) 0 *
                                            sizeof(int64_t), &write_tmp_37331,
                                            sizeof(int64_t)));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    
    struct memblock_device mem_32036;
    
    mem_32036.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32036, bytes_31829, "mem_32036")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i64(ctx, mem_32036, n_28846, (int64_t) 0) !=
        0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32038;
    
    mem_32038.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32038, bytes_31829, "mem_32038")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i64(ctx, mem_32038, n_28846, (int64_t) 0) !=
        0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t segmap_group_sizze_31029;
    
    segmap_group_sizze_31029 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31028;
    
    int64_t segmap_usable_groups_31030 = sdiv_up64(num_segments_29516,
                                                   segmap_group_sizze_31029);
    
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37335 = mem_32010.mem;
    CUdeviceptr kernel_arg_37336 = mem_32028.mem;
    CUdeviceptr kernel_arg_37337 = mem_32034.mem;
    CUdeviceptr kernel_arg_37338 = mem_32036.mem;
    CUdeviceptr kernel_arg_37339 = mem_32038.mem;
    
    if ((((((1 && segmap_usable_groups_31030 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_31029 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_31030;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37332[] = {&ctx->global_failure,
                                     &ctx->failure_is_an_option,
                                     &ctx->global_failure_args, &n_28846,
                                     &defunc_0_f_res_29473, &num_segments_29516,
                                     &kernel_arg_37335, &kernel_arg_37336,
                                     &kernel_arg_37337, &kernel_arg_37338,
                                     &kernel_arg_37339};
        int64_t time_start_37333 = 0, time_end_37334 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_31026");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31030);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31029);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37333 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_31026_runs,
                                      &ctx->clusterPointszisegmap_31026_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31026,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_31029, 1, 1, 0,
                                              NULL, kernel_args_37332, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37334 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_31026", time_end_37334 -
                    time_start_37333);
        }
    }
    ctx->failure_is_an_option = 1;
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
        return 1;
    
    int64_t loop_init_29556 = defunc_0_f_res_29473 << (int64_t) 1;
    int64_t allocate_arg_29557 = n_28846 << (int64_t) 1;
    bool bounds_invalid_upwards_29558 = slt64(allocate_arg_29557, (int64_t) 0);
    bool valid_29559 = !bounds_invalid_upwards_29558;
    bool range_valid_c_29560;
    
    if (!valid_29559) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                               allocate_arg_29557, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  src/cluster.fut:41:11-23\n   #3  src/cluster.fut:174:52-70\n   #4  src/cluster.fut:195:18-38\n   #5  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                  "group_res_arr_mem_33832") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31971, "mem_param_31971") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31966, "mem_param_31966") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                  "defunc_0_f_res_mem_32005") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                  "defunc_0_f_res_mem_32000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t bytes_32040 = (int64_t) 4 * allocate_arg_29557;
    struct memblock_device mem_32041;
    
    mem_32041.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32041, bytes_32040, "mem_32041")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i32(ctx, mem_32041, allocate_arg_29557, 0) !=
        0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32043;
    
    mem_32043.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32043, bytes_31829, "mem_32043")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i64(ctx, mem_32043, n_28846, (int64_t) 0) !=
        0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t segred_group_sizze_31033;
    
    segred_group_sizze_31033 =
        ctx->sizes.clusterPointszisegred_group_sizze_31032;
    
    int64_t num_groups_31035;
    int32_t max_num_groups_34191;
    
    max_num_groups_34191 = ctx->sizes.clusterPointszisegred_num_groups_31034;
    num_groups_31035 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            segred_group_sizze_31033),
                                                  sext_i32_i64(max_num_groups_34191))));
    
    struct memblock_device mem_32046;
    
    mem_32046.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32046, (int64_t) 1, "mem_32046")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32048;
    
    mem_32048.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32048, bytes_31832, "mem_32048")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device clusterPointszicounter_mem_34192 =
                           ctx->clusterPointszicounter_mem_34192;
    struct memblock_device group_res_arr_mem_34194;
    
    group_res_arr_mem_34194.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_34194,
                              segred_group_sizze_31033 * num_groups_31035,
                              "group_res_arr_mem_34194")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t num_threads_34196;
    
    num_threads_34196 = num_groups_31035 * segred_group_sizze_31033;
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegRed");
    
    unsigned int shared_sizze_37344 = segred_group_sizze_31033;
    unsigned int shared_sizze_37346 = 1;
    CUdeviceptr kernel_arg_37348 = mem_32036.mem;
    CUdeviceptr kernel_arg_37349 = mem_32046.mem;
    CUdeviceptr kernel_arg_37350 = mem_32048.mem;
    CUdeviceptr kernel_arg_37351 = clusterPointszicounter_mem_34192.mem;
    CUdeviceptr kernel_arg_37352 = group_res_arr_mem_34194.mem;
    unsigned int shared_offset_37345 = 0;
    unsigned int shared_offset_37347 = 0 + (shared_sizze_37344 + (8 -
                                                                  shared_sizze_37344 %
                                                                  8) % 8);
    
    if ((((((1 && num_groups_31035 != 0) && 1 != 0) && 1 != 0) &&
          segred_group_sizze_31033 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_31035;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37341[] = {&ctx->global_failure, &shared_offset_37345,
                                     &shared_offset_37347, &n_28846,
                                     &num_groups_31035, &num_threads_34196,
                                     &kernel_arg_37348, &kernel_arg_37349,
                                     &kernel_arg_37350, &kernel_arg_37351,
                                     &kernel_arg_37352};
        int64_t time_start_37342 = 0, time_end_37343 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segred_nonseg_31041");
            fprintf(ctx->log, "%ld", (long) num_groups_31035);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segred_group_sizze_31033);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37342 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegred_nonseg_31041_runs,
                                      &ctx->clusterPointszisegred_nonseg_31041_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31041,
                                              grid[0], grid[1], grid[2],
                                              segred_group_sizze_31033, 1, 1,
                                              0 + (shared_sizze_37344 + (8 -
                                                                         shared_sizze_37344 %
                                                                         8) %
                                                   8) + (shared_sizze_37346 +
                                                         (8 -
                                                          shared_sizze_37346 %
                                                          8) % 8), NULL,
                                              kernel_args_37341, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37343 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segred_nonseg_31041", time_end_37343 -
                    time_start_37342);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    
    bool read_res_37353;
    
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->copy_scalar_from_dev_runs,
                                      &ctx->copy_scalar_from_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37353, mem_32046.mem +
                                            (int64_t) 0 * sizeof(bool),
                                            sizeof(bool)));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    if (futhark_context_sync(ctx) != 0)
        return 1;
    
    bool x_29563 = read_res_37353;
    
    if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
        return 1;
    
    int64_t segscan_group_sizze_31064;
    
    segscan_group_sizze_31064 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31063;
    
    int64_t num_groups_31066;
    int32_t max_num_groups_34222;
    
    max_num_groups_34222 = ctx->sizes.clusterPointszisegscan_num_groups_31065;
    num_groups_31066 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            segscan_group_sizze_31064),
                                                  sext_i32_i64(max_num_groups_34222))));
    
    int64_t segred_group_sizze_31072;
    
    segred_group_sizze_31072 =
        ctx->sizes.clusterPointszisegred_group_sizze_31071;
    
    int64_t num_groups_31074;
    int32_t max_num_groups_34223;
    
    max_num_groups_34223 = ctx->sizes.clusterPointszisegred_num_groups_31073;
    num_groups_31074 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            segred_group_sizze_31072),
                                                  sext_i32_i64(max_num_groups_34223))));
    
    int64_t seghist_group_sizze_31082;
    
    seghist_group_sizze_31082 =
        ctx->sizes.clusterPointsziseghist_group_sizze_31081;
    
    int64_t num_groups_31084;
    int32_t max_num_groups_34224;
    
    max_num_groups_34224 = ctx->sizes.clusterPointsziseghist_num_groups_31083;
    num_groups_31084 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            seghist_group_sizze_31082),
                                                  sext_i32_i64(max_num_groups_34224))));
    
    int64_t segscan_group_sizze_31097;
    
    segscan_group_sizze_31097 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31096;
    
    int64_t segscan_group_sizze_31105;
    
    segscan_group_sizze_31105 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31104;
    
    int64_t segmap_group_sizze_31167;
    
    segmap_group_sizze_31167 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31114;
    
    int64_t segscan_group_sizze_31223;
    
    segscan_group_sizze_31223 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31222;
    
    int64_t segmap_group_sizze_31233;
    
    segmap_group_sizze_31233 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31232;
    
    int64_t segmap_group_sizze_31253;
    
    segmap_group_sizze_31253 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31238;
    
    int64_t segmap_group_sizze_31280;
    
    segmap_group_sizze_31280 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31272;
    
    int64_t segscan_group_sizze_31289;
    
    segscan_group_sizze_31289 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31288;
    
    int64_t segscan_group_sizze_31297;
    
    segscan_group_sizze_31297 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31296;
    
    int64_t segscan_group_sizze_31311;
    
    segscan_group_sizze_31311 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31310;
    
    int64_t segmap_group_sizze_31332;
    
    segmap_group_sizze_31332 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31320;
    
    int64_t segmap_group_sizze_31356;
    
    segmap_group_sizze_31356 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31348;
    
    int64_t segscan_group_sizze_31365;
    
    segscan_group_sizze_31365 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31364;
    
    int64_t segscan_group_sizze_31373;
    
    segscan_group_sizze_31373 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31372;
    
    int64_t segscan_group_sizze_31387;
    
    segscan_group_sizze_31387 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31386;
    
    int64_t segmap_group_sizze_31397;
    
    segmap_group_sizze_31397 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31396;
    
    int64_t segred_group_sizze_31401;
    
    segred_group_sizze_31401 =
        ctx->sizes.clusterPointszisegred_group_sizze_31400;
    
    int64_t num_groups_31403;
    int32_t max_num_groups_34225;
    
    max_num_groups_34225 = ctx->sizes.clusterPointszisegred_num_groups_31402;
    num_groups_31403 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            segred_group_sizze_31401),
                                                  sext_i32_i64(max_num_groups_34225))));
    
    int64_t segred_group_sizze_31431;
    
    segred_group_sizze_31431 =
        ctx->sizes.clusterPointszisegred_group_sizze_31430;
    
    int64_t num_groups_31433;
    int32_t max_num_groups_34226;
    
    max_num_groups_34226 = ctx->sizes.clusterPointszisegred_num_groups_31432;
    num_groups_31433 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            segred_group_sizze_31431),
                                                  sext_i32_i64(max_num_groups_34226))));
    
    struct memblock_device mem_32103;
    
    mem_32103.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32103, bytes_31829, "mem_32103")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32105;
    
    mem_32105.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32105, bytes_31829, "mem_32105")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32107;
    
    mem_32107.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32107, bytes_31832, "mem_32107")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32110;
    
    mem_32110.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32110, (int64_t) 8, "mem_32110")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32240;
    
    mem_32240.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32240, (int64_t) 1, "mem_32240")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32270;
    
    mem_32270.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32270, (int64_t) 8, "mem_32270")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t sizze_29574;
    int64_t clusterWith_res_ixfn_32271;
    int64_t clusterWith_res_ixfn_32274;
    struct memblock_device clusterWith_res_mem_32275;
    
    clusterWith_res_mem_32275.references = NULL;
    
    struct memblock_device clusterWith_res_mem_32280;
    
    clusterWith_res_mem_32280.references = NULL;
    
    struct memblock_device clusterWith_res_mem_32285;
    
    clusterWith_res_mem_32285.references = NULL;
    
    bool clusterWith_res_29575;
    int64_t clusterWith_res_29576;
    int64_t loopz2081Uz2082Uz2086U_29580;
    bool loop_while_29581;
    int64_t maxSizze_29582;
    int64_t ctx_param_ext_32049;
    int64_t ctx_param_ext_32052;
    struct memblock_device mem_param_32053;
    
    mem_param_32053.references = NULL;
    
    struct memblock_device mem_param_32058;
    
    mem_param_32058.references = NULL;
    
    struct memblock_device mem_param_32063;
    
    mem_param_32063.references = NULL;
    loopz2081Uz2082Uz2086U_29580 = allocate_arg_29557;
    ctx_param_ext_32049 = allocate_arg_29557;
    ctx_param_ext_32052 = allocate_arg_29557;
    if (memblock_set_device(ctx, &mem_param_32053, &mem_32041, "mem_32041") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &mem_param_32058, &mem_32043, "mem_32043") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &mem_param_32063, &mem_32043, "mem_32043") !=
        0)
        return 1;
    loop_while_29581 = 1;
    maxSizze_29582 = loop_init_29556;
    while (loop_while_29581) {
        bool bounds_invalid_upwards_29586 = slt64(maxSizze_29582, (int64_t) 0);
        bool valid_29587 = !bounds_invalid_upwards_29586;
        bool range_valid_c_29588;
        
        if (!valid_29587) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                          maxSizze_29582, " is invalid.",
                          "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  src/cluster.fut:41:11-23\n   #3  src/cluster.fut:176:37-54\n   #4  src/cluster.fut:195:18-38\n   #5  src/cluster.fut:190:1-200:50\n");
            if (memblock_unref_device(ctx, &mem_param_32063,
                                      "mem_param_32063") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32058,
                                      "mem_param_32058") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32053,
                                      "mem_param_32053") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                      "clusterWith_res_mem_32285") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                      "clusterWith_res_mem_32280") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                      "clusterWith_res_mem_32275") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                      "group_res_arr_mem_34194") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                      "group_res_arr_mem_33832") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31971,
                                      "mem_param_31971") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31966,
                                      "mem_param_31966") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                      "defunc_0_f_res_mem_32005") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                      "defunc_0_f_res_mem_32000") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                return 1;
            if (memblock_unref_device(ctx,
                                      &defunc_1_map_res_subhistos_mem_33190,
                                      "defunc_1_map_res_subhistos_mem_33190") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                      "group_res_arr_mem_33160") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31850,
                                      "mem_param_31850") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31845,
                                      "mem_param_31845") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                      "defunc_0_f_res_mem_31884") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                      "defunc_0_f_res_mem_31879") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") !=
                0)
                return 1;
            return 1;
        }
        
        int64_t replicate_arg_29589 = sub64(maxSizze_29582,
                                            defunc_0_f_res_29473);
        bool bounds_invalid_upwards_29590 = slt64(replicate_arg_29589,
                                                  (int64_t) 0);
        bool valid_29591 = !bounds_invalid_upwards_29590;
        bool range_valid_c_29592;
        
        if (!valid_29591) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                          replicate_arg_29589, " is invalid.",
                          "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  src/cluster.fut:43:34-50\n   #3  src/cluster.fut:176:57-75\n   #4  src/cluster.fut:195:18-38\n   #5  src/cluster.fut:190:1-200:50\n");
            if (memblock_unref_device(ctx, &mem_param_32063,
                                      "mem_param_32063") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32058,
                                      "mem_param_32058") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32053,
                                      "mem_param_32053") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                      "clusterWith_res_mem_32285") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                      "clusterWith_res_mem_32280") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                      "clusterWith_res_mem_32275") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                      "group_res_arr_mem_34194") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                      "group_res_arr_mem_33832") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31971,
                                      "mem_param_31971") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31966,
                                      "mem_param_31966") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                      "defunc_0_f_res_mem_32005") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                      "defunc_0_f_res_mem_32000") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                return 1;
            if (memblock_unref_device(ctx,
                                      &defunc_1_map_res_subhistos_mem_33190,
                                      "defunc_1_map_res_subhistos_mem_33190") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                      "group_res_arr_mem_33160") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31850,
                                      "mem_param_31850") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31845,
                                      "mem_param_31845") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                      "defunc_0_f_res_mem_31884") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                      "defunc_0_f_res_mem_31879") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") !=
                0)
                return 1;
            return 1;
        }
        
        int64_t bytes_32070 = (int64_t) 4 * replicate_arg_29589;
        struct memblock_device mem_32071;
        
        mem_32071.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32071, bytes_32070, "mem_32071")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i32(ctx, mem_32071, replicate_arg_29589,
                                          0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t bytes_32072 = (int64_t) 4 * maxSizze_29582;
        struct memblock_device mem_32073;
        
        mem_32073.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32073, bytes_32072, "mem_32073")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t tmp_offs_34238 = (int64_t) 0;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_dev_to_dev_runs,
                                          &ctx->copy_dev_to_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_32073.mem + tmp_offs_34238 *
                                            (int64_t) 4, mem_32012.mem +
                                            (int64_t) 0, defunc_0_f_res_29473 *
                                            (int64_t) 4));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        tmp_offs_34238 += defunc_0_f_res_29473;
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_dev_to_dev_runs,
                                          &ctx->copy_dev_to_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_32073.mem + tmp_offs_34238 *
                                            (int64_t) 4, mem_32071.mem +
                                            (int64_t) 0, replicate_arg_29589 *
                                            (int64_t) 4));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        tmp_offs_34238 += replicate_arg_29589;
        if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
            return 1;
        
        bool lifted_checkEqual_res_29595;
        
        if (x_29563) {
            int64_t segred_group_sizze_31044;
            
            segred_group_sizze_31044 =
                ctx->sizes.clusterPointszisegred_group_sizze_31043;
            
            int64_t num_groups_31046;
            int32_t max_num_groups_34239;
            
            max_num_groups_34239 =
                ctx->sizes.clusterPointszisegred_num_groups_31045;
            num_groups_31046 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(maxSizze_29582,
                                                                    segred_group_sizze_31044),
                                                          sext_i32_i64(max_num_groups_34239))));
            
            struct memblock_device mem_32076;
            
            mem_32076.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32076, (int64_t) 1,
                                      "mem_32076")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device clusterPointszicounter_mem_34240 =
                                   ctx->clusterPointszicounter_mem_34240;
            struct memblock_device group_res_arr_mem_34242;
            
            group_res_arr_mem_34242.references = NULL;
            if (memblock_alloc_device(ctx, &group_res_arr_mem_34242,
                                      segred_group_sizze_31044 *
                                      num_groups_31046,
                                      "group_res_arr_mem_34242")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t num_threads_34244;
            
            num_threads_34244 = num_groups_31046 * segred_group_sizze_31044;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegRed");
            
            unsigned int shared_sizze_37358 = segred_group_sizze_31044;
            unsigned int shared_sizze_37360 = 1;
            CUdeviceptr kernel_arg_37362 = mem_32012.mem;
            CUdeviceptr kernel_arg_37363 = mem_32076.mem;
            CUdeviceptr kernel_arg_37364 = clusterPointszicounter_mem_34240.mem;
            CUdeviceptr kernel_arg_37365 = group_res_arr_mem_34242.mem;
            unsigned int shared_offset_37359 = 0;
            unsigned int shared_offset_37361 = 0 + (shared_sizze_37358 + (8 -
                                                                          shared_sizze_37358 %
                                                                          8) %
                                                    8);
            
            if ((((((1 && num_groups_31046 != 0) && 1 != 0) && 1 != 0) &&
                  segred_group_sizze_31044 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_31046;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37355[] = {&ctx->global_failure,
                                             &shared_offset_37359,
                                             &shared_offset_37361,
                                             &defunc_0_f_res_29473,
                                             &maxSizze_29582, &num_groups_31046,
                                             &num_threads_34244,
                                             &kernel_arg_37362,
                                             &kernel_arg_37363,
                                             &kernel_arg_37364,
                                             &kernel_arg_37365};
                int64_t time_start_37356 = 0, time_end_37357 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segred_nonseg_31051");
                    fprintf(ctx->log, "%ld", (long) num_groups_31046);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segred_group_sizze_31044);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37356 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegred_nonseg_31051_runs,
                                              &ctx->clusterPointszisegred_nonseg_31051_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31051,
                                                      grid[0], grid[1], grid[2],
                                                      segred_group_sizze_31044,
                                                      1, 1, 0 +
                                                      (shared_sizze_37358 + (8 -
                                                                             shared_sizze_37358 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_37360 + (8 -
                                                                             shared_sizze_37360 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_37355, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37357 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segred_nonseg_31051",
                            time_end_37357 - time_start_37356);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            
            bool read_res_37366;
            
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_scalar_from_dev_runs,
                                              &ctx->copy_scalar_from_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37366,
                                                    mem_32076.mem +
                                                    (int64_t) 0 * sizeof(bool),
                                                    sizeof(bool)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            if (futhark_context_sync(ctx) != 0)
                return 1;
            
            bool defunc_2_reduce_res_29596 = read_res_37366;
            
            if (memblock_unref_device(ctx, &mem_32076, "mem_32076") != 0)
                return 1;
            lifted_checkEqual_res_29595 = defunc_2_reduce_res_29596;
            if (memblock_unref_device(ctx, &group_res_arr_mem_34242,
                                      "group_res_arr_mem_34242") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32076, "mem_32076") != 0)
                return 1;
        } else {
            lifted_checkEqual_res_29595 = 0;
        }
        
        bool cond_29602 = !lifted_checkEqual_res_29595;
        bool loop_cond_29603;
        
        if (cond_29602) {
            int64_t segred_group_sizze_31054;
            
            segred_group_sizze_31054 =
                ctx->sizes.clusterPointszisegred_group_sizze_31053;
            
            int64_t num_groups_31056;
            int32_t max_num_groups_34270;
            
            max_num_groups_34270 =
                ctx->sizes.clusterPointszisegred_num_groups_31055;
            num_groups_31056 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(n_28846,
                                                                    segred_group_sizze_31054),
                                                          sext_i32_i64(max_num_groups_34270))));
            
            struct memblock_device mem_32079;
            
            mem_32079.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32079, (int64_t) 8,
                                      "mem_32079")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device clusterPointszicounter_mem_34271 =
                                   ctx->clusterPointszicounter_mem_34271;
            struct memblock_device group_res_arr_mem_34273;
            
            group_res_arr_mem_34273.references = NULL;
            if (memblock_alloc_device(ctx, &group_res_arr_mem_34273,
                                      (int64_t) 8 * (segred_group_sizze_31054 *
                                                     num_groups_31056),
                                      "group_res_arr_mem_34273")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t num_threads_34275;
            
            num_threads_34275 = num_groups_31056 * segred_group_sizze_31054;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegRed");
            
            unsigned int shared_sizze_37371 = (int64_t) 8 *
                         segred_group_sizze_31054;
            unsigned int shared_sizze_37373 = 1;
            CUdeviceptr kernel_arg_37375 = mem_32036.mem;
            CUdeviceptr kernel_arg_37376 = mem_32079.mem;
            CUdeviceptr kernel_arg_37377 = clusterPointszicounter_mem_34271.mem;
            CUdeviceptr kernel_arg_37378 = group_res_arr_mem_34273.mem;
            unsigned int shared_offset_37372 = 0;
            unsigned int shared_offset_37374 = 0 + (shared_sizze_37371 + (8 -
                                                                          shared_sizze_37371 %
                                                                          8) %
                                                    8);
            
            if ((((((1 && num_groups_31056 != 0) && 1 != 0) && 1 != 0) &&
                  segred_group_sizze_31054 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_31056;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37368[] = {&ctx->global_failure,
                                             &shared_offset_37372,
                                             &shared_offset_37374, &n_28846,
                                             &num_groups_31056,
                                             &num_threads_34275,
                                             &kernel_arg_37375,
                                             &kernel_arg_37376,
                                             &kernel_arg_37377,
                                             &kernel_arg_37378};
                int64_t time_start_37369 = 0, time_end_37370 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segred_nonseg_31061");
                    fprintf(ctx->log, "%ld", (long) num_groups_31056);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segred_group_sizze_31054);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37369 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegred_nonseg_31061_runs,
                                              &ctx->clusterPointszisegred_nonseg_31061_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31061,
                                                      grid[0], grid[1], grid[2],
                                                      segred_group_sizze_31054,
                                                      1, 1, 0 +
                                                      (shared_sizze_37371 + (8 -
                                                                             shared_sizze_37371 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_37373 + (8 -
                                                                             shared_sizze_37373 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_37368, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37370 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segred_nonseg_31061",
                            time_end_37370 - time_start_37369);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            
            int64_t read_res_37379;
            
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_scalar_from_dev_runs,
                                              &ctx->copy_scalar_from_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37379,
                                                    mem_32079.mem +
                                                    (int64_t) 0 *
                                                    sizeof(int64_t),
                                                    sizeof(int64_t)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            if (futhark_context_sync(ctx) != 0)
                return 1;
            
            int64_t defunc_2_reduce_res_29604 = read_res_37379;
            
            if (memblock_unref_device(ctx, &mem_32079, "mem_32079") != 0)
                return 1;
            
            bool loop_cond_t_res_29609 = sle64(defunc_2_reduce_res_29604,
                                               maxSizze_29582);
            
            loop_cond_29603 = loop_cond_t_res_29609;
            if (memblock_unref_device(ctx, &group_res_arr_mem_34273,
                                      "group_res_arr_mem_34273") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32079, "mem_32079") != 0)
                return 1;
        } else {
            loop_cond_29603 = 0;
        }
        
        struct memblock_device lifted_fromInit_res_mem_32257;
        
        lifted_fromInit_res_mem_32257.references = NULL;
        
        struct memblock_device lifted_fromInit_res_mem_32262;
        
        lifted_fromInit_res_mem_32262.references = NULL;
        
        struct memblock_device lifted_fromInit_res_mem_32267;
        
        lifted_fromInit_res_mem_32267.references = NULL;
        
        bool lifted_fromInit_res_29610;
        bool loop_while_29614;
        struct memblock_device mem_param_32084;
        
        mem_param_32084.references = NULL;
        
        struct memblock_device mem_param_32089;
        
        mem_param_32089.references = NULL;
        
        struct memblock_device mem_param_32094;
        
        mem_param_32094.references = NULL;
        if (memblock_set_device(ctx, &mem_param_32084, &mem_32073,
                                "mem_32073") != 0)
            return 1;
        if (memblock_set_device(ctx, &mem_param_32089, &mem_32038,
                                "mem_32038") != 0)
            return 1;
        if (memblock_set_device(ctx, &mem_param_32094, &mem_32036,
                                "mem_32036") != 0)
            return 1;
        loop_while_29614 = loop_cond_29603;
        while (loop_while_29614) {
            if (slt64((int64_t) 0, n_28846)) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegScan");
                
                int64_t numThreads_34308;
                
                numThreads_34308 = sdiv_up64(n_28846,
                                             segscan_group_sizze_31064 *
                                             (int64_t) 9) *
                    segscan_group_sizze_31064;
                
                int64_t numGroups_34309;
                
                numGroups_34309 = sdiv_up64(n_28846, segscan_group_sizze_31064 *
                                            (int64_t) 9);
                
                struct memblock_device clusterPointsziid_counter_mem_34310 =
                                       ctx->clusterPointsziid_counter_mem_34310;
                struct memblock_device status_flags_mem_34312;
                
                status_flags_mem_34312.references = NULL;
                if (memblock_alloc_device(ctx, &status_flags_mem_34312,
                                          numGroups_34309,
                                          "status_flags_mem_34312")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_34314;
                
                aggregates_mem_34314.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_34314,
                                          (int64_t) 8 * numGroups_34309,
                                          "aggregates_mem_34314")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_34316;
                
                incprefixes_mem_34316.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_34316,
                                          (int64_t) 8 * numGroups_34309,
                                          "incprefixes_mem_34316")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_34312,
                                                 numGroups_34309, (int8_t) 0) !=
                    0) {
                    err = 1;
                    goto cleanup;
                }
                
                unsigned int shared_sizze_37384 = smax64(smax64((int64_t) 288,
                                                                (int64_t) 8 *
                                                                segscan_group_sizze_31064),
                                                         (int64_t) 9 *
                                                         segscan_group_sizze_31064 *
                                                         (int64_t) 8);
                CUdeviceptr kernel_arg_37386 = mem_32048.mem;
                CUdeviceptr kernel_arg_37387 = mem_param_32084.mem;
                CUdeviceptr kernel_arg_37388 = mem_param_32089.mem;
                CUdeviceptr kernel_arg_37389 = mem_param_32094.mem;
                CUdeviceptr kernel_arg_37390 = mem_32103.mem;
                CUdeviceptr kernel_arg_37391 = mem_32105.mem;
                CUdeviceptr kernel_arg_37392 = mem_32107.mem;
                CUdeviceptr kernel_arg_37393 =
                            clusterPointsziid_counter_mem_34310.mem;
                CUdeviceptr kernel_arg_37394 = status_flags_mem_34312.mem;
                CUdeviceptr kernel_arg_37395 = aggregates_mem_34314.mem;
                CUdeviceptr kernel_arg_37396 = incprefixes_mem_34316.mem;
                unsigned int shared_offset_37385 = 0;
                
                if ((((((1 && sdiv_up64(n_28846, segscan_group_sizze_31064 *
                                        (int64_t) 9) != 0) && 1 != 0) && 1 !=
                       0) && segscan_group_sizze_31064 != 0) && 1 != 0) && 1 !=
                    0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up64(n_28846,
                                              segscan_group_sizze_31064 *
                                              (int64_t) 9);
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37381[] = {&ctx->global_failure,
                                                 &ctx->failure_is_an_option,
                                                 &ctx->global_failure_args,
                                                 &shared_offset_37385, &n_28846,
                                                 &maxSizze_29582,
                                                 &kernel_arg_37386,
                                                 &kernel_arg_37387,
                                                 &kernel_arg_37388,
                                                 &kernel_arg_37389,
                                                 &kernel_arg_37390,
                                                 &kernel_arg_37391,
                                                 &kernel_arg_37392,
                                                 &kernel_arg_37393,
                                                 &kernel_arg_37394,
                                                 &kernel_arg_37395,
                                                 &kernel_arg_37396};
                    int64_t time_start_37382 = 0, time_end_37383 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segscan_31069");
                        fprintf(ctx->log, "%ld", (long) sdiv_up64(n_28846,
                                                                  segscan_group_sizze_31064 *
                                                                  (int64_t) 9));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segscan_group_sizze_31064);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37382 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegscan_31069_runs,
                                                  &ctx->clusterPointszisegscan_31069_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31069,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segscan_group_sizze_31064,
                                                          1, 1, 0 +
                                                          (shared_sizze_37384 +
                                                           (8 -
                                                            shared_sizze_37384 %
                                                            8) % 8), NULL,
                                                          kernel_args_37381,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37383 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segscan_31069", time_end_37383 -
                                time_start_37382);
                    }
                }
                ctx->failure_is_an_option = 1;
                if (memblock_unref_device(ctx, &incprefixes_mem_34316,
                                          "incprefixes_mem_34316") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_34314,
                                          "aggregates_mem_34314") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &status_flags_mem_34312,
                                          "status_flags_mem_34312") != 0)
                    return 1;
            }
            
            struct memblock_device clusterPointszicounter_mem_34389 =
                                   ctx->clusterPointszicounter_mem_34389;
            struct memblock_device group_res_arr_mem_34391;
            
            group_res_arr_mem_34391.references = NULL;
            if (memblock_alloc_device(ctx, &group_res_arr_mem_34391,
                                      (int64_t) 8 * (segred_group_sizze_31072 *
                                                     num_groups_31074),
                                      "group_res_arr_mem_34391")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t num_threads_34393;
            
            num_threads_34393 = num_groups_31074 * segred_group_sizze_31072;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegRed");
            
            unsigned int shared_sizze_37401 = (int64_t) 8 *
                         segred_group_sizze_31072;
            unsigned int shared_sizze_37403 = 1;
            CUdeviceptr kernel_arg_37405 = mem_32105.mem;
            CUdeviceptr kernel_arg_37406 = mem_32110.mem;
            CUdeviceptr kernel_arg_37407 = clusterPointszicounter_mem_34389.mem;
            CUdeviceptr kernel_arg_37408 = group_res_arr_mem_34391.mem;
            unsigned int shared_offset_37402 = 0;
            unsigned int shared_offset_37404 = 0 + (shared_sizze_37401 + (8 -
                                                                          shared_sizze_37401 %
                                                                          8) %
                                                    8);
            
            if ((((((1 && num_groups_31074 != 0) && 1 != 0) && 1 != 0) &&
                  segred_group_sizze_31072 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_31074;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37398[] = {&ctx->global_failure,
                                             &shared_offset_37402,
                                             &shared_offset_37404, &n_28846,
                                             &num_groups_31074,
                                             &num_threads_34393,
                                             &kernel_arg_37405,
                                             &kernel_arg_37406,
                                             &kernel_arg_37407,
                                             &kernel_arg_37408};
                int64_t time_start_37399 = 0, time_end_37400 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segred_nonseg_31079");
                    fprintf(ctx->log, "%ld", (long) num_groups_31074);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segred_group_sizze_31072);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37399 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegred_nonseg_31079_runs,
                                              &ctx->clusterPointszisegred_nonseg_31079_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31079,
                                                      grid[0], grid[1], grid[2],
                                                      segred_group_sizze_31072,
                                                      1, 1, 0 +
                                                      (shared_sizze_37401 + (8 -
                                                                             shared_sizze_37401 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_37403 + (8 -
                                                                             shared_sizze_37403 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_37398, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37400 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segred_nonseg_31079",
                            time_end_37400 - time_start_37399);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            
            int64_t read_res_37409;
            
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_scalar_from_dev_runs,
                                              &ctx->copy_scalar_from_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37409,
                                                    mem_32110.mem +
                                                    (int64_t) 0 *
                                                    sizeof(int64_t),
                                                    sizeof(int64_t)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            if (futhark_context_sync(ctx) != 0)
                return 1;
            
            int64_t defunc_2_reduce_res_29639 = read_res_37409;
            bool bounds_invalid_upwards_29644 = slt64(defunc_2_reduce_res_29639,
                                                      (int64_t) 0);
            bool valid_29645 = !bounds_invalid_upwards_29644;
            bool range_valid_c_29646;
            
            if (!valid_29645) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                              defunc_2_reduce_res_29639, " is invalid.",
                              "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:48:30-60\n   #3  lib/github.com/diku-dk/segmented/segmented.fut:72:14-32\n   #4  /prelude/functional.fut:9:42-44\n   #5  src/cluster.fut:148:23-152:51\n   #6  src/cluster.fut:170:14-27\n   #7  src/cluster.fut:176:27-76\n   #8  src/cluster.fut:195:18-38\n   #9  src/cluster.fut:190:1-200:50\n");
                if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                          "group_res_arr_mem_34391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32094,
                                          "mem_param_32094") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32089,
                                          "mem_param_32089") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32084,
                                          "mem_param_32084") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                          "lifted_fromInit_res_mem_32267") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                          "lifted_fromInit_res_mem_32262") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                          "lifted_fromInit_res_mem_32257") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32063,
                                          "mem_param_32063") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32058,
                                          "mem_param_32058") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32053,
                                          "mem_param_32053") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                          "clusterWith_res_mem_32285") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                          "clusterWith_res_mem_32280") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                          "clusterWith_res_mem_32275") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                          "group_res_arr_mem_34194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                          "group_res_arr_mem_33832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31971,
                                          "mem_param_31971") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31966,
                                          "mem_param_31966") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                          "defunc_0_f_res_mem_32005") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                          "defunc_0_f_res_mem_32000") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          "defunc_1_map_res_subhistos_mem_33190") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                          "group_res_arr_mem_33160") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31850,
                                          "mem_param_31850") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31845,
                                          "mem_param_31845") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                          "defunc_0_f_res_mem_31884") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                          "defunc_0_f_res_mem_31879") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32470,
                                          "out_mem_32470") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32468,
                                          "out_mem_32468") != 0)
                    return 1;
                return 1;
            }
            
            int64_t bytes_32111 = (int64_t) 8 * defunc_2_reduce_res_29639;
            struct memblock_device mem_32112;
            
            mem_32112.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32112, bytes_32111,
                                      "mem_32112")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i64(ctx, mem_32112,
                                              defunc_2_reduce_res_29639,
                                              (int64_t) 0) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int32_t num_subhistos_34419;
            struct memblock_device defunc_1_map_res_subhistos_mem_34420;
            
            defunc_1_map_res_subhistos_mem_34420.references = NULL;
            
            int64_t h_34422;
            
            h_34422 = (int64_t) 8 * defunc_2_reduce_res_29639;
            
            int64_t seg_h_34423;
            
            seg_h_34423 = (int64_t) 8 * defunc_2_reduce_res_29639;
            if (!(seg_h_34423 == (int64_t) 0)) {
                int64_t hist_H_34424 = defunc_2_reduce_res_29639;
                int64_t hist_el_sizze_34425 = sdiv_up64(h_34422, hist_H_34424);
                int64_t hist_N_34426 = n_28846;
                int32_t hist_RF_34427 = 1;
                
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegHist");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Number of threads (T)",
                            (long long) sext_i64_i32(num_groups_31084 *
                            seghist_group_sizze_31082), '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Desired group size (B)",
                            (long long) seghist_group_sizze_31082, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Histogram size (H)",
                            (long long) hist_H_34424, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c",
                            "Input elements per histogram (N)",
                            (long long) hist_N_34426, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Number of segments",
                            (long long) (int64_t) 1, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c",
                            "Histogram element size (el_size)",
                            (long long) hist_el_sizze_34425, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Race factor (RF)",
                            (long long) hist_RF_34427, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c",
                            "Memory per set of subhistograms per segment",
                            (long long) h_34422, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c",
                            "Memory per set of subhistograms times segments",
                            (long long) seg_h_34423, '\n');
                
                int32_t hist_L_34428;
                
                hist_L_34428 = ctx->cuda.max_shared_memory;
                
                int32_t max_group_sizze_34429;
                
                max_group_sizze_34429 = ctx->cuda.max_block_size;
                
                int64_t num_groups_34430;
                
                num_groups_34430 =
                    sdiv_up64(sext_i32_i64(sext_i64_i32(num_groups_31084 *
                              seghist_group_sizze_31082)),
                              max_group_sizze_34429);
                
                double hist_m_prime_34431;
                
                hist_m_prime_34431 =
                    sitofp_i64_f64(smin64(sext_i32_i64(squot32(hist_L_34428,
                                                               hist_el_sizze_34425)),
                                          sdiv_up64(hist_N_34426,
                                                    num_groups_34430))) /
                    sitofp_i64_f64(hist_H_34424);
                
                int64_t hist_M0_34432;
                
                hist_M0_34432 = smax64((int64_t) 1,
                                       smin64(fptosi_f64_i64(hist_m_prime_34431),
                                              max_group_sizze_34429));
                
                int64_t hist_Nout_34433;
                
                hist_Nout_34433 = (int64_t) 1;
                
                int64_t hist_Nin_34434;
                
                hist_Nin_34434 = n_28846;
                
                int64_t work_asymp_M_max_34435;
                
                work_asymp_M_max_34435 = squot64(hist_Nout_34433 * hist_N_34426,
                                                 (int64_t) 2 *
                                                 num_groups_34430 *
                                                 hist_H_34424);
                
                int32_t hist_M_34436;
                
                hist_M_34436 = sext_i64_i32(smin64(hist_M0_34432,
                                                   work_asymp_M_max_34435));
                
                int64_t hist_C_34437;
                
                hist_C_34437 = sdiv_up64(max_group_sizze_34429,
                                         sext_i32_i64(smax32(1, hist_M_34436)));
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "local hist_M0",
                            (long long) hist_M0_34432, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "local work asymp M max",
                            (long long) work_asymp_M_max_34435, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "local C",
                            (long long) hist_C_34437, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "local B",
                            (long long) max_group_sizze_34429, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "local M",
                            (long long) hist_M_34436, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "local memory needed",
                            (long long) (hist_H_34424 * hist_el_sizze_34425 *
                                         sext_i32_i64(hist_M_34436)), '\n');
                
                int64_t local_mem_needed_34438;
                
                local_mem_needed_34438 = hist_el_sizze_34425 *
                    sext_i32_i64(hist_M_34436);
                
                int32_t hist_S_34439;
                
                hist_S_34439 = sext_i64_i32(sdiv_up64(hist_H_34424 *
                                                      local_mem_needed_34438,
                                                      hist_L_34428));
                if (sle64(hist_H_34424, hist_Nin_34434) &&
                    (sle64(local_mem_needed_34438, hist_L_34428) &&
                     (sle32(hist_S_34439, 3) && (sle64(hist_C_34437,
                                                       max_group_sizze_34429) &&
                                                 slt32(0, hist_M_34436))))) {
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "## Using local memory");
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "Histogram size (H)",
                                (long long) hist_H_34424, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c",
                                "Multiplication degree (M)",
                                (long long) hist_M_34436, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "Cooperation level (C)",
                                (long long) hist_C_34437, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "Number of chunks (S)",
                                (long long) hist_S_34439, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c",
                                "Number of local subhistograms per group",
                                (long long) hist_M_34436, '\n');
                    
                    int64_t num_segments_34440;
                    
                    num_segments_34440 = (int64_t) 1;
                    num_subhistos_34419 = num_groups_34430 * num_segments_34440;
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c",
                                "Number of subhistograms in global memory",
                                (long long) num_subhistos_34419, '\n');
                    if (num_subhistos_34419 == (int64_t) 1) {
                        if (memblock_set_device(ctx,
                                                &defunc_1_map_res_subhistos_mem_34420,
                                                &mem_32112, "mem_32112") != 0)
                            return 1;
                    } else {
                        if (memblock_alloc_device(ctx,
                                                  &defunc_1_map_res_subhistos_mem_34420,
                                                  sext_i32_i64(num_subhistos_34419) *
                                                  defunc_2_reduce_res_29639 *
                                                  (int64_t) 8,
                                                  "defunc_1_map_res_subhistos_mem_34420")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (futrts_builtinzhreplicate_i64(ctx,
                                                          defunc_1_map_res_subhistos_mem_34420,
                                                          num_subhistos_34419 *
                                                          defunc_2_reduce_res_29639,
                                                          (int64_t) 0) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        {
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->copy_dev_to_dev_runs,
                                                          &ctx->copy_dev_to_dev_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuMemcpy(defunc_1_map_res_subhistos_mem_34420.mem +
                                                            (int64_t) 0,
                                                            mem_32112.mem +
                                                            (int64_t) 0,
                                                            defunc_2_reduce_res_29639 *
                                                            (int64_t) 8));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                        }
                    }
                    for (int32_t chk_i_34441 = 0; chk_i_34441 < hist_S_34439;
                         chk_i_34441++) {
                        int64_t num_segments_34442 = (int64_t) 1;
                        int64_t hist_H_chk_34443 =
                                sdiv_up64(defunc_2_reduce_res_29639,
                                          sext_i32_i64(hist_S_34439));
                        int64_t histo_sizze_34444 = hist_H_chk_34443;
                        int32_t init_per_thread_34445 =
                                sext_i64_i32(sdiv_up64(sext_i32_i64(hist_M_34436) *
                                                       histo_sizze_34444,
                                                       max_group_sizze_34429));
                        unsigned int shared_sizze_37413 = (int64_t) 8 *
                                     (hist_M_34436 * hist_H_chk_34443);
                        CUdeviceptr kernel_arg_37415 = mem_32103.mem;
                        CUdeviceptr kernel_arg_37416 =
                                    defunc_1_map_res_subhistos_mem_34420.mem;
                        unsigned int shared_offset_37414 = 0;
                        
                        if ((((((1 && num_groups_34430 != 0) && 1 != 0) && 1 !=
                               0) && max_group_sizze_34429 != 0) && 1 != 0) &&
                            1 != 0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = num_groups_34430;
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_37410[] = {&ctx->global_failure,
                                                         &shared_offset_37414,
                                                         &n_28846,
                                                         &defunc_2_reduce_res_29639,
                                                         &max_group_sizze_34429,
                                                         &num_groups_34430,
                                                         &hist_M_34436,
                                                         &chk_i_34441,
                                                         &num_segments_34442,
                                                         &hist_H_chk_34443,
                                                         &histo_sizze_34444,
                                                         &init_per_thread_34445,
                                                         &kernel_arg_37415,
                                                         &kernel_arg_37416};
                            int64_t time_start_37411 = 0, time_end_37412 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size (",
                                        "clusterPoints.seghist_local_31087");
                                fprintf(ctx->log, "%ld",
                                        (long) num_groups_34430);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ") and block size (");
                                fprintf(ctx->log, "%ld",
                                        (long) max_group_sizze_34429);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ").\n");
                                time_start_37411 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->clusterPointsziseghist_local_31087_runs,
                                                          &ctx->clusterPointsziseghist_local_31087_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointsziseghist_local_31087,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2],
                                                                  max_group_sizze_34429,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_37413 +
                                                                   (8 -
                                                                    shared_sizze_37413 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_37410,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_37412 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "clusterPoints.seghist_local_31087",
                                        time_end_37412 - time_start_37411);
                            }
                        }
                    }
                } else {
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "## Using global memory");
                    
                    int64_t hist_H_34473;
                    
                    hist_H_34473 = defunc_2_reduce_res_29639;
                    
                    double hist_RF_34474;
                    
                    hist_RF_34474 = (0.0 + sitofp_i32_f64((int64_t) 1)) / 1.0;
                    
                    int32_t hist_el_sizze_34475;
                    
                    hist_el_sizze_34475 = 8;
                    
                    double hist_C_max_34476;
                    
                    hist_C_max_34476 =
                        fmin64(sitofp_i32_f64(sext_i64_i32(num_groups_31084 *
                               seghist_group_sizze_31082)),
                               sitofp_i32_f64(hist_H_34473) / 2.0);
                    
                    int32_t hist_M_min_34477;
                    
                    hist_M_min_34477 = smax32(1,
                                              sext_i64_i32(fptosi_f64_i64(sitofp_i32_f64(sext_i64_i32(num_groups_31084 *
                                              seghist_group_sizze_31082)) /
                                              hist_C_max_34476)));
                    
                    int32_t L2_sizze_34478;
                    
                    L2_sizze_34478 = ctx->sizes.clusterPointsziL2_sizze_34478;
                    
                    double hist_RACE_exp_34479;
                    
                    hist_RACE_exp_34479 = fmax64(1.0, 0.75 * hist_RF_34474 /
                                                 (64.0 /
                                                  sitofp_i32_f64(hist_el_sizze_34475)));
                    
                    int32_t hist_S_34480;
                    
                    if (slt64(n_28846, hist_H_34473)) {
                        hist_S_34480 = 1;
                    } else {
                        hist_S_34480 =
                            sext_i64_i32(sdiv_up64(sext_i32_i64(hist_M_min_34477) *
                                                   hist_H_34473 *
                                                   sext_i32_i64(hist_el_sizze_34475),
                                                   fptosi_f64_i64(0.4 *
                                                   sitofp_i32_f64(L2_sizze_34478) *
                                                   hist_RACE_exp_34479)));
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %f%c",
                                "Race expansion factor (RACE^exp)",
                                (double) hist_RACE_exp_34479, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "Number of chunks (S)",
                                (long long) hist_S_34480, '\n');
                    
                    int64_t hist_H_chk_34481;
                    
                    hist_H_chk_34481 = sdiv_up64(defunc_2_reduce_res_29639,
                                                 sext_i32_i64(hist_S_34480));
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "Chunk size (H_chk)",
                                (long long) hist_H_chk_34481, '\n');
                    
                    double hist_k_max_34482;
                    
                    hist_k_max_34482 = fmin64(0.4 *
                                              (sitofp_i32_f64(L2_sizze_34478) /
                                               sitofp_i32_f64(8)) *
                                              hist_RACE_exp_34479,
                                              sitofp_i32_f64(n_28846)) /
                        sitofp_i32_f64(sext_i64_i32(num_groups_31084 *
                        seghist_group_sizze_31082));
                    
                    int64_t hist_u_34483;
                    
                    hist_u_34483 = (int64_t) 2;
                    
                    double hist_C_34484;
                    
                    hist_C_34484 =
                        fmin64(sitofp_i32_f64(sext_i64_i32(num_groups_31084 *
                               seghist_group_sizze_31082)),
                               sitofp_i32_f64(hist_u_34483 * hist_H_chk_34481) /
                               hist_k_max_34482);
                    
                    int32_t hist_M_34485;
                    
                    hist_M_34485 = 1;
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %f%c",
                                "Elements/thread in L2 cache (k_max)",
                                (double) hist_k_max_34482, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c",
                                "Multiplication degree (M)",
                                (long long) hist_M_34485, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %f%c", "Cooperation level (C)",
                                (double) hist_C_34484, '\n');
                    num_subhistos_34419 = sext_i32_i64(hist_M_34485);
                    if (hist_M_34485 == 1) {
                        if (memblock_set_device(ctx,
                                                &defunc_1_map_res_subhistos_mem_34420,
                                                &mem_32112, "mem_32112") != 0)
                            return 1;
                    } else {
                        if (num_subhistos_34419 == (int64_t) 1) {
                            if (memblock_set_device(ctx,
                                                    &defunc_1_map_res_subhistos_mem_34420,
                                                    &mem_32112, "mem_32112") !=
                                0)
                                return 1;
                        } else {
                            if (memblock_alloc_device(ctx,
                                                      &defunc_1_map_res_subhistos_mem_34420,
                                                      sext_i32_i64(num_subhistos_34419) *
                                                      defunc_2_reduce_res_29639 *
                                                      (int64_t) 8,
                                                      "defunc_1_map_res_subhistos_mem_34420")) {
                                err = 1;
                                goto cleanup;
                            }
                            if (futrts_builtinzhreplicate_i64(ctx,
                                                              defunc_1_map_res_subhistos_mem_34420,
                                                              num_subhistos_34419 *
                                                              defunc_2_reduce_res_29639,
                                                              (int64_t) 0) !=
                                0) {
                                err = 1;
                                goto cleanup;
                            }
                            {
                                cudaEvent_t *pevents = NULL;
                                
                                if (ctx->profiling && !ctx->profiling_paused) {
                                    pevents = cuda_get_events(&ctx->cuda,
                                                              &ctx->copy_dev_to_dev_runs,
                                                              &ctx->copy_dev_to_dev_total_runtime);
                                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                       0));
                                }
                                CUDA_SUCCEED_OR_RETURN(cuMemcpy(defunc_1_map_res_subhistos_mem_34420.mem +
                                                                (int64_t) 0,
                                                                mem_32112.mem +
                                                                (int64_t) 0,
                                                                defunc_2_reduce_res_29639 *
                                                                (int64_t) 8));
                                if (pevents != NULL)
                                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                       0));
                            }
                        }
                    }
                    for (int32_t chk_i_34486 = 0; chk_i_34486 < hist_S_34480;
                         chk_i_34486++) {
                        int64_t hist_H_chk_34487 =
                                sdiv_up64(defunc_2_reduce_res_29639,
                                          sext_i32_i64(hist_S_34480));
                        CUdeviceptr kernel_arg_37420 = mem_32103.mem;
                        CUdeviceptr kernel_arg_37421 =
                                    defunc_1_map_res_subhistos_mem_34420.mem;
                        
                        if ((((((1 && num_groups_31084 != 0) && 1 != 0) && 1 !=
                               0) && seghist_group_sizze_31082 != 0) && 1 !=
                             0) && 1 != 0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = num_groups_31084;
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_37417[] = {&ctx->global_failure,
                                                         &n_28846,
                                                         &defunc_2_reduce_res_29639,
                                                         &num_groups_31084,
                                                         &num_subhistos_34419,
                                                         &chk_i_34486,
                                                         &hist_H_chk_34487,
                                                         &kernel_arg_37420,
                                                         &kernel_arg_37421};
                            int64_t time_start_37418 = 0, time_end_37419 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size (",
                                        "clusterPoints.seghist_global_31087");
                                fprintf(ctx->log, "%ld",
                                        (long) num_groups_31084);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ") and block size (");
                                fprintf(ctx->log, "%ld",
                                        (long) seghist_group_sizze_31082);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ").\n");
                                time_start_37418 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->clusterPointsziseghist_global_31087_runs,
                                                          &ctx->clusterPointsziseghist_global_31087_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointsziseghist_global_31087,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2],
                                                                  seghist_group_sizze_31082,
                                                                  1, 1, 0, NULL,
                                                                  kernel_args_37417,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_37419 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "clusterPoints.seghist_global_31087",
                                        time_end_37419 - time_start_37418);
                            }
                        }
                    }
                }
                if (num_subhistos_34419 == (int64_t) 1) {
                    if (memblock_set_device(ctx, &mem_32112,
                                            &defunc_1_map_res_subhistos_mem_34420,
                                            "defunc_1_map_res_subhistos_mem_34420") !=
                        0)
                        return 1;
                } else {
                    if (slt64(num_subhistos_34419 * (int64_t) 2,
                              seghist_group_sizze_31082)) {
                        int64_t segment_sizze_nonzzero_34499 =
                                smax64((int64_t) 1, num_subhistos_34419);
                        int64_t num_threads_34500 = num_groups_31084 *
                                seghist_group_sizze_31082;
                        
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s\n", "\n# SegRed-small");
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c", "num_segments",
                                    (long long) defunc_2_reduce_res_29639,
                                    '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c", "segment_size",
                                    (long long) num_subhistos_34419, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "segments_per_group",
                                    (long long) squot64(seghist_group_sizze_31082,
                                                        segment_sizze_nonzzero_34499),
                                    '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c", "required_groups",
                                    (long long) sext_i64_i32(sdiv_up64(defunc_2_reduce_res_29639,
                                                                       squot64(seghist_group_sizze_31082,
                                                                               segment_sizze_nonzzero_34499))),
                                    '\n');
                        
                        unsigned int shared_sizze_37425 = (int64_t) 8 *
                                     seghist_group_sizze_31082;
                        CUdeviceptr kernel_arg_37427 = mem_32112.mem;
                        CUdeviceptr kernel_arg_37428 =
                                    defunc_1_map_res_subhistos_mem_34420.mem;
                        unsigned int shared_offset_37426 = 0;
                        
                        if ((((((1 && num_groups_31084 != 0) && 1 != 0) && 1 !=
                               0) && seghist_group_sizze_31082 != 0) && 1 !=
                             0) && 1 != 0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = num_groups_31084;
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_37422[] = {&ctx->global_failure,
                                                         &shared_offset_37426,
                                                         &defunc_2_reduce_res_29639,
                                                         &num_groups_31084,
                                                         &num_subhistos_34419,
                                                         &segment_sizze_nonzzero_34499,
                                                         &kernel_arg_37427,
                                                         &kernel_arg_37428};
                            int64_t time_start_37423 = 0, time_end_37424 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size (",
                                        "clusterPoints.segred_small_34498");
                                fprintf(ctx->log, "%ld",
                                        (long) num_groups_31084);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ") and block size (");
                                fprintf(ctx->log, "%ld",
                                        (long) seghist_group_sizze_31082);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ").\n");
                                time_start_37423 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->clusterPointszisegred_small_34498_runs,
                                                          &ctx->clusterPointszisegred_small_34498_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_small_34498,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2],
                                                                  seghist_group_sizze_31082,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_37425 +
                                                                   (8 -
                                                                    shared_sizze_37425 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_37422,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_37424 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "clusterPoints.segred_small_34498",
                                        time_end_37424 - time_start_37423);
                            }
                        }
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s\n", "");
                    } else {
                        int64_t groups_per_segment_34520 =
                                sdiv_up64(num_groups_31084, smax64((int64_t) 1,
                                                                   defunc_2_reduce_res_29639));
                        int64_t elements_per_thread_34521 =
                                sdiv_up64(num_subhistos_34419,
                                          seghist_group_sizze_31082 *
                                          groups_per_segment_34520);
                        int64_t virt_num_groups_34522 =
                                groups_per_segment_34520 *
                                defunc_2_reduce_res_29639;
                        int64_t num_threads_34523 = num_groups_31084 *
                                seghist_group_sizze_31082;
                        int64_t threads_per_segment_34524 =
                                groups_per_segment_34520 *
                                seghist_group_sizze_31082;
                        
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s\n", "\n# SegRed-large");
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c", "num_segments",
                                    (long long) defunc_2_reduce_res_29639,
                                    '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c", "segment_size",
                                    (long long) num_subhistos_34419, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c", "virt_num_groups",
                                    (long long) virt_num_groups_34522, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c", "num_groups",
                                    (long long) num_groups_31084, '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c", "group_size",
                                    (long long) seghist_group_sizze_31082,
                                    '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c", "elems_per_thread",
                                    (long long) elements_per_thread_34521,
                                    '\n');
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s: %llu%c",
                                    "groups_per_segment",
                                    (long long) groups_per_segment_34520, '\n');
                        
                        struct memblock_device group_res_arr_mem_34525;
                        
                        group_res_arr_mem_34525.references = NULL;
                        if (memblock_alloc_device(ctx, &group_res_arr_mem_34525,
                                                  (int64_t) 8 *
                                                  (seghist_group_sizze_31082 *
                                                   virt_num_groups_34522),
                                                  "group_res_arr_mem_34525")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock_device clusterPointszicounter_mem_34527
                                               =
                                               ctx->clusterPointszicounter_mem_34527;
                        unsigned int shared_sizze_37433 = 1;
                        unsigned int shared_sizze_37435 = (int64_t) 8 *
                                     seghist_group_sizze_31082;
                        CUdeviceptr kernel_arg_37437 = mem_32112.mem;
                        CUdeviceptr kernel_arg_37438 =
                                    defunc_1_map_res_subhistos_mem_34420.mem;
                        CUdeviceptr kernel_arg_37439 =
                                    group_res_arr_mem_34525.mem;
                        CUdeviceptr kernel_arg_37440 =
                                    clusterPointszicounter_mem_34527.mem;
                        unsigned int shared_offset_37434 = 0;
                        unsigned int shared_offset_37436 = 0 +
                                     (shared_sizze_37433 + (8 -
                                                            shared_sizze_37433 %
                                                            8) % 8);
                        
                        if ((((((1 && num_groups_31084 != 0) && 1 != 0) && 1 !=
                               0) && seghist_group_sizze_31082 != 0) && 1 !=
                             0) && 1 != 0) {
                            int perm[3] = {0, 1, 2};
                            
                            if (1 >= 1 << 16) {
                                perm[1] = perm[0];
                                perm[0] = 1;
                            }
                            if (1 >= 1 << 16) {
                                perm[2] = perm[0];
                                perm[0] = 2;
                            }
                            
                            size_t grid[3];
                            
                            grid[perm[0]] = num_groups_31084;
                            grid[perm[1]] = 1;
                            grid[perm[2]] = 1;
                            
                            void *kernel_args_37430[] = {&ctx->global_failure,
                                                         &shared_offset_37434,
                                                         &shared_offset_37436,
                                                         &defunc_2_reduce_res_29639,
                                                         &num_groups_31084,
                                                         &num_subhistos_34419,
                                                         &groups_per_segment_34520,
                                                         &elements_per_thread_34521,
                                                         &virt_num_groups_34522,
                                                         &threads_per_segment_34524,
                                                         &kernel_arg_37437,
                                                         &kernel_arg_37438,
                                                         &kernel_arg_37439,
                                                         &kernel_arg_37440};
                            int64_t time_start_37431 = 0, time_end_37432 = 0;
                            
                            if (ctx->debugging) {
                                fprintf(ctx->log,
                                        "Launching %s with grid size (",
                                        "clusterPoints.segred_large_34498");
                                fprintf(ctx->log, "%ld",
                                        (long) num_groups_31084);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ") and block size (");
                                fprintf(ctx->log, "%ld",
                                        (long) seghist_group_sizze_31082);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ", ");
                                fprintf(ctx->log, "%ld", (long) 1);
                                fprintf(ctx->log, ").\n");
                                time_start_37431 = get_wall_time();
                            }
                            
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->clusterPointszisegred_large_34498_runs,
                                                          &ctx->clusterPointszisegred_large_34498_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_large_34498,
                                                                  grid[0],
                                                                  grid[1],
                                                                  grid[2],
                                                                  seghist_group_sizze_31082,
                                                                  1, 1, 0 +
                                                                  (shared_sizze_37433 +
                                                                   (8 -
                                                                    shared_sizze_37433 %
                                                                    8) % 8) +
                                                                  (shared_sizze_37435 +
                                                                   (8 -
                                                                    shared_sizze_37435 %
                                                                    8) % 8),
                                                                  NULL,
                                                                  kernel_args_37430,
                                                                  NULL));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                            if (ctx->debugging) {
                                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                                time_end_37432 = get_wall_time();
                                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                        "clusterPoints.segred_large_34498",
                                        time_end_37432 - time_start_37431);
                            }
                        }
                        if (ctx->debugging)
                            fprintf(ctx->log, "%s\n", "");
                        if (memblock_unref_device(ctx, &group_res_arr_mem_34525,
                                                  "group_res_arr_mem_34525") !=
                            0)
                            return 1;
                    }
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            
            int64_t num_groups_31099;
            int32_t max_num_groups_34559;
            
            max_num_groups_34559 =
                ctx->sizes.clusterPointszisegscan_num_groups_31098;
            num_groups_31099 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(defunc_2_reduce_res_29639,
                                                                    segscan_group_sizze_31097),
                                                          sext_i32_i64(max_num_groups_34559))));
            
            struct memblock_device mem_32116;
            
            mem_32116.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32116,
                                      defunc_2_reduce_res_29639, "mem_32116")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32118;
            
            mem_32118.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32118, bytes_32111,
                                      "mem_32118")) {
                err = 1;
                goto cleanup;
            }
            if (slt64((int64_t) 0, defunc_2_reduce_res_29639)) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegScan");
                
                int64_t numThreads_34560;
                
                numThreads_34560 = sdiv_up64(defunc_2_reduce_res_29639,
                                             segscan_group_sizze_31097 *
                                             (int64_t) 9) *
                    segscan_group_sizze_31097;
                
                int64_t numGroups_34561;
                
                numGroups_34561 = sdiv_up64(defunc_2_reduce_res_29639,
                                            segscan_group_sizze_31097 *
                                            (int64_t) 9);
                
                struct memblock_device clusterPointsziid_counter_mem_34562 =
                                       ctx->clusterPointsziid_counter_mem_34562;
                struct memblock_device status_flags_mem_34564;
                
                status_flags_mem_34564.references = NULL;
                if (memblock_alloc_device(ctx, &status_flags_mem_34564,
                                          numGroups_34561,
                                          "status_flags_mem_34564")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_34566;
                
                aggregates_mem_34566.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_34566,
                                          numGroups_34561,
                                          "aggregates_mem_34566")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_34568;
                
                incprefixes_mem_34568.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_34568,
                                          numGroups_34561,
                                          "incprefixes_mem_34568")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_34570;
                
                aggregates_mem_34570.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_34570,
                                          (int64_t) 8 * numGroups_34561,
                                          "aggregates_mem_34570")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_34572;
                
                incprefixes_mem_34572.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_34572,
                                          (int64_t) 8 * numGroups_34561,
                                          "incprefixes_mem_34572")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_34564,
                                                 numGroups_34561, (int8_t) 0) !=
                    0) {
                    err = 1;
                    goto cleanup;
                }
                
                unsigned int shared_sizze_37445 = smax64(smax64((int64_t) 320,
                                                                sdiv_up64(segscan_group_sizze_31097,
                                                                          (int64_t) 8) *
                                                                (int64_t) 8 +
                                                                (int64_t) 8 *
                                                                segscan_group_sizze_31097),
                                                         smax64((int64_t) 9 *
                                                                segscan_group_sizze_31097,
                                                                (int64_t) 9 *
                                                                segscan_group_sizze_31097 *
                                                                (int64_t) 8));
                CUdeviceptr kernel_arg_37447 = mem_32112.mem;
                CUdeviceptr kernel_arg_37448 = mem_32116.mem;
                CUdeviceptr kernel_arg_37449 = mem_32118.mem;
                CUdeviceptr kernel_arg_37450 =
                            clusterPointsziid_counter_mem_34562.mem;
                CUdeviceptr kernel_arg_37451 = status_flags_mem_34564.mem;
                CUdeviceptr kernel_arg_37452 = aggregates_mem_34566.mem;
                CUdeviceptr kernel_arg_37453 = incprefixes_mem_34568.mem;
                CUdeviceptr kernel_arg_37454 = aggregates_mem_34570.mem;
                CUdeviceptr kernel_arg_37455 = incprefixes_mem_34572.mem;
                unsigned int shared_offset_37446 = 0;
                
                if ((((((1 && sdiv_up64(defunc_2_reduce_res_29639,
                                        segscan_group_sizze_31097 *
                                        (int64_t) 9) != 0) && 1 != 0) && 1 !=
                       0) && segscan_group_sizze_31097 != 0) && 1 != 0) && 1 !=
                    0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_29639,
                                              segscan_group_sizze_31097 *
                                              (int64_t) 9);
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37442[] = {&ctx->global_failure,
                                                 &shared_offset_37446,
                                                 &defunc_2_reduce_res_29639,
                                                 &kernel_arg_37447,
                                                 &kernel_arg_37448,
                                                 &kernel_arg_37449,
                                                 &kernel_arg_37450,
                                                 &kernel_arg_37451,
                                                 &kernel_arg_37452,
                                                 &kernel_arg_37453,
                                                 &kernel_arg_37454,
                                                 &kernel_arg_37455};
                    int64_t time_start_37443 = 0, time_end_37444 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segscan_31102");
                        fprintf(ctx->log, "%ld",
                                (long) sdiv_up64(defunc_2_reduce_res_29639,
                                                 segscan_group_sizze_31097 *
                                                 (int64_t) 9));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segscan_group_sizze_31097);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37443 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegscan_31102_runs,
                                                  &ctx->clusterPointszisegscan_31102_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31102,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segscan_group_sizze_31097,
                                                          1, 1, 0 +
                                                          (shared_sizze_37445 +
                                                           (8 -
                                                            shared_sizze_37445 %
                                                            8) % 8), NULL,
                                                          kernel_args_37442,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37444 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segscan_31102", time_end_37444 -
                                time_start_37443);
                    }
                }
                if (memblock_unref_device(ctx, &incprefixes_mem_34572,
                                          "incprefixes_mem_34572") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_34570,
                                          "aggregates_mem_34570") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &incprefixes_mem_34568,
                                          "incprefixes_mem_34568") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_34566,
                                          "aggregates_mem_34566") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &status_flags_mem_34564,
                                          "status_flags_mem_34564") != 0)
                    return 1;
            }
            if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                return 1;
            
            int64_t num_groups_31107;
            int32_t max_num_groups_34692;
            
            max_num_groups_34692 =
                ctx->sizes.clusterPointszisegscan_num_groups_31106;
            num_groups_31107 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(defunc_2_reduce_res_29639,
                                                                    segscan_group_sizze_31105),
                                                          sext_i32_i64(max_num_groups_34692))));
            
            struct memblock_device mem_32121;
            
            mem_32121.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32121,
                                      defunc_2_reduce_res_29639, "mem_32121")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32123;
            
            mem_32123.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32123, bytes_32111,
                                      "mem_32123")) {
                err = 1;
                goto cleanup;
            }
            if (slt64((int64_t) 0, defunc_2_reduce_res_29639)) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegScan");
                
                int64_t numThreads_34693;
                
                numThreads_34693 = sdiv_up64(defunc_2_reduce_res_29639,
                                             segscan_group_sizze_31105 *
                                             (int64_t) 9) *
                    segscan_group_sizze_31105;
                
                int64_t numGroups_34694;
                
                numGroups_34694 = sdiv_up64(defunc_2_reduce_res_29639,
                                            segscan_group_sizze_31105 *
                                            (int64_t) 9);
                
                struct memblock_device clusterPointsziid_counter_mem_34695 =
                                       ctx->clusterPointsziid_counter_mem_34695;
                struct memblock_device status_flags_mem_34697;
                
                status_flags_mem_34697.references = NULL;
                if (memblock_alloc_device(ctx, &status_flags_mem_34697,
                                          numGroups_34694,
                                          "status_flags_mem_34697")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_34699;
                
                aggregates_mem_34699.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_34699,
                                          numGroups_34694,
                                          "aggregates_mem_34699")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_34701;
                
                incprefixes_mem_34701.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_34701,
                                          numGroups_34694,
                                          "incprefixes_mem_34701")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_34703;
                
                aggregates_mem_34703.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_34703,
                                          (int64_t) 8 * numGroups_34694,
                                          "aggregates_mem_34703")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_34705;
                
                incprefixes_mem_34705.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_34705,
                                          (int64_t) 8 * numGroups_34694,
                                          "incprefixes_mem_34705")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_34697,
                                                 numGroups_34694, (int8_t) 0) !=
                    0) {
                    err = 1;
                    goto cleanup;
                }
                
                unsigned int shared_sizze_37460 = smax64(smax64((int64_t) 320,
                                                                sdiv_up64(segscan_group_sizze_31105,
                                                                          (int64_t) 8) *
                                                                (int64_t) 8 +
                                                                (int64_t) 8 *
                                                                segscan_group_sizze_31105),
                                                         smax64((int64_t) 9 *
                                                                segscan_group_sizze_31105,
                                                                (int64_t) 9 *
                                                                segscan_group_sizze_31105 *
                                                                (int64_t) 8));
                CUdeviceptr kernel_arg_37462 = mem_32118.mem;
                CUdeviceptr kernel_arg_37463 = mem_32121.mem;
                CUdeviceptr kernel_arg_37464 = mem_32123.mem;
                CUdeviceptr kernel_arg_37465 =
                            clusterPointsziid_counter_mem_34695.mem;
                CUdeviceptr kernel_arg_37466 = status_flags_mem_34697.mem;
                CUdeviceptr kernel_arg_37467 = aggregates_mem_34699.mem;
                CUdeviceptr kernel_arg_37468 = incprefixes_mem_34701.mem;
                CUdeviceptr kernel_arg_37469 = aggregates_mem_34703.mem;
                CUdeviceptr kernel_arg_37470 = incprefixes_mem_34705.mem;
                unsigned int shared_offset_37461 = 0;
                
                if ((((((1 && sdiv_up64(defunc_2_reduce_res_29639,
                                        segscan_group_sizze_31105 *
                                        (int64_t) 9) != 0) && 1 != 0) && 1 !=
                       0) && segscan_group_sizze_31105 != 0) && 1 != 0) && 1 !=
                    0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_29639,
                                              segscan_group_sizze_31105 *
                                              (int64_t) 9);
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37457[] = {&ctx->global_failure,
                                                 &shared_offset_37461,
                                                 &defunc_2_reduce_res_29639,
                                                 &kernel_arg_37462,
                                                 &kernel_arg_37463,
                                                 &kernel_arg_37464,
                                                 &kernel_arg_37465,
                                                 &kernel_arg_37466,
                                                 &kernel_arg_37467,
                                                 &kernel_arg_37468,
                                                 &kernel_arg_37469,
                                                 &kernel_arg_37470};
                    int64_t time_start_37458 = 0, time_end_37459 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segscan_31110");
                        fprintf(ctx->log, "%ld",
                                (long) sdiv_up64(defunc_2_reduce_res_29639,
                                                 segscan_group_sizze_31105 *
                                                 (int64_t) 9));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segscan_group_sizze_31105);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37458 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegscan_31110_runs,
                                                  &ctx->clusterPointszisegscan_31110_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31110,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segscan_group_sizze_31105,
                                                          1, 1, 0 +
                                                          (shared_sizze_37460 +
                                                           (8 -
                                                            shared_sizze_37460 %
                                                            8) % 8), NULL,
                                                          kernel_args_37457,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37459 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segscan_31110", time_end_37459 -
                                time_start_37458);
                    }
                }
                if (memblock_unref_device(ctx, &incprefixes_mem_34705,
                                          "incprefixes_mem_34705") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_34703,
                                          "aggregates_mem_34703") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &incprefixes_mem_34701,
                                          "incprefixes_mem_34701") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_34699,
                                          "aggregates_mem_34699") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &status_flags_mem_34697,
                                          "status_flags_mem_34697") != 0)
                    return 1;
            }
            if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                return 1;
            
            int64_t segmap_usable_groups_31168 =
                    sdiv_up64(defunc_2_reduce_res_29639,
                              segmap_group_sizze_31167);
            struct memblock_device mem_32126;
            
            mem_32126.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32126, bytes_32111,
                                      "mem_32126")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t bytes_32127 = (int64_t) 4 * defunc_2_reduce_res_29639;
            struct memblock_device mem_32128;
            
            mem_32128.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32128, bytes_32127,
                                      "mem_32128")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32130;
            
            mem_32130.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32130, bytes_32127,
                                      "mem_32130")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            CUdeviceptr kernel_arg_37474 = mem_param_32084.mem;
            CUdeviceptr kernel_arg_37475 = mem_param_32089.mem;
            CUdeviceptr kernel_arg_37476 = mem_32107.mem;
            CUdeviceptr kernel_arg_37477 = mem_32118.mem;
            CUdeviceptr kernel_arg_37478 = mem_32123.mem;
            CUdeviceptr kernel_arg_37479 = mem_32126.mem;
            CUdeviceptr kernel_arg_37480 = mem_32128.mem;
            CUdeviceptr kernel_arg_37481 = mem_32130.mem;
            
            if ((((((1 && segmap_usable_groups_31168 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_31167 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_31168;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37471[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &n_28846, &maxSizze_29582,
                                             &defunc_2_reduce_res_29639,
                                             &kernel_arg_37474,
                                             &kernel_arg_37475,
                                             &kernel_arg_37476,
                                             &kernel_arg_37477,
                                             &kernel_arg_37478,
                                             &kernel_arg_37479,
                                             &kernel_arg_37480,
                                             &kernel_arg_37481};
                int64_t time_start_37472 = 0, time_end_37473 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segmap_31112");
                    fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31168);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31167);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37472 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegmap_31112_runs,
                                              &ctx->clusterPointszisegmap_31112_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31112,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_31167,
                                                      1, 1, 0, NULL,
                                                      kernel_args_37471, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37473 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segmap_31112", time_end_37473 -
                            time_start_37472);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                return 1;
            
            struct memblock_device mem_32132;
            
            mem_32132.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32132, bytes_32111,
                                      "mem_32132")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhiota_i64(ctx, mem_32132,
                                         defunc_2_reduce_res_29639, (int64_t) 0,
                                         (int64_t) 1) != 0) {
                err = 1;
                goto cleanup;
            }
            
            bool cond_29756 = defunc_2_reduce_res_29639 == (int64_t) 0;
            int32_t iters_29757;
            
            if (cond_29756) {
                iters_29757 = 0;
            } else {
                iters_29757 = 32;
            }
            
            bool loop_nonempty_29758 = slt32(0, iters_29757);
            int64_t i_29759 = sub64(defunc_2_reduce_res_29639, (int64_t) 1);
            bool x_29760 = sle64((int64_t) 0, i_29759);
            bool y_29761 = slt64(i_29759, defunc_2_reduce_res_29639);
            bool bounds_check_29762 = x_29760 && y_29761;
            bool loop_not_taken_29763 = !loop_nonempty_29758;
            bool protect_assert_disj_29764 = bounds_check_29762 ||
                 loop_not_taken_29763;
            bool index_certs_29765;
            
            if (!protect_assert_disj_29764) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", i_29759,
                              "] out of bounds for array of shape [",
                              defunc_2_reduce_res_29639, "].",
                              "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:25:24-35\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:53:31-62\n   #3  /prelude/functional.fut:9:42-44\n   #4  lib/github.com/diku-dk/sorts/radix_sort.fut:59:3-61:47\n   #5  lib/github.com/diku-dk/sorts/radix_sort.fut:68:3-51\n   #6  /prelude/functional.fut:9:42-44\n   #7  src/cluster.fut:154:23-155:69\n   #8  src/cluster.fut:170:14-27\n   #9  src/cluster.fut:176:27-76\n   #10 src/cluster.fut:195:18-38\n   #11 src/cluster.fut:190:1-200:50\n");
                if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_34420,
                                          "defunc_1_map_res_subhistos_mem_34420") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                          "group_res_arr_mem_34391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32094,
                                          "mem_param_32094") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32089,
                                          "mem_param_32089") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32084,
                                          "mem_param_32084") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                          "lifted_fromInit_res_mem_32267") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                          "lifted_fromInit_res_mem_32262") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                          "lifted_fromInit_res_mem_32257") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32063,
                                          "mem_param_32063") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32058,
                                          "mem_param_32058") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32053,
                                          "mem_param_32053") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                          "clusterWith_res_mem_32285") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                          "clusterWith_res_mem_32280") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                          "clusterWith_res_mem_32275") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                          "group_res_arr_mem_34194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                          "group_res_arr_mem_33832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31971,
                                          "mem_param_31971") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31966,
                                          "mem_param_31966") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                          "defunc_0_f_res_mem_32005") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                          "defunc_0_f_res_mem_32000") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          "defunc_1_map_res_subhistos_mem_33190") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                          "group_res_arr_mem_33160") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31850,
                                          "mem_param_31850") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31845,
                                          "mem_param_31845") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                          "defunc_0_f_res_mem_31884") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                          "defunc_0_f_res_mem_31879") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32470,
                                          "out_mem_32470") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32468,
                                          "out_mem_32468") != 0)
                    return 1;
                return 1;
            }
            
            int64_t num_groups_31225;
            int32_t max_num_groups_34830;
            
            max_num_groups_34830 =
                ctx->sizes.clusterPointszisegscan_num_groups_31224;
            num_groups_31225 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(defunc_2_reduce_res_29639,
                                                                    segscan_group_sizze_31223),
                                                          sext_i32_i64(max_num_groups_34830))));
            
            int64_t segmap_usable_groups_31234 =
                    sdiv_up_safe64(defunc_2_reduce_res_29639,
                                   segmap_group_sizze_31233);
            struct memblock_device mem_32149;
            
            mem_32149.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32149, bytes_32111,
                                      "mem_32149")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32151;
            
            mem_32151.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32151, bytes_32111,
                                      "mem_32151")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32153;
            
            mem_32153.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32153, bytes_32111,
                                      "mem_32153")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32155;
            
            mem_32155.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32155, bytes_32111,
                                      "mem_32155")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32157;
            
            mem_32157.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32157, bytes_32127,
                                      "mem_32157")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device defunc_0_f_res_mem_32171;
            
            defunc_0_f_res_mem_32171.references = NULL;
            
            struct memblock_device defunc_0_f_res_mem_32176;
            
            defunc_0_f_res_mem_32176.references = NULL;
            
            struct memblock_device mem_param_32137;
            
            mem_param_32137.references = NULL;
            
            struct memblock_device mem_param_32142;
            
            mem_param_32142.references = NULL;
            if (memblock_set_device(ctx, &mem_param_32137, &mem_32126,
                                    "mem_32126") != 0)
                return 1;
            if (memblock_set_device(ctx, &mem_param_32142, &mem_32132,
                                    "mem_32132") != 0)
                return 1;
            for (int32_t i_29768 = 0; i_29768 < iters_29757; i_29768++) {
                int32_t defunc_2_radix_sort_step_arg_29771 = mul32(2, i_29768);
                int32_t defunc_0_get_bit_arg_29772 = add32(1,
                                                           defunc_2_radix_sort_step_arg_29771);
                int64_t i32_res_29773 =
                        sext_i32_i64(defunc_0_get_bit_arg_29772);
                int64_t i32_res_29774 =
                        sext_i32_i64(defunc_2_radix_sort_step_arg_29771);
                
                if (slt64((int64_t) 0, defunc_2_reduce_res_29639)) {
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegScan");
                    
                    int64_t numThreads_34835;
                    
                    numThreads_34835 = sdiv_up64(defunc_2_reduce_res_29639,
                                                 segscan_group_sizze_31223 *
                                                 (int64_t) 9) *
                        segscan_group_sizze_31223;
                    
                    int64_t numGroups_34836;
                    
                    numGroups_34836 = sdiv_up64(defunc_2_reduce_res_29639,
                                                segscan_group_sizze_31223 *
                                                (int64_t) 9);
                    
                    struct memblock_device clusterPointsziid_counter_mem_34837 =
                                           ctx->clusterPointsziid_counter_mem_34837;
                    struct memblock_device status_flags_mem_34839;
                    
                    status_flags_mem_34839.references = NULL;
                    if (memblock_alloc_device(ctx, &status_flags_mem_34839,
                                              numGroups_34836,
                                              "status_flags_mem_34839")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock_device aggregates_mem_34841;
                    
                    aggregates_mem_34841.references = NULL;
                    if (memblock_alloc_device(ctx, &aggregates_mem_34841,
                                              (int64_t) 8 * numGroups_34836,
                                              "aggregates_mem_34841")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock_device incprefixes_mem_34843;
                    
                    incprefixes_mem_34843.references = NULL;
                    if (memblock_alloc_device(ctx, &incprefixes_mem_34843,
                                              (int64_t) 8 * numGroups_34836,
                                              "incprefixes_mem_34843")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock_device aggregates_mem_34845;
                    
                    aggregates_mem_34845.references = NULL;
                    if (memblock_alloc_device(ctx, &aggregates_mem_34845,
                                              (int64_t) 8 * numGroups_34836,
                                              "aggregates_mem_34845")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock_device incprefixes_mem_34847;
                    
                    incprefixes_mem_34847.references = NULL;
                    if (memblock_alloc_device(ctx, &incprefixes_mem_34847,
                                              (int64_t) 8 * numGroups_34836,
                                              "incprefixes_mem_34847")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock_device aggregates_mem_34849;
                    
                    aggregates_mem_34849.references = NULL;
                    if (memblock_alloc_device(ctx, &aggregates_mem_34849,
                                              (int64_t) 8 * numGroups_34836,
                                              "aggregates_mem_34849")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock_device incprefixes_mem_34851;
                    
                    incprefixes_mem_34851.references = NULL;
                    if (memblock_alloc_device(ctx, &incprefixes_mem_34851,
                                              (int64_t) 8 * numGroups_34836,
                                              "incprefixes_mem_34851")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock_device aggregates_mem_34853;
                    
                    aggregates_mem_34853.references = NULL;
                    if (memblock_alloc_device(ctx, &aggregates_mem_34853,
                                              (int64_t) 8 * numGroups_34836,
                                              "aggregates_mem_34853")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock_device incprefixes_mem_34855;
                    
                    incprefixes_mem_34855.references = NULL;
                    if (memblock_alloc_device(ctx, &incprefixes_mem_34855,
                                              (int64_t) 8 * numGroups_34836,
                                              "incprefixes_mem_34855")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (futrts_builtinzhreplicate_i8(ctx,
                                                     status_flags_mem_34839,
                                                     numGroups_34836,
                                                     (int8_t) 0) != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    unsigned int shared_sizze_37486 =
                                 smax64(smax64((int64_t) 1056,
                                               sdiv_up64(sdiv_up64(sdiv_up64((int64_t) 8 *
                                                                             segscan_group_sizze_31223,
                                                                             (int64_t) 8) *
                                                                   (int64_t) 8 +
                                                                   (int64_t) 8 *
                                                                   segscan_group_sizze_31223,
                                                                   (int64_t) 8) *
                                                         (int64_t) 8 +
                                                         (int64_t) 8 *
                                                         segscan_group_sizze_31223,
                                                         (int64_t) 8) *
                                               (int64_t) 8 + (int64_t) 8 *
                                               segscan_group_sizze_31223),
                                        smax64(smax64(smax64((int64_t) 9 *
                                                             segscan_group_sizze_31223 *
                                                             (int64_t) 8,
                                                             (int64_t) 9 *
                                                             segscan_group_sizze_31223 *
                                                             (int64_t) 8),
                                                      (int64_t) 9 *
                                                      segscan_group_sizze_31223 *
                                                      (int64_t) 8),
                                               (int64_t) 9 *
                                               segscan_group_sizze_31223 *
                                               (int64_t) 8));
                    CUdeviceptr kernel_arg_37488 = mem_param_32137.mem;
                    CUdeviceptr kernel_arg_37489 = mem_32149.mem;
                    CUdeviceptr kernel_arg_37490 = mem_32151.mem;
                    CUdeviceptr kernel_arg_37491 = mem_32153.mem;
                    CUdeviceptr kernel_arg_37492 = mem_32155.mem;
                    CUdeviceptr kernel_arg_37493 = mem_32157.mem;
                    CUdeviceptr kernel_arg_37494 =
                                clusterPointsziid_counter_mem_34837.mem;
                    CUdeviceptr kernel_arg_37495 = status_flags_mem_34839.mem;
                    CUdeviceptr kernel_arg_37496 = aggregates_mem_34841.mem;
                    CUdeviceptr kernel_arg_37497 = incprefixes_mem_34843.mem;
                    CUdeviceptr kernel_arg_37498 = aggregates_mem_34845.mem;
                    CUdeviceptr kernel_arg_37499 = incprefixes_mem_34847.mem;
                    CUdeviceptr kernel_arg_37500 = aggregates_mem_34849.mem;
                    CUdeviceptr kernel_arg_37501 = incprefixes_mem_34851.mem;
                    CUdeviceptr kernel_arg_37502 = aggregates_mem_34853.mem;
                    CUdeviceptr kernel_arg_37503 = incprefixes_mem_34855.mem;
                    unsigned int shared_offset_37487 = 0;
                    
                    if ((((((1 && sdiv_up64(defunc_2_reduce_res_29639,
                                            segscan_group_sizze_31223 *
                                            (int64_t) 9) != 0) && 1 != 0) &&
                           1 != 0) && segscan_group_sizze_31223 != 0) && 1 !=
                         0) && 1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_29639,
                                                  segscan_group_sizze_31223 *
                                                  (int64_t) 9);
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_37483[] = {&ctx->global_failure,
                                                     &shared_offset_37487,
                                                     &defunc_2_reduce_res_29639,
                                                     &i32_res_29773,
                                                     &i32_res_29774,
                                                     &kernel_arg_37488,
                                                     &kernel_arg_37489,
                                                     &kernel_arg_37490,
                                                     &kernel_arg_37491,
                                                     &kernel_arg_37492,
                                                     &kernel_arg_37493,
                                                     &kernel_arg_37494,
                                                     &kernel_arg_37495,
                                                     &kernel_arg_37496,
                                                     &kernel_arg_37497,
                                                     &kernel_arg_37498,
                                                     &kernel_arg_37499,
                                                     &kernel_arg_37500,
                                                     &kernel_arg_37501,
                                                     &kernel_arg_37502,
                                                     &kernel_arg_37503};
                        int64_t time_start_37484 = 0, time_end_37485 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log, "Launching %s with grid size (",
                                    "clusterPoints.segscan_31228");
                            fprintf(ctx->log, "%ld",
                                    (long) sdiv_up64(defunc_2_reduce_res_29639,
                                                     segscan_group_sizze_31223 *
                                                     (int64_t) 9));
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ") and block size (");
                            fprintf(ctx->log, "%ld",
                                    (long) segscan_group_sizze_31223);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ").\n");
                            time_start_37484 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->clusterPointszisegscan_31228_runs,
                                                      &ctx->clusterPointszisegscan_31228_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31228,
                                                              grid[0], grid[1],
                                                              grid[2],
                                                              segscan_group_sizze_31223,
                                                              1, 1, 0 +
                                                              (shared_sizze_37486 +
                                                               (8 -
                                                                shared_sizze_37486 %
                                                                8) % 8), NULL,
                                                              kernel_args_37483,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_37485 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "clusterPoints.segscan_31228",
                                    time_end_37485 - time_start_37484);
                        }
                    }
                    if (memblock_unref_device(ctx, &incprefixes_mem_34855,
                                              "incprefixes_mem_34855") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &aggregates_mem_34853,
                                              "aggregates_mem_34853") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &incprefixes_mem_34851,
                                              "incprefixes_mem_34851") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &aggregates_mem_34849,
                                              "aggregates_mem_34849") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &incprefixes_mem_34847,
                                              "incprefixes_mem_34847") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &aggregates_mem_34845,
                                              "aggregates_mem_34845") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &incprefixes_mem_34843,
                                              "incprefixes_mem_34843") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &aggregates_mem_34841,
                                              "aggregates_mem_34841") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &status_flags_mem_34839,
                                              "status_flags_mem_34839") != 0)
                        return 1;
                }
                
                int64_t read_res_37504;
                
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_scalar_from_dev_runs,
                                                  &ctx->copy_scalar_from_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37504,
                                                        mem_32149.mem +
                                                        i_29759 *
                                                        sizeof(int64_t),
                                                        sizeof(int64_t)));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (futhark_context_sync(ctx) != 0)
                    return 1;
                
                int64_t last_res_29829 = read_res_37504;
                int64_t read_res_37505;
                
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_scalar_from_dev_runs,
                                                  &ctx->copy_scalar_from_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37505,
                                                        mem_32151.mem +
                                                        i_29759 *
                                                        sizeof(int64_t),
                                                        sizeof(int64_t)));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (futhark_context_sync(ctx) != 0)
                    return 1;
                
                int64_t last_res_29830 = read_res_37505;
                int64_t read_res_37506;
                
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_scalar_from_dev_runs,
                                                  &ctx->copy_scalar_from_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37506,
                                                        mem_32153.mem +
                                                        i_29759 *
                                                        sizeof(int64_t),
                                                        sizeof(int64_t)));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (futhark_context_sync(ctx) != 0)
                    return 1;
                
                int64_t last_res_29831 = read_res_37506;
                struct memblock_device mem_32159;
                
                mem_32159.references = NULL;
                if (memblock_alloc_device(ctx, &mem_32159, bytes_32111,
                                          "mem_32159")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_32159.mem + (int64_t) 0,
                                                    mem_param_32137.mem +
                                                    (int64_t) 0,
                                                    defunc_2_reduce_res_29639 *
                                                    (int64_t) 8));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                
                struct memblock_device mem_32161;
                
                mem_32161.references = NULL;
                if (memblock_alloc_device(ctx, &mem_32161, bytes_32111,
                                          "mem_32161")) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_32161.mem + (int64_t) 0,
                                                    mem_param_32142.mem +
                                                    (int64_t) 0,
                                                    defunc_2_reduce_res_29639 *
                                                    (int64_t) 8));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegMap");
                
                CUdeviceptr kernel_arg_37510 = mem_param_32137.mem;
                CUdeviceptr kernel_arg_37511 = mem_param_32142.mem;
                CUdeviceptr kernel_arg_37512 = mem_32149.mem;
                CUdeviceptr kernel_arg_37513 = mem_32151.mem;
                CUdeviceptr kernel_arg_37514 = mem_32153.mem;
                CUdeviceptr kernel_arg_37515 = mem_32155.mem;
                CUdeviceptr kernel_arg_37516 = mem_32157.mem;
                CUdeviceptr kernel_arg_37517 = mem_32159.mem;
                CUdeviceptr kernel_arg_37518 = mem_32161.mem;
                
                if ((((((1 && segmap_usable_groups_31234 != 0) && 1 != 0) &&
                       1 != 0) && segmap_group_sizze_31233 != 0) && 1 != 0) &&
                    1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = segmap_usable_groups_31234;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37507[] = {&ctx->global_failure,
                                                 &defunc_2_reduce_res_29639,
                                                 &last_res_29829,
                                                 &last_res_29830,
                                                 &last_res_29831,
                                                 &kernel_arg_37510,
                                                 &kernel_arg_37511,
                                                 &kernel_arg_37512,
                                                 &kernel_arg_37513,
                                                 &kernel_arg_37514,
                                                 &kernel_arg_37515,
                                                 &kernel_arg_37516,
                                                 &kernel_arg_37517,
                                                 &kernel_arg_37518};
                    int64_t time_start_37508 = 0, time_end_37509 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segmap_31230");
                        fprintf(ctx->log, "%ld",
                                (long) segmap_usable_groups_31234);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segmap_group_sizze_31233);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37508 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegmap_31230_runs,
                                                  &ctx->clusterPointszisegmap_31230_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31230,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segmap_group_sizze_31233,
                                                          1, 1, 0, NULL,
                                                          kernel_args_37507,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37509 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segmap_31230", time_end_37509 -
                                time_start_37508);
                    }
                }
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
                
                struct memblock_device mem_param_tmp_34831;
                
                mem_param_tmp_34831.references = NULL;
                if (memblock_set_device(ctx, &mem_param_tmp_34831, &mem_32159,
                                        "mem_32159") != 0)
                    return 1;
                
                struct memblock_device mem_param_tmp_34832;
                
                mem_param_tmp_34832.references = NULL;
                if (memblock_set_device(ctx, &mem_param_tmp_34832, &mem_32161,
                                        "mem_32161") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_32137,
                                        &mem_param_tmp_34831,
                                        "mem_param_tmp_34831") != 0)
                    return 1;
                if (memblock_set_device(ctx, &mem_param_32142,
                                        &mem_param_tmp_34832,
                                        "mem_param_tmp_34832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_tmp_34832,
                                          "mem_param_tmp_34832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_tmp_34831,
                                          "mem_param_tmp_34831") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32161, "mem_32161") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32159, "mem_32159") != 0)
                    return 1;
            }
            if (memblock_set_device(ctx, &defunc_0_f_res_mem_32171,
                                    &mem_param_32137, "mem_param_32137") != 0)
                return 1;
            if (memblock_set_device(ctx, &defunc_0_f_res_mem_32176,
                                    &mem_param_32142, "mem_param_32142") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32149, "mem_32149") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32151, "mem_32151") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32153, "mem_32153") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32155, "mem_32155") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32157, "mem_32157") != 0)
                return 1;
            
            int64_t segmap_usable_groups_31254 =
                    sdiv_up64(defunc_2_reduce_res_29639,
                              segmap_group_sizze_31253);
            struct memblock_device mem_32179;
            
            mem_32179.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32179, bytes_32111,
                                      "mem_32179")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32181;
            
            mem_32181.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32181, bytes_32127,
                                      "mem_32181")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32183;
            
            mem_32183.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32183, bytes_32127,
                                      "mem_32183")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            CUdeviceptr kernel_arg_37522 = mem_32128.mem;
            CUdeviceptr kernel_arg_37523 = mem_32130.mem;
            CUdeviceptr kernel_arg_37524 = defunc_0_f_res_mem_32176.mem;
            CUdeviceptr kernel_arg_37525 = mem_32179.mem;
            CUdeviceptr kernel_arg_37526 = mem_32181.mem;
            CUdeviceptr kernel_arg_37527 = mem_32183.mem;
            
            if ((((((1 && segmap_usable_groups_31254 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_31253 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_31254;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37519[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &defunc_2_reduce_res_29639,
                                             &kernel_arg_37522,
                                             &kernel_arg_37523,
                                             &kernel_arg_37524,
                                             &kernel_arg_37525,
                                             &kernel_arg_37526,
                                             &kernel_arg_37527};
                int64_t time_start_37520 = 0, time_end_37521 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segmap_31236");
                    fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31254);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31253);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37520 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegmap_31236_runs,
                                              &ctx->clusterPointszisegmap_31236_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31236,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_31253,
                                                      1, 1, 0, NULL,
                                                      kernel_args_37519, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37521 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segmap_31236", time_end_37521 -
                            time_start_37520);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                      "defunc_0_f_res_mem_32176") != 0)
                return 1;
            
            int64_t segmap_usable_groups_31281 =
                    sdiv_up64(defunc_2_reduce_res_29639,
                              segmap_group_sizze_31280);
            struct memblock_device mem_32186;
            
            mem_32186.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32186,
                                      defunc_2_reduce_res_29639, "mem_32186")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            CUdeviceptr kernel_arg_37531 = mem_32179.mem;
            CUdeviceptr kernel_arg_37532 = mem_32186.mem;
            
            if ((((((1 && segmap_usable_groups_31281 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_31280 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_31281;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37528[] = {&ctx->global_failure,
                                             &defunc_2_reduce_res_29639,
                                             &kernel_arg_37531,
                                             &kernel_arg_37532};
                int64_t time_start_37529 = 0, time_end_37530 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segmap_31270");
                    fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31281);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31280);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37529 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegmap_31270_runs,
                                              &ctx->clusterPointszisegmap_31270_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31270,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_31280,
                                                      1, 1, 0, NULL,
                                                      kernel_args_37528, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37530 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segmap_31270", time_end_37530 -
                            time_start_37529);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_32179, "mem_32179") != 0)
                return 1;
            
            bool y_29879 = slt64((int64_t) 0, defunc_2_reduce_res_29639);
            bool index_certs_29880;
            
            if (!y_29879) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (int64_t) 0,
                              "] out of bounds for array of shape [",
                              defunc_2_reduce_res_29639, "].",
                              "-> #0  src/cluster.fut:14:3-49\n   #1  src/cluster.fut:27:15-37\n   #2  /prelude/functional.fut:9:42-44\n   #3  src/cluster.fut:154:23-156:40\n   #4  src/cluster.fut:170:14-27\n   #5  src/cluster.fut:176:27-76\n   #6  src/cluster.fut:195:18-38\n   #7  src/cluster.fut:190:1-200:50\n");
                if (memblock_unref_device(ctx, &mem_32186, "mem_32186") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32183, "mem_32183") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32181, "mem_32181") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32179, "mem_32179") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32142,
                                          "mem_param_32142") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32137,
                                          "mem_param_32137") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                          "defunc_0_f_res_mem_32176") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                          "defunc_0_f_res_mem_32171") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32157, "mem_32157") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32155, "mem_32155") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32153, "mem_32153") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32151, "mem_32151") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32149, "mem_32149") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_34420,
                                          "defunc_1_map_res_subhistos_mem_34420") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                          "group_res_arr_mem_34391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32094,
                                          "mem_param_32094") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32089,
                                          "mem_param_32089") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32084,
                                          "mem_param_32084") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                          "lifted_fromInit_res_mem_32267") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                          "lifted_fromInit_res_mem_32262") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                          "lifted_fromInit_res_mem_32257") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32063,
                                          "mem_param_32063") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32058,
                                          "mem_param_32058") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32053,
                                          "mem_param_32053") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                          "clusterWith_res_mem_32285") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                          "clusterWith_res_mem_32280") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                          "clusterWith_res_mem_32275") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                          "group_res_arr_mem_34194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                          "group_res_arr_mem_33832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31971,
                                          "mem_param_31971") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31966,
                                          "mem_param_31966") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                          "defunc_0_f_res_mem_32005") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                          "defunc_0_f_res_mem_32000") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          "defunc_1_map_res_subhistos_mem_33190") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                          "group_res_arr_mem_33160") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31850,
                                          "mem_param_31850") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31845,
                                          "mem_param_31845") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                          "defunc_0_f_res_mem_31884") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                          "defunc_0_f_res_mem_31879") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32470,
                                          "out_mem_32470") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32468,
                                          "out_mem_32468") != 0)
                    return 1;
                return 1;
            }
            {
                bool write_tmp_37533 = 1;
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_scalar_to_dev_runs,
                                              &ctx->copy_scalar_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_32186.mem +
                                                    (int64_t) 0 * sizeof(bool),
                                                    &write_tmp_37533,
                                                    sizeof(bool)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            
            int64_t num_groups_31291;
            int32_t max_num_groups_35063;
            
            max_num_groups_35063 =
                ctx->sizes.clusterPointszisegscan_num_groups_31290;
            num_groups_31291 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(defunc_2_reduce_res_29639,
                                                                    segscan_group_sizze_31289),
                                                          sext_i32_i64(max_num_groups_35063))));
            
            struct memblock_device mem_32189;
            
            mem_32189.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32189,
                                      defunc_2_reduce_res_29639, "mem_32189")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32191;
            
            mem_32191.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32191, bytes_32111,
                                      "mem_32191")) {
                err = 1;
                goto cleanup;
            }
            if (slt64((int64_t) 0, defunc_2_reduce_res_29639)) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegScan");
                
                int64_t numThreads_35064;
                
                numThreads_35064 = sdiv_up64(defunc_2_reduce_res_29639,
                                             segscan_group_sizze_31289 *
                                             (int64_t) 9) *
                    segscan_group_sizze_31289;
                
                int64_t numGroups_35065;
                
                numGroups_35065 = sdiv_up64(defunc_2_reduce_res_29639,
                                            segscan_group_sizze_31289 *
                                            (int64_t) 9);
                
                struct memblock_device clusterPointsziid_counter_mem_35066 =
                                       ctx->clusterPointsziid_counter_mem_35066;
                struct memblock_device status_flags_mem_35068;
                
                status_flags_mem_35068.references = NULL;
                if (memblock_alloc_device(ctx, &status_flags_mem_35068,
                                          numGroups_35065,
                                          "status_flags_mem_35068")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_35070;
                
                aggregates_mem_35070.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_35070,
                                          numGroups_35065,
                                          "aggregates_mem_35070")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_35072;
                
                incprefixes_mem_35072.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_35072,
                                          numGroups_35065,
                                          "incprefixes_mem_35072")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_35074;
                
                aggregates_mem_35074.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_35074,
                                          (int64_t) 8 * numGroups_35065,
                                          "aggregates_mem_35074")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_35076;
                
                incprefixes_mem_35076.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_35076,
                                          (int64_t) 8 * numGroups_35065,
                                          "incprefixes_mem_35076")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_35068,
                                                 numGroups_35065, (int8_t) 0) !=
                    0) {
                    err = 1;
                    goto cleanup;
                }
                
                unsigned int shared_sizze_37538 = smax64(smax64((int64_t) 320,
                                                                sdiv_up64(segscan_group_sizze_31289,
                                                                          (int64_t) 8) *
                                                                (int64_t) 8 +
                                                                (int64_t) 8 *
                                                                segscan_group_sizze_31289),
                                                         smax64((int64_t) 9 *
                                                                segscan_group_sizze_31289,
                                                                (int64_t) 9 *
                                                                segscan_group_sizze_31289 *
                                                                (int64_t) 8));
                CUdeviceptr kernel_arg_37540 = mem_32186.mem;
                CUdeviceptr kernel_arg_37541 = mem_32189.mem;
                CUdeviceptr kernel_arg_37542 = mem_32191.mem;
                CUdeviceptr kernel_arg_37543 =
                            clusterPointsziid_counter_mem_35066.mem;
                CUdeviceptr kernel_arg_37544 = status_flags_mem_35068.mem;
                CUdeviceptr kernel_arg_37545 = aggregates_mem_35070.mem;
                CUdeviceptr kernel_arg_37546 = incprefixes_mem_35072.mem;
                CUdeviceptr kernel_arg_37547 = aggregates_mem_35074.mem;
                CUdeviceptr kernel_arg_37548 = incprefixes_mem_35076.mem;
                unsigned int shared_offset_37539 = 0;
                
                if ((((((1 && sdiv_up64(defunc_2_reduce_res_29639,
                                        segscan_group_sizze_31289 *
                                        (int64_t) 9) != 0) && 1 != 0) && 1 !=
                       0) && segscan_group_sizze_31289 != 0) && 1 != 0) && 1 !=
                    0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_29639,
                                              segscan_group_sizze_31289 *
                                              (int64_t) 9);
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37535[] = {&ctx->global_failure,
                                                 &shared_offset_37539,
                                                 &defunc_2_reduce_res_29639,
                                                 &kernel_arg_37540,
                                                 &kernel_arg_37541,
                                                 &kernel_arg_37542,
                                                 &kernel_arg_37543,
                                                 &kernel_arg_37544,
                                                 &kernel_arg_37545,
                                                 &kernel_arg_37546,
                                                 &kernel_arg_37547,
                                                 &kernel_arg_37548};
                    int64_t time_start_37536 = 0, time_end_37537 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segscan_31294");
                        fprintf(ctx->log, "%ld",
                                (long) sdiv_up64(defunc_2_reduce_res_29639,
                                                 segscan_group_sizze_31289 *
                                                 (int64_t) 9));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segscan_group_sizze_31289);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37536 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegscan_31294_runs,
                                                  &ctx->clusterPointszisegscan_31294_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31294,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segscan_group_sizze_31289,
                                                          1, 1, 0 +
                                                          (shared_sizze_37538 +
                                                           (8 -
                                                            shared_sizze_37538 %
                                                            8) % 8), NULL,
                                                          kernel_args_37535,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37537 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segscan_31294", time_end_37537 -
                                time_start_37536);
                    }
                }
                if (memblock_unref_device(ctx, &incprefixes_mem_35076,
                                          "incprefixes_mem_35076") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_35074,
                                          "aggregates_mem_35074") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &incprefixes_mem_35072,
                                          "incprefixes_mem_35072") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_35070,
                                          "aggregates_mem_35070") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &status_flags_mem_35068,
                                          "status_flags_mem_35068") != 0)
                    return 1;
            }
            if (memblock_unref_device(ctx, &mem_32189, "mem_32189") != 0)
                return 1;
            
            int64_t num_groups_31299;
            int32_t max_num_groups_35196;
            
            max_num_groups_35196 =
                ctx->sizes.clusterPointszisegscan_num_groups_31298;
            num_groups_31299 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(defunc_2_reduce_res_29639,
                                                                    segscan_group_sizze_31297),
                                                          sext_i32_i64(max_num_groups_35196))));
            
            struct memblock_device mem_32194;
            
            mem_32194.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32194, bytes_32111,
                                      "mem_32194")) {
                err = 1;
                goto cleanup;
            }
            if (slt64((int64_t) 0, defunc_2_reduce_res_29639)) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegScan");
                
                int64_t numThreads_35197;
                
                numThreads_35197 = sdiv_up64(defunc_2_reduce_res_29639,
                                             segscan_group_sizze_31297 *
                                             (int64_t) 9) *
                    segscan_group_sizze_31297;
                
                int64_t numGroups_35198;
                
                numGroups_35198 = sdiv_up64(defunc_2_reduce_res_29639,
                                            segscan_group_sizze_31297 *
                                            (int64_t) 9);
                
                struct memblock_device clusterPointsziid_counter_mem_35199 =
                                       ctx->clusterPointsziid_counter_mem_35199;
                struct memblock_device status_flags_mem_35201;
                
                status_flags_mem_35201.references = NULL;
                if (memblock_alloc_device(ctx, &status_flags_mem_35201,
                                          numGroups_35198,
                                          "status_flags_mem_35201")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_35203;
                
                aggregates_mem_35203.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_35203,
                                          (int64_t) 8 * numGroups_35198,
                                          "aggregates_mem_35203")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_35205;
                
                incprefixes_mem_35205.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_35205,
                                          (int64_t) 8 * numGroups_35198,
                                          "incprefixes_mem_35205")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_35201,
                                                 numGroups_35198, (int8_t) 0) !=
                    0) {
                    err = 1;
                    goto cleanup;
                }
                
                unsigned int shared_sizze_37553 = smax64(smax64((int64_t) 288,
                                                                (int64_t) 8 *
                                                                segscan_group_sizze_31297),
                                                         (int64_t) 9 *
                                                         segscan_group_sizze_31297 *
                                                         (int64_t) 8);
                CUdeviceptr kernel_arg_37555 = mem_32186.mem;
                CUdeviceptr kernel_arg_37556 = mem_32194.mem;
                CUdeviceptr kernel_arg_37557 =
                            clusterPointsziid_counter_mem_35199.mem;
                CUdeviceptr kernel_arg_37558 = status_flags_mem_35201.mem;
                CUdeviceptr kernel_arg_37559 = aggregates_mem_35203.mem;
                CUdeviceptr kernel_arg_37560 = incprefixes_mem_35205.mem;
                unsigned int shared_offset_37554 = 0;
                
                if ((((((1 && sdiv_up64(defunc_2_reduce_res_29639,
                                        segscan_group_sizze_31297 *
                                        (int64_t) 9) != 0) && 1 != 0) && 1 !=
                       0) && segscan_group_sizze_31297 != 0) && 1 != 0) && 1 !=
                    0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_29639,
                                              segscan_group_sizze_31297 *
                                              (int64_t) 9);
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37550[] = {&ctx->global_failure,
                                                 &shared_offset_37554,
                                                 &defunc_2_reduce_res_29639,
                                                 &kernel_arg_37555,
                                                 &kernel_arg_37556,
                                                 &kernel_arg_37557,
                                                 &kernel_arg_37558,
                                                 &kernel_arg_37559,
                                                 &kernel_arg_37560};
                    int64_t time_start_37551 = 0, time_end_37552 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segscan_31302");
                        fprintf(ctx->log, "%ld",
                                (long) sdiv_up64(defunc_2_reduce_res_29639,
                                                 segscan_group_sizze_31297 *
                                                 (int64_t) 9));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segscan_group_sizze_31297);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37551 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegscan_31302_runs,
                                                  &ctx->clusterPointszisegscan_31302_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31302,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segscan_group_sizze_31297,
                                                          1, 1, 0 +
                                                          (shared_sizze_37553 +
                                                           (8 -
                                                            shared_sizze_37553 %
                                                            8) % 8), NULL,
                                                          kernel_args_37550,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37552 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segscan_31302", time_end_37552 -
                                time_start_37551);
                    }
                }
                if (memblock_unref_device(ctx, &incprefixes_mem_35205,
                                          "incprefixes_mem_35205") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_35203,
                                          "aggregates_mem_35203") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &status_flags_mem_35201,
                                          "status_flags_mem_35201") != 0)
                    return 1;
            }
            
            int64_t num_segments_29900;
            
            if (y_29879) {
                bool index_certs_29901;
                
                if (!bounds_check_29762) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", i_29759,
                                  "] out of bounds for array of shape [",
                                  defunc_2_reduce_res_29639, "].",
                                  "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:29:36-59\n   #2  src/cluster.fut:18:3-46\n   #3  src/cluster.fut:28:15-31\n   #4  /prelude/functional.fut:9:42-44\n   #5  src/cluster.fut:154:23-156:40\n   #6  src/cluster.fut:170:14-27\n   #7  src/cluster.fut:176:27-76\n   #8  src/cluster.fut:195:18-38\n   #9  src/cluster.fut:190:1-200:50\n");
                    if (memblock_unref_device(ctx, &mem_32194, "mem_32194") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32191, "mem_32191") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32189, "mem_32189") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32186, "mem_32186") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32183, "mem_32183") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32181, "mem_32181") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32179, "mem_32179") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32142,
                                              "mem_param_32142") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32137,
                                              "mem_param_32137") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                              "defunc_0_f_res_mem_32176") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                              "defunc_0_f_res_mem_32171") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32157, "mem_32157") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32155, "mem_32155") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32153, "mem_32153") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32151, "mem_32151") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32149, "mem_32149") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32132, "mem_32132") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32130, "mem_32130") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32128, "mem_32128") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32126, "mem_32126") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32123, "mem_32123") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32121, "mem_32121") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32118, "mem_32118") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32116, "mem_32116") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &defunc_1_map_res_subhistos_mem_34420,
                                              "defunc_1_map_res_subhistos_mem_34420") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32112, "mem_32112") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                              "group_res_arr_mem_34391") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32094,
                                              "mem_param_32094") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32089,
                                              "mem_param_32089") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32084,
                                              "mem_param_32084") != 0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &lifted_fromInit_res_mem_32267,
                                              "lifted_fromInit_res_mem_32267") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &lifted_fromInit_res_mem_32262,
                                              "lifted_fromInit_res_mem_32262") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &lifted_fromInit_res_mem_32257,
                                              "lifted_fromInit_res_mem_32257") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32073, "mem_32073") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32071, "mem_32071") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32063,
                                              "mem_param_32063") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32058,
                                              "mem_param_32058") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32053,
                                              "mem_param_32053") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                              "clusterWith_res_mem_32285") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                              "clusterWith_res_mem_32280") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                              "clusterWith_res_mem_32275") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32270, "mem_32270") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32240, "mem_32240") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32110, "mem_32110") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32107, "mem_32107") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32105, "mem_32105") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32103, "mem_32103") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                              "group_res_arr_mem_34194") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32048, "mem_32048") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32046, "mem_32046") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32043, "mem_32043") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32041, "mem_32041") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32038, "mem_32038") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32036, "mem_32036") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32034, "mem_32034") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32032, "mem_32032") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32028, "mem_32028") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32026, "mem_32026") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32023, "mem_32023") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32021, "mem_32021") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32018, "mem_32018") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32015, "mem_32015") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                              "group_res_arr_mem_33832") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32012, "mem_32012") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32010, "mem_32010") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32008, "mem_32008") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_31971,
                                              "mem_param_31971") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_31966,
                                              "mem_param_31966") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                              "defunc_0_f_res_mem_32005") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                              "defunc_0_f_res_mem_32000") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31986, "mem_31986") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31984, "mem_31984") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31982, "mem_31982") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31980, "mem_31980") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31978, "mem_31978") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31961, "mem_31961") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31959, "mem_31959") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31957, "mem_31957") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31955, "mem_31955") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31952, "mem_31952") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31950, "mem_31950") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31947, "mem_31947") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31944, "mem_31944") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31942, "mem_31942") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &defunc_1_map_res_subhistos_mem_33190,
                                              "defunc_1_map_res_subhistos_mem_33190") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31938, "mem_31938") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                              "group_res_arr_mem_33160") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31936, "mem_31936") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31933, "mem_31933") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31931, "mem_31931") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31928, "mem_31928") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31924, "mem_31924") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31919, "mem_31919") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31914, "mem_31914") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31912, "mem_31912") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31910, "mem_31910") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31908, "mem_31908") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31904, "mem_31904") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31902, "mem_31902") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31899, "mem_31899") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31897, "mem_31897") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31894, "mem_31894") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31891, "mem_31891") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31889, "mem_31889") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31887, "mem_31887") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_31850,
                                              "mem_param_31850") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_31845,
                                              "mem_param_31845") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                              "defunc_0_f_res_mem_31884") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                              "defunc_0_f_res_mem_31879") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31865, "mem_31865") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31863, "mem_31863") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31861, "mem_31861") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31859, "mem_31859") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31857, "mem_31857") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31840, "mem_31840") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31837, "mem_31837") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31833, "mem_31833") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31830, "mem_31830") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &out_mem_32470,
                                              "out_mem_32470") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &out_mem_32468,
                                              "out_mem_32468") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t read_res_37561;
                
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_scalar_from_dev_runs,
                                                  &ctx->copy_scalar_from_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37561,
                                                        mem_32194.mem +
                                                        i_29759 *
                                                        sizeof(int64_t),
                                                        sizeof(int64_t)));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (futhark_context_sync(ctx) != 0)
                    return 1;
                
                int64_t last_res_29902 = read_res_37561;
                
                num_segments_29900 = last_res_29902;
            } else {
                num_segments_29900 = (int64_t) 0;
            }
            
            bool bounds_invalid_upwards_29903 = slt64(num_segments_29900,
                                                      (int64_t) 0);
            bool valid_29904 = !bounds_invalid_upwards_29903;
            bool range_valid_c_29905;
            
            if (!valid_29904) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                              num_segments_29900, " is invalid.",
                              "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:33:17-41\n   #3  src/cluster.fut:18:3-46\n   #4  src/cluster.fut:28:15-31\n   #5  /prelude/functional.fut:9:42-44\n   #6  src/cluster.fut:154:23-156:40\n   #7  src/cluster.fut:170:14-27\n   #8  src/cluster.fut:176:27-76\n   #9  src/cluster.fut:195:18-38\n   #10 src/cluster.fut:190:1-200:50\n");
                if (memblock_unref_device(ctx, &mem_32194, "mem_32194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32191, "mem_32191") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32189, "mem_32189") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32186, "mem_32186") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32183, "mem_32183") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32181, "mem_32181") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32179, "mem_32179") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32142,
                                          "mem_param_32142") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32137,
                                          "mem_param_32137") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                          "defunc_0_f_res_mem_32176") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                          "defunc_0_f_res_mem_32171") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32157, "mem_32157") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32155, "mem_32155") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32153, "mem_32153") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32151, "mem_32151") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32149, "mem_32149") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_34420,
                                          "defunc_1_map_res_subhistos_mem_34420") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                          "group_res_arr_mem_34391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32094,
                                          "mem_param_32094") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32089,
                                          "mem_param_32089") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32084,
                                          "mem_param_32084") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                          "lifted_fromInit_res_mem_32267") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                          "lifted_fromInit_res_mem_32262") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                          "lifted_fromInit_res_mem_32257") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32063,
                                          "mem_param_32063") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32058,
                                          "mem_param_32058") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32053,
                                          "mem_param_32053") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                          "clusterWith_res_mem_32285") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                          "clusterWith_res_mem_32280") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                          "clusterWith_res_mem_32275") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                          "group_res_arr_mem_34194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                          "group_res_arr_mem_33832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31971,
                                          "mem_param_31971") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31966,
                                          "mem_param_31966") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                          "defunc_0_f_res_mem_32005") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                          "defunc_0_f_res_mem_32000") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          "defunc_1_map_res_subhistos_mem_33190") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                          "group_res_arr_mem_33160") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31850,
                                          "mem_param_31850") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31845,
                                          "mem_param_31845") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                          "defunc_0_f_res_mem_31884") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                          "defunc_0_f_res_mem_31879") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32470,
                                          "out_mem_32470") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32468,
                                          "out_mem_32468") != 0)
                    return 1;
                return 1;
            }
            
            int64_t bytes_32195 = (int64_t) 8 * num_segments_29900;
            struct memblock_device mem_32196;
            
            mem_32196.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32196, bytes_32195,
                                      "mem_32196")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i64(ctx, mem_32196,
                                              num_segments_29900,
                                              (int64_t) 0) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t segmap_group_sizze_31307;
            
            segmap_group_sizze_31307 =
                ctx->sizes.clusterPointszisegmap_group_sizze_31306;
            
            int64_t segmap_usable_groups_31308 =
                    sdiv_up64(defunc_2_reduce_res_29639,
                              segmap_group_sizze_31307);
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            CUdeviceptr kernel_arg_37565 = mem_32186.mem;
            CUdeviceptr kernel_arg_37566 = mem_32191.mem;
            CUdeviceptr kernel_arg_37567 = mem_32194.mem;
            CUdeviceptr kernel_arg_37568 = mem_32196.mem;
            
            if ((((((1 && segmap_usable_groups_31308 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_31307 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_31308;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37562[] = {&ctx->global_failure,
                                             &defunc_2_reduce_res_29639,
                                             &num_segments_29900,
                                             &kernel_arg_37565,
                                             &kernel_arg_37566,
                                             &kernel_arg_37567,
                                             &kernel_arg_37568};
                int64_t time_start_37563 = 0, time_end_37564 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segmap_31304");
                    fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31308);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31307);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37563 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegmap_31304_runs,
                                              &ctx->clusterPointszisegmap_31304_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31304,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_31307,
                                                      1, 1, 0, NULL,
                                                      kernel_args_37562, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37564 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segmap_31304", time_end_37564 -
                            time_start_37563);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_32186, "mem_32186") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32191, "mem_32191") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32194, "mem_32194") != 0)
                return 1;
            
            int64_t num_groups_31313;
            int32_t max_num_groups_35283;
            
            max_num_groups_35283 =
                ctx->sizes.clusterPointszisegscan_num_groups_31312;
            num_groups_31313 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(num_segments_29900,
                                                                    segscan_group_sizze_31311),
                                                          sext_i32_i64(max_num_groups_35283))));
            
            struct memblock_device mem_32200;
            
            mem_32200.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32200, bytes_32195,
                                      "mem_32200")) {
                err = 1;
                goto cleanup;
            }
            if (slt64((int64_t) 0, num_segments_29900)) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegScan");
                
                int64_t numThreads_35284;
                
                numThreads_35284 = sdiv_up64(num_segments_29900,
                                             segscan_group_sizze_31311 *
                                             (int64_t) 9) *
                    segscan_group_sizze_31311;
                
                int64_t numGroups_35285;
                
                numGroups_35285 = sdiv_up64(num_segments_29900,
                                            segscan_group_sizze_31311 *
                                            (int64_t) 9);
                
                struct memblock_device clusterPointsziid_counter_mem_35286 =
                                       ctx->clusterPointsziid_counter_mem_35286;
                struct memblock_device status_flags_mem_35288;
                
                status_flags_mem_35288.references = NULL;
                if (memblock_alloc_device(ctx, &status_flags_mem_35288,
                                          numGroups_35285,
                                          "status_flags_mem_35288")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_35290;
                
                aggregates_mem_35290.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_35290,
                                          (int64_t) 8 * numGroups_35285,
                                          "aggregates_mem_35290")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_35292;
                
                incprefixes_mem_35292.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_35292,
                                          (int64_t) 8 * numGroups_35285,
                                          "incprefixes_mem_35292")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_35288,
                                                 numGroups_35285, (int8_t) 0) !=
                    0) {
                    err = 1;
                    goto cleanup;
                }
                
                unsigned int shared_sizze_37573 = smax64(smax64((int64_t) 288,
                                                                (int64_t) 8 *
                                                                segscan_group_sizze_31311),
                                                         (int64_t) 9 *
                                                         segscan_group_sizze_31311 *
                                                         (int64_t) 8);
                CUdeviceptr kernel_arg_37575 = mem_32196.mem;
                CUdeviceptr kernel_arg_37576 = mem_32200.mem;
                CUdeviceptr kernel_arg_37577 =
                            clusterPointsziid_counter_mem_35286.mem;
                CUdeviceptr kernel_arg_37578 = status_flags_mem_35288.mem;
                CUdeviceptr kernel_arg_37579 = aggregates_mem_35290.mem;
                CUdeviceptr kernel_arg_37580 = incprefixes_mem_35292.mem;
                unsigned int shared_offset_37574 = 0;
                
                if ((((((1 && sdiv_up64(num_segments_29900,
                                        segscan_group_sizze_31311 *
                                        (int64_t) 9) != 0) && 1 != 0) && 1 !=
                       0) && segscan_group_sizze_31311 != 0) && 1 != 0) && 1 !=
                    0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up64(num_segments_29900,
                                              segscan_group_sizze_31311 *
                                              (int64_t) 9);
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37570[] = {&ctx->global_failure,
                                                 &shared_offset_37574,
                                                 &num_segments_29900,
                                                 &kernel_arg_37575,
                                                 &kernel_arg_37576,
                                                 &kernel_arg_37577,
                                                 &kernel_arg_37578,
                                                 &kernel_arg_37579,
                                                 &kernel_arg_37580};
                    int64_t time_start_37571 = 0, time_end_37572 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segscan_31316");
                        fprintf(ctx->log, "%ld",
                                (long) sdiv_up64(num_segments_29900,
                                                 segscan_group_sizze_31311 *
                                                 (int64_t) 9));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segscan_group_sizze_31311);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37571 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegscan_31316_runs,
                                                  &ctx->clusterPointszisegscan_31316_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31316,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segscan_group_sizze_31311,
                                                          1, 1, 0 +
                                                          (shared_sizze_37573 +
                                                           (8 -
                                                            shared_sizze_37573 %
                                                            8) % 8), NULL,
                                                          kernel_args_37570,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37572 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segscan_31316", time_end_37572 -
                                time_start_37571);
                    }
                }
                if (memblock_unref_device(ctx, &incprefixes_mem_35292,
                                          "incprefixes_mem_35292") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_35290,
                                          "aggregates_mem_35290") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &status_flags_mem_35288,
                                          "status_flags_mem_35288") != 0)
                    return 1;
            }
            if (memblock_unref_device(ctx, &mem_32196, "mem_32196") != 0)
                return 1;
            
            struct memblock_device mem_32202;
            
            mem_32202.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32202, bytes_32195,
                                      "mem_32202")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t group_sizze_35368;
            
            group_sizze_35368 = ctx->sizes.clusterPointszigroup_sizze_35368;
            
            int64_t num_groups_35369;
            
            num_groups_35369 = sdiv_up64(num_segments_29900, group_sizze_35368);
            
            CUdeviceptr kernel_arg_37584 = mem_32200.mem;
            CUdeviceptr kernel_arg_37585 = mem_32202.mem;
            
            if ((((((1 && num_groups_35369 != 0) && 1 != 0) && 1 != 0) &&
                  group_sizze_35368 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_35369;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37581[] = {&num_segments_29900,
                                             &kernel_arg_37584,
                                             &kernel_arg_37585};
                int64_t time_start_37582 = 0, time_end_37583 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.copy_35365");
                    fprintf(ctx->log, "%ld", (long) num_groups_35369);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) group_sizze_35368);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37582 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszicopy_35365_runs,
                                              &ctx->clusterPointszicopy_35365_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszicopy_35365,
                                                      grid[0], grid[1], grid[2],
                                                      group_sizze_35368, 1, 1,
                                                      0, NULL,
                                                      kernel_args_37581, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37583 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.copy_35365", time_end_37583 -
                            time_start_37582);
                }
            }
            if (memblock_unref_device(ctx, &mem_32200, "mem_32200") != 0)
                return 1;
            
            bool y_29920 = slt64((int64_t) 0, num_segments_29900);
            bool index_certs_29921;
            
            if (!y_29920) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (int64_t) 0,
                              "] out of bounds for array of shape [",
                              num_segments_29900, "].",
                              "-> #0  src/cluster.fut:23:6-27\n   #1  src/cluster.fut:29:14-32\n   #2  /prelude/functional.fut:9:42-44\n   #3  src/cluster.fut:154:23-156:40\n   #4  src/cluster.fut:170:14-27\n   #5  src/cluster.fut:176:27-76\n   #6  src/cluster.fut:195:18-38\n   #7  src/cluster.fut:190:1-200:50\n");
                if (memblock_unref_device(ctx, &mem_32202, "mem_32202") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32200, "mem_32200") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32196, "mem_32196") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32194, "mem_32194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32191, "mem_32191") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32189, "mem_32189") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32186, "mem_32186") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32183, "mem_32183") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32181, "mem_32181") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32179, "mem_32179") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32142,
                                          "mem_param_32142") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32137,
                                          "mem_param_32137") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                          "defunc_0_f_res_mem_32176") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                          "defunc_0_f_res_mem_32171") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32157, "mem_32157") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32155, "mem_32155") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32153, "mem_32153") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32151, "mem_32151") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32149, "mem_32149") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_34420,
                                          "defunc_1_map_res_subhistos_mem_34420") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                          "group_res_arr_mem_34391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32094,
                                          "mem_param_32094") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32089,
                                          "mem_param_32089") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32084,
                                          "mem_param_32084") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                          "lifted_fromInit_res_mem_32267") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                          "lifted_fromInit_res_mem_32262") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                          "lifted_fromInit_res_mem_32257") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32063,
                                          "mem_param_32063") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32058,
                                          "mem_param_32058") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32053,
                                          "mem_param_32053") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                          "clusterWith_res_mem_32285") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                          "clusterWith_res_mem_32280") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                          "clusterWith_res_mem_32275") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                          "group_res_arr_mem_34194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                          "group_res_arr_mem_33832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31971,
                                          "mem_param_31971") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31966,
                                          "mem_param_31966") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                          "defunc_0_f_res_mem_32005") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                          "defunc_0_f_res_mem_32000") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          "defunc_1_map_res_subhistos_mem_33190") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                          "group_res_arr_mem_33160") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31850,
                                          "mem_param_31850") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31845,
                                          "mem_param_31845") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                          "defunc_0_f_res_mem_31884") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                          "defunc_0_f_res_mem_31879") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32470,
                                          "out_mem_32470") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32468,
                                          "out_mem_32468") != 0)
                    return 1;
                return 1;
            }
            {
                int64_t write_tmp_37586 = (int64_t) 0;
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_scalar_to_dev_runs,
                                              &ctx->copy_scalar_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_32202.mem +
                                                    (int64_t) 0 *
                                                    sizeof(int64_t),
                                                    &write_tmp_37586,
                                                    sizeof(int64_t)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            
            int64_t segmap_usable_groups_31333 = sdiv_up64(num_segments_29900,
                                                           segmap_group_sizze_31332);
            struct memblock_device mem_32205;
            
            mem_32205.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32205, bytes_32195,
                                      "mem_32205")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t bytes_32206 = (int64_t) 4 * num_segments_29900;
            struct memblock_device mem_32207;
            
            mem_32207.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32207, bytes_32206,
                                      "mem_32207")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32209;
            
            mem_32209.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32209, bytes_32206,
                                      "mem_32209")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            CUdeviceptr kernel_arg_37590 = mem_32181.mem;
            CUdeviceptr kernel_arg_37591 = mem_32183.mem;
            CUdeviceptr kernel_arg_37592 = mem_32202.mem;
            CUdeviceptr kernel_arg_37593 = mem_32205.mem;
            CUdeviceptr kernel_arg_37594 = mem_32207.mem;
            CUdeviceptr kernel_arg_37595 = mem_32209.mem;
            
            if ((((((1 && segmap_usable_groups_31333 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_31332 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_31333;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37587[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &defunc_2_reduce_res_29639,
                                             &num_segments_29900,
                                             &kernel_arg_37590,
                                             &kernel_arg_37591,
                                             &kernel_arg_37592,
                                             &kernel_arg_37593,
                                             &kernel_arg_37594,
                                             &kernel_arg_37595};
                int64_t time_start_37588 = 0, time_end_37589 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segmap_31318");
                    fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31333);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31332);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37588 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegmap_31318_runs,
                                              &ctx->clusterPointszisegmap_31318_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31318,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_31332,
                                                      1, 1, 0, NULL,
                                                      kernel_args_37587, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37589 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segmap_31318", time_end_37589 -
                            time_start_37588);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_32181, "mem_32181") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32183, "mem_32183") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32202, "mem_32202") != 0)
                return 1;
            
            int64_t segmap_usable_groups_31357 = sdiv_up64(num_segments_29900,
                                                           segmap_group_sizze_31356);
            struct memblock_device mem_32212;
            
            mem_32212.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32212, num_segments_29900,
                                      "mem_32212")) {
                err = 1;
                goto cleanup;
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            CUdeviceptr kernel_arg_37599 = mem_32205.mem;
            CUdeviceptr kernel_arg_37600 = mem_32212.mem;
            
            if ((((((1 && segmap_usable_groups_31357 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_31356 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_31357;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37596[] = {&ctx->global_failure,
                                             &num_segments_29900,
                                             &kernel_arg_37599,
                                             &kernel_arg_37600};
                int64_t time_start_37597 = 0, time_end_37598 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segmap_31346");
                    fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31357);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31356);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37597 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegmap_31346_runs,
                                              &ctx->clusterPointszisegmap_31346_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31346,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_31356,
                                                      1, 1, 0, NULL,
                                                      kernel_args_37596, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37598 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segmap_31346", time_end_37598 -
                            time_start_37597);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_32205, "mem_32205") != 0)
                return 1;
            
            bool index_certs_29940;
            
            if (!y_29920) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (int64_t) 0,
                              "] out of bounds for array of shape [",
                              num_segments_29900, "].",
                              "-> #0  src/cluster.fut:14:3-49\n   #1  src/cluster.fut:60:15-41\n   #2  src/cluster.fut:158:8-43\n   #3  src/cluster.fut:170:14-27\n   #4  src/cluster.fut:176:27-76\n   #5  src/cluster.fut:195:18-38\n   #6  src/cluster.fut:190:1-200:50\n");
                if (memblock_unref_device(ctx, &mem_32212, "mem_32212") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32209, "mem_32209") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32207, "mem_32207") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32205, "mem_32205") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32202, "mem_32202") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32200, "mem_32200") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32196, "mem_32196") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32194, "mem_32194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32191, "mem_32191") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32189, "mem_32189") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32186, "mem_32186") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32183, "mem_32183") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32181, "mem_32181") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32179, "mem_32179") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32142,
                                          "mem_param_32142") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32137,
                                          "mem_param_32137") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                          "defunc_0_f_res_mem_32176") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                          "defunc_0_f_res_mem_32171") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32157, "mem_32157") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32155, "mem_32155") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32153, "mem_32153") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32151, "mem_32151") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32149, "mem_32149") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_34420,
                                          "defunc_1_map_res_subhistos_mem_34420") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                          "group_res_arr_mem_34391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32094,
                                          "mem_param_32094") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32089,
                                          "mem_param_32089") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32084,
                                          "mem_param_32084") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                          "lifted_fromInit_res_mem_32267") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                          "lifted_fromInit_res_mem_32262") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                          "lifted_fromInit_res_mem_32257") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32063,
                                          "mem_param_32063") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32058,
                                          "mem_param_32058") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32053,
                                          "mem_param_32053") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                          "clusterWith_res_mem_32285") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                          "clusterWith_res_mem_32280") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                          "clusterWith_res_mem_32275") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                          "group_res_arr_mem_34194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                          "group_res_arr_mem_33832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31971,
                                          "mem_param_31971") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31966,
                                          "mem_param_31966") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                          "defunc_0_f_res_mem_32005") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                          "defunc_0_f_res_mem_32000") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          "defunc_1_map_res_subhistos_mem_33190") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                          "group_res_arr_mem_33160") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31850,
                                          "mem_param_31850") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31845,
                                          "mem_param_31845") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                          "defunc_0_f_res_mem_31884") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                          "defunc_0_f_res_mem_31879") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32470,
                                          "out_mem_32470") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32468,
                                          "out_mem_32468") != 0)
                    return 1;
                return 1;
            }
            {
                bool write_tmp_37601 = 1;
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_scalar_to_dev_runs,
                                              &ctx->copy_scalar_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_32212.mem +
                                                    (int64_t) 0 * sizeof(bool),
                                                    &write_tmp_37601,
                                                    sizeof(bool)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            
            int64_t num_groups_31367;
            int32_t max_num_groups_35380;
            
            max_num_groups_35380 =
                ctx->sizes.clusterPointszisegscan_num_groups_31366;
            num_groups_31367 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(num_segments_29900,
                                                                    segscan_group_sizze_31365),
                                                          sext_i32_i64(max_num_groups_35380))));
            
            struct memblock_device mem_32215;
            
            mem_32215.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32215, num_segments_29900,
                                      "mem_32215")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32217;
            
            mem_32217.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32217, bytes_32195,
                                      "mem_32217")) {
                err = 1;
                goto cleanup;
            }
            if (slt64((int64_t) 0, num_segments_29900)) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegScan");
                
                int64_t numThreads_35381;
                
                numThreads_35381 = sdiv_up64(num_segments_29900,
                                             segscan_group_sizze_31365 *
                                             (int64_t) 9) *
                    segscan_group_sizze_31365;
                
                int64_t numGroups_35382;
                
                numGroups_35382 = sdiv_up64(num_segments_29900,
                                            segscan_group_sizze_31365 *
                                            (int64_t) 9);
                
                struct memblock_device clusterPointsziid_counter_mem_35383 =
                                       ctx->clusterPointsziid_counter_mem_35383;
                struct memblock_device status_flags_mem_35385;
                
                status_flags_mem_35385.references = NULL;
                if (memblock_alloc_device(ctx, &status_flags_mem_35385,
                                          numGroups_35382,
                                          "status_flags_mem_35385")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_35387;
                
                aggregates_mem_35387.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_35387,
                                          numGroups_35382,
                                          "aggregates_mem_35387")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_35389;
                
                incprefixes_mem_35389.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_35389,
                                          numGroups_35382,
                                          "incprefixes_mem_35389")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_35391;
                
                aggregates_mem_35391.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_35391,
                                          (int64_t) 8 * numGroups_35382,
                                          "aggregates_mem_35391")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_35393;
                
                incprefixes_mem_35393.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_35393,
                                          (int64_t) 8 * numGroups_35382,
                                          "incprefixes_mem_35393")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_35385,
                                                 numGroups_35382, (int8_t) 0) !=
                    0) {
                    err = 1;
                    goto cleanup;
                }
                
                unsigned int shared_sizze_37606 = smax64(smax64((int64_t) 320,
                                                                sdiv_up64(segscan_group_sizze_31365,
                                                                          (int64_t) 8) *
                                                                (int64_t) 8 +
                                                                (int64_t) 8 *
                                                                segscan_group_sizze_31365),
                                                         smax64((int64_t) 9 *
                                                                segscan_group_sizze_31365,
                                                                (int64_t) 9 *
                                                                segscan_group_sizze_31365 *
                                                                (int64_t) 8));
                CUdeviceptr kernel_arg_37608 = mem_32212.mem;
                CUdeviceptr kernel_arg_37609 = mem_32215.mem;
                CUdeviceptr kernel_arg_37610 = mem_32217.mem;
                CUdeviceptr kernel_arg_37611 =
                            clusterPointsziid_counter_mem_35383.mem;
                CUdeviceptr kernel_arg_37612 = status_flags_mem_35385.mem;
                CUdeviceptr kernel_arg_37613 = aggregates_mem_35387.mem;
                CUdeviceptr kernel_arg_37614 = incprefixes_mem_35389.mem;
                CUdeviceptr kernel_arg_37615 = aggregates_mem_35391.mem;
                CUdeviceptr kernel_arg_37616 = incprefixes_mem_35393.mem;
                unsigned int shared_offset_37607 = 0;
                
                if ((((((1 && sdiv_up64(num_segments_29900,
                                        segscan_group_sizze_31365 *
                                        (int64_t) 9) != 0) && 1 != 0) && 1 !=
                       0) && segscan_group_sizze_31365 != 0) && 1 != 0) && 1 !=
                    0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up64(num_segments_29900,
                                              segscan_group_sizze_31365 *
                                              (int64_t) 9);
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37603[] = {&ctx->global_failure,
                                                 &shared_offset_37607,
                                                 &num_segments_29900,
                                                 &kernel_arg_37608,
                                                 &kernel_arg_37609,
                                                 &kernel_arg_37610,
                                                 &kernel_arg_37611,
                                                 &kernel_arg_37612,
                                                 &kernel_arg_37613,
                                                 &kernel_arg_37614,
                                                 &kernel_arg_37615,
                                                 &kernel_arg_37616};
                    int64_t time_start_37604 = 0, time_end_37605 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segscan_31370");
                        fprintf(ctx->log, "%ld",
                                (long) sdiv_up64(num_segments_29900,
                                                 segscan_group_sizze_31365 *
                                                 (int64_t) 9));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segscan_group_sizze_31365);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37604 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegscan_31370_runs,
                                                  &ctx->clusterPointszisegscan_31370_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31370,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segscan_group_sizze_31365,
                                                          1, 1, 0 +
                                                          (shared_sizze_37606 +
                                                           (8 -
                                                            shared_sizze_37606 %
                                                            8) % 8), NULL,
                                                          kernel_args_37603,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37605 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segscan_31370", time_end_37605 -
                                time_start_37604);
                    }
                }
                if (memblock_unref_device(ctx, &incprefixes_mem_35393,
                                          "incprefixes_mem_35393") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_35391,
                                          "aggregates_mem_35391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &incprefixes_mem_35389,
                                          "incprefixes_mem_35389") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_35387,
                                          "aggregates_mem_35387") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &status_flags_mem_35385,
                                          "status_flags_mem_35385") != 0)
                    return 1;
            }
            if (memblock_unref_device(ctx, &mem_32215, "mem_32215") != 0)
                return 1;
            
            int64_t num_groups_31375;
            int32_t max_num_groups_35513;
            
            max_num_groups_35513 =
                ctx->sizes.clusterPointszisegscan_num_groups_31374;
            num_groups_31375 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(num_segments_29900,
                                                                    segscan_group_sizze_31373),
                                                          sext_i32_i64(max_num_groups_35513))));
            
            struct memblock_device mem_32220;
            
            mem_32220.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32220, bytes_32195,
                                      "mem_32220")) {
                err = 1;
                goto cleanup;
            }
            if (slt64((int64_t) 0, num_segments_29900)) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegScan");
                
                int64_t numThreads_35514;
                
                numThreads_35514 = sdiv_up64(num_segments_29900,
                                             segscan_group_sizze_31373 *
                                             (int64_t) 9) *
                    segscan_group_sizze_31373;
                
                int64_t numGroups_35515;
                
                numGroups_35515 = sdiv_up64(num_segments_29900,
                                            segscan_group_sizze_31373 *
                                            (int64_t) 9);
                
                struct memblock_device clusterPointsziid_counter_mem_35516 =
                                       ctx->clusterPointsziid_counter_mem_35516;
                struct memblock_device status_flags_mem_35518;
                
                status_flags_mem_35518.references = NULL;
                if (memblock_alloc_device(ctx, &status_flags_mem_35518,
                                          numGroups_35515,
                                          "status_flags_mem_35518")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_35520;
                
                aggregates_mem_35520.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_35520,
                                          (int64_t) 8 * numGroups_35515,
                                          "aggregates_mem_35520")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_35522;
                
                incprefixes_mem_35522.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_35522,
                                          (int64_t) 8 * numGroups_35515,
                                          "incprefixes_mem_35522")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_35518,
                                                 numGroups_35515, (int8_t) 0) !=
                    0) {
                    err = 1;
                    goto cleanup;
                }
                
                unsigned int shared_sizze_37621 = smax64(smax64((int64_t) 288,
                                                                (int64_t) 8 *
                                                                segscan_group_sizze_31373),
                                                         (int64_t) 9 *
                                                         segscan_group_sizze_31373 *
                                                         (int64_t) 8);
                CUdeviceptr kernel_arg_37623 = mem_32212.mem;
                CUdeviceptr kernel_arg_37624 = mem_32220.mem;
                CUdeviceptr kernel_arg_37625 =
                            clusterPointsziid_counter_mem_35516.mem;
                CUdeviceptr kernel_arg_37626 = status_flags_mem_35518.mem;
                CUdeviceptr kernel_arg_37627 = aggregates_mem_35520.mem;
                CUdeviceptr kernel_arg_37628 = incprefixes_mem_35522.mem;
                unsigned int shared_offset_37622 = 0;
                
                if ((((((1 && sdiv_up64(num_segments_29900,
                                        segscan_group_sizze_31373 *
                                        (int64_t) 9) != 0) && 1 != 0) && 1 !=
                       0) && segscan_group_sizze_31373 != 0) && 1 != 0) && 1 !=
                    0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up64(num_segments_29900,
                                              segscan_group_sizze_31373 *
                                              (int64_t) 9);
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37618[] = {&ctx->global_failure,
                                                 &shared_offset_37622,
                                                 &num_segments_29900,
                                                 &kernel_arg_37623,
                                                 &kernel_arg_37624,
                                                 &kernel_arg_37625,
                                                 &kernel_arg_37626,
                                                 &kernel_arg_37627,
                                                 &kernel_arg_37628};
                    int64_t time_start_37619 = 0, time_end_37620 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segscan_31378");
                        fprintf(ctx->log, "%ld",
                                (long) sdiv_up64(num_segments_29900,
                                                 segscan_group_sizze_31373 *
                                                 (int64_t) 9));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segscan_group_sizze_31373);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37619 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegscan_31378_runs,
                                                  &ctx->clusterPointszisegscan_31378_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31378,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segscan_group_sizze_31373,
                                                          1, 1, 0 +
                                                          (shared_sizze_37621 +
                                                           (8 -
                                                            shared_sizze_37621 %
                                                            8) % 8), NULL,
                                                          kernel_args_37618,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37620 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segscan_31378", time_end_37620 -
                                time_start_37619);
                    }
                }
                if (memblock_unref_device(ctx, &incprefixes_mem_35522,
                                          "incprefixes_mem_35522") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_35520,
                                          "aggregates_mem_35520") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &status_flags_mem_35518,
                                          "status_flags_mem_35518") != 0)
                    return 1;
            }
            
            int64_t num_segments_29961;
            
            if (y_29920) {
                int64_t i_29962 = sub64(num_segments_29900, (int64_t) 1);
                bool x_29963 = sle64((int64_t) 0, i_29962);
                bool y_29964 = slt64(i_29962, num_segments_29900);
                bool bounds_check_29965 = x_29963 && y_29964;
                bool index_certs_29966;
                
                if (!bounds_check_29965) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", i_29962,
                                  "] out of bounds for array of shape [",
                                  num_segments_29900, "].",
                                  "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/segmented/segmented.fut:29:36-59\n   #2  src/cluster.fut:18:3-46\n   #3  src/cluster.fut:61:18-34\n   #4  src/cluster.fut:158:8-43\n   #5  src/cluster.fut:170:14-27\n   #6  src/cluster.fut:176:27-76\n   #7  src/cluster.fut:195:18-38\n   #8  src/cluster.fut:190:1-200:50\n");
                    if (memblock_unref_device(ctx, &mem_32220, "mem_32220") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32217, "mem_32217") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32215, "mem_32215") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32212, "mem_32212") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32209, "mem_32209") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32207, "mem_32207") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32205, "mem_32205") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32202, "mem_32202") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32200, "mem_32200") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32196, "mem_32196") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32194, "mem_32194") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32191, "mem_32191") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32189, "mem_32189") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32186, "mem_32186") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32183, "mem_32183") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32181, "mem_32181") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32179, "mem_32179") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32142,
                                              "mem_param_32142") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32137,
                                              "mem_param_32137") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                              "defunc_0_f_res_mem_32176") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                              "defunc_0_f_res_mem_32171") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32157, "mem_32157") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32155, "mem_32155") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32153, "mem_32153") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32151, "mem_32151") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32149, "mem_32149") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32132, "mem_32132") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32130, "mem_32130") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32128, "mem_32128") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32126, "mem_32126") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32123, "mem_32123") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32121, "mem_32121") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32118, "mem_32118") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32116, "mem_32116") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &defunc_1_map_res_subhistos_mem_34420,
                                              "defunc_1_map_res_subhistos_mem_34420") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32112, "mem_32112") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                              "group_res_arr_mem_34391") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32094,
                                              "mem_param_32094") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32089,
                                              "mem_param_32089") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32084,
                                              "mem_param_32084") != 0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &lifted_fromInit_res_mem_32267,
                                              "lifted_fromInit_res_mem_32267") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &lifted_fromInit_res_mem_32262,
                                              "lifted_fromInit_res_mem_32262") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &lifted_fromInit_res_mem_32257,
                                              "lifted_fromInit_res_mem_32257") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32073, "mem_32073") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32071, "mem_32071") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32063,
                                              "mem_param_32063") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32058,
                                              "mem_param_32058") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_32053,
                                              "mem_param_32053") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                              "clusterWith_res_mem_32285") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                              "clusterWith_res_mem_32280") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                              "clusterWith_res_mem_32275") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32270, "mem_32270") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32240, "mem_32240") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32110, "mem_32110") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32107, "mem_32107") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32105, "mem_32105") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32103, "mem_32103") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                              "group_res_arr_mem_34194") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32048, "mem_32048") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32046, "mem_32046") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32043, "mem_32043") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32041, "mem_32041") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32038, "mem_32038") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32036, "mem_32036") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32034, "mem_32034") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32032, "mem_32032") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32028, "mem_32028") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32026, "mem_32026") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32023, "mem_32023") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32021, "mem_32021") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32018, "mem_32018") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32015, "mem_32015") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                              "group_res_arr_mem_33832") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32012, "mem_32012") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32010, "mem_32010") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_32008, "mem_32008") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_31971,
                                              "mem_param_31971") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_31966,
                                              "mem_param_31966") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                              "defunc_0_f_res_mem_32005") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                              "defunc_0_f_res_mem_32000") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31986, "mem_31986") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31984, "mem_31984") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31982, "mem_31982") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31980, "mem_31980") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31978, "mem_31978") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31961, "mem_31961") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31959, "mem_31959") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31957, "mem_31957") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31955, "mem_31955") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31952, "mem_31952") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31950, "mem_31950") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31947, "mem_31947") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31944, "mem_31944") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31942, "mem_31942") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx,
                                              &defunc_1_map_res_subhistos_mem_33190,
                                              "defunc_1_map_res_subhistos_mem_33190") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31938, "mem_31938") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                              "group_res_arr_mem_33160") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31936, "mem_31936") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31933, "mem_31933") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31931, "mem_31931") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31928, "mem_31928") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31924, "mem_31924") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31919, "mem_31919") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31914, "mem_31914") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31912, "mem_31912") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31910, "mem_31910") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31908, "mem_31908") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31904, "mem_31904") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31902, "mem_31902") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31899, "mem_31899") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31897, "mem_31897") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31894, "mem_31894") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31891, "mem_31891") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31889, "mem_31889") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31887, "mem_31887") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_31850,
                                              "mem_param_31850") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_param_31845,
                                              "mem_param_31845") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                              "defunc_0_f_res_mem_31884") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                              "defunc_0_f_res_mem_31879") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31865, "mem_31865") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31863, "mem_31863") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31861, "mem_31861") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31859, "mem_31859") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31857, "mem_31857") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31840, "mem_31840") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31837, "mem_31837") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31833, "mem_31833") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &mem_31830, "mem_31830") !=
                        0)
                        return 1;
                    if (memblock_unref_device(ctx, &out_mem_32470,
                                              "out_mem_32470") != 0)
                        return 1;
                    if (memblock_unref_device(ctx, &out_mem_32468,
                                              "out_mem_32468") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t read_res_37629;
                
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_scalar_from_dev_runs,
                                                  &ctx->copy_scalar_from_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37629,
                                                        mem_32220.mem +
                                                        i_29962 *
                                                        sizeof(int64_t),
                                                        sizeof(int64_t)));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (futhark_context_sync(ctx) != 0)
                    return 1;
                
                int64_t last_res_29967 = read_res_37629;
                
                num_segments_29961 = last_res_29967;
            } else {
                num_segments_29961 = (int64_t) 0;
            }
            
            bool bounds_invalid_upwards_29968 = slt64(num_segments_29961,
                                                      (int64_t) 0);
            bool valid_29969 = !bounds_invalid_upwards_29968;
            bool range_valid_c_29970;
            
            if (!valid_29969) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                              num_segments_29961, " is invalid.",
                              "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:33:17-41\n   #3  src/cluster.fut:18:3-46\n   #4  src/cluster.fut:61:18-34\n   #5  src/cluster.fut:158:8-43\n   #6  src/cluster.fut:170:14-27\n   #7  src/cluster.fut:176:27-76\n   #8  src/cluster.fut:195:18-38\n   #9  src/cluster.fut:190:1-200:50\n");
                if (memblock_unref_device(ctx, &mem_32220, "mem_32220") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32217, "mem_32217") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32215, "mem_32215") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32212, "mem_32212") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32209, "mem_32209") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32207, "mem_32207") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32205, "mem_32205") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32202, "mem_32202") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32200, "mem_32200") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32196, "mem_32196") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32194, "mem_32194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32191, "mem_32191") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32189, "mem_32189") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32186, "mem_32186") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32183, "mem_32183") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32181, "mem_32181") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32179, "mem_32179") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32142,
                                          "mem_param_32142") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32137,
                                          "mem_param_32137") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                          "defunc_0_f_res_mem_32176") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                          "defunc_0_f_res_mem_32171") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32157, "mem_32157") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32155, "mem_32155") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32153, "mem_32153") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32151, "mem_32151") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32149, "mem_32149") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_34420,
                                          "defunc_1_map_res_subhistos_mem_34420") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                          "group_res_arr_mem_34391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32094,
                                          "mem_param_32094") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32089,
                                          "mem_param_32089") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32084,
                                          "mem_param_32084") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                          "lifted_fromInit_res_mem_32267") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                          "lifted_fromInit_res_mem_32262") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                          "lifted_fromInit_res_mem_32257") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32063,
                                          "mem_param_32063") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32058,
                                          "mem_param_32058") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32053,
                                          "mem_param_32053") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                          "clusterWith_res_mem_32285") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                          "clusterWith_res_mem_32280") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                          "clusterWith_res_mem_32275") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                          "group_res_arr_mem_34194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                          "group_res_arr_mem_33832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31971,
                                          "mem_param_31971") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31966,
                                          "mem_param_31966") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                          "defunc_0_f_res_mem_32005") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                          "defunc_0_f_res_mem_32000") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          "defunc_1_map_res_subhistos_mem_33190") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                          "group_res_arr_mem_33160") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31850,
                                          "mem_param_31850") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31845,
                                          "mem_param_31845") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                          "defunc_0_f_res_mem_31884") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                          "defunc_0_f_res_mem_31879") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32470,
                                          "out_mem_32470") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32468,
                                          "out_mem_32468") != 0)
                    return 1;
                return 1;
            }
            
            int64_t bytes_32221 = (int64_t) 8 * num_segments_29961;
            struct memblock_device mem_32222;
            
            mem_32222.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32222, bytes_32221,
                                      "mem_32222")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i64(ctx, mem_32222,
                                              num_segments_29961,
                                              (int64_t) 0) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t segmap_group_sizze_31383;
            
            segmap_group_sizze_31383 =
                ctx->sizes.clusterPointszisegmap_group_sizze_31382;
            
            int64_t segmap_usable_groups_31384 = sdiv_up64(num_segments_29900,
                                                           segmap_group_sizze_31383);
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            CUdeviceptr kernel_arg_37633 = mem_32212.mem;
            CUdeviceptr kernel_arg_37634 = mem_32217.mem;
            CUdeviceptr kernel_arg_37635 = mem_32220.mem;
            CUdeviceptr kernel_arg_37636 = mem_32222.mem;
            
            if ((((((1 && segmap_usable_groups_31384 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_31383 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_31384;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37630[] = {&ctx->global_failure,
                                             &num_segments_29900,
                                             &num_segments_29961,
                                             &kernel_arg_37633,
                                             &kernel_arg_37634,
                                             &kernel_arg_37635,
                                             &kernel_arg_37636};
                int64_t time_start_37631 = 0, time_end_37632 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segmap_31380");
                    fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31384);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31383);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37631 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegmap_31380_runs,
                                              &ctx->clusterPointszisegmap_31380_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31380,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_31383,
                                                      1, 1, 0, NULL,
                                                      kernel_args_37630, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37632 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segmap_31380", time_end_37632 -
                            time_start_37631);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_32212, "mem_32212") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32217, "mem_32217") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32220, "mem_32220") != 0)
                return 1;
            
            int64_t num_groups_31389;
            int32_t max_num_groups_35600;
            
            max_num_groups_35600 =
                ctx->sizes.clusterPointszisegscan_num_groups_31388;
            num_groups_31389 = sext_i64_i32(smax64((int64_t) 1,
                                                   smin64(sdiv_up64(num_segments_29961,
                                                                    segscan_group_sizze_31387),
                                                          sext_i32_i64(max_num_groups_35600))));
            
            struct memblock_device mem_32226;
            
            mem_32226.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32226, bytes_32221,
                                      "mem_32226")) {
                err = 1;
                goto cleanup;
            }
            if (slt64((int64_t) 0, num_segments_29961)) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegScan");
                
                int64_t numThreads_35601;
                
                numThreads_35601 = sdiv_up64(num_segments_29961,
                                             segscan_group_sizze_31387 *
                                             (int64_t) 9) *
                    segscan_group_sizze_31387;
                
                int64_t numGroups_35602;
                
                numGroups_35602 = sdiv_up64(num_segments_29961,
                                            segscan_group_sizze_31387 *
                                            (int64_t) 9);
                
                struct memblock_device clusterPointsziid_counter_mem_35603 =
                                       ctx->clusterPointsziid_counter_mem_35603;
                struct memblock_device status_flags_mem_35605;
                
                status_flags_mem_35605.references = NULL;
                if (memblock_alloc_device(ctx, &status_flags_mem_35605,
                                          numGroups_35602,
                                          "status_flags_mem_35605")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device aggregates_mem_35607;
                
                aggregates_mem_35607.references = NULL;
                if (memblock_alloc_device(ctx, &aggregates_mem_35607,
                                          (int64_t) 8 * numGroups_35602,
                                          "aggregates_mem_35607")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device incprefixes_mem_35609;
                
                incprefixes_mem_35609.references = NULL;
                if (memblock_alloc_device(ctx, &incprefixes_mem_35609,
                                          (int64_t) 8 * numGroups_35602,
                                          "incprefixes_mem_35609")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_35605,
                                                 numGroups_35602, (int8_t) 0) !=
                    0) {
                    err = 1;
                    goto cleanup;
                }
                
                unsigned int shared_sizze_37641 = smax64(smax64((int64_t) 288,
                                                                (int64_t) 8 *
                                                                segscan_group_sizze_31387),
                                                         (int64_t) 9 *
                                                         segscan_group_sizze_31387 *
                                                         (int64_t) 8);
                CUdeviceptr kernel_arg_37643 = mem_32222.mem;
                CUdeviceptr kernel_arg_37644 = mem_32226.mem;
                CUdeviceptr kernel_arg_37645 =
                            clusterPointsziid_counter_mem_35603.mem;
                CUdeviceptr kernel_arg_37646 = status_flags_mem_35605.mem;
                CUdeviceptr kernel_arg_37647 = aggregates_mem_35607.mem;
                CUdeviceptr kernel_arg_37648 = incprefixes_mem_35609.mem;
                unsigned int shared_offset_37642 = 0;
                
                if ((((((1 && sdiv_up64(num_segments_29961,
                                        segscan_group_sizze_31387 *
                                        (int64_t) 9) != 0) && 1 != 0) && 1 !=
                       0) && segscan_group_sizze_31387 != 0) && 1 != 0) && 1 !=
                    0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = sdiv_up64(num_segments_29961,
                                              segscan_group_sizze_31387 *
                                              (int64_t) 9);
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37638[] = {&ctx->global_failure,
                                                 &shared_offset_37642,
                                                 &num_segments_29961,
                                                 &kernel_arg_37643,
                                                 &kernel_arg_37644,
                                                 &kernel_arg_37645,
                                                 &kernel_arg_37646,
                                                 &kernel_arg_37647,
                                                 &kernel_arg_37648};
                    int64_t time_start_37639 = 0, time_end_37640 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segscan_31392");
                        fprintf(ctx->log, "%ld",
                                (long) sdiv_up64(num_segments_29961,
                                                 segscan_group_sizze_31387 *
                                                 (int64_t) 9));
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segscan_group_sizze_31387);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37639 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegscan_31392_runs,
                                                  &ctx->clusterPointszisegscan_31392_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31392,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segscan_group_sizze_31387,
                                                          1, 1, 0 +
                                                          (shared_sizze_37641 +
                                                           (8 -
                                                            shared_sizze_37641 %
                                                            8) % 8), NULL,
                                                          kernel_args_37638,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37640 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segscan_31392", time_end_37640 -
                                time_start_37639);
                    }
                }
                if (memblock_unref_device(ctx, &incprefixes_mem_35609,
                                          "incprefixes_mem_35609") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &aggregates_mem_35607,
                                          "aggregates_mem_35607") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &status_flags_mem_35605,
                                          "status_flags_mem_35605") != 0)
                    return 1;
            }
            
            struct memblock_device mem_32228;
            
            mem_32228.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32228, bytes_32221,
                                      "mem_32228")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t group_sizze_35685;
            
            group_sizze_35685 = ctx->sizes.clusterPointszigroup_sizze_35685;
            
            int64_t num_groups_35686;
            
            num_groups_35686 = sdiv_up64(num_segments_29961, group_sizze_35685);
            
            CUdeviceptr kernel_arg_37652 = mem_32226.mem;
            CUdeviceptr kernel_arg_37653 = mem_32228.mem;
            
            if ((((((1 && num_groups_35686 != 0) && 1 != 0) && 1 != 0) &&
                  group_sizze_35685 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_35686;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37649[] = {&num_segments_29961,
                                             &kernel_arg_37652,
                                             &kernel_arg_37653};
                int64_t time_start_37650 = 0, time_end_37651 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.copy_35682");
                    fprintf(ctx->log, "%ld", (long) num_groups_35686);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) group_sizze_35685);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37650 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszicopy_35682_runs,
                                              &ctx->clusterPointszicopy_35682_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszicopy_35682,
                                                      grid[0], grid[1], grid[2],
                                                      group_sizze_35685, 1, 1,
                                                      0, NULL,
                                                      kernel_args_37649, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37651 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.copy_35682", time_end_37651 -
                            time_start_37650);
                }
            }
            if (memblock_unref_device(ctx, &mem_32226, "mem_32226") != 0)
                return 1;
            
            bool y_29985 = slt64((int64_t) 0, num_segments_29961);
            bool index_certs_29986;
            
            if (!y_29985) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (int64_t) 0,
                              "] out of bounds for array of shape [",
                              num_segments_29961, "].",
                              "-> #0  src/cluster.fut:23:6-27\n   #1  src/cluster.fut:62:17-38\n   #2  src/cluster.fut:158:8-43\n   #3  src/cluster.fut:170:14-27\n   #4  src/cluster.fut:176:27-76\n   #5  src/cluster.fut:195:18-38\n   #6  src/cluster.fut:190:1-200:50\n");
                if (memblock_unref_device(ctx, &mem_32228, "mem_32228") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32226, "mem_32226") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32222, "mem_32222") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32220, "mem_32220") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32217, "mem_32217") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32215, "mem_32215") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32212, "mem_32212") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32209, "mem_32209") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32207, "mem_32207") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32205, "mem_32205") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32202, "mem_32202") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32200, "mem_32200") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32196, "mem_32196") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32194, "mem_32194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32191, "mem_32191") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32189, "mem_32189") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32186, "mem_32186") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32183, "mem_32183") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32181, "mem_32181") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32179, "mem_32179") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32142,
                                          "mem_param_32142") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32137,
                                          "mem_param_32137") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                          "defunc_0_f_res_mem_32176") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                          "defunc_0_f_res_mem_32171") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32157, "mem_32157") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32155, "mem_32155") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32153, "mem_32153") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32151, "mem_32151") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32149, "mem_32149") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_34420,
                                          "defunc_1_map_res_subhistos_mem_34420") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                          "group_res_arr_mem_34391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32094,
                                          "mem_param_32094") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32089,
                                          "mem_param_32089") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32084,
                                          "mem_param_32084") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                          "lifted_fromInit_res_mem_32267") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                          "lifted_fromInit_res_mem_32262") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                          "lifted_fromInit_res_mem_32257") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32063,
                                          "mem_param_32063") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32058,
                                          "mem_param_32058") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32053,
                                          "mem_param_32053") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                          "clusterWith_res_mem_32285") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                          "clusterWith_res_mem_32280") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                          "clusterWith_res_mem_32275") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                          "group_res_arr_mem_34194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                          "group_res_arr_mem_33832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31971,
                                          "mem_param_31971") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31966,
                                          "mem_param_31966") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                          "defunc_0_f_res_mem_32005") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                          "defunc_0_f_res_mem_32000") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          "defunc_1_map_res_subhistos_mem_33190") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                          "group_res_arr_mem_33160") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31850,
                                          "mem_param_31850") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31845,
                                          "mem_param_31845") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                          "defunc_0_f_res_mem_31884") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                          "defunc_0_f_res_mem_31879") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32470,
                                          "out_mem_32470") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32468,
                                          "out_mem_32468") != 0)
                    return 1;
                return 1;
            }
            {
                int64_t write_tmp_37654 = (int64_t) 0;
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_scalar_to_dev_runs,
                                              &ctx->copy_scalar_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_32228.mem +
                                                    (int64_t) 0 *
                                                    sizeof(int64_t),
                                                    &write_tmp_37654,
                                                    sizeof(int64_t)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            
            struct memblock_device mem_32230;
            
            mem_32230.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32230, bytes_31829,
                                      "mem_32230")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i64(ctx, mem_32230, n_28846,
                                              (int64_t) 0) != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32232;
            
            mem_32232.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32232, bytes_31829,
                                      "mem_32232")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i64(ctx, mem_32232, n_28846,
                                              (int64_t) 0) != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t segmap_usable_groups_31398 = sdiv_up64(num_segments_29961,
                                                           segmap_group_sizze_31397);
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegMap");
            
            CUdeviceptr kernel_arg_37658 = mem_32207.mem;
            CUdeviceptr kernel_arg_37659 = mem_32222.mem;
            CUdeviceptr kernel_arg_37660 = mem_32228.mem;
            CUdeviceptr kernel_arg_37661 = mem_32230.mem;
            CUdeviceptr kernel_arg_37662 = mem_32232.mem;
            
            if ((((((1 && segmap_usable_groups_31398 != 0) && 1 != 0) && 1 !=
                   0) && segmap_group_sizze_31397 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = segmap_usable_groups_31398;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37655[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &n_28846, &num_segments_29900,
                                             &num_segments_29961,
                                             &kernel_arg_37658,
                                             &kernel_arg_37659,
                                             &kernel_arg_37660,
                                             &kernel_arg_37661,
                                             &kernel_arg_37662};
                int64_t time_start_37656 = 0, time_end_37657 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segmap_31394");
                    fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31398);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31397);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37656 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegmap_31394_runs,
                                              &ctx->clusterPointszisegmap_31394_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31394,
                                                      grid[0], grid[1], grid[2],
                                                      segmap_group_sizze_31397,
                                                      1, 1, 0, NULL,
                                                      kernel_args_37655, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37657 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segmap_31394", time_end_37657 -
                            time_start_37656);
                }
            }
            ctx->failure_is_an_option = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            if (memblock_unref_device(ctx, &mem_32207, "mem_32207") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32222, "mem_32222") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32228, "mem_32228") != 0)
                return 1;
            
            int64_t replicate_arg_30000 = sub64(maxSizze_29582,
                                                num_segments_29900);
            bool bounds_invalid_upwards_30001 = slt64(replicate_arg_30000,
                                                      (int64_t) 0);
            bool valid_30002 = !bounds_invalid_upwards_30001;
            bool range_valid_c_30003;
            
            if (!valid_30002) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                              replicate_arg_30000, " is invalid.",
                              "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  src/cluster.fut:43:34-50\n   #3  /prelude/functional.fut:9:42-44\n   #4  src/cluster.fut:170:14-40\n   #5  src/cluster.fut:176:27-76\n   #6  src/cluster.fut:195:18-38\n   #7  src/cluster.fut:190:1-200:50\n");
                if (memblock_unref_device(ctx, &mem_32232, "mem_32232") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32230, "mem_32230") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32228, "mem_32228") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32226, "mem_32226") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32222, "mem_32222") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32220, "mem_32220") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32217, "mem_32217") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32215, "mem_32215") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32212, "mem_32212") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32209, "mem_32209") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32207, "mem_32207") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32205, "mem_32205") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32202, "mem_32202") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32200, "mem_32200") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32196, "mem_32196") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32194, "mem_32194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32191, "mem_32191") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32189, "mem_32189") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32186, "mem_32186") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32183, "mem_32183") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32181, "mem_32181") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32179, "mem_32179") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32142,
                                          "mem_param_32142") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32137,
                                          "mem_param_32137") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                          "defunc_0_f_res_mem_32176") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                          "defunc_0_f_res_mem_32171") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32157, "mem_32157") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32155, "mem_32155") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32153, "mem_32153") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32151, "mem_32151") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32149, "mem_32149") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_34420,
                                          "defunc_1_map_res_subhistos_mem_34420") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                          "group_res_arr_mem_34391") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32094,
                                          "mem_param_32094") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32089,
                                          "mem_param_32089") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32084,
                                          "mem_param_32084") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                          "lifted_fromInit_res_mem_32267") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                          "lifted_fromInit_res_mem_32262") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                          "lifted_fromInit_res_mem_32257") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32063,
                                          "mem_param_32063") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32058,
                                          "mem_param_32058") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_32053,
                                          "mem_param_32053") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                          "clusterWith_res_mem_32285") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                          "clusterWith_res_mem_32280") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                          "clusterWith_res_mem_32275") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                          "group_res_arr_mem_34194") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                          "group_res_arr_mem_33832") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31971,
                                          "mem_param_31971") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31966,
                                          "mem_param_31966") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                          "defunc_0_f_res_mem_32005") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                          "defunc_0_f_res_mem_32000") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                    return 1;
                if (memblock_unref_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_33190,
                                          "defunc_1_map_res_subhistos_mem_33190") !=
                    0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                          "group_res_arr_mem_33160") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31850,
                                          "mem_param_31850") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_param_31845,
                                          "mem_param_31845") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                          "defunc_0_f_res_mem_31884") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                          "defunc_0_f_res_mem_31879") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32470,
                                          "out_mem_32470") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &out_mem_32468,
                                          "out_mem_32468") != 0)
                    return 1;
                return 1;
            }
            
            int64_t bytes_32234 = (int64_t) 4 * replicate_arg_30000;
            struct memblock_device mem_32235;
            
            mem_32235.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32235, bytes_32234,
                                      "mem_32235")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i32(ctx, mem_32235,
                                              replicate_arg_30000, 0) != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device mem_32237;
            
            mem_32237.references = NULL;
            if (memblock_alloc_device(ctx, &mem_32237, bytes_32072,
                                      "mem_32237")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t tmp_offs_35692 = (int64_t) 0;
            
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_dev_to_dev_runs,
                                              &ctx->copy_dev_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_32237.mem + tmp_offs_35692 *
                                                (int64_t) 4, mem_32209.mem +
                                                (int64_t) 0,
                                                num_segments_29900 *
                                                (int64_t) 4));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            tmp_offs_35692 += num_segments_29900;
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_dev_to_dev_runs,
                                              &ctx->copy_dev_to_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_32237.mem + tmp_offs_35692 *
                                                (int64_t) 4, mem_32235.mem +
                                                (int64_t) 0,
                                                replicate_arg_30000 *
                                                (int64_t) 4));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            tmp_offs_35692 += replicate_arg_30000;
            if (memblock_unref_device(ctx, &mem_32235, "mem_32235") != 0)
                return 1;
            
            struct memblock_device clusterPointszicounter_mem_35693 =
                                   ctx->clusterPointszicounter_mem_35693;
            struct memblock_device group_res_arr_mem_35695;
            
            group_res_arr_mem_35695.references = NULL;
            if (memblock_alloc_device(ctx, &group_res_arr_mem_35695,
                                      segred_group_sizze_31401 *
                                      num_groups_31403,
                                      "group_res_arr_mem_35695")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t num_threads_35697;
            
            num_threads_35697 = num_groups_31403 * segred_group_sizze_31401;
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegRed");
            
            unsigned int shared_sizze_37667 = segred_group_sizze_31401;
            unsigned int shared_sizze_37669 = 1;
            CUdeviceptr kernel_arg_37671 = mem_param_32094.mem;
            CUdeviceptr kernel_arg_37672 = mem_32230.mem;
            CUdeviceptr kernel_arg_37673 = mem_32240.mem;
            CUdeviceptr kernel_arg_37674 = clusterPointszicounter_mem_35693.mem;
            CUdeviceptr kernel_arg_37675 = group_res_arr_mem_35695.mem;
            unsigned int shared_offset_37668 = 0;
            unsigned int shared_offset_37670 = 0 + (shared_sizze_37667 + (8 -
                                                                          shared_sizze_37667 %
                                                                          8) %
                                                    8);
            
            if ((((((1 && num_groups_31403 != 0) && 1 != 0) && 1 != 0) &&
                  segred_group_sizze_31401 != 0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = num_groups_31403;
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37664[] = {&ctx->global_failure,
                                             &shared_offset_37668,
                                             &shared_offset_37670, &n_28846,
                                             &num_groups_31403,
                                             &num_threads_35697,
                                             &kernel_arg_37671,
                                             &kernel_arg_37672,
                                             &kernel_arg_37673,
                                             &kernel_arg_37674,
                                             &kernel_arg_37675};
                int64_t time_start_37665 = 0, time_end_37666 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segred_nonseg_31408");
                    fprintf(ctx->log, "%ld", (long) num_groups_31403);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segred_group_sizze_31401);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37665 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegred_nonseg_31408_runs,
                                              &ctx->clusterPointszisegred_nonseg_31408_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31408,
                                                      grid[0], grid[1], grid[2],
                                                      segred_group_sizze_31401,
                                                      1, 1, 0 +
                                                      (shared_sizze_37667 + (8 -
                                                                             shared_sizze_37667 %
                                                                             8) %
                                                       8) +
                                                      (shared_sizze_37669 + (8 -
                                                                             shared_sizze_37669 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_37664, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37666 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segred_nonseg_31408",
                            time_end_37666 - time_start_37665);
                }
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "");
            
            bool read_res_37676;
            
            {
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->copy_scalar_from_dev_runs,
                                              &ctx->copy_scalar_from_dev_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37676,
                                                    mem_32240.mem +
                                                    (int64_t) 0 * sizeof(bool),
                                                    sizeof(bool)));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            }
            if (futhark_context_sync(ctx) != 0)
                return 1;
            
            bool defunc_2_reduce_res_30006 = read_res_37676;
            bool lifted_checkEqual_res_30013;
            
            if (defunc_2_reduce_res_30006) {
                int64_t segred_group_sizze_31411;
                
                segred_group_sizze_31411 =
                    ctx->sizes.clusterPointszisegred_group_sizze_31410;
                
                int64_t num_groups_31413;
                int32_t max_num_groups_35723;
                
                max_num_groups_35723 =
                    ctx->sizes.clusterPointszisegred_num_groups_31412;
                num_groups_31413 = sext_i64_i32(smax64((int64_t) 1,
                                                       smin64(sdiv_up64(maxSizze_29582,
                                                                        segred_group_sizze_31411),
                                                              sext_i32_i64(max_num_groups_35723))));
                
                struct memblock_device mem_32243;
                
                mem_32243.references = NULL;
                if (memblock_alloc_device(ctx, &mem_32243, (int64_t) 1,
                                          "mem_32243")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device clusterPointszicounter_mem_35724 =
                                       ctx->clusterPointszicounter_mem_35724;
                struct memblock_device group_res_arr_mem_35726;
                
                group_res_arr_mem_35726.references = NULL;
                if (memblock_alloc_device(ctx, &group_res_arr_mem_35726,
                                          segred_group_sizze_31411 *
                                          num_groups_31413,
                                          "group_res_arr_mem_35726")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t num_threads_35728;
                
                num_threads_35728 = num_groups_31413 * segred_group_sizze_31411;
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed");
                
                unsigned int shared_sizze_37681 = segred_group_sizze_31411;
                unsigned int shared_sizze_37683 = 1;
                CUdeviceptr kernel_arg_37685 = mem_param_32084.mem;
                CUdeviceptr kernel_arg_37686 = mem_32209.mem;
                CUdeviceptr kernel_arg_37687 = mem_32243.mem;
                CUdeviceptr kernel_arg_37688 =
                            clusterPointszicounter_mem_35724.mem;
                CUdeviceptr kernel_arg_37689 = group_res_arr_mem_35726.mem;
                unsigned int shared_offset_37682 = 0;
                unsigned int shared_offset_37684 = 0 + (shared_sizze_37681 +
                                                        (8 -
                                                         shared_sizze_37681 %
                                                         8) % 8);
                
                if ((((((1 && num_groups_31413 != 0) && 1 != 0) && 1 != 0) &&
                      segred_group_sizze_31411 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_31413;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37678[] = {&ctx->global_failure,
                                                 &shared_offset_37682,
                                                 &shared_offset_37684,
                                                 &maxSizze_29582,
                                                 &num_segments_29900,
                                                 &num_groups_31413,
                                                 &num_threads_35728,
                                                 &kernel_arg_37685,
                                                 &kernel_arg_37686,
                                                 &kernel_arg_37687,
                                                 &kernel_arg_37688,
                                                 &kernel_arg_37689};
                    int64_t time_start_37679 = 0, time_end_37680 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segred_nonseg_31418");
                        fprintf(ctx->log, "%ld", (long) num_groups_31413);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segred_group_sizze_31411);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37679 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegred_nonseg_31418_runs,
                                                  &ctx->clusterPointszisegred_nonseg_31418_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31418,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segred_group_sizze_31411,
                                                          1, 1, 0 +
                                                          (shared_sizze_37681 +
                                                           (8 -
                                                            shared_sizze_37681 %
                                                            8) % 8) +
                                                          (shared_sizze_37683 +
                                                           (8 -
                                                            shared_sizze_37683 %
                                                            8) % 8), NULL,
                                                          kernel_args_37678,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37680 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segred_nonseg_31418",
                                time_end_37680 - time_start_37679);
                    }
                }
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
                
                bool read_res_37690;
                
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_scalar_from_dev_runs,
                                                  &ctx->copy_scalar_from_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37690,
                                                        mem_32243.mem +
                                                        (int64_t) 0 *
                                                        sizeof(bool),
                                                        sizeof(bool)));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (futhark_context_sync(ctx) != 0)
                    return 1;
                
                bool defunc_2_reduce_res_30014 = read_res_37690;
                
                if (memblock_unref_device(ctx, &mem_32243, "mem_32243") != 0)
                    return 1;
                lifted_checkEqual_res_30013 = defunc_2_reduce_res_30014;
                if (memblock_unref_device(ctx, &group_res_arr_mem_35726,
                                          "group_res_arr_mem_35726") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32243, "mem_32243") != 0)
                    return 1;
            } else {
                lifted_checkEqual_res_30013 = 0;
            }
            if (memblock_unref_device(ctx, &mem_32209, "mem_32209") != 0)
                return 1;
            
            bool cond_30021 = !lifted_checkEqual_res_30013;
            bool loop_cond_30022;
            
            if (cond_30021) {
                int64_t segred_group_sizze_31421;
                
                segred_group_sizze_31421 =
                    ctx->sizes.clusterPointszisegred_group_sizze_31420;
                
                int64_t num_groups_31423;
                int32_t max_num_groups_35754;
                
                max_num_groups_35754 =
                    ctx->sizes.clusterPointszisegred_num_groups_31422;
                num_groups_31423 = sext_i64_i32(smax64((int64_t) 1,
                                                       smin64(sdiv_up64(n_28846,
                                                                        segred_group_sizze_31421),
                                                              sext_i32_i64(max_num_groups_35754))));
                
                struct memblock_device mem_32246;
                
                mem_32246.references = NULL;
                if (memblock_alloc_device(ctx, &mem_32246, (int64_t) 8,
                                          "mem_32246")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device clusterPointszicounter_mem_35755 =
                                       ctx->clusterPointszicounter_mem_35755;
                struct memblock_device group_res_arr_mem_35757;
                
                group_res_arr_mem_35757.references = NULL;
                if (memblock_alloc_device(ctx, &group_res_arr_mem_35757,
                                          (int64_t) 8 *
                                          (segred_group_sizze_31421 *
                                           num_groups_31423),
                                          "group_res_arr_mem_35757")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t num_threads_35759;
                
                num_threads_35759 = num_groups_31423 * segred_group_sizze_31421;
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed");
                
                unsigned int shared_sizze_37695 = (int64_t) 8 *
                             segred_group_sizze_31421;
                unsigned int shared_sizze_37697 = 1;
                CUdeviceptr kernel_arg_37699 = mem_32230.mem;
                CUdeviceptr kernel_arg_37700 = mem_32246.mem;
                CUdeviceptr kernel_arg_37701 =
                            clusterPointszicounter_mem_35755.mem;
                CUdeviceptr kernel_arg_37702 = group_res_arr_mem_35757.mem;
                unsigned int shared_offset_37696 = 0;
                unsigned int shared_offset_37698 = 0 + (shared_sizze_37695 +
                                                        (8 -
                                                         shared_sizze_37695 %
                                                         8) % 8);
                
                if ((((((1 && num_groups_31423 != 0) && 1 != 0) && 1 != 0) &&
                      segred_group_sizze_31421 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_31423;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37692[] = {&ctx->global_failure,
                                                 &shared_offset_37696,
                                                 &shared_offset_37698, &n_28846,
                                                 &num_groups_31423,
                                                 &num_threads_35759,
                                                 &kernel_arg_37699,
                                                 &kernel_arg_37700,
                                                 &kernel_arg_37701,
                                                 &kernel_arg_37702};
                    int64_t time_start_37693 = 0, time_end_37694 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segred_nonseg_31428");
                        fprintf(ctx->log, "%ld", (long) num_groups_31423);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) segred_group_sizze_31421);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37693 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegred_nonseg_31428_runs,
                                                  &ctx->clusterPointszisegred_nonseg_31428_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31428,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          segred_group_sizze_31421,
                                                          1, 1, 0 +
                                                          (shared_sizze_37695 +
                                                           (8 -
                                                            shared_sizze_37695 %
                                                            8) % 8) +
                                                          (shared_sizze_37697 +
                                                           (8 -
                                                            shared_sizze_37697 %
                                                            8) % 8), NULL,
                                                          kernel_args_37692,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37694 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segred_nonseg_31428",
                                time_end_37694 - time_start_37693);
                    }
                }
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
                
                int64_t read_res_37703;
                
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_scalar_from_dev_runs,
                                                  &ctx->copy_scalar_from_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37703,
                                                        mem_32246.mem +
                                                        (int64_t) 0 *
                                                        sizeof(int64_t),
                                                        sizeof(int64_t)));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
                if (futhark_context_sync(ctx) != 0)
                    return 1;
                
                int64_t defunc_2_reduce_res_30023 = read_res_37703;
                
                if (memblock_unref_device(ctx, &mem_32246, "mem_32246") != 0)
                    return 1;
                
                bool loop_cond_t_res_30028 = sle64(defunc_2_reduce_res_30023,
                                                   maxSizze_29582);
                
                loop_cond_30022 = loop_cond_t_res_30028;
                if (memblock_unref_device(ctx, &group_res_arr_mem_35757,
                                          "group_res_arr_mem_35757") != 0)
                    return 1;
                if (memblock_unref_device(ctx, &mem_32246, "mem_32246") != 0)
                    return 1;
            } else {
                loop_cond_30022 = 0;
            }
            
            struct memblock_device mem_param_tmp_34301;
            
            mem_param_tmp_34301.references = NULL;
            if (memblock_set_device(ctx, &mem_param_tmp_34301, &mem_32237,
                                    "mem_32237") != 0)
                return 1;
            
            struct memblock_device mem_param_tmp_34302;
            
            mem_param_tmp_34302.references = NULL;
            if (memblock_set_device(ctx, &mem_param_tmp_34302, &mem_32232,
                                    "mem_32232") != 0)
                return 1;
            
            struct memblock_device mem_param_tmp_34303;
            
            mem_param_tmp_34303.references = NULL;
            if (memblock_set_device(ctx, &mem_param_tmp_34303, &mem_32230,
                                    "mem_32230") != 0)
                return 1;
            
            bool loop_while_tmp_34304;
            
            loop_while_tmp_34304 = loop_cond_30022;
            if (memblock_set_device(ctx, &mem_param_32084, &mem_param_tmp_34301,
                                    "mem_param_tmp_34301") != 0)
                return 1;
            if (memblock_set_device(ctx, &mem_param_32089, &mem_param_tmp_34302,
                                    "mem_param_tmp_34302") != 0)
                return 1;
            if (memblock_set_device(ctx, &mem_param_32094, &mem_param_tmp_34303,
                                    "mem_param_tmp_34303") != 0)
                return 1;
            loop_while_29614 = loop_while_tmp_34304;
            if (memblock_unref_device(ctx, &mem_param_tmp_34303,
                                      "mem_param_tmp_34303") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_tmp_34302,
                                      "mem_param_tmp_34302") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_tmp_34301,
                                      "mem_param_tmp_34301") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_35695,
                                      "group_res_arr_mem_35695") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32237, "mem_32237") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32235, "mem_32235") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32232, "mem_32232") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32230, "mem_32230") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32228, "mem_32228") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32226, "mem_32226") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32222, "mem_32222") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32220, "mem_32220") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32217, "mem_32217") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32215, "mem_32215") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32212, "mem_32212") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32209, "mem_32209") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32207, "mem_32207") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32205, "mem_32205") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32202, "mem_32202") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32200, "mem_32200") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32196, "mem_32196") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32194, "mem_32194") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32191, "mem_32191") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32189, "mem_32189") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32186, "mem_32186") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32183, "mem_32183") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32181, "mem_32181") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32179, "mem_32179") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32142,
                                      "mem_param_32142") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32137,
                                      "mem_param_32137") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32176,
                                      "defunc_0_f_res_mem_32176") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32171,
                                      "defunc_0_f_res_mem_32171") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32157, "mem_32157") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32155, "mem_32155") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32153, "mem_32153") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32151, "mem_32151") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32149, "mem_32149") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32132, "mem_32132") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32130, "mem_32130") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32128, "mem_32128") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32126, "mem_32126") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32123, "mem_32123") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32121, "mem_32121") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32118, "mem_32118") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32116, "mem_32116") != 0)
                return 1;
            if (memblock_unref_device(ctx,
                                      &defunc_1_map_res_subhistos_mem_34420,
                                      "defunc_1_map_res_subhistos_mem_34420") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32112, "mem_32112") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_34391,
                                      "group_res_arr_mem_34391") != 0)
                return 1;
        }
        if (memblock_set_device(ctx, &lifted_fromInit_res_mem_32257,
                                &mem_param_32084, "mem_param_32084") != 0)
            return 1;
        if (memblock_set_device(ctx, &lifted_fromInit_res_mem_32262,
                                &mem_param_32089, "mem_param_32089") != 0)
            return 1;
        if (memblock_set_device(ctx, &lifted_fromInit_res_mem_32267,
                                &mem_param_32094, "mem_param_32094") != 0)
            return 1;
        lifted_fromInit_res_29610 = loop_while_29614;
        if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
            return 1;
        
        int64_t loopres_30032 = mul64((int64_t) 2, maxSizze_29582);
        struct memblock_device clusterPointszicounter_mem_35785 =
                               ctx->clusterPointszicounter_mem_35785;
        struct memblock_device group_res_arr_mem_35787;
        
        group_res_arr_mem_35787.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35787, (int64_t) 8 *
                                  (segred_group_sizze_31431 * num_groups_31433),
                                  "group_res_arr_mem_35787")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t num_threads_35789;
        
        num_threads_35789 = num_groups_31433 * segred_group_sizze_31431;
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegRed");
        
        unsigned int shared_sizze_37708 = (int64_t) 8 *
                     segred_group_sizze_31431;
        unsigned int shared_sizze_37710 = 1;
        CUdeviceptr kernel_arg_37712 = lifted_fromInit_res_mem_32267.mem;
        CUdeviceptr kernel_arg_37713 = mem_32270.mem;
        CUdeviceptr kernel_arg_37714 = clusterPointszicounter_mem_35785.mem;
        CUdeviceptr kernel_arg_37715 = group_res_arr_mem_35787.mem;
        unsigned int shared_offset_37709 = 0;
        unsigned int shared_offset_37711 = 0 + (shared_sizze_37708 + (8 -
                                                                      shared_sizze_37708 %
                                                                      8) % 8);
        
        if ((((((1 && num_groups_31433 != 0) && 1 != 0) && 1 != 0) &&
              segred_group_sizze_31431 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = num_groups_31433;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37705[] = {&ctx->global_failure,
                                         &shared_offset_37709,
                                         &shared_offset_37711, &n_28846,
                                         &num_groups_31433, &num_threads_35789,
                                         &kernel_arg_37712, &kernel_arg_37713,
                                         &kernel_arg_37714, &kernel_arg_37715};
            int64_t time_start_37706 = 0, time_end_37707 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segred_nonseg_31438");
                fprintf(ctx->log, "%ld", (long) num_groups_31433);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segred_group_sizze_31431);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37706 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegred_nonseg_31438_runs,
                                          &ctx->clusterPointszisegred_nonseg_31438_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31438,
                                                  grid[0], grid[1], grid[2],
                                                  segred_group_sizze_31431, 1,
                                                  1, 0 + (shared_sizze_37708 +
                                                          (8 -
                                                           shared_sizze_37708 %
                                                           8) % 8) +
                                                  (shared_sizze_37710 + (8 -
                                                                         shared_sizze_37710 %
                                                                         8) %
                                                   8), NULL, kernel_args_37705,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37707 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segred_nonseg_31438", time_end_37707 -
                        time_start_37706);
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        
        int64_t read_res_37716;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37716, mem_32270.mem +
                                                (int64_t) 0 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t defunc_2_reduce_res_30033 = read_res_37716;
        bool cond_30038 = defunc_2_reduce_res_30033 == (int64_t) 0;
        bool loop_cond_f_res_30039 = slt64(loopres_30032,
                                           defunc_2_reduce_res_30033);
        bool x_30040 = !cond_30038;
        bool y_30041 = loop_cond_f_res_30039 && x_30040;
        bool loop_cond_30042 = cond_30038 || y_30041;
        int64_t loopz2081Uz2082Uz2086U_tmp_34227 = maxSizze_29582;
        int64_t ctx_param_ext_tmp_34228 = maxSizze_29582;
        int64_t ctx_param_ext_tmp_34229 = maxSizze_29582;
        struct memblock_device mem_param_tmp_34230;
        
        mem_param_tmp_34230.references = NULL;
        if (memblock_set_device(ctx, &mem_param_tmp_34230,
                                &lifted_fromInit_res_mem_32257,
                                "lifted_fromInit_res_mem_32257") != 0)
            return 1;
        
        struct memblock_device mem_param_tmp_34231;
        
        mem_param_tmp_34231.references = NULL;
        if (memblock_set_device(ctx, &mem_param_tmp_34231,
                                &lifted_fromInit_res_mem_32262,
                                "lifted_fromInit_res_mem_32262") != 0)
            return 1;
        
        struct memblock_device mem_param_tmp_34232;
        
        mem_param_tmp_34232.references = NULL;
        if (memblock_set_device(ctx, &mem_param_tmp_34232,
                                &lifted_fromInit_res_mem_32267,
                                "lifted_fromInit_res_mem_32267") != 0)
            return 1;
        
        bool loop_while_tmp_34233;
        
        loop_while_tmp_34233 = loop_cond_30042;
        
        int64_t maxSizze_tmp_34234;
        
        maxSizze_tmp_34234 = loopres_30032;
        loopz2081Uz2082Uz2086U_29580 = loopz2081Uz2082Uz2086U_tmp_34227;
        ctx_param_ext_32049 = ctx_param_ext_tmp_34228;
        ctx_param_ext_32052 = ctx_param_ext_tmp_34229;
        if (memblock_set_device(ctx, &mem_param_32053, &mem_param_tmp_34230,
                                "mem_param_tmp_34230") != 0)
            return 1;
        if (memblock_set_device(ctx, &mem_param_32058, &mem_param_tmp_34231,
                                "mem_param_tmp_34231") != 0)
            return 1;
        if (memblock_set_device(ctx, &mem_param_32063, &mem_param_tmp_34232,
                                "mem_param_tmp_34232") != 0)
            return 1;
        loop_while_29581 = loop_while_tmp_34233;
        maxSizze_29582 = maxSizze_tmp_34234;
        if (memblock_unref_device(ctx, &mem_param_tmp_34232,
                                  "mem_param_tmp_34232") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_34231,
                                  "mem_param_tmp_34231") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_tmp_34230,
                                  "mem_param_tmp_34230") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35787,
                                  "group_res_arr_mem_35787") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32094, "mem_param_32094") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32089, "mem_param_32089") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32084, "mem_param_32084") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32267,
                                  "lifted_fromInit_res_mem_32267") != 0)
            return 1;
        if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32262,
                                  "lifted_fromInit_res_mem_32262") != 0)
            return 1;
        if (memblock_unref_device(ctx, &lifted_fromInit_res_mem_32257,
                                  "lifted_fromInit_res_mem_32257") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32073, "mem_32073") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32071, "mem_32071") != 0)
            return 1;
    }
    sizze_29574 = loopz2081Uz2082Uz2086U_29580;
    clusterWith_res_ixfn_32271 = ctx_param_ext_32049;
    clusterWith_res_ixfn_32274 = ctx_param_ext_32052;
    if (memblock_set_device(ctx, &clusterWith_res_mem_32275, &mem_param_32053,
                            "mem_param_32053") != 0)
        return 1;
    if (memblock_set_device(ctx, &clusterWith_res_mem_32280, &mem_param_32058,
                            "mem_param_32058") != 0)
        return 1;
    if (memblock_set_device(ctx, &clusterWith_res_mem_32285, &mem_param_32063,
                            "mem_param_32063") != 0)
        return 1;
    clusterWith_res_29575 = loop_while_29581;
    clusterWith_res_29576 = maxSizze_29582;
    if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
        return 1;
    
    int64_t i32_res_30043 = sext_i32_i64(thres_28849);
    int64_t segscan_group_sizze_31441;
    
    segscan_group_sizze_31441 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31440;
    
    int64_t num_groups_31443;
    int32_t max_num_groups_35815;
    
    max_num_groups_35815 = ctx->sizes.clusterPointszisegscan_num_groups_31442;
    num_groups_31443 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(n_28846,
                                                            segscan_group_sizze_31441),
                                                  sext_i32_i64(max_num_groups_35815))));
    
    struct memblock_device mem_32288;
    
    mem_32288.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32288, bytes_31829, "mem_32288")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32290;
    
    mem_32290.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32290, bytes_31829, "mem_32290")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, n_28846)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_35816;
        
        numThreads_35816 = sdiv_up64(n_28846, segscan_group_sizze_31441 *
                                     (int64_t) 9) * segscan_group_sizze_31441;
        
        int64_t numGroups_35817;
        
        numGroups_35817 = sdiv_up64(n_28846, segscan_group_sizze_31441 *
                                    (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_35818 =
                               ctx->clusterPointsziid_counter_mem_35818;
        struct memblock_device status_flags_mem_35820;
        
        status_flags_mem_35820.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_35820, numGroups_35817,
                                  "status_flags_mem_35820")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_35822;
        
        aggregates_mem_35822.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_35822, (int64_t) 8 *
                                  numGroups_35817, "aggregates_mem_35822")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_35824;
        
        incprefixes_mem_35824.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_35824, (int64_t) 8 *
                                  numGroups_35817, "incprefixes_mem_35824")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_35820,
                                         numGroups_35817, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37721 = smax64(smax64((int64_t) 288,
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_31441),
                                                 (int64_t) 9 *
                                                 segscan_group_sizze_31441 *
                                                 (int64_t) 8);
        CUdeviceptr kernel_arg_37723 = clusterWith_res_mem_32285.mem;
        CUdeviceptr kernel_arg_37724 = mem_32288.mem;
        CUdeviceptr kernel_arg_37725 = mem_32290.mem;
        CUdeviceptr kernel_arg_37726 = clusterPointsziid_counter_mem_35818.mem;
        CUdeviceptr kernel_arg_37727 = status_flags_mem_35820.mem;
        CUdeviceptr kernel_arg_37728 = aggregates_mem_35822.mem;
        CUdeviceptr kernel_arg_37729 = incprefixes_mem_35824.mem;
        unsigned int shared_offset_37722 = 0;
        
        if ((((((1 && sdiv_up64(n_28846, segscan_group_sizze_31441 *
                                (int64_t) 9) != 0) && 1 != 0) && 1 != 0) &&
              segscan_group_sizze_31441 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(n_28846, segscan_group_sizze_31441 *
                                      (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37718[] = {&ctx->global_failure,
                                         &shared_offset_37722, &n_28846,
                                         &i32_res_30043, &kernel_arg_37723,
                                         &kernel_arg_37724, &kernel_arg_37725,
                                         &kernel_arg_37726, &kernel_arg_37727,
                                         &kernel_arg_37728, &kernel_arg_37729};
            int64_t time_start_37719 = 0, time_end_37720 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_31446");
                fprintf(ctx->log, "%ld", (long) sdiv_up64(n_28846,
                                                          segscan_group_sizze_31441 *
                                                          (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_31441);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37719 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_31446_runs,
                                          &ctx->clusterPointszisegscan_31446_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31446,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_31441, 1,
                                                  1, 0 + (shared_sizze_37721 +
                                                          (8 -
                                                           shared_sizze_37721 %
                                                           8) % 8), NULL,
                                                  kernel_args_37718, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37720 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_31446", time_end_37720 -
                        time_start_37719);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_35824,
                                  "incprefixes_mem_35824") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_35822,
                                  "aggregates_mem_35822") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_35820,
                                  "status_flags_mem_35820") != 0)
            return 1;
    }
    
    int64_t partition_sizze_30057;
    
    if (cond_28880) {
        partition_sizze_30057 = (int64_t) 0;
    } else {
        int64_t read_res_37730;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37730, mem_32288.mem +
                                                i_28886 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t last_offset_30058 = read_res_37730;
        
        partition_sizze_30057 = last_offset_30058;
    }
    
    struct memblock_device mem_32292;
    
    mem_32292.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32292, bytes_31832, "mem_32292")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t segmap_group_sizze_31451;
    
    segmap_group_sizze_31451 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31450;
    
    int64_t segmap_usable_groups_31452 = sdiv_up64(n_28846,
                                                   segmap_group_sizze_31451);
    
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37734 = mem_32048.mem;
    CUdeviceptr kernel_arg_37735 = mem_32288.mem;
    CUdeviceptr kernel_arg_37736 = mem_32290.mem;
    CUdeviceptr kernel_arg_37737 = mem_32292.mem;
    
    if ((((((1 && segmap_usable_groups_31452 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_31451 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_31452;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37731[] = {&ctx->global_failure, &n_28846,
                                     &kernel_arg_37734, &kernel_arg_37735,
                                     &kernel_arg_37736, &kernel_arg_37737};
        int64_t time_start_37732 = 0, time_end_37733 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_31448");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31452);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31451);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37732 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_31448_runs,
                                      &ctx->clusterPointszisegmap_31448_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31448,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_31451, 1, 1, 0,
                                              NULL, kernel_args_37731, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37733 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_31448", time_end_37733 -
                    time_start_37732);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32288, "mem_32288") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32290, "mem_32290") != 0)
        return 1;
    
    bool empty_slice_30068 = partition_sizze_30057 == (int64_t) 0;
    int64_t m_30069 = sub64(partition_sizze_30057, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_30070 = sle64((int64_t) 0, m_30069);
    bool i_p_m_t_s_leq_w_30071 = slt64(m_30069, n_28846);
    bool i_lte_j_30072 = sle64((int64_t) 0, partition_sizze_30057);
    bool y_30073 = zzero_leq_i_p_m_t_s_30070 && i_p_m_t_s_leq_w_30071;
    bool y_30074 = i_lte_j_30072 && y_30073;
    bool ok_or_empty_30075 = empty_slice_30068 || y_30074;
    bool index_certs_30076;
    
    if (!ok_or_empty_30075) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", partition_sizze_30057,
                               "] out of bounds for array of shape [", n_28846,
                               "].",
                               "-> #0  /prelude/soacs.fut:155:6-16\n   #1  /prelude/functional.fut:9:42-44\n   #2  src/cluster.fut:180:21-181:46\n   #3  src/cluster.fut:195:18-38\n   #4  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_32292, "mem_32292") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32290, "mem_32290") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32288, "mem_32288") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32063, "mem_param_32063") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32058, "mem_param_32058") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32053, "mem_param_32053") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                  "clusterWith_res_mem_32285") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                  "clusterWith_res_mem_32280") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                  "clusterWith_res_mem_32275") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                  "group_res_arr_mem_34194") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                  "group_res_arr_mem_33832") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31971, "mem_param_31971") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31966, "mem_param_31966") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                  "defunc_0_f_res_mem_32005") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                  "defunc_0_f_res_mem_32000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    struct memblock_device mem_32295;
    
    mem_32295.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32295, (int64_t) 0, "mem_32295")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32297;
    
    mem_32297.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32297, (int64_t) 0, "mem_32297")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t sizze_30080;
    
    if (empty_slice_30068) {
        sizze_30080 = (int64_t) 0;
    } else {
        sizze_30080 = partition_sizze_30057;
    }
    
    int64_t segscan_group_sizze_31455;
    
    segscan_group_sizze_31455 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31454;
    
    int64_t num_groups_31457;
    int32_t max_num_groups_35902;
    
    max_num_groups_35902 = ctx->sizes.clusterPointszisegscan_num_groups_31456;
    num_groups_31457 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(partition_sizze_30057,
                                                            segscan_group_sizze_31455),
                                                  sext_i32_i64(max_num_groups_35902))));
    
    int64_t segred_group_sizze_31463;
    
    segred_group_sizze_31463 =
        ctx->sizes.clusterPointszisegred_group_sizze_31462;
    
    int64_t num_groups_31465;
    int32_t max_num_groups_35903;
    
    max_num_groups_35903 = ctx->sizes.clusterPointszisegred_num_groups_31464;
    num_groups_31465 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(partition_sizze_30057,
                                                            segred_group_sizze_31463),
                                                  sext_i32_i64(max_num_groups_35903))));
    
    int64_t bytes_32299 = (int64_t) 8 * partition_sizze_30057;
    int64_t sizze_30081;
    int64_t clusterWith_res_ixfn_32330;
    struct memblock_device clusterWith_res_mem_32331;
    
    clusterWith_res_mem_32331.references = NULL;
    
    struct memblock_device clusterWith_res_mem_32333;
    
    clusterWith_res_mem_32333.references = NULL;
    
    struct memblock_device clusterWith_res_mem_32335;
    
    clusterWith_res_mem_32335.references = NULL;
    if (empty_slice_30068) {
        sizze_30081 = (int64_t) 0;
        clusterWith_res_ixfn_32330 = (int64_t) 0;
        if (memblock_set_device(ctx, &clusterWith_res_mem_32331, &mem_32295,
                                "mem_32295") != 0)
            return 1;
        if (memblock_set_device(ctx, &clusterWith_res_mem_32333, &mem_32297,
                                "mem_32297") != 0)
            return 1;
        if (memblock_set_device(ctx, &clusterWith_res_mem_32335, &mem_32297,
                                "mem_32297") != 0)
            return 1;
    } else {
        struct memblock_device mem_32300;
        
        mem_32300.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32300, bytes_32299, "mem_32300")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_32302;
        
        mem_32302.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32302, bytes_32299, "mem_32302")) {
            err = 1;
            goto cleanup;
        }
        if (slt64((int64_t) 0, partition_sizze_30057)) {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegScan");
            
            int64_t numThreads_35904;
            
            numThreads_35904 = sdiv_up64(partition_sizze_30057,
                                         segscan_group_sizze_31455 *
                                         (int64_t) 9) *
                segscan_group_sizze_31455;
            
            int64_t numGroups_35905;
            
            numGroups_35905 = sdiv_up64(partition_sizze_30057,
                                        segscan_group_sizze_31455 *
                                        (int64_t) 9);
            
            struct memblock_device clusterPointsziid_counter_mem_35906 =
                                   ctx->clusterPointsziid_counter_mem_35906;
            struct memblock_device status_flags_mem_35908;
            
            status_flags_mem_35908.references = NULL;
            if (memblock_alloc_device(ctx, &status_flags_mem_35908,
                                      numGroups_35905,
                                      "status_flags_mem_35908")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_35910;
            
            aggregates_mem_35910.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_35910, (int64_t) 8 *
                                      numGroups_35905,
                                      "aggregates_mem_35910")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_35912;
            
            incprefixes_mem_35912.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_35912, (int64_t) 8 *
                                      numGroups_35905,
                                      "incprefixes_mem_35912")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_35908,
                                             numGroups_35905, (int8_t) 0) !=
                0) {
                err = 1;
                goto cleanup;
            }
            
            unsigned int shared_sizze_37742 = smax64(smax64((int64_t) 288,
                                                            (int64_t) 8 *
                                                            segscan_group_sizze_31455),
                                                     (int64_t) 9 *
                                                     segscan_group_sizze_31455 *
                                                     (int64_t) 8);
            CUdeviceptr kernel_arg_37744 = clusterWith_res_mem_32285.mem;
            CUdeviceptr kernel_arg_37745 = mem_32292.mem;
            CUdeviceptr kernel_arg_37746 = mem_32300.mem;
            CUdeviceptr kernel_arg_37747 = mem_32302.mem;
            CUdeviceptr kernel_arg_37748 =
                        clusterPointsziid_counter_mem_35906.mem;
            CUdeviceptr kernel_arg_37749 = status_flags_mem_35908.mem;
            CUdeviceptr kernel_arg_37750 = aggregates_mem_35910.mem;
            CUdeviceptr kernel_arg_37751 = incprefixes_mem_35912.mem;
            unsigned int shared_offset_37743 = 0;
            
            if ((((((1 && sdiv_up64(partition_sizze_30057,
                                    segscan_group_sizze_31455 * (int64_t) 9) !=
                     0) && 1 != 0) && 1 != 0) && segscan_group_sizze_31455 !=
                  0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = sdiv_up64(partition_sizze_30057,
                                          segscan_group_sizze_31455 *
                                          (int64_t) 9);
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37739[] = {&ctx->global_failure,
                                             &ctx->failure_is_an_option,
                                             &ctx->global_failure_args,
                                             &shared_offset_37743, &n_28846,
                                             &partition_sizze_30057,
                                             &kernel_arg_37744,
                                             &kernel_arg_37745,
                                             &kernel_arg_37746,
                                             &kernel_arg_37747,
                                             &kernel_arg_37748,
                                             &kernel_arg_37749,
                                             &kernel_arg_37750,
                                             &kernel_arg_37751};
                int64_t time_start_37740 = 0, time_end_37741 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segscan_31460");
                    fprintf(ctx->log, "%ld",
                            (long) sdiv_up64(partition_sizze_30057,
                                             segscan_group_sizze_31455 *
                                             (int64_t) 9));
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segscan_group_sizze_31455);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37740 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegscan_31460_runs,
                                              &ctx->clusterPointszisegscan_31460_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31460,
                                                      grid[0], grid[1], grid[2],
                                                      segscan_group_sizze_31455,
                                                      1, 1, 0 +
                                                      (shared_sizze_37742 + (8 -
                                                                             shared_sizze_37742 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_37739, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37741 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segscan_31460", time_end_37741 -
                            time_start_37740);
                }
            }
            ctx->failure_is_an_option = 1;
            if (memblock_unref_device(ctx, &incprefixes_mem_35912,
                                      "incprefixes_mem_35912") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_35910,
                                      "aggregates_mem_35910") != 0)
                return 1;
            if (memblock_unref_device(ctx, &status_flags_mem_35908,
                                      "status_flags_mem_35908") != 0)
                return 1;
        }
        
        struct memblock_device mem_32305;
        
        mem_32305.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32305, (int64_t) 8, "mem_32305")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device clusterPointszicounter_mem_35985 =
                               ctx->clusterPointszicounter_mem_35985;
        struct memblock_device group_res_arr_mem_35987;
        
        group_res_arr_mem_35987.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_35987, (int64_t) 8 *
                                  (segred_group_sizze_31463 * num_groups_31465),
                                  "group_res_arr_mem_35987")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t num_threads_35989;
        
        num_threads_35989 = num_groups_31465 * segred_group_sizze_31463;
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegRed");
        
        unsigned int shared_sizze_37756 = (int64_t) 8 *
                     segred_group_sizze_31463;
        unsigned int shared_sizze_37758 = 1;
        CUdeviceptr kernel_arg_37760 = mem_32302.mem;
        CUdeviceptr kernel_arg_37761 = mem_32305.mem;
        CUdeviceptr kernel_arg_37762 = clusterPointszicounter_mem_35985.mem;
        CUdeviceptr kernel_arg_37763 = group_res_arr_mem_35987.mem;
        unsigned int shared_offset_37757 = 0;
        unsigned int shared_offset_37759 = 0 + (shared_sizze_37756 + (8 -
                                                                      shared_sizze_37756 %
                                                                      8) % 8);
        
        if ((((((1 && num_groups_31465 != 0) && 1 != 0) && 1 != 0) &&
              segred_group_sizze_31463 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = num_groups_31465;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37753[] = {&ctx->global_failure,
                                         &shared_offset_37757,
                                         &shared_offset_37759,
                                         &partition_sizze_30057,
                                         &num_groups_31465, &num_threads_35989,
                                         &kernel_arg_37760, &kernel_arg_37761,
                                         &kernel_arg_37762, &kernel_arg_37763};
            int64_t time_start_37754 = 0, time_end_37755 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segred_nonseg_31470");
                fprintf(ctx->log, "%ld", (long) num_groups_31465);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segred_group_sizze_31463);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37754 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegred_nonseg_31470_runs,
                                          &ctx->clusterPointszisegred_nonseg_31470_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31470,
                                                  grid[0], grid[1], grid[2],
                                                  segred_group_sizze_31463, 1,
                                                  1, 0 + (shared_sizze_37756 +
                                                          (8 -
                                                           shared_sizze_37756 %
                                                           8) % 8) +
                                                  (shared_sizze_37758 + (8 -
                                                                         shared_sizze_37758 %
                                                                         8) %
                                                   8), NULL, kernel_args_37753,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37755 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segred_nonseg_31470", time_end_37755 -
                        time_start_37754);
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        
        int64_t read_res_37764;
        
        {
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_from_dev_runs,
                                          &ctx->copy_scalar_from_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37764, mem_32305.mem +
                                                (int64_t) 0 * sizeof(int64_t),
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        if (futhark_context_sync(ctx) != 0)
            return 1;
        
        int64_t defunc_2_reduce_res_30100 = read_res_37764;
        
        if (memblock_unref_device(ctx, &mem_32305, "mem_32305") != 0)
            return 1;
        
        bool bounds_invalid_upwards_30105 = slt64(defunc_2_reduce_res_30100,
                                                  (int64_t) 0);
        bool valid_30106 = !bounds_invalid_upwards_30105;
        bool range_valid_c_30107;
        
        if (!valid_30106) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                          defunc_2_reduce_res_30100, " is invalid.",
                          "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:48:30-60\n   #3  src/cluster.fut:51:14-32\n   #4  src/cluster.fut:184:10-74\n   #5  src/cluster.fut:195:18-38\n   #6  src/cluster.fut:190:1-200:50\n");
            if (memblock_unref_device(ctx, &group_res_arr_mem_35987,
                                      "group_res_arr_mem_35987") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32305, "mem_32305") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32302, "mem_32302") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32300, "mem_32300") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32335,
                                      "clusterWith_res_mem_32335") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32333,
                                      "clusterWith_res_mem_32333") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32331,
                                      "clusterWith_res_mem_32331") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32297, "mem_32297") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32295, "mem_32295") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32292, "mem_32292") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32290, "mem_32290") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32288, "mem_32288") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32063,
                                      "mem_param_32063") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32058,
                                      "mem_param_32058") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32053,
                                      "mem_param_32053") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                      "clusterWith_res_mem_32285") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                      "clusterWith_res_mem_32280") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                      "clusterWith_res_mem_32275") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                      "group_res_arr_mem_34194") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                      "group_res_arr_mem_33832") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31971,
                                      "mem_param_31971") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31966,
                                      "mem_param_31966") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                      "defunc_0_f_res_mem_32005") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                      "defunc_0_f_res_mem_32000") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                return 1;
            if (memblock_unref_device(ctx,
                                      &defunc_1_map_res_subhistos_mem_33190,
                                      "defunc_1_map_res_subhistos_mem_33190") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                      "group_res_arr_mem_33160") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31850,
                                      "mem_param_31850") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31845,
                                      "mem_param_31845") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                      "defunc_0_f_res_mem_31884") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                      "defunc_0_f_res_mem_31879") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") !=
                0)
                return 1;
            return 1;
        }
        
        int64_t bytes_32306 = (int64_t) 8 * defunc_2_reduce_res_30100;
        struct memblock_device mem_32307;
        
        mem_32307.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32307, bytes_32306, "mem_32307")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i64(ctx, mem_32307,
                                          defunc_2_reduce_res_30100,
                                          (int64_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t seghist_group_sizze_31473;
        
        seghist_group_sizze_31473 =
            ctx->sizes.clusterPointsziseghist_group_sizze_31472;
        
        int64_t num_groups_31475;
        int32_t max_num_groups_36015;
        
        max_num_groups_36015 =
            ctx->sizes.clusterPointsziseghist_num_groups_31474;
        num_groups_31475 = sext_i64_i32(smax64((int64_t) 1,
                                               smin64(sdiv_up64(partition_sizze_30057,
                                                                seghist_group_sizze_31473),
                                                      sext_i32_i64(max_num_groups_36015))));
        
        int32_t num_subhistos_36016;
        struct memblock_device defunc_1_map_res_subhistos_mem_36017;
        
        defunc_1_map_res_subhistos_mem_36017.references = NULL;
        
        int64_t h_36019;
        
        h_36019 = (int64_t) 8 * defunc_2_reduce_res_30100;
        
        int64_t seg_h_36020;
        
        seg_h_36020 = (int64_t) 8 * defunc_2_reduce_res_30100;
        if (!(seg_h_36020 == (int64_t) 0)) {
            int64_t hist_H_36021 = defunc_2_reduce_res_30100;
            int64_t hist_el_sizze_36022 = sdiv_up64(h_36019, hist_H_36021);
            int64_t hist_N_36023 = partition_sizze_30057;
            int32_t hist_RF_36024 = 1;
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegHist");
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Number of threads (T)",
                        (long long) sext_i64_i32(num_groups_31475 *
                        seghist_group_sizze_31473), '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Desired group size (B)",
                        (long long) seghist_group_sizze_31473, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Histogram size (H)",
                        (long long) hist_H_36021, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c",
                        "Input elements per histogram (N)",
                        (long long) hist_N_36023, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Number of segments",
                        (long long) (int64_t) 1, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c",
                        "Histogram element size (el_size)",
                        (long long) hist_el_sizze_36022, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Race factor (RF)",
                        (long long) hist_RF_36024, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c",
                        "Memory per set of subhistograms per segment",
                        (long long) h_36019, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c",
                        "Memory per set of subhistograms times segments",
                        (long long) seg_h_36020, '\n');
            
            int32_t hist_L_36025;
            
            hist_L_36025 = ctx->cuda.max_shared_memory;
            
            int32_t max_group_sizze_36026;
            
            max_group_sizze_36026 = ctx->cuda.max_block_size;
            
            int64_t num_groups_36027;
            
            num_groups_36027 =
                sdiv_up64(sext_i32_i64(sext_i64_i32(num_groups_31475 *
                          seghist_group_sizze_31473)), max_group_sizze_36026);
            
            double hist_m_prime_36028;
            
            hist_m_prime_36028 =
                sitofp_i64_f64(smin64(sext_i32_i64(squot32(hist_L_36025,
                                                           hist_el_sizze_36022)),
                                      sdiv_up64(hist_N_36023,
                                                num_groups_36027))) /
                sitofp_i64_f64(hist_H_36021);
            
            int64_t hist_M0_36029;
            
            hist_M0_36029 = smax64((int64_t) 1,
                                   smin64(fptosi_f64_i64(hist_m_prime_36028),
                                          max_group_sizze_36026));
            
            int64_t hist_Nout_36030;
            
            hist_Nout_36030 = (int64_t) 1;
            
            int64_t hist_Nin_36031;
            
            hist_Nin_36031 = partition_sizze_30057;
            
            int64_t work_asymp_M_max_36032;
            
            work_asymp_M_max_36032 = squot64(hist_Nout_36030 * hist_N_36023,
                                             (int64_t) 2 * num_groups_36027 *
                                             hist_H_36021);
            
            int32_t hist_M_36033;
            
            hist_M_36033 = sext_i64_i32(smin64(hist_M0_36029,
                                               work_asymp_M_max_36032));
            
            int64_t hist_C_36034;
            
            hist_C_36034 = sdiv_up64(max_group_sizze_36026,
                                     sext_i32_i64(smax32(1, hist_M_36033)));
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "local hist_M0",
                        (long long) hist_M0_36029, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "local work asymp M max",
                        (long long) work_asymp_M_max_36032, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "local C",
                        (long long) hist_C_36034, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "local B",
                        (long long) max_group_sizze_36026, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "local M",
                        (long long) hist_M_36033, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "local memory needed",
                        (long long) (hist_H_36021 * hist_el_sizze_36022 *
                                     sext_i32_i64(hist_M_36033)), '\n');
            
            int64_t local_mem_needed_36035;
            
            local_mem_needed_36035 = hist_el_sizze_36022 *
                sext_i32_i64(hist_M_36033);
            
            int32_t hist_S_36036;
            
            hist_S_36036 = sext_i64_i32(sdiv_up64(hist_H_36021 *
                                                  local_mem_needed_36035,
                                                  hist_L_36025));
            if (sle64(hist_H_36021, hist_Nin_36031) &&
                (sle64(local_mem_needed_36035, hist_L_36025) &&
                 (sle32(hist_S_36036, 3) && (sle64(hist_C_36034,
                                                   max_group_sizze_36026) &&
                                             slt32(0, hist_M_36033))))) {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "## Using local memory");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Histogram size (H)",
                            (long long) hist_H_36021, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Multiplication degree (M)",
                            (long long) hist_M_36033, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Cooperation level (C)",
                            (long long) hist_C_36034, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Number of chunks (S)",
                            (long long) hist_S_36036, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c",
                            "Number of local subhistograms per group",
                            (long long) hist_M_36033, '\n');
                
                int64_t num_segments_36037;
                
                num_segments_36037 = (int64_t) 1;
                num_subhistos_36016 = num_groups_36027 * num_segments_36037;
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c",
                            "Number of subhistograms in global memory",
                            (long long) num_subhistos_36016, '\n');
                if (num_subhistos_36016 == (int64_t) 1) {
                    if (memblock_set_device(ctx,
                                            &defunc_1_map_res_subhistos_mem_36017,
                                            &mem_32307, "mem_32307") != 0)
                        return 1;
                } else {
                    if (memblock_alloc_device(ctx,
                                              &defunc_1_map_res_subhistos_mem_36017,
                                              sext_i32_i64(num_subhistos_36016) *
                                              defunc_2_reduce_res_30100 *
                                              (int64_t) 8,
                                              "defunc_1_map_res_subhistos_mem_36017")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (futrts_builtinzhreplicate_i64(ctx,
                                                      defunc_1_map_res_subhistos_mem_36017,
                                                      num_subhistos_36016 *
                                                      defunc_2_reduce_res_30100,
                                                      (int64_t) 0) != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    {
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->copy_dev_to_dev_runs,
                                                      &ctx->copy_dev_to_dev_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuMemcpy(defunc_1_map_res_subhistos_mem_36017.mem +
                                                        (int64_t) 0,
                                                        mem_32307.mem +
                                                        (int64_t) 0,
                                                        defunc_2_reduce_res_30100 *
                                                        (int64_t) 8));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    }
                }
                for (int32_t chk_i_36038 = 0; chk_i_36038 < hist_S_36036;
                     chk_i_36038++) {
                    int64_t num_segments_36039 = (int64_t) 1;
                    int64_t hist_H_chk_36040 =
                            sdiv_up64(defunc_2_reduce_res_30100,
                                      sext_i32_i64(hist_S_36036));
                    int64_t histo_sizze_36041 = hist_H_chk_36040;
                    int32_t init_per_thread_36042 =
                            sext_i64_i32(sdiv_up64(sext_i32_i64(hist_M_36033) *
                                                   histo_sizze_36041,
                                                   max_group_sizze_36026));
                    unsigned int shared_sizze_37768 = (int64_t) 8 *
                                 (hist_M_36033 * hist_H_chk_36040);
                    CUdeviceptr kernel_arg_37770 = mem_32300.mem;
                    CUdeviceptr kernel_arg_37771 =
                                defunc_1_map_res_subhistos_mem_36017.mem;
                    unsigned int shared_offset_37769 = 0;
                    
                    if ((((((1 && num_groups_36027 != 0) && 1 != 0) && 1 !=
                           0) && max_group_sizze_36026 != 0) && 1 != 0) && 1 !=
                        0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = num_groups_36027;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_37765[] = {&ctx->global_failure,
                                                     &shared_offset_37769,
                                                     &partition_sizze_30057,
                                                     &defunc_2_reduce_res_30100,
                                                     &max_group_sizze_36026,
                                                     &num_groups_36027,
                                                     &hist_M_36033,
                                                     &chk_i_36038,
                                                     &num_segments_36039,
                                                     &hist_H_chk_36040,
                                                     &histo_sizze_36041,
                                                     &init_per_thread_36042,
                                                     &kernel_arg_37770,
                                                     &kernel_arg_37771};
                        int64_t time_start_37766 = 0, time_end_37767 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log, "Launching %s with grid size (",
                                    "clusterPoints.seghist_local_31478");
                            fprintf(ctx->log, "%ld", (long) num_groups_36027);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ") and block size (");
                            fprintf(ctx->log, "%ld",
                                    (long) max_group_sizze_36026);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ").\n");
                            time_start_37766 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->clusterPointsziseghist_local_31478_runs,
                                                      &ctx->clusterPointsziseghist_local_31478_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointsziseghist_local_31478,
                                                              grid[0], grid[1],
                                                              grid[2],
                                                              max_group_sizze_36026,
                                                              1, 1, 0 +
                                                              (shared_sizze_37768 +
                                                               (8 -
                                                                shared_sizze_37768 %
                                                                8) % 8), NULL,
                                                              kernel_args_37765,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_37767 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "clusterPoints.seghist_local_31478",
                                    time_end_37767 - time_start_37766);
                        }
                    }
                }
            } else {
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "## Using global memory");
                
                int64_t hist_H_36070;
                
                hist_H_36070 = defunc_2_reduce_res_30100;
                
                double hist_RF_36071;
                
                hist_RF_36071 = (0.0 + sitofp_i32_f64((int64_t) 1)) / 1.0;
                
                int32_t hist_el_sizze_36072;
                
                hist_el_sizze_36072 = 8;
                
                double hist_C_max_36073;
                
                hist_C_max_36073 =
                    fmin64(sitofp_i32_f64(sext_i64_i32(num_groups_31475 *
                           seghist_group_sizze_31473)),
                           sitofp_i32_f64(hist_H_36070) / 2.0);
                
                int32_t hist_M_min_36074;
                
                hist_M_min_36074 = smax32(1,
                                          sext_i64_i32(fptosi_f64_i64(sitofp_i32_f64(sext_i64_i32(num_groups_31475 *
                                          seghist_group_sizze_31473)) /
                                          hist_C_max_36073)));
                
                int32_t L2_sizze_36075;
                
                L2_sizze_36075 = ctx->sizes.clusterPointsziL2_sizze_36075;
                
                double hist_RACE_exp_36076;
                
                hist_RACE_exp_36076 = fmax64(1.0, 0.75 * hist_RF_36071 / (64.0 /
                                                                          sitofp_i32_f64(hist_el_sizze_36072)));
                
                int32_t hist_S_36077;
                
                if (slt64(partition_sizze_30057, hist_H_36070)) {
                    hist_S_36077 = 1;
                } else {
                    hist_S_36077 =
                        sext_i64_i32(sdiv_up64(sext_i32_i64(hist_M_min_36074) *
                                               hist_H_36070 *
                                               sext_i32_i64(hist_el_sizze_36072),
                                               fptosi_f64_i64(0.4 *
                                               sitofp_i32_f64(L2_sizze_36075) *
                                               hist_RACE_exp_36076)));
                }
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %f%c",
                            "Race expansion factor (RACE^exp)",
                            (double) hist_RACE_exp_36076, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Number of chunks (S)",
                            (long long) hist_S_36077, '\n');
                
                int64_t hist_H_chk_36078;
                
                hist_H_chk_36078 = sdiv_up64(defunc_2_reduce_res_30100,
                                             sext_i32_i64(hist_S_36077));
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Chunk size (H_chk)",
                            (long long) hist_H_chk_36078, '\n');
                
                double hist_k_max_36079;
                
                hist_k_max_36079 = fmin64(0.4 *
                                          (sitofp_i32_f64(L2_sizze_36075) /
                                           sitofp_i32_f64(8)) *
                                          hist_RACE_exp_36076,
                                          sitofp_i32_f64(partition_sizze_30057)) /
                    sitofp_i32_f64(sext_i64_i32(num_groups_31475 *
                    seghist_group_sizze_31473));
                
                int64_t hist_u_36080;
                
                hist_u_36080 = (int64_t) 2;
                
                double hist_C_36081;
                
                hist_C_36081 =
                    fmin64(sitofp_i32_f64(sext_i64_i32(num_groups_31475 *
                           seghist_group_sizze_31473)),
                           sitofp_i32_f64(hist_u_36080 * hist_H_chk_36078) /
                           hist_k_max_36079);
                
                int32_t hist_M_36082;
                
                hist_M_36082 = 1;
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %f%c",
                            "Elements/thread in L2 cache (k_max)",
                            (double) hist_k_max_36079, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "Multiplication degree (M)",
                            (long long) hist_M_36082, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %f%c", "Cooperation level (C)",
                            (double) hist_C_36081, '\n');
                num_subhistos_36016 = sext_i32_i64(hist_M_36082);
                if (hist_M_36082 == 1) {
                    if (memblock_set_device(ctx,
                                            &defunc_1_map_res_subhistos_mem_36017,
                                            &mem_32307, "mem_32307") != 0)
                        return 1;
                } else {
                    if (num_subhistos_36016 == (int64_t) 1) {
                        if (memblock_set_device(ctx,
                                                &defunc_1_map_res_subhistos_mem_36017,
                                                &mem_32307, "mem_32307") != 0)
                            return 1;
                    } else {
                        if (memblock_alloc_device(ctx,
                                                  &defunc_1_map_res_subhistos_mem_36017,
                                                  sext_i32_i64(num_subhistos_36016) *
                                                  defunc_2_reduce_res_30100 *
                                                  (int64_t) 8,
                                                  "defunc_1_map_res_subhistos_mem_36017")) {
                            err = 1;
                            goto cleanup;
                        }
                        if (futrts_builtinzhreplicate_i64(ctx,
                                                          defunc_1_map_res_subhistos_mem_36017,
                                                          num_subhistos_36016 *
                                                          defunc_2_reduce_res_30100,
                                                          (int64_t) 0) != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        {
                            cudaEvent_t *pevents = NULL;
                            
                            if (ctx->profiling && !ctx->profiling_paused) {
                                pevents = cuda_get_events(&ctx->cuda,
                                                          &ctx->copy_dev_to_dev_runs,
                                                          &ctx->copy_dev_to_dev_total_runtime);
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0],
                                                                   0));
                            }
                            CUDA_SUCCEED_OR_RETURN(cuMemcpy(defunc_1_map_res_subhistos_mem_36017.mem +
                                                            (int64_t) 0,
                                                            mem_32307.mem +
                                                            (int64_t) 0,
                                                            defunc_2_reduce_res_30100 *
                                                            (int64_t) 8));
                            if (pevents != NULL)
                                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1],
                                                                   0));
                        }
                    }
                }
                for (int32_t chk_i_36083 = 0; chk_i_36083 < hist_S_36077;
                     chk_i_36083++) {
                    int64_t hist_H_chk_36084 =
                            sdiv_up64(defunc_2_reduce_res_30100,
                                      sext_i32_i64(hist_S_36077));
                    CUdeviceptr kernel_arg_37775 = mem_32300.mem;
                    CUdeviceptr kernel_arg_37776 =
                                defunc_1_map_res_subhistos_mem_36017.mem;
                    
                    if ((((((1 && num_groups_31475 != 0) && 1 != 0) && 1 !=
                           0) && seghist_group_sizze_31473 != 0) && 1 != 0) &&
                        1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = num_groups_31475;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_37772[] = {&ctx->global_failure,
                                                     &partition_sizze_30057,
                                                     &defunc_2_reduce_res_30100,
                                                     &num_groups_31475,
                                                     &num_subhistos_36016,
                                                     &chk_i_36083,
                                                     &hist_H_chk_36084,
                                                     &kernel_arg_37775,
                                                     &kernel_arg_37776};
                        int64_t time_start_37773 = 0, time_end_37774 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log, "Launching %s with grid size (",
                                    "clusterPoints.seghist_global_31478");
                            fprintf(ctx->log, "%ld", (long) num_groups_31475);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ") and block size (");
                            fprintf(ctx->log, "%ld",
                                    (long) seghist_group_sizze_31473);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ").\n");
                            time_start_37773 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->clusterPointsziseghist_global_31478_runs,
                                                      &ctx->clusterPointsziseghist_global_31478_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointsziseghist_global_31478,
                                                              grid[0], grid[1],
                                                              grid[2],
                                                              seghist_group_sizze_31473,
                                                              1, 1, 0, NULL,
                                                              kernel_args_37772,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_37774 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "clusterPoints.seghist_global_31478",
                                    time_end_37774 - time_start_37773);
                        }
                    }
                }
            }
            if (num_subhistos_36016 == (int64_t) 1) {
                if (memblock_set_device(ctx, &mem_32307,
                                        &defunc_1_map_res_subhistos_mem_36017,
                                        "defunc_1_map_res_subhistos_mem_36017") !=
                    0)
                    return 1;
            } else {
                if (slt64(num_subhistos_36016 * (int64_t) 2,
                          seghist_group_sizze_31473)) {
                    int64_t segment_sizze_nonzzero_36096 = smax64((int64_t) 1,
                                                                  num_subhistos_36016);
                    int64_t num_threads_36097 = num_groups_31475 *
                            seghist_group_sizze_31473;
                    
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegRed-small");
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "num_segments",
                                (long long) defunc_2_reduce_res_30100, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "segment_size",
                                (long long) num_subhistos_36016, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "segments_per_group",
                                (long long) squot64(seghist_group_sizze_31473,
                                                    segment_sizze_nonzzero_36096),
                                '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "required_groups",
                                (long long) sext_i64_i32(sdiv_up64(defunc_2_reduce_res_30100,
                                                                   squot64(seghist_group_sizze_31473,
                                                                           segment_sizze_nonzzero_36096))),
                                '\n');
                    
                    unsigned int shared_sizze_37780 = (int64_t) 8 *
                                 seghist_group_sizze_31473;
                    CUdeviceptr kernel_arg_37782 = mem_32307.mem;
                    CUdeviceptr kernel_arg_37783 =
                                defunc_1_map_res_subhistos_mem_36017.mem;
                    unsigned int shared_offset_37781 = 0;
                    
                    if ((((((1 && num_groups_31475 != 0) && 1 != 0) && 1 !=
                           0) && seghist_group_sizze_31473 != 0) && 1 != 0) &&
                        1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = num_groups_31475;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_37777[] = {&ctx->global_failure,
                                                     &shared_offset_37781,
                                                     &defunc_2_reduce_res_30100,
                                                     &num_groups_31475,
                                                     &num_subhistos_36016,
                                                     &segment_sizze_nonzzero_36096,
                                                     &kernel_arg_37782,
                                                     &kernel_arg_37783};
                        int64_t time_start_37778 = 0, time_end_37779 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log, "Launching %s with grid size (",
                                    "clusterPoints.segred_small_36095");
                            fprintf(ctx->log, "%ld", (long) num_groups_31475);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ") and block size (");
                            fprintf(ctx->log, "%ld",
                                    (long) seghist_group_sizze_31473);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ").\n");
                            time_start_37778 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->clusterPointszisegred_small_36095_runs,
                                                      &ctx->clusterPointszisegred_small_36095_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_small_36095,
                                                              grid[0], grid[1],
                                                              grid[2],
                                                              seghist_group_sizze_31473,
                                                              1, 1, 0 +
                                                              (shared_sizze_37780 +
                                                               (8 -
                                                                shared_sizze_37780 %
                                                                8) % 8), NULL,
                                                              kernel_args_37777,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_37779 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "clusterPoints.segred_small_36095",
                                    time_end_37779 - time_start_37778);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                } else {
                    int64_t groups_per_segment_36117 =
                            sdiv_up64(num_groups_31475, smax64((int64_t) 1,
                                                               defunc_2_reduce_res_30100));
                    int64_t elements_per_thread_36118 =
                            sdiv_up64(num_subhistos_36016,
                                      seghist_group_sizze_31473 *
                                      groups_per_segment_36117);
                    int64_t virt_num_groups_36119 = groups_per_segment_36117 *
                            defunc_2_reduce_res_30100;
                    int64_t num_threads_36120 = num_groups_31475 *
                            seghist_group_sizze_31473;
                    int64_t threads_per_segment_36121 =
                            groups_per_segment_36117 *
                            seghist_group_sizze_31473;
                    
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "\n# SegRed-large");
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "num_segments",
                                (long long) defunc_2_reduce_res_30100, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "segment_size",
                                (long long) num_subhistos_36016, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "virt_num_groups",
                                (long long) virt_num_groups_36119, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "num_groups",
                                (long long) num_groups_31475, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "group_size",
                                (long long) seghist_group_sizze_31473, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "elems_per_thread",
                                (long long) elements_per_thread_36118, '\n');
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s: %llu%c", "groups_per_segment",
                                (long long) groups_per_segment_36117, '\n');
                    
                    struct memblock_device group_res_arr_mem_36122;
                    
                    group_res_arr_mem_36122.references = NULL;
                    if (memblock_alloc_device(ctx, &group_res_arr_mem_36122,
                                              (int64_t) 8 *
                                              (seghist_group_sizze_31473 *
                                               virt_num_groups_36119),
                                              "group_res_arr_mem_36122")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    struct memblock_device clusterPointszicounter_mem_36124 =
                                           ctx->clusterPointszicounter_mem_36124;
                    unsigned int shared_sizze_37788 = 1;
                    unsigned int shared_sizze_37790 = (int64_t) 8 *
                                 seghist_group_sizze_31473;
                    CUdeviceptr kernel_arg_37792 = mem_32307.mem;
                    CUdeviceptr kernel_arg_37793 =
                                defunc_1_map_res_subhistos_mem_36017.mem;
                    CUdeviceptr kernel_arg_37794 = group_res_arr_mem_36122.mem;
                    CUdeviceptr kernel_arg_37795 =
                                clusterPointszicounter_mem_36124.mem;
                    unsigned int shared_offset_37789 = 0;
                    unsigned int shared_offset_37791 = 0 + (shared_sizze_37788 +
                                                            (8 -
                                                             shared_sizze_37788 %
                                                             8) % 8);
                    
                    if ((((((1 && num_groups_31475 != 0) && 1 != 0) && 1 !=
                           0) && seghist_group_sizze_31473 != 0) && 1 != 0) &&
                        1 != 0) {
                        int perm[3] = {0, 1, 2};
                        
                        if (1 >= 1 << 16) {
                            perm[1] = perm[0];
                            perm[0] = 1;
                        }
                        if (1 >= 1 << 16) {
                            perm[2] = perm[0];
                            perm[0] = 2;
                        }
                        
                        size_t grid[3];
                        
                        grid[perm[0]] = num_groups_31475;
                        grid[perm[1]] = 1;
                        grid[perm[2]] = 1;
                        
                        void *kernel_args_37785[] = {&ctx->global_failure,
                                                     &shared_offset_37789,
                                                     &shared_offset_37791,
                                                     &defunc_2_reduce_res_30100,
                                                     &num_groups_31475,
                                                     &num_subhistos_36016,
                                                     &groups_per_segment_36117,
                                                     &elements_per_thread_36118,
                                                     &virt_num_groups_36119,
                                                     &threads_per_segment_36121,
                                                     &kernel_arg_37792,
                                                     &kernel_arg_37793,
                                                     &kernel_arg_37794,
                                                     &kernel_arg_37795};
                        int64_t time_start_37786 = 0, time_end_37787 = 0;
                        
                        if (ctx->debugging) {
                            fprintf(ctx->log, "Launching %s with grid size (",
                                    "clusterPoints.segred_large_36095");
                            fprintf(ctx->log, "%ld", (long) num_groups_31475);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ") and block size (");
                            fprintf(ctx->log, "%ld",
                                    (long) seghist_group_sizze_31473);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ", ");
                            fprintf(ctx->log, "%ld", (long) 1);
                            fprintf(ctx->log, ").\n");
                            time_start_37786 = get_wall_time();
                        }
                        
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->clusterPointszisegred_large_36095_runs,
                                                      &ctx->clusterPointszisegred_large_36095_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_large_36095,
                                                              grid[0], grid[1],
                                                              grid[2],
                                                              seghist_group_sizze_31473,
                                                              1, 1, 0 +
                                                              (shared_sizze_37788 +
                                                               (8 -
                                                                shared_sizze_37788 %
                                                                8) % 8) +
                                                              (shared_sizze_37790 +
                                                               (8 -
                                                                shared_sizze_37790 %
                                                                8) % 8), NULL,
                                                              kernel_args_37785,
                                                              NULL));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                        if (ctx->debugging) {
                            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                            time_end_37787 = get_wall_time();
                            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                    "clusterPoints.segred_large_36095",
                                    time_end_37787 - time_start_37786);
                        }
                    }
                    if (ctx->debugging)
                        fprintf(ctx->log, "%s\n", "");
                    if (memblock_unref_device(ctx, &group_res_arr_mem_36122,
                                              "group_res_arr_mem_36122") != 0)
                        return 1;
                }
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_unref_device(ctx, &mem_32300, "mem_32300") != 0)
            return 1;
        
        int64_t segscan_group_sizze_31488;
        
        segscan_group_sizze_31488 =
            ctx->sizes.clusterPointszisegscan_group_sizze_31487;
        
        int64_t num_groups_31490;
        int32_t max_num_groups_36156;
        
        max_num_groups_36156 =
            ctx->sizes.clusterPointszisegscan_num_groups_31489;
        num_groups_31490 = sext_i64_i32(smax64((int64_t) 1,
                                               smin64(sdiv_up64(defunc_2_reduce_res_30100,
                                                                segscan_group_sizze_31488),
                                                      sext_i32_i64(max_num_groups_36156))));
        
        struct memblock_device mem_32311;
        
        mem_32311.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32311, defunc_2_reduce_res_30100,
                                  "mem_32311")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_32313;
        
        mem_32313.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32313, bytes_32306, "mem_32313")) {
            err = 1;
            goto cleanup;
        }
        if (slt64((int64_t) 0, defunc_2_reduce_res_30100)) {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegScan");
            
            int64_t numThreads_36157;
            
            numThreads_36157 = sdiv_up64(defunc_2_reduce_res_30100,
                                         segscan_group_sizze_31488 *
                                         (int64_t) 9) *
                segscan_group_sizze_31488;
            
            int64_t numGroups_36158;
            
            numGroups_36158 = sdiv_up64(defunc_2_reduce_res_30100,
                                        segscan_group_sizze_31488 *
                                        (int64_t) 9);
            
            struct memblock_device clusterPointsziid_counter_mem_36159 =
                                   ctx->clusterPointsziid_counter_mem_36159;
            struct memblock_device status_flags_mem_36161;
            
            status_flags_mem_36161.references = NULL;
            if (memblock_alloc_device(ctx, &status_flags_mem_36161,
                                      numGroups_36158,
                                      "status_flags_mem_36161")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_36163;
            
            aggregates_mem_36163.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_36163,
                                      numGroups_36158,
                                      "aggregates_mem_36163")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_36165;
            
            incprefixes_mem_36165.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_36165,
                                      numGroups_36158,
                                      "incprefixes_mem_36165")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_36167;
            
            aggregates_mem_36167.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_36167, (int64_t) 8 *
                                      numGroups_36158,
                                      "aggregates_mem_36167")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_36169;
            
            incprefixes_mem_36169.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_36169, (int64_t) 8 *
                                      numGroups_36158,
                                      "incprefixes_mem_36169")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_36161,
                                             numGroups_36158, (int8_t) 0) !=
                0) {
                err = 1;
                goto cleanup;
            }
            
            unsigned int shared_sizze_37800 = smax64(smax64((int64_t) 320,
                                                            sdiv_up64(segscan_group_sizze_31488,
                                                                      (int64_t) 8) *
                                                            (int64_t) 8 +
                                                            (int64_t) 8 *
                                                            segscan_group_sizze_31488),
                                                     smax64((int64_t) 9 *
                                                            segscan_group_sizze_31488,
                                                            (int64_t) 9 *
                                                            segscan_group_sizze_31488 *
                                                            (int64_t) 8));
            CUdeviceptr kernel_arg_37802 = mem_32307.mem;
            CUdeviceptr kernel_arg_37803 = mem_32311.mem;
            CUdeviceptr kernel_arg_37804 = mem_32313.mem;
            CUdeviceptr kernel_arg_37805 =
                        clusterPointsziid_counter_mem_36159.mem;
            CUdeviceptr kernel_arg_37806 = status_flags_mem_36161.mem;
            CUdeviceptr kernel_arg_37807 = aggregates_mem_36163.mem;
            CUdeviceptr kernel_arg_37808 = incprefixes_mem_36165.mem;
            CUdeviceptr kernel_arg_37809 = aggregates_mem_36167.mem;
            CUdeviceptr kernel_arg_37810 = incprefixes_mem_36169.mem;
            unsigned int shared_offset_37801 = 0;
            
            if ((((((1 && sdiv_up64(defunc_2_reduce_res_30100,
                                    segscan_group_sizze_31488 * (int64_t) 9) !=
                     0) && 1 != 0) && 1 != 0) && segscan_group_sizze_31488 !=
                  0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_30100,
                                          segscan_group_sizze_31488 *
                                          (int64_t) 9);
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37797[] = {&ctx->global_failure,
                                             &shared_offset_37801,
                                             &defunc_2_reduce_res_30100,
                                             &kernel_arg_37802,
                                             &kernel_arg_37803,
                                             &kernel_arg_37804,
                                             &kernel_arg_37805,
                                             &kernel_arg_37806,
                                             &kernel_arg_37807,
                                             &kernel_arg_37808,
                                             &kernel_arg_37809,
                                             &kernel_arg_37810};
                int64_t time_start_37798 = 0, time_end_37799 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segscan_31493");
                    fprintf(ctx->log, "%ld",
                            (long) sdiv_up64(defunc_2_reduce_res_30100,
                                             segscan_group_sizze_31488 *
                                             (int64_t) 9));
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segscan_group_sizze_31488);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37798 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegscan_31493_runs,
                                              &ctx->clusterPointszisegscan_31493_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31493,
                                                      grid[0], grid[1], grid[2],
                                                      segscan_group_sizze_31488,
                                                      1, 1, 0 +
                                                      (shared_sizze_37800 + (8 -
                                                                             shared_sizze_37800 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_37797, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37799 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segscan_31493", time_end_37799 -
                            time_start_37798);
                }
            }
            if (memblock_unref_device(ctx, &incprefixes_mem_36169,
                                      "incprefixes_mem_36169") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_36167,
                                      "aggregates_mem_36167") != 0)
                return 1;
            if (memblock_unref_device(ctx, &incprefixes_mem_36165,
                                      "incprefixes_mem_36165") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_36163,
                                      "aggregates_mem_36163") != 0)
                return 1;
            if (memblock_unref_device(ctx, &status_flags_mem_36161,
                                      "status_flags_mem_36161") != 0)
                return 1;
        }
        if (memblock_unref_device(ctx, &mem_32307, "mem_32307") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32311, "mem_32311") != 0)
            return 1;
        
        int64_t segmap_group_sizze_31505;
        
        segmap_group_sizze_31505 =
            ctx->sizes.clusterPointszisegmap_group_sizze_31497;
        
        int64_t segmap_usable_groups_31506 =
                sdiv_up64(defunc_2_reduce_res_30100, segmap_group_sizze_31505);
        struct memblock_device mem_32316;
        
        mem_32316.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32316, defunc_2_reduce_res_30100,
                                  "mem_32316")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        CUdeviceptr kernel_arg_37814 = mem_32313.mem;
        CUdeviceptr kernel_arg_37815 = mem_32316.mem;
        
        if ((((((1 && segmap_usable_groups_31506 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_31505 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = segmap_usable_groups_31506;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37811[] = {&ctx->global_failure,
                                         &defunc_2_reduce_res_30100,
                                         &kernel_arg_37814, &kernel_arg_37815};
            int64_t time_start_37812 = 0, time_end_37813 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segmap_31495");
                fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31506);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31505);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37812 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegmap_31495_runs,
                                          &ctx->clusterPointszisegmap_31495_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31495,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_31505, 1,
                                                  1, 0, NULL, kernel_args_37811,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37813 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segmap_31495", time_end_37813 -
                        time_start_37812);
            }
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        
        bool y_30134 = slt64((int64_t) 0, defunc_2_reduce_res_30100);
        bool index_certs_30135;
        
        if (!y_30134) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (int64_t) 0,
                                   "] out of bounds for array of shape [",
                                   defunc_2_reduce_res_30100, "].",
                                   "-> #0  src/cluster.fut:14:3-49\n   #1  src/cluster.fut:52:15-27\n   #2  src/cluster.fut:184:10-74\n   #3  src/cluster.fut:195:18-38\n   #4  src/cluster.fut:190:1-200:50\n");
            if (memblock_unref_device(ctx, &mem_32316, "mem_32316") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32313, "mem_32313") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32311, "mem_32311") != 0)
                return 1;
            if (memblock_unref_device(ctx,
                                      &defunc_1_map_res_subhistos_mem_36017,
                                      "defunc_1_map_res_subhistos_mem_36017") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32307, "mem_32307") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_35987,
                                      "group_res_arr_mem_35987") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32305, "mem_32305") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32302, "mem_32302") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32300, "mem_32300") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32335,
                                      "clusterWith_res_mem_32335") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32333,
                                      "clusterWith_res_mem_32333") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32331,
                                      "clusterWith_res_mem_32331") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32297, "mem_32297") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32295, "mem_32295") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32292, "mem_32292") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32290, "mem_32290") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32288, "mem_32288") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32063,
                                      "mem_param_32063") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32058,
                                      "mem_param_32058") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32053,
                                      "mem_param_32053") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                      "clusterWith_res_mem_32285") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                      "clusterWith_res_mem_32280") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                      "clusterWith_res_mem_32275") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                      "group_res_arr_mem_34194") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                      "group_res_arr_mem_33832") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31971,
                                      "mem_param_31971") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31966,
                                      "mem_param_31966") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                      "defunc_0_f_res_mem_32005") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                      "defunc_0_f_res_mem_32000") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                return 1;
            if (memblock_unref_device(ctx,
                                      &defunc_1_map_res_subhistos_mem_33190,
                                      "defunc_1_map_res_subhistos_mem_33190") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                      "group_res_arr_mem_33160") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31850,
                                      "mem_param_31850") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31845,
                                      "mem_param_31845") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                      "defunc_0_f_res_mem_31884") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                      "defunc_0_f_res_mem_31879") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") !=
                0)
                return 1;
            return 1;
        }
        {
            bool write_tmp_37816 = 1;
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_to_dev_runs,
                                          &ctx->copy_scalar_to_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_32316.mem + (int64_t) 0 *
                                                sizeof(bool), &write_tmp_37816,
                                                sizeof(bool)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        
        int64_t segscan_group_sizze_31514;
        
        segscan_group_sizze_31514 =
            ctx->sizes.clusterPointszisegscan_group_sizze_31513;
        
        int64_t num_groups_31516;
        int32_t max_num_groups_36294;
        
        max_num_groups_36294 =
            ctx->sizes.clusterPointszisegscan_num_groups_31515;
        num_groups_31516 = sext_i64_i32(smax64((int64_t) 1,
                                               smin64(sdiv_up64(partition_sizze_30057,
                                                                segscan_group_sizze_31514),
                                                      sext_i32_i64(max_num_groups_36294))));
        
        struct memblock_device mem_32319;
        
        mem_32319.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32319, bytes_32299, "mem_32319")) {
            err = 1;
            goto cleanup;
        }
        if (slt64((int64_t) 0, partition_sizze_30057)) {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegScan");
            
            int64_t numThreads_36295;
            
            numThreads_36295 = sdiv_up64(partition_sizze_30057,
                                         segscan_group_sizze_31514 *
                                         (int64_t) 9) *
                segscan_group_sizze_31514;
            
            int64_t numGroups_36296;
            
            numGroups_36296 = sdiv_up64(partition_sizze_30057,
                                        segscan_group_sizze_31514 *
                                        (int64_t) 9);
            
            struct memblock_device clusterPointsziid_counter_mem_36297 =
                                   ctx->clusterPointsziid_counter_mem_36297;
            struct memblock_device status_flags_mem_36299;
            
            status_flags_mem_36299.references = NULL;
            if (memblock_alloc_device(ctx, &status_flags_mem_36299,
                                      numGroups_36296,
                                      "status_flags_mem_36299")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_36301;
            
            aggregates_mem_36301.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_36301, (int64_t) 8 *
                                      numGroups_36296,
                                      "aggregates_mem_36301")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_36303;
            
            incprefixes_mem_36303.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_36303, (int64_t) 8 *
                                      numGroups_36296,
                                      "incprefixes_mem_36303")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_36299,
                                             numGroups_36296, (int8_t) 0) !=
                0) {
                err = 1;
                goto cleanup;
            }
            
            unsigned int shared_sizze_37821 = smax64(smax64((int64_t) 288,
                                                            (int64_t) 8 *
                                                            segscan_group_sizze_31514),
                                                     (int64_t) 9 *
                                                     segscan_group_sizze_31514 *
                                                     (int64_t) 8);
            CUdeviceptr kernel_arg_37823 = mem_32302.mem;
            CUdeviceptr kernel_arg_37824 = mem_32319.mem;
            CUdeviceptr kernel_arg_37825 =
                        clusterPointsziid_counter_mem_36297.mem;
            CUdeviceptr kernel_arg_37826 = status_flags_mem_36299.mem;
            CUdeviceptr kernel_arg_37827 = aggregates_mem_36301.mem;
            CUdeviceptr kernel_arg_37828 = incprefixes_mem_36303.mem;
            unsigned int shared_offset_37822 = 0;
            
            if ((((((1 && sdiv_up64(partition_sizze_30057,
                                    segscan_group_sizze_31514 * (int64_t) 9) !=
                     0) && 1 != 0) && 1 != 0) && segscan_group_sizze_31514 !=
                  0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = sdiv_up64(partition_sizze_30057,
                                          segscan_group_sizze_31514 *
                                          (int64_t) 9);
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37818[] = {&ctx->global_failure,
                                             &shared_offset_37822,
                                             &partition_sizze_30057,
                                             &kernel_arg_37823,
                                             &kernel_arg_37824,
                                             &kernel_arg_37825,
                                             &kernel_arg_37826,
                                             &kernel_arg_37827,
                                             &kernel_arg_37828};
                int64_t time_start_37819 = 0, time_end_37820 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segscan_31519");
                    fprintf(ctx->log, "%ld",
                            (long) sdiv_up64(partition_sizze_30057,
                                             segscan_group_sizze_31514 *
                                             (int64_t) 9));
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segscan_group_sizze_31514);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37819 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegscan_31519_runs,
                                              &ctx->clusterPointszisegscan_31519_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31519,
                                                      grid[0], grid[1], grid[2],
                                                      segscan_group_sizze_31514,
                                                      1, 1, 0 +
                                                      (shared_sizze_37821 + (8 -
                                                                             shared_sizze_37821 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_37818, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37820 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segscan_31519", time_end_37820 -
                            time_start_37819);
                }
            }
            if (memblock_unref_device(ctx, &incprefixes_mem_36303,
                                      "incprefixes_mem_36303") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_36301,
                                      "aggregates_mem_36301") != 0)
                return 1;
            if (memblock_unref_device(ctx, &status_flags_mem_36299,
                                      "status_flags_mem_36299") != 0)
                return 1;
        }
        
        struct memblock_device mem_32321;
        
        mem_32321.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32321, bytes_32299, "mem_32321")) {
            err = 1;
            goto cleanup;
        }
        
        int64_t group_sizze_36379;
        
        group_sizze_36379 = ctx->sizes.clusterPointszigroup_sizze_36379;
        
        int64_t num_groups_36380;
        
        num_groups_36380 = sdiv_up64(partition_sizze_30057, group_sizze_36379);
        
        CUdeviceptr kernel_arg_37832 = mem_32319.mem;
        CUdeviceptr kernel_arg_37833 = mem_32321.mem;
        
        if ((((((1 && num_groups_36380 != 0) && 1 != 0) && 1 != 0) &&
              group_sizze_36379 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = num_groups_36380;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37829[] = {&partition_sizze_30057,
                                         &kernel_arg_37832, &kernel_arg_37833};
            int64_t time_start_37830 = 0, time_end_37831 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.copy_36376");
                fprintf(ctx->log, "%ld", (long) num_groups_36380);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) group_sizze_36379);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37830 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszicopy_36376_runs,
                                          &ctx->clusterPointszicopy_36376_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszicopy_36376,
                                                  grid[0], grid[1], grid[2],
                                                  group_sizze_36379, 1, 1, 0,
                                                  NULL, kernel_args_37829,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37831 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.copy_36376", time_end_37831 -
                        time_start_37830);
            }
        }
        if (memblock_unref_device(ctx, &mem_32319, "mem_32319") != 0)
            return 1;
        
        bool y_30145 = slt64((int64_t) 0, partition_sizze_30057);
        bool index_certs_30146;
        
        if (!y_30145) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (int64_t) 0,
                                   "] out of bounds for array of shape [",
                                   partition_sizze_30057, "].",
                                   "-> #0  src/cluster.fut:23:6-27\n   #1  src/cluster.fut:54:17-33\n   #2  src/cluster.fut:184:10-74\n   #3  src/cluster.fut:195:18-38\n   #4  src/cluster.fut:190:1-200:50\n");
            if (memblock_unref_device(ctx, &mem_32321, "mem_32321") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32319, "mem_32319") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32316, "mem_32316") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32313, "mem_32313") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32311, "mem_32311") != 0)
                return 1;
            if (memblock_unref_device(ctx,
                                      &defunc_1_map_res_subhistos_mem_36017,
                                      "defunc_1_map_res_subhistos_mem_36017") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32307, "mem_32307") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_35987,
                                      "group_res_arr_mem_35987") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32305, "mem_32305") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32302, "mem_32302") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32300, "mem_32300") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32335,
                                      "clusterWith_res_mem_32335") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32333,
                                      "clusterWith_res_mem_32333") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32331,
                                      "clusterWith_res_mem_32331") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32297, "mem_32297") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32295, "mem_32295") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32292, "mem_32292") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32290, "mem_32290") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32288, "mem_32288") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32063,
                                      "mem_param_32063") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32058,
                                      "mem_param_32058") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_32053,
                                      "mem_param_32053") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                      "clusterWith_res_mem_32285") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                      "clusterWith_res_mem_32280") != 0)
                return 1;
            if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                      "clusterWith_res_mem_32275") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                      "group_res_arr_mem_34194") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                      "group_res_arr_mem_33832") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31971,
                                      "mem_param_31971") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31966,
                                      "mem_param_31966") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                      "defunc_0_f_res_mem_32005") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                      "defunc_0_f_res_mem_32000") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
                return 1;
            if (memblock_unref_device(ctx,
                                      &defunc_1_map_res_subhistos_mem_33190,
                                      "defunc_1_map_res_subhistos_mem_33190") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
                return 1;
            if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                      "group_res_arr_mem_33160") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31850,
                                      "mem_param_31850") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_param_31845,
                                      "mem_param_31845") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                      "defunc_0_f_res_mem_31884") != 0)
                return 1;
            if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                      "defunc_0_f_res_mem_31879") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
                return 1;
            if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") !=
                0)
                return 1;
            if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") !=
                0)
                return 1;
            return 1;
        }
        {
            int64_t write_tmp_37834 = (int64_t) 0;
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->copy_scalar_to_dev_runs,
                                          &ctx->copy_scalar_to_dev_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(mem_32321.mem + (int64_t) 0 *
                                                sizeof(int64_t),
                                                &write_tmp_37834,
                                                sizeof(int64_t)));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        }
        
        int64_t segscan_group_sizze_31522;
        
        segscan_group_sizze_31522 =
            ctx->sizes.clusterPointszisegscan_group_sizze_31521;
        
        int64_t num_groups_31524;
        int32_t max_num_groups_36381;
        
        max_num_groups_36381 =
            ctx->sizes.clusterPointszisegscan_num_groups_31523;
        num_groups_31524 = sext_i64_i32(smax64((int64_t) 1,
                                               smin64(sdiv_up64(defunc_2_reduce_res_30100,
                                                                segscan_group_sizze_31522),
                                                      sext_i32_i64(max_num_groups_36381))));
        
        struct memblock_device mem_32324;
        
        mem_32324.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32324, defunc_2_reduce_res_30100,
                                  "mem_32324")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device mem_32326;
        
        mem_32326.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32326, bytes_32306, "mem_32326")) {
            err = 1;
            goto cleanup;
        }
        if (slt64((int64_t) 0, defunc_2_reduce_res_30100)) {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "\n# SegScan");
            
            int64_t numThreads_36382;
            
            numThreads_36382 = sdiv_up64(defunc_2_reduce_res_30100,
                                         segscan_group_sizze_31522 *
                                         (int64_t) 9) *
                segscan_group_sizze_31522;
            
            int64_t numGroups_36383;
            
            numGroups_36383 = sdiv_up64(defunc_2_reduce_res_30100,
                                        segscan_group_sizze_31522 *
                                        (int64_t) 9);
            
            struct memblock_device clusterPointsziid_counter_mem_36384 =
                                   ctx->clusterPointsziid_counter_mem_36384;
            struct memblock_device status_flags_mem_36386;
            
            status_flags_mem_36386.references = NULL;
            if (memblock_alloc_device(ctx, &status_flags_mem_36386,
                                      numGroups_36383,
                                      "status_flags_mem_36386")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_36388;
            
            aggregates_mem_36388.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_36388,
                                      numGroups_36383,
                                      "aggregates_mem_36388")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_36390;
            
            incprefixes_mem_36390.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_36390,
                                      numGroups_36383,
                                      "incprefixes_mem_36390")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device aggregates_mem_36392;
            
            aggregates_mem_36392.references = NULL;
            if (memblock_alloc_device(ctx, &aggregates_mem_36392, (int64_t) 8 *
                                      numGroups_36383,
                                      "aggregates_mem_36392")) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock_device incprefixes_mem_36394;
            
            incprefixes_mem_36394.references = NULL;
            if (memblock_alloc_device(ctx, &incprefixes_mem_36394, (int64_t) 8 *
                                      numGroups_36383,
                                      "incprefixes_mem_36394")) {
                err = 1;
                goto cleanup;
            }
            if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_36386,
                                             numGroups_36383, (int8_t) 0) !=
                0) {
                err = 1;
                goto cleanup;
            }
            
            unsigned int shared_sizze_37839 = smax64(smax64((int64_t) 320,
                                                            sdiv_up64(segscan_group_sizze_31522,
                                                                      (int64_t) 8) *
                                                            (int64_t) 8 +
                                                            (int64_t) 8 *
                                                            segscan_group_sizze_31522),
                                                     smax64((int64_t) 9 *
                                                            segscan_group_sizze_31522,
                                                            (int64_t) 9 *
                                                            segscan_group_sizze_31522 *
                                                            (int64_t) 8));
            CUdeviceptr kernel_arg_37841 = mem_32316.mem;
            CUdeviceptr kernel_arg_37842 = mem_32324.mem;
            CUdeviceptr kernel_arg_37843 = mem_32326.mem;
            CUdeviceptr kernel_arg_37844 =
                        clusterPointsziid_counter_mem_36384.mem;
            CUdeviceptr kernel_arg_37845 = status_flags_mem_36386.mem;
            CUdeviceptr kernel_arg_37846 = aggregates_mem_36388.mem;
            CUdeviceptr kernel_arg_37847 = incprefixes_mem_36390.mem;
            CUdeviceptr kernel_arg_37848 = aggregates_mem_36392.mem;
            CUdeviceptr kernel_arg_37849 = incprefixes_mem_36394.mem;
            unsigned int shared_offset_37840 = 0;
            
            if ((((((1 && sdiv_up64(defunc_2_reduce_res_30100,
                                    segscan_group_sizze_31522 * (int64_t) 9) !=
                     0) && 1 != 0) && 1 != 0) && segscan_group_sizze_31522 !=
                  0) && 1 != 0) && 1 != 0) {
                int perm[3] = {0, 1, 2};
                
                if (1 >= 1 << 16) {
                    perm[1] = perm[0];
                    perm[0] = 1;
                }
                if (1 >= 1 << 16) {
                    perm[2] = perm[0];
                    perm[0] = 2;
                }
                
                size_t grid[3];
                
                grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_30100,
                                          segscan_group_sizze_31522 *
                                          (int64_t) 9);
                grid[perm[1]] = 1;
                grid[perm[2]] = 1;
                
                void *kernel_args_37836[] = {&ctx->global_failure,
                                             &shared_offset_37840,
                                             &defunc_2_reduce_res_30100,
                                             &kernel_arg_37841,
                                             &kernel_arg_37842,
                                             &kernel_arg_37843,
                                             &kernel_arg_37844,
                                             &kernel_arg_37845,
                                             &kernel_arg_37846,
                                             &kernel_arg_37847,
                                             &kernel_arg_37848,
                                             &kernel_arg_37849};
                int64_t time_start_37837 = 0, time_end_37838 = 0;
                
                if (ctx->debugging) {
                    fprintf(ctx->log, "Launching %s with grid size (",
                            "clusterPoints.segscan_31527");
                    fprintf(ctx->log, "%ld",
                            (long) sdiv_up64(defunc_2_reduce_res_30100,
                                             segscan_group_sizze_31522 *
                                             (int64_t) 9));
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ") and block size (");
                    fprintf(ctx->log, "%ld", (long) segscan_group_sizze_31522);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ", ");
                    fprintf(ctx->log, "%ld", (long) 1);
                    fprintf(ctx->log, ").\n");
                    time_start_37837 = get_wall_time();
                }
                
                cudaEvent_t *pevents = NULL;
                
                if (ctx->profiling && !ctx->profiling_paused) {
                    pevents = cuda_get_events(&ctx->cuda,
                                              &ctx->clusterPointszisegscan_31527_runs,
                                              &ctx->clusterPointszisegscan_31527_total_runtime);
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                }
                CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31527,
                                                      grid[0], grid[1], grid[2],
                                                      segscan_group_sizze_31522,
                                                      1, 1, 0 +
                                                      (shared_sizze_37839 + (8 -
                                                                             shared_sizze_37839 %
                                                                             8) %
                                                       8), NULL,
                                                      kernel_args_37836, NULL));
                if (pevents != NULL)
                    CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                if (ctx->debugging) {
                    CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                    time_end_37838 = get_wall_time();
                    fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                            "clusterPoints.segscan_31527", time_end_37838 -
                            time_start_37837);
                }
            }
            if (memblock_unref_device(ctx, &incprefixes_mem_36394,
                                      "incprefixes_mem_36394") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_36392,
                                      "aggregates_mem_36392") != 0)
                return 1;
            if (memblock_unref_device(ctx, &incprefixes_mem_36390,
                                      "incprefixes_mem_36390") != 0)
                return 1;
            if (memblock_unref_device(ctx, &aggregates_mem_36388,
                                      "aggregates_mem_36388") != 0)
                return 1;
            if (memblock_unref_device(ctx, &status_flags_mem_36386,
                                      "status_flags_mem_36386") != 0)
                return 1;
        }
        if (memblock_unref_device(ctx, &mem_32316, "mem_32316") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32324, "mem_32324") != 0)
            return 1;
        
        int64_t segmap_group_sizze_31558;
        
        segmap_group_sizze_31558 =
            ctx->sizes.clusterPointszisegmap_group_sizze_31531;
        
        int64_t segmap_usable_groups_31559 =
                sdiv_up64(defunc_2_reduce_res_30100, segmap_group_sizze_31558);
        int64_t bytes_32328 = (int64_t) 4 * defunc_2_reduce_res_30100;
        struct memblock_device mem_32329;
        
        mem_32329.references = NULL;
        if (memblock_alloc_device(ctx, &mem_32329, bytes_32328, "mem_32329")) {
            err = 1;
            goto cleanup;
        }
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegMap");
        
        CUdeviceptr kernel_arg_37853 = clusterWith_res_mem_32275.mem;
        CUdeviceptr kernel_arg_37854 = clusterWith_res_mem_32280.mem;
        CUdeviceptr kernel_arg_37855 = mem_32292.mem;
        CUdeviceptr kernel_arg_37856 = mem_32313.mem;
        CUdeviceptr kernel_arg_37857 = mem_32326.mem;
        CUdeviceptr kernel_arg_37858 = mem_32329.mem;
        
        if ((((((1 && segmap_usable_groups_31559 != 0) && 1 != 0) && 1 != 0) &&
              segmap_group_sizze_31558 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = segmap_usable_groups_31559;
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37850[] = {&ctx->global_failure,
                                         &ctx->failure_is_an_option,
                                         &ctx->global_failure_args, &n_28846,
                                         &sizze_29574, &partition_sizze_30057,
                                         &defunc_2_reduce_res_30100,
                                         &kernel_arg_37853, &kernel_arg_37854,
                                         &kernel_arg_37855, &kernel_arg_37856,
                                         &kernel_arg_37857, &kernel_arg_37858};
            int64_t time_start_37851 = 0, time_end_37852 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segmap_31529");
                fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31559);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31558);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37851 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegmap_31529_runs,
                                          &ctx->clusterPointszisegmap_31529_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31529,
                                                  grid[0], grid[1], grid[2],
                                                  segmap_group_sizze_31558, 1,
                                                  1, 0, NULL, kernel_args_37850,
                                                  NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37852 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segmap_31529", time_end_37852 -
                        time_start_37851);
            }
        }
        ctx->failure_is_an_option = 1;
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "");
        if (memblock_unref_device(ctx, &mem_32313, "mem_32313") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32326, "mem_32326") != 0)
            return 1;
        sizze_30081 = defunc_2_reduce_res_30100;
        clusterWith_res_ixfn_32330 = defunc_2_reduce_res_30100;
        if (memblock_set_device(ctx, &clusterWith_res_mem_32331, &mem_32329,
                                "mem_32329") != 0)
            return 1;
        if (memblock_set_device(ctx, &clusterWith_res_mem_32333, &mem_32321,
                                "mem_32321") != 0)
            return 1;
        if (memblock_set_device(ctx, &clusterWith_res_mem_32335, &mem_32302,
                                "mem_32302") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32329, "mem_32329") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32326, "mem_32326") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32324, "mem_32324") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32321, "mem_32321") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32319, "mem_32319") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32316, "mem_32316") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32313, "mem_32313") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32311, "mem_32311") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_36017,
                                  "defunc_1_map_res_subhistos_mem_36017") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32307, "mem_32307") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_35987,
                                  "group_res_arr_mem_35987") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32305, "mem_32305") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32302, "mem_32302") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32300, "mem_32300") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                              "clusterWith_res_mem_32275") != 0)
        return 1;
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                              "clusterWith_res_mem_32280") != 0)
        return 1;
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                              "clusterWith_res_mem_32285") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32292, "mem_32292") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32295, "mem_32295") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32297, "mem_32297") != 0)
        return 1;
    
    int64_t segscan_group_sizze_31586;
    
    segscan_group_sizze_31586 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31585;
    
    int64_t num_groups_31588;
    int32_t max_num_groups_36519;
    
    max_num_groups_36519 = ctx->sizes.clusterPointszisegscan_num_groups_31587;
    num_groups_31588 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(sizze_30080,
                                                            segscan_group_sizze_31586),
                                                  sext_i32_i64(max_num_groups_36519))));
    
    int64_t bytes_32337 = (int64_t) 8 * sizze_30080;
    struct memblock_device mem_32338;
    
    mem_32338.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32338, bytes_32337, "mem_32338")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, sizze_30080)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_36520;
        
        numThreads_36520 = sdiv_up64(sizze_30080, segscan_group_sizze_31586 *
                                     (int64_t) 9) * segscan_group_sizze_31586;
        
        int64_t numGroups_36521;
        
        numGroups_36521 = sdiv_up64(sizze_30080, segscan_group_sizze_31586 *
                                    (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_36522 =
                               ctx->clusterPointsziid_counter_mem_36522;
        struct memblock_device status_flags_mem_36524;
        
        status_flags_mem_36524.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_36524, numGroups_36521,
                                  "status_flags_mem_36524")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_36526;
        
        aggregates_mem_36526.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_36526, (int64_t) 8 *
                                  numGroups_36521, "aggregates_mem_36526")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_36528;
        
        incprefixes_mem_36528.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_36528, (int64_t) 8 *
                                  numGroups_36521, "incprefixes_mem_36528")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_36524,
                                         numGroups_36521, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37863 = smax64(smax64((int64_t) 288,
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_31586),
                                                 (int64_t) 9 *
                                                 segscan_group_sizze_31586 *
                                                 (int64_t) 8);
        CUdeviceptr kernel_arg_37865 = clusterWith_res_mem_32335.mem;
        CUdeviceptr kernel_arg_37866 = mem_32338.mem;
        CUdeviceptr kernel_arg_37867 = clusterPointsziid_counter_mem_36522.mem;
        CUdeviceptr kernel_arg_37868 = status_flags_mem_36524.mem;
        CUdeviceptr kernel_arg_37869 = aggregates_mem_36526.mem;
        CUdeviceptr kernel_arg_37870 = incprefixes_mem_36528.mem;
        unsigned int shared_offset_37864 = 0;
        
        if ((((((1 && sdiv_up64(sizze_30080, segscan_group_sizze_31586 *
                                (int64_t) 9) != 0) && 1 != 0) && 1 != 0) &&
              segscan_group_sizze_31586 != 0) && 1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(sizze_30080, segscan_group_sizze_31586 *
                                      (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37860[] = {&ctx->global_failure,
                                         &shared_offset_37864, &sizze_30080,
                                         &kernel_arg_37865, &kernel_arg_37866,
                                         &kernel_arg_37867, &kernel_arg_37868,
                                         &kernel_arg_37869, &kernel_arg_37870};
            int64_t time_start_37861 = 0, time_end_37862 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_31591");
                fprintf(ctx->log, "%ld", (long) sdiv_up64(sizze_30080,
                                                          segscan_group_sizze_31586 *
                                                          (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_31586);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37861 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_31591_runs,
                                          &ctx->clusterPointszisegscan_31591_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31591,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_31586, 1,
                                                  1, 0 + (shared_sizze_37863 +
                                                          (8 -
                                                           shared_sizze_37863 %
                                                           8) % 8), NULL,
                                                  kernel_args_37860, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37862 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_31591", time_end_37862 -
                        time_start_37861);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_36528,
                                  "incprefixes_mem_36528") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_36526,
                                  "aggregates_mem_36526") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_36524,
                                  "status_flags_mem_36524") != 0)
            return 1;
    }
    
    int64_t segred_group_sizze_31594;
    
    segred_group_sizze_31594 =
        ctx->sizes.clusterPointszisegred_group_sizze_31593;
    
    int64_t num_groups_31596;
    int32_t max_num_groups_36601;
    
    max_num_groups_36601 = ctx->sizes.clusterPointszisegred_num_groups_31595;
    num_groups_31596 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(sizze_30080,
                                                            segred_group_sizze_31594),
                                                  sext_i32_i64(max_num_groups_36601))));
    
    struct memblock_device mem_32341;
    
    mem_32341.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32341, (int64_t) 8, "mem_32341")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device clusterPointszicounter_mem_36602 =
                           ctx->clusterPointszicounter_mem_36602;
    struct memblock_device group_res_arr_mem_36604;
    
    group_res_arr_mem_36604.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_36604, (int64_t) 8 *
                              (segred_group_sizze_31594 * num_groups_31596),
                              "group_res_arr_mem_36604")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t num_threads_36606;
    
    num_threads_36606 = num_groups_31596 * segred_group_sizze_31594;
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegRed");
    
    unsigned int shared_sizze_37875 = (int64_t) 8 * segred_group_sizze_31594;
    unsigned int shared_sizze_37877 = 1;
    CUdeviceptr kernel_arg_37879 = clusterWith_res_mem_32335.mem;
    CUdeviceptr kernel_arg_37880 = mem_32341.mem;
    CUdeviceptr kernel_arg_37881 = clusterPointszicounter_mem_36602.mem;
    CUdeviceptr kernel_arg_37882 = group_res_arr_mem_36604.mem;
    unsigned int shared_offset_37876 = 0;
    unsigned int shared_offset_37878 = 0 + (shared_sizze_37875 + (8 -
                                                                  shared_sizze_37875 %
                                                                  8) % 8);
    
    if ((((((1 && num_groups_31596 != 0) && 1 != 0) && 1 != 0) &&
          segred_group_sizze_31594 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = num_groups_31596;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37872[] = {&ctx->global_failure, &shared_offset_37876,
                                     &shared_offset_37878, &sizze_30080,
                                     &num_groups_31596, &num_threads_36606,
                                     &kernel_arg_37879, &kernel_arg_37880,
                                     &kernel_arg_37881, &kernel_arg_37882};
        int64_t time_start_37873 = 0, time_end_37874 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segred_nonseg_31601");
            fprintf(ctx->log, "%ld", (long) num_groups_31596);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segred_group_sizze_31594);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37873 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegred_nonseg_31601_runs,
                                      &ctx->clusterPointszisegred_nonseg_31601_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_nonseg_31601,
                                              grid[0], grid[1], grid[2],
                                              segred_group_sizze_31594, 1, 1,
                                              0 + (shared_sizze_37875 + (8 -
                                                                         shared_sizze_37875 %
                                                                         8) %
                                                   8) + (shared_sizze_37877 +
                                                         (8 -
                                                          shared_sizze_37877 %
                                                          8) % 8), NULL,
                                              kernel_args_37872, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37874 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segred_nonseg_31601", time_end_37874 -
                    time_start_37873);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32335,
                              "clusterWith_res_mem_32335") != 0)
        return 1;
    
    int64_t read_res_37883;
    
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->copy_scalar_from_dev_runs,
                                      &ctx->copy_scalar_from_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(&read_res_37883, mem_32341.mem +
                                            (int64_t) 0 * sizeof(int64_t),
                                            sizeof(int64_t)));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    if (futhark_context_sync(ctx) != 0)
        return 1;
    
    int64_t defunc_2_reduce_res_30210 = read_res_37883;
    
    if (memblock_unref_device(ctx, &mem_32341, "mem_32341") != 0)
        return 1;
    
    bool bounds_invalid_upwards_30215 = slt64(defunc_2_reduce_res_30210,
                                              (int64_t) 0);
    bool valid_30216 = !bounds_invalid_upwards_30215;
    bool range_valid_c_30217;
    
    if (!valid_30216) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (int64_t) 0, "..", (int64_t) 1, "..<",
                               defunc_2_reduce_res_30210, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:108:18-23\n   #2  lib/github.com/diku-dk/segmented/segmented.fut:48:30-60\n   #3  src/cluster.fut:198:20-51\n   #4  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &group_res_arr_mem_36604,
                                  "group_res_arr_mem_36604") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32341, "mem_32341") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32338, "mem_32338") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32335,
                                  "clusterWith_res_mem_32335") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32333,
                                  "clusterWith_res_mem_32333") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32331,
                                  "clusterWith_res_mem_32331") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32297, "mem_32297") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32295, "mem_32295") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32292, "mem_32292") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32290, "mem_32290") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32288, "mem_32288") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32063, "mem_param_32063") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32058, "mem_param_32058") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32053, "mem_param_32053") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                  "clusterWith_res_mem_32285") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                  "clusterWith_res_mem_32280") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                  "clusterWith_res_mem_32275") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                  "group_res_arr_mem_34194") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                  "group_res_arr_mem_33832") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31971, "mem_param_31971") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31966, "mem_param_31966") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                  "defunc_0_f_res_mem_32005") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                  "defunc_0_f_res_mem_32000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t bytes_32342 = (int64_t) 8 * defunc_2_reduce_res_30210;
    struct memblock_device mem_32343;
    
    mem_32343.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32343, bytes_32342, "mem_32343")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhreplicate_i64(ctx, mem_32343, defunc_2_reduce_res_30210,
                                      (int64_t) 0) != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t seghist_group_sizze_31604;
    
    seghist_group_sizze_31604 =
        ctx->sizes.clusterPointsziseghist_group_sizze_31603;
    
    int64_t num_groups_31606;
    int32_t max_num_groups_36632;
    
    max_num_groups_36632 = ctx->sizes.clusterPointsziseghist_num_groups_31605;
    num_groups_31606 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(sizze_30080,
                                                            seghist_group_sizze_31604),
                                                  sext_i32_i64(max_num_groups_36632))));
    
    int32_t num_subhistos_36633;
    struct memblock_device defunc_1_map_res_subhistos_mem_36634;
    
    defunc_1_map_res_subhistos_mem_36634.references = NULL;
    
    int64_t h_36636;
    
    h_36636 = (int64_t) 8 * defunc_2_reduce_res_30210;
    
    int64_t seg_h_36637;
    
    seg_h_36637 = (int64_t) 8 * defunc_2_reduce_res_30210;
    if (!(seg_h_36637 == (int64_t) 0)) {
        int64_t hist_H_36638 = defunc_2_reduce_res_30210;
        int64_t hist_el_sizze_36639 = sdiv_up64(h_36636, hist_H_36638);
        int64_t hist_N_36640 = sizze_30080;
        int32_t hist_RF_36641 = 1;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegHist");
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Number of threads (T)",
                    (long long) sext_i64_i32(num_groups_31606 *
                    seghist_group_sizze_31604), '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Desired group size (B)",
                    (long long) seghist_group_sizze_31604, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Histogram size (H)",
                    (long long) hist_H_36638, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Input elements per histogram (N)",
                    (long long) hist_N_36640, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Number of segments",
                    (long long) (int64_t) 1, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Histogram element size (el_size)",
                    (long long) hist_el_sizze_36639, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "Race factor (RF)",
                    (long long) hist_RF_36641, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c",
                    "Memory per set of subhistograms per segment",
                    (long long) h_36636, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c",
                    "Memory per set of subhistograms times segments",
                    (long long) seg_h_36637, '\n');
        
        int32_t hist_L_36642;
        
        hist_L_36642 = ctx->cuda.max_shared_memory;
        
        int32_t max_group_sizze_36643;
        
        max_group_sizze_36643 = ctx->cuda.max_block_size;
        
        int64_t num_groups_36644;
        
        num_groups_36644 =
            sdiv_up64(sext_i32_i64(sext_i64_i32(num_groups_31606 *
                      seghist_group_sizze_31604)), max_group_sizze_36643);
        
        double hist_m_prime_36645;
        
        hist_m_prime_36645 =
            sitofp_i64_f64(smin64(sext_i32_i64(squot32(hist_L_36642,
                                                       hist_el_sizze_36639)),
                                  sdiv_up64(hist_N_36640, num_groups_36644))) /
            sitofp_i64_f64(hist_H_36638);
        
        int64_t hist_M0_36646;
        
        hist_M0_36646 = smax64((int64_t) 1,
                               smin64(fptosi_f64_i64(hist_m_prime_36645),
                                      max_group_sizze_36643));
        
        int64_t hist_Nout_36647;
        
        hist_Nout_36647 = (int64_t) 1;
        
        int64_t hist_Nin_36648;
        
        hist_Nin_36648 = sizze_30080;
        
        int64_t work_asymp_M_max_36649;
        
        work_asymp_M_max_36649 = squot64(hist_Nout_36647 * hist_N_36640,
                                         (int64_t) 2 * num_groups_36644 *
                                         hist_H_36638);
        
        int32_t hist_M_36650;
        
        hist_M_36650 = sext_i64_i32(smin64(hist_M0_36646,
                                           work_asymp_M_max_36649));
        
        int64_t hist_C_36651;
        
        hist_C_36651 = sdiv_up64(max_group_sizze_36643, sext_i32_i64(smax32(1,
                                                                            hist_M_36650)));
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local hist_M0",
                    (long long) hist_M0_36646, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local work asymp M max",
                    (long long) work_asymp_M_max_36649, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local C", (long long) hist_C_36651,
                    '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local B",
                    (long long) max_group_sizze_36643, '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local M", (long long) hist_M_36650,
                    '\n');
        if (ctx->debugging)
            fprintf(ctx->log, "%s: %llu%c", "local memory needed",
                    (long long) (hist_H_36638 * hist_el_sizze_36639 *
                                 sext_i32_i64(hist_M_36650)), '\n');
        
        int64_t local_mem_needed_36652;
        
        local_mem_needed_36652 = hist_el_sizze_36639 *
            sext_i32_i64(hist_M_36650);
        
        int32_t hist_S_36653;
        
        hist_S_36653 = sext_i64_i32(sdiv_up64(hist_H_36638 *
                                              local_mem_needed_36652,
                                              hist_L_36642));
        if (sle64(hist_H_36638, hist_Nin_36648) &&
            (sle64(local_mem_needed_36652, hist_L_36642) && (sle32(hist_S_36653,
                                                                   3) &&
                                                             (sle64(hist_C_36651,
                                                                    max_group_sizze_36643) &&
                                                              slt32(0,
                                                                    hist_M_36650))))) {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "## Using local memory");
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Histogram size (H)",
                        (long long) hist_H_36638, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Multiplication degree (M)",
                        (long long) hist_M_36650, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Cooperation level (C)",
                        (long long) hist_C_36651, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Number of chunks (S)",
                        (long long) hist_S_36653, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c",
                        "Number of local subhistograms per group",
                        (long long) hist_M_36650, '\n');
            
            int64_t num_segments_36654;
            
            num_segments_36654 = (int64_t) 1;
            num_subhistos_36633 = num_groups_36644 * num_segments_36654;
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c",
                        "Number of subhistograms in global memory",
                        (long long) num_subhistos_36633, '\n');
            if (num_subhistos_36633 == (int64_t) 1) {
                if (memblock_set_device(ctx,
                                        &defunc_1_map_res_subhistos_mem_36634,
                                        &mem_32343, "mem_32343") != 0)
                    return 1;
            } else {
                if (memblock_alloc_device(ctx,
                                          &defunc_1_map_res_subhistos_mem_36634,
                                          sext_i32_i64(num_subhistos_36633) *
                                          defunc_2_reduce_res_30210 *
                                          (int64_t) 8,
                                          "defunc_1_map_res_subhistos_mem_36634")) {
                    err = 1;
                    goto cleanup;
                }
                if (futrts_builtinzhreplicate_i64(ctx,
                                                  defunc_1_map_res_subhistos_mem_36634,
                                                  num_subhistos_36633 *
                                                  defunc_2_reduce_res_30210,
                                                  (int64_t) 0) != 0) {
                    err = 1;
                    goto cleanup;
                }
                {
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->copy_dev_to_dev_runs,
                                                  &ctx->copy_dev_to_dev_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuMemcpy(defunc_1_map_res_subhistos_mem_36634.mem +
                                                    (int64_t) 0, mem_32343.mem +
                                                    (int64_t) 0,
                                                    defunc_2_reduce_res_30210 *
                                                    (int64_t) 8));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                }
            }
            for (int32_t chk_i_36655 = 0; chk_i_36655 < hist_S_36653;
                 chk_i_36655++) {
                int64_t num_segments_36656 = (int64_t) 1;
                int64_t hist_H_chk_36657 = sdiv_up64(defunc_2_reduce_res_30210,
                                                     sext_i32_i64(hist_S_36653));
                int64_t histo_sizze_36658 = hist_H_chk_36657;
                int32_t init_per_thread_36659 =
                        sext_i64_i32(sdiv_up64(sext_i32_i64(hist_M_36650) *
                                               histo_sizze_36658,
                                               max_group_sizze_36643));
                unsigned int shared_sizze_37887 = (int64_t) 8 * (hist_M_36650 *
                                                                 hist_H_chk_36657);
                CUdeviceptr kernel_arg_37889 = mem_32338.mem;
                CUdeviceptr kernel_arg_37890 =
                            defunc_1_map_res_subhistos_mem_36634.mem;
                unsigned int shared_offset_37888 = 0;
                
                if ((((((1 && num_groups_36644 != 0) && 1 != 0) && 1 != 0) &&
                      max_group_sizze_36643 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_36644;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37884[] = {&ctx->global_failure,
                                                 &shared_offset_37888,
                                                 &sizze_30080,
                                                 &defunc_2_reduce_res_30210,
                                                 &max_group_sizze_36643,
                                                 &num_groups_36644,
                                                 &hist_M_36650, &chk_i_36655,
                                                 &num_segments_36656,
                                                 &hist_H_chk_36657,
                                                 &histo_sizze_36658,
                                                 &init_per_thread_36659,
                                                 &kernel_arg_37889,
                                                 &kernel_arg_37890};
                    int64_t time_start_37885 = 0, time_end_37886 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.seghist_local_31609");
                        fprintf(ctx->log, "%ld", (long) num_groups_36644);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld", (long) max_group_sizze_36643);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37885 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointsziseghist_local_31609_runs,
                                                  &ctx->clusterPointsziseghist_local_31609_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointsziseghist_local_31609,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          max_group_sizze_36643,
                                                          1, 1, 0 +
                                                          (shared_sizze_37887 +
                                                           (8 -
                                                            shared_sizze_37887 %
                                                            8) % 8), NULL,
                                                          kernel_args_37884,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37886 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.seghist_local_31609",
                                time_end_37886 - time_start_37885);
                    }
                }
            }
        } else {
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "## Using global memory");
            
            int64_t hist_H_36687;
            
            hist_H_36687 = defunc_2_reduce_res_30210;
            
            double hist_RF_36688;
            
            hist_RF_36688 = (0.0 + sitofp_i32_f64((int64_t) 1)) / 1.0;
            
            int32_t hist_el_sizze_36689;
            
            hist_el_sizze_36689 = 8;
            
            double hist_C_max_36690;
            
            hist_C_max_36690 =
                fmin64(sitofp_i32_f64(sext_i64_i32(num_groups_31606 *
                       seghist_group_sizze_31604)),
                       sitofp_i32_f64(hist_H_36687) / 2.0);
            
            int32_t hist_M_min_36691;
            
            hist_M_min_36691 = smax32(1,
                                      sext_i64_i32(fptosi_f64_i64(sitofp_i32_f64(sext_i64_i32(num_groups_31606 *
                                      seghist_group_sizze_31604)) /
                                      hist_C_max_36690)));
            
            int32_t L2_sizze_36692;
            
            L2_sizze_36692 = ctx->sizes.clusterPointsziL2_sizze_36692;
            
            double hist_RACE_exp_36693;
            
            hist_RACE_exp_36693 = fmax64(1.0, 0.75 * hist_RF_36688 / (64.0 /
                                                                      sitofp_i32_f64(hist_el_sizze_36689)));
            
            int32_t hist_S_36694;
            
            if (slt64(sizze_30080, hist_H_36687)) {
                hist_S_36694 = 1;
            } else {
                hist_S_36694 =
                    sext_i64_i32(sdiv_up64(sext_i32_i64(hist_M_min_36691) *
                                           hist_H_36687 *
                                           sext_i32_i64(hist_el_sizze_36689),
                                           fptosi_f64_i64(0.4 *
                                           sitofp_i32_f64(L2_sizze_36692) *
                                           hist_RACE_exp_36693)));
            }
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %f%c",
                        "Race expansion factor (RACE^exp)",
                        (double) hist_RACE_exp_36693, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Number of chunks (S)",
                        (long long) hist_S_36694, '\n');
            
            int64_t hist_H_chk_36695;
            
            hist_H_chk_36695 = sdiv_up64(defunc_2_reduce_res_30210,
                                         sext_i32_i64(hist_S_36694));
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Chunk size (H_chk)",
                        (long long) hist_H_chk_36695, '\n');
            
            double hist_k_max_36696;
            
            hist_k_max_36696 = fmin64(0.4 * (sitofp_i32_f64(L2_sizze_36692) /
                                             sitofp_i32_f64(8)) *
                                      hist_RACE_exp_36693,
                                      sitofp_i32_f64(sizze_30080)) /
                sitofp_i32_f64(sext_i64_i32(num_groups_31606 *
                seghist_group_sizze_31604));
            
            int64_t hist_u_36697;
            
            hist_u_36697 = (int64_t) 2;
            
            double hist_C_36698;
            
            hist_C_36698 = fmin64(sitofp_i32_f64(sext_i64_i32(num_groups_31606 *
                                  seghist_group_sizze_31604)),
                                  sitofp_i32_f64(hist_u_36697 *
                                  hist_H_chk_36695) / hist_k_max_36696);
            
            int32_t hist_M_36699;
            
            hist_M_36699 = 1;
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %f%c",
                        "Elements/thread in L2 cache (k_max)",
                        (double) hist_k_max_36696, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %llu%c", "Multiplication degree (M)",
                        (long long) hist_M_36699, '\n');
            if (ctx->debugging)
                fprintf(ctx->log, "%s: %f%c", "Cooperation level (C)",
                        (double) hist_C_36698, '\n');
            num_subhistos_36633 = sext_i32_i64(hist_M_36699);
            if (hist_M_36699 == 1) {
                if (memblock_set_device(ctx,
                                        &defunc_1_map_res_subhistos_mem_36634,
                                        &mem_32343, "mem_32343") != 0)
                    return 1;
            } else {
                if (num_subhistos_36633 == (int64_t) 1) {
                    if (memblock_set_device(ctx,
                                            &defunc_1_map_res_subhistos_mem_36634,
                                            &mem_32343, "mem_32343") != 0)
                        return 1;
                } else {
                    if (memblock_alloc_device(ctx,
                                              &defunc_1_map_res_subhistos_mem_36634,
                                              sext_i32_i64(num_subhistos_36633) *
                                              defunc_2_reduce_res_30210 *
                                              (int64_t) 8,
                                              "defunc_1_map_res_subhistos_mem_36634")) {
                        err = 1;
                        goto cleanup;
                    }
                    if (futrts_builtinzhreplicate_i64(ctx,
                                                      defunc_1_map_res_subhistos_mem_36634,
                                                      num_subhistos_36633 *
                                                      defunc_2_reduce_res_30210,
                                                      (int64_t) 0) != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    {
                        cudaEvent_t *pevents = NULL;
                        
                        if (ctx->profiling && !ctx->profiling_paused) {
                            pevents = cuda_get_events(&ctx->cuda,
                                                      &ctx->copy_dev_to_dev_runs,
                                                      &ctx->copy_dev_to_dev_total_runtime);
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                        }
                        CUDA_SUCCEED_OR_RETURN(cuMemcpy(defunc_1_map_res_subhistos_mem_36634.mem +
                                                        (int64_t) 0,
                                                        mem_32343.mem +
                                                        (int64_t) 0,
                                                        defunc_2_reduce_res_30210 *
                                                        (int64_t) 8));
                        if (pevents != NULL)
                            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    }
                }
            }
            for (int32_t chk_i_36700 = 0; chk_i_36700 < hist_S_36694;
                 chk_i_36700++) {
                int64_t hist_H_chk_36701 = sdiv_up64(defunc_2_reduce_res_30210,
                                                     sext_i32_i64(hist_S_36694));
                CUdeviceptr kernel_arg_37894 = mem_32338.mem;
                CUdeviceptr kernel_arg_37895 =
                            defunc_1_map_res_subhistos_mem_36634.mem;
                
                if ((((((1 && num_groups_31606 != 0) && 1 != 0) && 1 != 0) &&
                      seghist_group_sizze_31604 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_31606;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37891[] = {&ctx->global_failure,
                                                 &sizze_30080,
                                                 &defunc_2_reduce_res_30210,
                                                 &num_groups_31606,
                                                 &num_subhistos_36633,
                                                 &chk_i_36700,
                                                 &hist_H_chk_36701,
                                                 &kernel_arg_37894,
                                                 &kernel_arg_37895};
                    int64_t time_start_37892 = 0, time_end_37893 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.seghist_global_31609");
                        fprintf(ctx->log, "%ld", (long) num_groups_31606);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) seghist_group_sizze_31604);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37892 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointsziseghist_global_31609_runs,
                                                  &ctx->clusterPointsziseghist_global_31609_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointsziseghist_global_31609,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          seghist_group_sizze_31604,
                                                          1, 1, 0, NULL,
                                                          kernel_args_37891,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37893 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.seghist_global_31609",
                                time_end_37893 - time_start_37892);
                    }
                }
            }
        }
        if (num_subhistos_36633 == (int64_t) 1) {
            if (memblock_set_device(ctx, &mem_32343,
                                    &defunc_1_map_res_subhistos_mem_36634,
                                    "defunc_1_map_res_subhistos_mem_36634") !=
                0)
                return 1;
        } else {
            if (slt64(num_subhistos_36633 * (int64_t) 2,
                      seghist_group_sizze_31604)) {
                int64_t segment_sizze_nonzzero_36713 = smax64((int64_t) 1,
                                                              num_subhistos_36633);
                int64_t num_threads_36714 = num_groups_31606 *
                        seghist_group_sizze_31604;
                
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed-small");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_segments",
                            (long long) defunc_2_reduce_res_30210, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segment_size",
                            (long long) num_subhistos_36633, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segments_per_group",
                            (long long) squot64(seghist_group_sizze_31604,
                                                segment_sizze_nonzzero_36713),
                            '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "required_groups",
                            (long long) sext_i64_i32(sdiv_up64(defunc_2_reduce_res_30210,
                                                               squot64(seghist_group_sizze_31604,
                                                                       segment_sizze_nonzzero_36713))),
                            '\n');
                
                unsigned int shared_sizze_37899 = (int64_t) 8 *
                             seghist_group_sizze_31604;
                CUdeviceptr kernel_arg_37901 = mem_32343.mem;
                CUdeviceptr kernel_arg_37902 =
                            defunc_1_map_res_subhistos_mem_36634.mem;
                unsigned int shared_offset_37900 = 0;
                
                if ((((((1 && num_groups_31606 != 0) && 1 != 0) && 1 != 0) &&
                      seghist_group_sizze_31604 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_31606;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37896[] = {&ctx->global_failure,
                                                 &shared_offset_37900,
                                                 &defunc_2_reduce_res_30210,
                                                 &num_groups_31606,
                                                 &num_subhistos_36633,
                                                 &segment_sizze_nonzzero_36713,
                                                 &kernel_arg_37901,
                                                 &kernel_arg_37902};
                    int64_t time_start_37897 = 0, time_end_37898 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segred_small_36712");
                        fprintf(ctx->log, "%ld", (long) num_groups_31606);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) seghist_group_sizze_31604);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37897 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegred_small_36712_runs,
                                                  &ctx->clusterPointszisegred_small_36712_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_small_36712,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          seghist_group_sizze_31604,
                                                          1, 1, 0 +
                                                          (shared_sizze_37899 +
                                                           (8 -
                                                            shared_sizze_37899 %
                                                            8) % 8), NULL,
                                                          kernel_args_37896,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37898 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segred_small_36712",
                                time_end_37898 - time_start_37897);
                    }
                }
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
            } else {
                int64_t groups_per_segment_36734 = sdiv_up64(num_groups_31606,
                                                             smax64((int64_t) 1,
                                                                    defunc_2_reduce_res_30210));
                int64_t elements_per_thread_36735 =
                        sdiv_up64(num_subhistos_36633,
                                  seghist_group_sizze_31604 *
                                  groups_per_segment_36734);
                int64_t virt_num_groups_36736 = groups_per_segment_36734 *
                        defunc_2_reduce_res_30210;
                int64_t num_threads_36737 = num_groups_31606 *
                        seghist_group_sizze_31604;
                int64_t threads_per_segment_36738 = groups_per_segment_36734 *
                        seghist_group_sizze_31604;
                
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "\n# SegRed-large");
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_segments",
                            (long long) defunc_2_reduce_res_30210, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "segment_size",
                            (long long) num_subhistos_36633, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "virt_num_groups",
                            (long long) virt_num_groups_36736, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "num_groups",
                            (long long) num_groups_31606, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "group_size",
                            (long long) seghist_group_sizze_31604, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "elems_per_thread",
                            (long long) elements_per_thread_36735, '\n');
                if (ctx->debugging)
                    fprintf(ctx->log, "%s: %llu%c", "groups_per_segment",
                            (long long) groups_per_segment_36734, '\n');
                
                struct memblock_device group_res_arr_mem_36739;
                
                group_res_arr_mem_36739.references = NULL;
                if (memblock_alloc_device(ctx, &group_res_arr_mem_36739,
                                          (int64_t) 8 *
                                          (seghist_group_sizze_31604 *
                                           virt_num_groups_36736),
                                          "group_res_arr_mem_36739")) {
                    err = 1;
                    goto cleanup;
                }
                
                struct memblock_device clusterPointszicounter_mem_36741 =
                                       ctx->clusterPointszicounter_mem_36741;
                unsigned int shared_sizze_37907 = 1;
                unsigned int shared_sizze_37909 = (int64_t) 8 *
                             seghist_group_sizze_31604;
                CUdeviceptr kernel_arg_37911 = mem_32343.mem;
                CUdeviceptr kernel_arg_37912 =
                            defunc_1_map_res_subhistos_mem_36634.mem;
                CUdeviceptr kernel_arg_37913 = group_res_arr_mem_36739.mem;
                CUdeviceptr kernel_arg_37914 =
                            clusterPointszicounter_mem_36741.mem;
                unsigned int shared_offset_37908 = 0;
                unsigned int shared_offset_37910 = 0 + (shared_sizze_37907 +
                                                        (8 -
                                                         shared_sizze_37907 %
                                                         8) % 8);
                
                if ((((((1 && num_groups_31606 != 0) && 1 != 0) && 1 != 0) &&
                      seghist_group_sizze_31604 != 0) && 1 != 0) && 1 != 0) {
                    int perm[3] = {0, 1, 2};
                    
                    if (1 >= 1 << 16) {
                        perm[1] = perm[0];
                        perm[0] = 1;
                    }
                    if (1 >= 1 << 16) {
                        perm[2] = perm[0];
                        perm[0] = 2;
                    }
                    
                    size_t grid[3];
                    
                    grid[perm[0]] = num_groups_31606;
                    grid[perm[1]] = 1;
                    grid[perm[2]] = 1;
                    
                    void *kernel_args_37904[] = {&ctx->global_failure,
                                                 &shared_offset_37908,
                                                 &shared_offset_37910,
                                                 &defunc_2_reduce_res_30210,
                                                 &num_groups_31606,
                                                 &num_subhistos_36633,
                                                 &groups_per_segment_36734,
                                                 &elements_per_thread_36735,
                                                 &virt_num_groups_36736,
                                                 &threads_per_segment_36738,
                                                 &kernel_arg_37911,
                                                 &kernel_arg_37912,
                                                 &kernel_arg_37913,
                                                 &kernel_arg_37914};
                    int64_t time_start_37905 = 0, time_end_37906 = 0;
                    
                    if (ctx->debugging) {
                        fprintf(ctx->log, "Launching %s with grid size (",
                                "clusterPoints.segred_large_36712");
                        fprintf(ctx->log, "%ld", (long) num_groups_31606);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ") and block size (");
                        fprintf(ctx->log, "%ld",
                                (long) seghist_group_sizze_31604);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ", ");
                        fprintf(ctx->log, "%ld", (long) 1);
                        fprintf(ctx->log, ").\n");
                        time_start_37905 = get_wall_time();
                    }
                    
                    cudaEvent_t *pevents = NULL;
                    
                    if (ctx->profiling && !ctx->profiling_paused) {
                        pevents = cuda_get_events(&ctx->cuda,
                                                  &ctx->clusterPointszisegred_large_36712_runs,
                                                  &ctx->clusterPointszisegred_large_36712_total_runtime);
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
                    }
                    CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegred_large_36712,
                                                          grid[0], grid[1],
                                                          grid[2],
                                                          seghist_group_sizze_31604,
                                                          1, 1, 0 +
                                                          (shared_sizze_37907 +
                                                           (8 -
                                                            shared_sizze_37907 %
                                                            8) % 8) +
                                                          (shared_sizze_37909 +
                                                           (8 -
                                                            shared_sizze_37909 %
                                                            8) % 8), NULL,
                                                          kernel_args_37904,
                                                          NULL));
                    if (pevents != NULL)
                        CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
                    if (ctx->debugging) {
                        CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                        time_end_37906 = get_wall_time();
                        fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                                "clusterPoints.segred_large_36712",
                                time_end_37906 - time_start_37905);
                    }
                }
                if (ctx->debugging)
                    fprintf(ctx->log, "%s\n", "");
                if (memblock_unref_device(ctx, &group_res_arr_mem_36739,
                                          "group_res_arr_mem_36739") != 0)
                    return 1;
            }
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_32338, "mem_32338") != 0)
        return 1;
    
    int64_t segscan_group_sizze_31619;
    
    segscan_group_sizze_31619 =
        ctx->sizes.clusterPointszisegscan_group_sizze_31618;
    
    int64_t num_groups_31621;
    int32_t max_num_groups_36773;
    
    max_num_groups_36773 = ctx->sizes.clusterPointszisegscan_num_groups_31620;
    num_groups_31621 = sext_i64_i32(smax64((int64_t) 1,
                                           smin64(sdiv_up64(defunc_2_reduce_res_30210,
                                                            segscan_group_sizze_31619),
                                                  sext_i32_i64(max_num_groups_36773))));
    
    struct memblock_device mem_32347;
    
    mem_32347.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32347, defunc_2_reduce_res_30210,
                              "mem_32347")) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock_device mem_32349;
    
    mem_32349.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32349, bytes_32342, "mem_32349")) {
        err = 1;
        goto cleanup;
    }
    if (slt64((int64_t) 0, defunc_2_reduce_res_30210)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "\n# SegScan");
        
        int64_t numThreads_36774;
        
        numThreads_36774 = sdiv_up64(defunc_2_reduce_res_30210,
                                     segscan_group_sizze_31619 * (int64_t) 9) *
            segscan_group_sizze_31619;
        
        int64_t numGroups_36775;
        
        numGroups_36775 = sdiv_up64(defunc_2_reduce_res_30210,
                                    segscan_group_sizze_31619 * (int64_t) 9);
        
        struct memblock_device clusterPointsziid_counter_mem_36776 =
                               ctx->clusterPointsziid_counter_mem_36776;
        struct memblock_device status_flags_mem_36778;
        
        status_flags_mem_36778.references = NULL;
        if (memblock_alloc_device(ctx, &status_flags_mem_36778, numGroups_36775,
                                  "status_flags_mem_36778")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_36780;
        
        aggregates_mem_36780.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_36780, numGroups_36775,
                                  "aggregates_mem_36780")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_36782;
        
        incprefixes_mem_36782.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_36782, numGroups_36775,
                                  "incprefixes_mem_36782")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device aggregates_mem_36784;
        
        aggregates_mem_36784.references = NULL;
        if (memblock_alloc_device(ctx, &aggregates_mem_36784, (int64_t) 8 *
                                  numGroups_36775, "aggregates_mem_36784")) {
            err = 1;
            goto cleanup;
        }
        
        struct memblock_device incprefixes_mem_36786;
        
        incprefixes_mem_36786.references = NULL;
        if (memblock_alloc_device(ctx, &incprefixes_mem_36786, (int64_t) 8 *
                                  numGroups_36775, "incprefixes_mem_36786")) {
            err = 1;
            goto cleanup;
        }
        if (futrts_builtinzhreplicate_i8(ctx, status_flags_mem_36778,
                                         numGroups_36775, (int8_t) 0) != 0) {
            err = 1;
            goto cleanup;
        }
        
        unsigned int shared_sizze_37919 = smax64(smax64((int64_t) 320,
                                                        sdiv_up64(segscan_group_sizze_31619,
                                                                  (int64_t) 8) *
                                                        (int64_t) 8 +
                                                        (int64_t) 8 *
                                                        segscan_group_sizze_31619),
                                                 smax64((int64_t) 9 *
                                                        segscan_group_sizze_31619,
                                                        (int64_t) 9 *
                                                        segscan_group_sizze_31619 *
                                                        (int64_t) 8));
        CUdeviceptr kernel_arg_37921 = mem_32343.mem;
        CUdeviceptr kernel_arg_37922 = mem_32347.mem;
        CUdeviceptr kernel_arg_37923 = mem_32349.mem;
        CUdeviceptr kernel_arg_37924 = clusterPointsziid_counter_mem_36776.mem;
        CUdeviceptr kernel_arg_37925 = status_flags_mem_36778.mem;
        CUdeviceptr kernel_arg_37926 = aggregates_mem_36780.mem;
        CUdeviceptr kernel_arg_37927 = incprefixes_mem_36782.mem;
        CUdeviceptr kernel_arg_37928 = aggregates_mem_36784.mem;
        CUdeviceptr kernel_arg_37929 = incprefixes_mem_36786.mem;
        unsigned int shared_offset_37920 = 0;
        
        if ((((((1 && sdiv_up64(defunc_2_reduce_res_30210,
                                segscan_group_sizze_31619 * (int64_t) 9) !=
                 0) && 1 != 0) && 1 != 0) && segscan_group_sizze_31619 != 0) &&
             1 != 0) && 1 != 0) {
            int perm[3] = {0, 1, 2};
            
            if (1 >= 1 << 16) {
                perm[1] = perm[0];
                perm[0] = 1;
            }
            if (1 >= 1 << 16) {
                perm[2] = perm[0];
                perm[0] = 2;
            }
            
            size_t grid[3];
            
            grid[perm[0]] = sdiv_up64(defunc_2_reduce_res_30210,
                                      segscan_group_sizze_31619 * (int64_t) 9);
            grid[perm[1]] = 1;
            grid[perm[2]] = 1;
            
            void *kernel_args_37916[] = {&ctx->global_failure,
                                         &shared_offset_37920,
                                         &defunc_2_reduce_res_30210,
                                         &kernel_arg_37921, &kernel_arg_37922,
                                         &kernel_arg_37923, &kernel_arg_37924,
                                         &kernel_arg_37925, &kernel_arg_37926,
                                         &kernel_arg_37927, &kernel_arg_37928,
                                         &kernel_arg_37929};
            int64_t time_start_37917 = 0, time_end_37918 = 0;
            
            if (ctx->debugging) {
                fprintf(ctx->log, "Launching %s with grid size (",
                        "clusterPoints.segscan_31624");
                fprintf(ctx->log, "%ld",
                        (long) sdiv_up64(defunc_2_reduce_res_30210,
                                         segscan_group_sizze_31619 *
                                         (int64_t) 9));
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ") and block size (");
                fprintf(ctx->log, "%ld", (long) segscan_group_sizze_31619);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ", ");
                fprintf(ctx->log, "%ld", (long) 1);
                fprintf(ctx->log, ").\n");
                time_start_37917 = get_wall_time();
            }
            
            cudaEvent_t *pevents = NULL;
            
            if (ctx->profiling && !ctx->profiling_paused) {
                pevents = cuda_get_events(&ctx->cuda,
                                          &ctx->clusterPointszisegscan_31624_runs,
                                          &ctx->clusterPointszisegscan_31624_total_runtime);
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
            }
            CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegscan_31624,
                                                  grid[0], grid[1], grid[2],
                                                  segscan_group_sizze_31619, 1,
                                                  1, 0 + (shared_sizze_37919 +
                                                          (8 -
                                                           shared_sizze_37919 %
                                                           8) % 8), NULL,
                                                  kernel_args_37916, NULL));
            if (pevents != NULL)
                CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
            if (ctx->debugging) {
                CUDA_SUCCEED_FATAL(cuCtxSynchronize());
                time_end_37918 = get_wall_time();
                fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                        "clusterPoints.segscan_31624", time_end_37918 -
                        time_start_37917);
            }
        }
        if (memblock_unref_device(ctx, &incprefixes_mem_36786,
                                  "incprefixes_mem_36786") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_36784,
                                  "aggregates_mem_36784") != 0)
            return 1;
        if (memblock_unref_device(ctx, &incprefixes_mem_36782,
                                  "incprefixes_mem_36782") != 0)
            return 1;
        if (memblock_unref_device(ctx, &aggregates_mem_36780,
                                  "aggregates_mem_36780") != 0)
            return 1;
        if (memblock_unref_device(ctx, &status_flags_mem_36778,
                                  "status_flags_mem_36778") != 0)
            return 1;
    }
    if (memblock_unref_device(ctx, &mem_32343, "mem_32343") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32347, "mem_32347") != 0)
        return 1;
    
    bool dim_match_30238 = sizze_30081 == defunc_2_reduce_res_30210;
    bool empty_or_match_cert_30239;
    
    if (!dim_match_30238) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Value of (core language) shape (",
                               defunc_2_reduce_res_30210,
                               ") cannot match shape of type `[", sizze_30081,
                               "]i64`.",
                               "-> #0  src/cluster.fut:198:20-67\n   #1  src/cluster.fut:190:1-200:50\n");
        if (memblock_unref_device(ctx, &mem_32349, "mem_32349") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32347, "mem_32347") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_36634,
                                  "defunc_1_map_res_subhistos_mem_36634") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32343, "mem_32343") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_36604,
                                  "group_res_arr_mem_36604") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32341, "mem_32341") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32338, "mem_32338") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32335,
                                  "clusterWith_res_mem_32335") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32333,
                                  "clusterWith_res_mem_32333") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32331,
                                  "clusterWith_res_mem_32331") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32297, "mem_32297") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32295, "mem_32295") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32292, "mem_32292") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32290, "mem_32290") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32288, "mem_32288") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32063, "mem_param_32063") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32058, "mem_param_32058") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_32053, "mem_param_32053") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                                  "clusterWith_res_mem_32285") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                                  "clusterWith_res_mem_32280") != 0)
            return 1;
        if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                                  "clusterWith_res_mem_32275") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                                  "group_res_arr_mem_34194") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                                  "group_res_arr_mem_33832") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31971, "mem_param_31971") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31966, "mem_param_31966") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                                  "defunc_0_f_res_mem_32005") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                                  "defunc_0_f_res_mem_32000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                                  "defunc_1_map_res_subhistos_mem_33190") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                                  "group_res_arr_mem_33160") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                                  "defunc_0_f_res_mem_31884") != 0)
            return 1;
        if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                                  "defunc_0_f_res_mem_31879") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
            return 1;
        return 1;
    }
    
    int64_t segmap_group_sizze_31634;
    
    segmap_group_sizze_31634 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31628;
    
    int64_t segmap_usable_groups_31635 = sdiv_up64(sizze_30081,
                                                   segmap_group_sizze_31634);
    int64_t bytes_32351 = (int64_t) 4 * sizze_30081;
    struct memblock_device mem_32352;
    
    mem_32352.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32352, bytes_32351, "mem_32352")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37933 = mem_32349.mem;
    CUdeviceptr kernel_arg_37934 = mem_32352.mem;
    
    if ((((((1 && segmap_usable_groups_31635 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_31634 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_31635;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37930[] = {&ctx->global_failure, &sizze_30081,
                                     &kernel_arg_37933, &kernel_arg_37934};
        int64_t time_start_37931 = 0, time_end_37932 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_31626");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31635);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31634);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37931 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_31626_runs,
                                      &ctx->clusterPointszisegmap_31626_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31626,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_31634, 1, 1, 0,
                                              NULL, kernel_args_37930, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37932 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_31626", time_end_37932 -
                    time_start_37931);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &mem_32349, "mem_32349") != 0)
        return 1;
    
    int64_t binop_x_32354 = (int64_t) 2 * sizze_30081;
    int64_t bytes_32353 = (int64_t) 4 * binop_x_32354;
    struct memblock_device mem_32355;
    
    mem_32355.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32355, bytes_32353, "mem_32355")) {
        err = 1;
        goto cleanup;
    }
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_32355.mem + (int64_t) 0,
                                        mem_32352.mem + (int64_t) 0,
                                        sizze_30081 * (int64_t) 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(mem_32355.mem + sizze_30081 *
                                        (int64_t) 4,
                                        clusterWith_res_mem_32331.mem +
                                        (int64_t) 0, sizze_30081 *
                                        (int64_t) 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32331,
                              "clusterWith_res_mem_32331") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32352, "mem_32352") != 0)
        return 1;
    
    int64_t conc_tmp_30247 = (int64_t) 1 + sizze_30080;
    int64_t segmap_group_sizze_31648;
    
    segmap_group_sizze_31648 =
        ctx->sizes.clusterPointszisegmap_group_sizze_31642;
    
    int64_t segmap_usable_groups_31649 = sdiv_up64(conc_tmp_30247,
                                                   segmap_group_sizze_31648);
    int64_t bytes_32357 = (int64_t) 4 * conc_tmp_30247;
    struct memblock_device mem_32358;
    
    mem_32358.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32358, bytes_32357, "mem_32358")) {
        err = 1;
        goto cleanup;
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "\n# SegMap");
    
    CUdeviceptr kernel_arg_37938 = clusterWith_res_mem_32333.mem;
    CUdeviceptr kernel_arg_37939 = mem_32358.mem;
    
    if ((((((1 && segmap_usable_groups_31649 != 0) && 1 != 0) && 1 != 0) &&
          segmap_group_sizze_31648 != 0) && 1 != 0) && 1 != 0) {
        int perm[3] = {0, 1, 2};
        
        if (1 >= 1 << 16) {
            perm[1] = perm[0];
            perm[0] = 1;
        }
        if (1 >= 1 << 16) {
            perm[2] = perm[0];
            perm[0] = 2;
        }
        
        size_t grid[3];
        
        grid[perm[0]] = segmap_usable_groups_31649;
        grid[perm[1]] = 1;
        grid[perm[2]] = 1;
        
        void *kernel_args_37935[] = {&ctx->global_failure, &sizze_30080,
                                     &sizze_30081, &conc_tmp_30247,
                                     &kernel_arg_37938, &kernel_arg_37939};
        int64_t time_start_37936 = 0, time_end_37937 = 0;
        
        if (ctx->debugging) {
            fprintf(ctx->log, "Launching %s with grid size (",
                    "clusterPoints.segmap_31640");
            fprintf(ctx->log, "%ld", (long) segmap_usable_groups_31649);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ") and block size (");
            fprintf(ctx->log, "%ld", (long) segmap_group_sizze_31648);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ", ");
            fprintf(ctx->log, "%ld", (long) 1);
            fprintf(ctx->log, ").\n");
            time_start_37936 = get_wall_time();
        }
        
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda,
                                      &ctx->clusterPointszisegmap_31640_runs,
                                      &ctx->clusterPointszisegmap_31640_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuLaunchKernel(ctx->clusterPointszisegmap_31640,
                                              grid[0], grid[1], grid[2],
                                              segmap_group_sizze_31648, 1, 1, 0,
                                              NULL, kernel_args_37935, NULL));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
        if (ctx->debugging) {
            CUDA_SUCCEED_FATAL(cuCtxSynchronize());
            time_end_37937 = get_wall_time();
            fprintf(ctx->log, "Kernel %s runtime: %ldus\n",
                    "clusterPoints.segmap_31640", time_end_37937 -
                    time_start_37936);
        }
    }
    if (ctx->debugging)
        fprintf(ctx->log, "%s\n", "");
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32333,
                              "clusterWith_res_mem_32333") != 0)
        return 1;
    
    struct memblock_device mem_32361;
    
    mem_32361.references = NULL;
    if (memblock_alloc_device(ctx, &mem_32361, bytes_32353, "mem_32361")) {
        err = 1;
        goto cleanup;
    }
    if (futrts_builtinzhgpu_map_transpose_i32(ctx, mem_32361, (int64_t) 0,
                                              mem_32355, (int64_t) 0,
                                              (int64_t) 1, sizze_30081,
                                              (int64_t) 2) != 0) {
        err = 1;
        goto cleanup;
    }
    if (memblock_unref_device(ctx, &mem_32355, "mem_32355") != 0)
        return 1;
    out_arrsizze_32469 = sizze_30081;
    out_arrsizze_32471 = conc_tmp_30247;
    if (memblock_set_device(ctx, &out_mem_32468, &mem_32361, "mem_32361") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_32470, &mem_32358, "mem_32358") != 0)
        return 1;
    (*out_mem_p_36960).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_36960, &out_mem_32468,
                            "out_mem_32468") != 0)
        return 1;
    *out_out_arrsizze_36961 = out_arrsizze_32469;
    (*out_mem_p_36962).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_36962, &out_mem_32470,
                            "out_mem_32470") != 0)
        return 1;
    *out_out_arrsizze_36963 = out_arrsizze_32471;
    if (memblock_unref_device(ctx, &mem_32361, "mem_32361") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32358, "mem_32358") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32355, "mem_32355") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32352, "mem_32352") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32349, "mem_32349") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32347, "mem_32347") != 0)
        return 1;
    if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_36634,
                              "defunc_1_map_res_subhistos_mem_36634") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32343, "mem_32343") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_36604,
                              "group_res_arr_mem_36604") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32341, "mem_32341") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32338, "mem_32338") != 0)
        return 1;
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32335,
                              "clusterWith_res_mem_32335") != 0)
        return 1;
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32333,
                              "clusterWith_res_mem_32333") != 0)
        return 1;
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32331,
                              "clusterWith_res_mem_32331") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32297, "mem_32297") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32295, "mem_32295") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32292, "mem_32292") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32290, "mem_32290") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32288, "mem_32288") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_param_32063, "mem_param_32063") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_param_32058, "mem_param_32058") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_param_32053, "mem_param_32053") != 0)
        return 1;
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32285,
                              "clusterWith_res_mem_32285") != 0)
        return 1;
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32280,
                              "clusterWith_res_mem_32280") != 0)
        return 1;
    if (memblock_unref_device(ctx, &clusterWith_res_mem_32275,
                              "clusterWith_res_mem_32275") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32270, "mem_32270") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32240, "mem_32240") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32110, "mem_32110") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32107, "mem_32107") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32105, "mem_32105") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32103, "mem_32103") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_34194,
                              "group_res_arr_mem_34194") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32048, "mem_32048") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32046, "mem_32046") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32043, "mem_32043") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32041, "mem_32041") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32038, "mem_32038") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32036, "mem_32036") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32034, "mem_32034") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32032, "mem_32032") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32028, "mem_32028") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32026, "mem_32026") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32023, "mem_32023") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32021, "mem_32021") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32018, "mem_32018") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32015, "mem_32015") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_33832,
                              "group_res_arr_mem_33832") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32012, "mem_32012") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32010, "mem_32010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_32008, "mem_32008") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_param_31971, "mem_param_31971") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_param_31966, "mem_param_31966") != 0)
        return 1;
    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32005,
                              "defunc_0_f_res_mem_32005") != 0)
        return 1;
    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_32000,
                              "defunc_0_f_res_mem_32000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31986, "mem_31986") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31984, "mem_31984") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31982, "mem_31982") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31980, "mem_31980") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31978, "mem_31978") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31961, "mem_31961") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31959, "mem_31959") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31957, "mem_31957") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31955, "mem_31955") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31952, "mem_31952") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31950, "mem_31950") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31947, "mem_31947") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31944, "mem_31944") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31942, "mem_31942") != 0)
        return 1;
    if (memblock_unref_device(ctx, &defunc_1_map_res_subhistos_mem_33190,
                              "defunc_1_map_res_subhistos_mem_33190") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31938, "mem_31938") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_33160,
                              "group_res_arr_mem_33160") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31936, "mem_31936") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31933, "mem_31933") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31931, "mem_31931") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31928, "mem_31928") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31924, "mem_31924") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31919, "mem_31919") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31914, "mem_31914") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31912, "mem_31912") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31910, "mem_31910") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31908, "mem_31908") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31904, "mem_31904") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31902, "mem_31902") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31899, "mem_31899") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31897, "mem_31897") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31894, "mem_31894") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31891, "mem_31891") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31889, "mem_31889") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31887, "mem_31887") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_param_31850, "mem_param_31850") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_param_31845, "mem_param_31845") != 0)
        return 1;
    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31884,
                              "defunc_0_f_res_mem_31884") != 0)
        return 1;
    if (memblock_unref_device(ctx, &defunc_0_f_res_mem_31879,
                              "defunc_0_f_res_mem_31879") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31865, "mem_31865") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31863, "mem_31863") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31861, "mem_31861") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31859, "mem_31859") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31857, "mem_31857") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31840, "mem_31840") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31837, "mem_31837") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31833, "mem_31833") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_31830, "mem_31830") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_32470, "out_mem_32470") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_32468, "out_mem_32468") != 0)
        return 1;
    
  cleanup:
    { }
    return err;
}
struct futhark_i32_2d {
    struct memblock_device mem;
    int64_t shape[2];
} ;
struct futhark_i32_2d *futhark_new_i32_2d(struct futhark_context *ctx, const
                                          int32_t *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_i32_2d *bad = NULL;
    struct futhark_i32_2d *arr =
                          (struct futhark_i32_2d *) malloc(sizeof(struct futhark_i32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4,
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_host_to_dev_runs,
                                      &ctx->copy_host_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(arr->mem.mem + 0, data + 0,
                                            (size_t) (dim0 * dim1) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_i32_2d *futhark_new_raw_i32_2d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_i32_2d *bad = NULL;
    struct futhark_i32_2d *arr =
                          (struct futhark_i32_2d *) malloc(sizeof(struct futhark_i32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4,
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(arr->mem.mem + 0, data + offset,
                                        (size_t) (dim0 * dim1) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i32_2d(struct futhark_context *ctx, struct futhark_i32_2d *arr)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i32_2d(struct futhark_context *ctx,
                          struct futhark_i32_2d *arr, int32_t *data)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_host_runs,
                                      &ctx->copy_dev_to_host_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(data + 0, arr->mem.mem + 0,
                                            (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return 0;
}
CUdeviceptr futhark_values_raw_i32_2d(struct futhark_context *ctx,
                                      struct futhark_i32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i32_2d(struct futhark_context *ctx,
                                    struct futhark_i32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_2d {
    struct memblock_device mem;
    int64_t shape[2];
} ;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4,
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_host_to_dev_runs,
                                      &ctx->copy_host_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(arr->mem.mem + 0, data + 0,
                                            (size_t) (dim0 * dim1) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4,
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(arr->mem.mem + 0, data + offset,
                                        (size_t) (dim0 * dim1) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_host_runs,
                                      &ctx->copy_dev_to_host_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(data + 0, arr->mem.mem + 0,
                                            (size_t) (arr->shape[0] *
                                                      arr->shape[1]) * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return 0;
}
CUdeviceptr futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                      struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_i32_1d {
    struct memblock_device mem;
    int64_t shape[1];
} ;
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx, const
                                          int32_t *data, int64_t dim0)
{
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr =
                          (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_host_to_dev_runs,
                                      &ctx->copy_host_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyHtoD(arr->mem.mem + 0, data + 0,
                                            (size_t) dim0 * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx, const
                                              CUdeviceptr data, int offset,
                                              int64_t dim0)
{
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr =
                          (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_dev_runs,
                                      &ctx->copy_dev_to_dev_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpy(arr->mem.mem + 0, data + offset,
                                        (size_t) dim0 * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i32_1d(struct futhark_context *ctx,
                          struct futhark_i32_1d *arr, int32_t *data)
{
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    {
        cudaEvent_t *pevents = NULL;
        
        if (ctx->profiling && !ctx->profiling_paused) {
            pevents = cuda_get_events(&ctx->cuda, &ctx->copy_dev_to_host_runs,
                                      &ctx->copy_dev_to_host_total_runtime);
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[0], 0));
        }
        CUDA_SUCCEED_OR_RETURN(cuMemcpyDtoH(data + 0, arr->mem.mem + 0,
                                            (size_t) arr->shape[0] * 4));
        if (pevents != NULL)
            CUDA_SUCCEED_FATAL(cudaEventRecord(pevents[1], 0));
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return 0;
}
CUdeviceptr futhark_values_raw_i32_1d(struct futhark_context *ctx,
                                      struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_i32_1d(struct futhark_context *ctx,
                                    struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
int futhark_entry_clusterPoints(struct futhark_context *ctx,
                                struct futhark_i32_2d **out0,
                                struct futhark_i32_1d **out1, const int32_t in0,
                                const float in1, const int32_t in2, const
                                struct futhark_i32_1d *in3, const
                                struct futhark_f32_2d *in4, const
                                struct futhark_i32_1d *in5)
{
    struct memblock_device batches_mem_31826;
    
    batches_mem_31826.references = NULL;
    
    struct memblock_device pos_mem_31827;
    
    pos_mem_31827.references = NULL;
    
    struct memblock_device labels_mem_31828;
    
    labels_mem_31828.references = NULL;
    
    int64_t n_28846;
    int32_t nHashBit_28847;
    float radius_28848;
    int32_t thres_28849;
    struct memblock_device out_mem_32468;
    
    out_mem_32468.references = NULL;
    
    int64_t out_arrsizze_32469;
    struct memblock_device out_mem_32470;
    
    out_mem_32470.references = NULL;
    
    int64_t out_arrsizze_32471;
    int ret = 0;
    
    lock_lock(&ctx->lock);
    CUDA_SUCCEED_FATAL(cuCtxPushCurrent(ctx->cuda.cu_ctx));
    nHashBit_28847 = in0;
    radius_28848 = in1;
    thres_28849 = in2;
    batches_mem_31826 = in3->mem;
    n_28846 = in3->shape[0];
    pos_mem_31827 = in4->mem;
    n_28846 = in4->shape[0];
    labels_mem_31828 = in5->mem;
    n_28846 = in5->shape[0];
    if (!(true && (true && (true && (n_28846 == in3->shape[0] && ((n_28846 ==
                                                                   in4->shape[0] &&
                                                                   3 ==
                                                                   in4->shape[1]) &&
                                                                  n_28846 ==
                                                                  in5->shape[0])))))) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    } else {
        ret = futrts_entry_clusterPoints(ctx, &out_mem_32468,
                                         &out_arrsizze_32469, &out_mem_32470,
                                         &out_arrsizze_32471, batches_mem_31826,
                                         pos_mem_31827, labels_mem_31828,
                                         n_28846, nHashBit_28847, radius_28848,
                                         thres_28849);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_i32_2d *) malloc(sizeof(struct futhark_i32_2d))) !=
                NULL);
            (*out0)->mem = out_mem_32468;
            (*out0)->shape[0] = out_arrsizze_32469;
            (*out0)->shape[1] = 2;
            assert((*out1 =
                    (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
                NULL);
            (*out1)->mem = out_mem_32470;
            (*out1)->shape[0] = out_arrsizze_32471;
        }
    }
    CUDA_SUCCEED_FATAL(cuCtxPopCurrent(&ctx->cuda.cu_ctx));
    lock_unlock(&ctx->lock);
    return ret;
}
